{
  "version": 3,
  "sources": ["../../monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js", "../../monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js", "../../monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js", "../../monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.js", "../../monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js", "../../monaco-editor/esm/vs/basic-languages/_.contribution.js", "../../monaco-editor/esm/vs/basic-languages/abap/abap.contribution.js", "../../monaco-editor/esm/vs/basic-languages/apex/apex.contribution.js", "../../monaco-editor/esm/vs/basic-languages/azcli/azcli.contribution.js", "../../monaco-editor/esm/vs/basic-languages/bat/bat.contribution.js", "../../monaco-editor/esm/vs/basic-languages/bicep/bicep.contribution.js", "../../monaco-editor/esm/vs/basic-languages/cameligo/cameligo.contribution.js", "../../monaco-editor/esm/vs/basic-languages/clojure/clojure.contribution.js", "../../monaco-editor/esm/vs/basic-languages/coffee/coffee.contribution.js", "../../monaco-editor/esm/vs/basic-languages/cpp/cpp.contribution.js", "../../monaco-editor/esm/vs/basic-languages/csharp/csharp.contribution.js", "../../monaco-editor/esm/vs/basic-languages/csp/csp.contribution.js", "../../monaco-editor/esm/vs/basic-languages/css/css.contribution.js", "../../monaco-editor/esm/vs/basic-languages/cypher/cypher.contribution.js", "../../monaco-editor/esm/vs/basic-languages/dart/dart.contribution.js", "../../monaco-editor/esm/vs/basic-languages/dockerfile/dockerfile.contribution.js", "../../monaco-editor/esm/vs/basic-languages/ecl/ecl.contribution.js", "../../monaco-editor/esm/vs/basic-languages/elixir/elixir.contribution.js", "../../monaco-editor/esm/vs/basic-languages/flow9/flow9.contribution.js", "../../monaco-editor/esm/vs/basic-languages/fsharp/fsharp.contribution.js", "../../monaco-editor/esm/vs/basic-languages/freemarker2/freemarker2.contribution.js", "../../monaco-editor/esm/vs/basic-languages/go/go.contribution.js", "../../monaco-editor/esm/vs/basic-languages/graphql/graphql.contribution.js", "../../monaco-editor/esm/vs/basic-languages/handlebars/handlebars.contribution.js", "../../monaco-editor/esm/vs/basic-languages/hcl/hcl.contribution.js", "../../monaco-editor/esm/vs/basic-languages/html/html.contribution.js", "../../monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js", "../../monaco-editor/esm/vs/basic-languages/java/java.contribution.js", "../../monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution.js", "../../monaco-editor/esm/vs/basic-languages/julia/julia.contribution.js", "../../monaco-editor/esm/vs/basic-languages/kotlin/kotlin.contribution.js", "../../monaco-editor/esm/vs/basic-languages/less/less.contribution.js", "../../monaco-editor/esm/vs/basic-languages/lexon/lexon.contribution.js", "../../monaco-editor/esm/vs/basic-languages/lua/lua.contribution.js", "../../monaco-editor/esm/vs/basic-languages/liquid/liquid.contribution.js", "../../monaco-editor/esm/vs/basic-languages/m3/m3.contribution.js", "../../monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js", "../../monaco-editor/esm/vs/basic-languages/mdx/mdx.contribution.js", "../../monaco-editor/esm/vs/basic-languages/mips/mips.contribution.js", "../../monaco-editor/esm/vs/basic-languages/msdax/msdax.contribution.js", "../../monaco-editor/esm/vs/basic-languages/mysql/mysql.contribution.js", "../../monaco-editor/esm/vs/basic-languages/objective-c/objective-c.contribution.js", "../../monaco-editor/esm/vs/basic-languages/pascal/pascal.contribution.js", "../../monaco-editor/esm/vs/basic-languages/pascaligo/pascaligo.contribution.js", "../../monaco-editor/esm/vs/basic-languages/perl/perl.contribution.js", "../../monaco-editor/esm/vs/basic-languages/pgsql/pgsql.contribution.js", "../../monaco-editor/esm/vs/basic-languages/php/php.contribution.js", "../../monaco-editor/esm/vs/basic-languages/pla/pla.contribution.js", "../../monaco-editor/esm/vs/basic-languages/postiats/postiats.contribution.js", "../../monaco-editor/esm/vs/basic-languages/powerquery/powerquery.contribution.js", "../../monaco-editor/esm/vs/basic-languages/powershell/powershell.contribution.js", "../../monaco-editor/esm/vs/basic-languages/protobuf/protobuf.contribution.js", "../../monaco-editor/esm/vs/basic-languages/pug/pug.contribution.js", "../../monaco-editor/esm/vs/basic-languages/python/python.contribution.js", "../../monaco-editor/esm/vs/basic-languages/qsharp/qsharp.contribution.js", "../../monaco-editor/esm/vs/basic-languages/r/r.contribution.js", "../../monaco-editor/esm/vs/basic-languages/razor/razor.contribution.js", "../../monaco-editor/esm/vs/basic-languages/redis/redis.contribution.js", "../../monaco-editor/esm/vs/basic-languages/redshift/redshift.contribution.js", "../../monaco-editor/esm/vs/basic-languages/restructuredtext/restructuredtext.contribution.js", "../../monaco-editor/esm/vs/basic-languages/ruby/ruby.contribution.js", "../../monaco-editor/esm/vs/basic-languages/rust/rust.contribution.js", "../../monaco-editor/esm/vs/basic-languages/sb/sb.contribution.js", "../../monaco-editor/esm/vs/basic-languages/scala/scala.contribution.js", "../../monaco-editor/esm/vs/basic-languages/scheme/scheme.contribution.js", "../../monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js", "../../monaco-editor/esm/vs/basic-languages/shell/shell.contribution.js", "../../monaco-editor/esm/vs/basic-languages/solidity/solidity.contribution.js", "../../monaco-editor/esm/vs/basic-languages/sophia/sophia.contribution.js", "../../monaco-editor/esm/vs/basic-languages/sparql/sparql.contribution.js", "../../monaco-editor/esm/vs/basic-languages/sql/sql.contribution.js", "../../monaco-editor/esm/vs/basic-languages/st/st.contribution.js", "../../monaco-editor/esm/vs/basic-languages/swift/swift.contribution.js", "../../monaco-editor/esm/vs/basic-languages/systemverilog/systemverilog.contribution.js", "../../monaco-editor/esm/vs/basic-languages/tcl/tcl.contribution.js", "../../monaco-editor/esm/vs/basic-languages/twig/twig.contribution.js", "../../monaco-editor/esm/vs/basic-languages/typescript/typescript.contribution.js", "../../monaco-editor/esm/vs/basic-languages/vb/vb.contribution.js", "../../monaco-editor/esm/vs/basic-languages/wgsl/wgsl.contribution.js", "../../monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js", "../../monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js", "../../monaco-editor/esm/vs/language/css/monaco.contribution.js", "../../monaco-editor/esm/vs/language/html/monaco.contribution.js", "../../monaco-editor/esm/vs/language/json/monaco.contribution.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditor.contribution.js", "../../monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js", "../../monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js", "../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js", "../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js", "../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js", "../../monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/common/types.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionController.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver.js", "../../monaco-editor/esm/vs/base/browser/ui/codicons/codiconStyles.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js", "../../monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js", "../../monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js", "../../monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js", "../../monaco-editor/esm/vs/platform/actionWidget/browser/actionWidget.js", "../../monaco-editor/esm/vs/platform/actionWidget/browser/actionList.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/defaultDocumentColorProvider.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js", "../../monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js", "../../monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js", "../../monaco-editor/esm/vs/editor/contrib/zoneWidget/browser/zoneWidget.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/contentHover.js", "../../monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hoverTypes.js", "../../monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/resizableContentWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/marginHover.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js", "../../monaco-editor/esm/vs/platform/severityIcon/browser/severityIcon.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsHintsWidget.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/commandIds.js", "../../monaco-editor/esm/vs/platform/actions/browser/toolbar.js", "../../monaco-editor/esm/vs/base/browser/ui/toolbar/toolbar.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerActions.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerWidget.js", "../../monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js", "../../monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js", "../../monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js", "../../monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js", "../../monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js", "../../monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js", "../../monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/copyPasteContribution.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/copyPasteController.js", "../../monaco-editor/esm/vs/base/common/dataTransfer.js", "../../monaco-editor/esm/vs/base/common/uuid.js", "../../monaco-editor/esm/vs/editor/browser/dnd.js", "../../monaco-editor/esm/vs/platform/dnd/browser/dnd.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/edit.js", "../../monaco-editor/esm/vs/editor/contrib/inlineProgress/browser/inlineProgress.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/postEditWidget.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/defaultProviders.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorContribution.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController.js", "../../monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js", "../../monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findController.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js", "../../monaco-editor/esm/vs/base/common/search.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findState.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js", "../../monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js", "../../monaco-editor/esm/vs/platform/history/browser/contextScopedHistoryWidget.js", "../../monaco-editor/esm/vs/platform/history/browser/historyWidgetKeybindingHint.js", "../../monaco-editor/esm/vs/editor/contrib/folding/browser/folding.js", "../../monaco-editor/esm/vs/editor/contrib/folding/browser/foldingModel.js", "../../monaco-editor/esm/vs/editor/contrib/folding/browser/foldingRanges.js", "../../monaco-editor/esm/vs/editor/contrib/folding/browser/hiddenRangeModel.js", "../../monaco-editor/esm/vs/editor/contrib/folding/browser/indentRangeProvider.js", "../../monaco-editor/esm/vs/editor/contrib/folding/browser/foldingDecorations.js", "../../monaco-editor/esm/vs/editor/contrib/folding/browser/syntaxRangeProvider.js", "../../monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js", "../../monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js", "../../monaco-editor/esm/vs/editor/editor.all.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletions.contribution.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/commands.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionContextKeys.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsController.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextWidget.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsSource.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/provideInlineCompletions.js", "../../monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/fixBrackets.js", "../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/singleTextEdit.js", "../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js", "../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js", "../../monaco-editor/esm/vs/base/common/labels.js", "../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetInlineCompletionProvider.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js", "../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js", "../../monaco-editor/esm/vs/editor/common/services/getIconClasses.js", "../../monaco-editor/esm/vs/platform/files/common/files.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/hoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js", "../../monaco-editor/esm/vs/editor/contrib/indentation/browser/indentUtils.js", "../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js", "../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsController.js", "../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js", "../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js", "../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js", "../../monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js", "../../monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js", "../../monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js", "../../monaco-editor/esm/vs/editor/contrib/links/browser/links.js", "../../monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js", "../../monaco-editor/esm/vs/editor/contrib/longLinesHelper/browser/longLinesHelper.js", "../../monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js", "../../monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/highlightDecorations.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js", "../../monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js", "../../monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js", "../../monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/documentSemanticTokens.js", "../../monaco-editor/esm/vs/editor/contrib/semanticTokens/common/getSemanticTokens.js", "../../monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js", "../../monaco-editor/esm/vs/editor/contrib/semanticTokens/common/semanticTokensConfig.js", "../../monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/viewportSemanticTokens.js", "../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js", "../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollContribution.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollActions.js", "../../monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollWidget.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollModelProvider.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollElement.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js", "../../monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js", "../../monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js", "../../monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js", "../../monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js", "../../monaco-editor/esm/vs/platform/opener/browser/link.js", "../../monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js", "../../monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/wordHighlighter.js", "../../monaco-editor/esm/vs/editor/contrib/wordOperations/browser/wordOperations.js", "../../monaco-editor/esm/vs/editor/contrib/wordPartOperations/browser/wordPartOperations.js", "../../monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js", "../../monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js", "../../monaco-editor/esm/vs/editor/edcore.main.js", "../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/helpQuickAccess.js", "../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js", "../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js", "../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js", "../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js", "../../monaco-editor/esm/vs/base/common/fuzzyScorer.js", "../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js", "../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js", "../../monaco-editor/esm/vs/base/common/errorMessage.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/commandsQuickAccess.js", "../../monaco-editor/esm/vs/base/common/tfIdf.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/pickerQuickAccess.js", "../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js", "../../monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js", "../../monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { equals } from '../../../../base/common/arrays.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nimport { LRUCache } from '../../../../base/common/map.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nexport class TreeElement {\r\n    remove() {\r\n        var _a;\r\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\r\n    }\r\n    static findId(candidate, container) {\r\n        // complex id-computation which contains the origin/extension,\r\n        // the parent path, and some dedupe logic when names collide\r\n        let candidateId;\r\n        if (typeof candidate === 'string') {\r\n            candidateId = `${container.id}/${candidate}`;\r\n        }\r\n        else {\r\n            candidateId = `${container.id}/${candidate.name}`;\r\n            if (container.children.get(candidateId) !== undefined) {\r\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\r\n            }\r\n        }\r\n        let id = candidateId;\r\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\r\n            id = `${candidateId}_${i}`;\r\n        }\r\n        return id;\r\n    }\r\n    static empty(element) {\r\n        return element.children.size === 0;\r\n    }\r\n}\r\nexport class OutlineElement extends TreeElement {\r\n    constructor(id, parent, symbol) {\r\n        super();\r\n        this.id = id;\r\n        this.parent = parent;\r\n        this.symbol = symbol;\r\n        this.children = new Map();\r\n    }\r\n}\r\nexport class OutlineGroup extends TreeElement {\r\n    constructor(id, parent, label, order) {\r\n        super();\r\n        this.id = id;\r\n        this.parent = parent;\r\n        this.label = label;\r\n        this.order = order;\r\n        this.children = new Map();\r\n    }\r\n}\r\nexport class OutlineModel extends TreeElement {\r\n    static create(registry, textModel, token) {\r\n        const cts = new CancellationTokenSource(token);\r\n        const result = new OutlineModel(textModel.uri);\r\n        const provider = registry.ordered(textModel);\r\n        const promises = provider.map((provider, index) => {\r\n            var _a;\r\n            const id = TreeElement.findId(`provider_${index}`, result);\r\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\r\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\r\n                for (const info of result || []) {\r\n                    OutlineModel._makeOutlineElement(info, group);\r\n                }\r\n                return group;\r\n            }, err => {\r\n                onUnexpectedExternalError(err);\r\n                return group;\r\n            }).then(group => {\r\n                if (!TreeElement.empty(group)) {\r\n                    result._groups.set(id, group);\r\n                }\r\n                else {\r\n                    group.remove();\r\n                }\r\n            });\r\n        });\r\n        const listener = registry.onDidChange(() => {\r\n            const newProvider = registry.ordered(textModel);\r\n            if (!equals(newProvider, provider)) {\r\n                cts.cancel();\r\n            }\r\n        });\r\n        return Promise.all(promises).then(() => {\r\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\r\n                return OutlineModel.create(registry, textModel, token);\r\n            }\r\n            else {\r\n                return result._compact();\r\n            }\r\n        }).finally(() => {\r\n            cts.dispose();\r\n            listener.dispose();\r\n            cts.dispose();\r\n        });\r\n    }\r\n    static _makeOutlineElement(info, container) {\r\n        const id = TreeElement.findId(info, container);\r\n        const res = new OutlineElement(id, container, info);\r\n        if (info.children) {\r\n            for (const childInfo of info.children) {\r\n                OutlineModel._makeOutlineElement(childInfo, res);\r\n            }\r\n        }\r\n        container.children.set(res.id, res);\r\n    }\r\n    constructor(uri) {\r\n        super();\r\n        this.uri = uri;\r\n        this.id = 'root';\r\n        this.parent = undefined;\r\n        this._groups = new Map();\r\n        this.children = new Map();\r\n        this.id = 'root';\r\n        this.parent = undefined;\r\n    }\r\n    _compact() {\r\n        let count = 0;\r\n        for (const [key, group] of this._groups) {\r\n            if (group.children.size === 0) { // empty\r\n                this._groups.delete(key);\r\n            }\r\n            else {\r\n                count += 1;\r\n            }\r\n        }\r\n        if (count !== 1) {\r\n            //\r\n            this.children = this._groups;\r\n        }\r\n        else {\r\n            // adopt all elements of the first group\r\n            const group = Iterable.first(this._groups.values());\r\n            for (const [, child] of group.children) {\r\n                child.parent = this;\r\n                this.children.set(child.id, child);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    getTopLevelSymbols() {\r\n        const roots = [];\r\n        for (const child of this.children.values()) {\r\n            if (child instanceof OutlineElement) {\r\n                roots.push(child.symbol);\r\n            }\r\n            else {\r\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\r\n            }\r\n        }\r\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\r\n    }\r\n    asListOfDocumentSymbols() {\r\n        const roots = this.getTopLevelSymbols();\r\n        const bucket = [];\r\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\r\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\r\n    }\r\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\r\n        for (const entry of entries) {\r\n            bucket.push({\r\n                kind: entry.kind,\r\n                tags: entry.tags,\r\n                name: entry.name,\r\n                detail: entry.detail,\r\n                containerName: entry.containerName || overrideContainerLabel,\r\n                range: entry.range,\r\n                selectionRange: entry.selectionRange,\r\n                children: undefined, // we flatten it...\r\n            });\r\n            // Recurse over children\r\n            if (entry.children) {\r\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport const IOutlineModelService = createDecorator('IOutlineModelService');\r\nlet OutlineModelService = class OutlineModelService {\r\n    constructor(_languageFeaturesService, debounces, modelService) {\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._disposables = new DisposableStore();\r\n        this._cache = new LRUCache(10, 0.7);\r\n        this._debounceInformation = debounces.for(_languageFeaturesService.documentSymbolProvider, 'DocumentSymbols', { min: 350 });\r\n        // don't cache outline models longer than their text model\r\n        this._disposables.add(modelService.onModelRemoved(textModel => {\r\n            this._cache.delete(textModel.id);\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n    }\r\n    getOrCreate(textModel, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const registry = this._languageFeaturesService.documentSymbolProvider;\r\n            const provider = registry.ordered(textModel);\r\n            let data = this._cache.get(textModel.id);\r\n            if (!data || data.versionId !== textModel.getVersionId() || !equals(data.provider, provider)) {\r\n                const source = new CancellationTokenSource();\r\n                data = {\r\n                    versionId: textModel.getVersionId(),\r\n                    provider,\r\n                    promiseCnt: 0,\r\n                    source,\r\n                    promise: OutlineModel.create(registry, textModel, source.token),\r\n                    model: undefined,\r\n                };\r\n                this._cache.set(textModel.id, data);\r\n                const now = Date.now();\r\n                data.promise.then(outlineModel => {\r\n                    data.model = outlineModel;\r\n                    this._debounceInformation.update(textModel, Date.now() - now);\r\n                }).catch(_err => {\r\n                    this._cache.delete(textModel.id);\r\n                });\r\n            }\r\n            if (data.model) {\r\n                // resolved -> return data\r\n                return data.model;\r\n            }\r\n            // increase usage counter\r\n            data.promiseCnt += 1;\r\n            const listener = token.onCancellationRequested(() => {\r\n                // last -> cancel provider request, remove cached promise\r\n                if (--data.promiseCnt === 0) {\r\n                    data.source.cancel();\r\n                    this._cache.delete(textModel.id);\r\n                }\r\n            });\r\n            try {\r\n                return yield data.promise;\r\n            }\r\n            finally {\r\n                listener.dispose();\r\n            }\r\n        });\r\n    }\r\n};\r\nOutlineModelService = __decorate([\r\n    __param(0, ILanguageFeaturesService),\r\n    __param(1, ILanguageFeatureDebounceService),\r\n    __param(2, IModelService)\r\n], OutlineModelService);\r\nexport { OutlineModelService };\r\nregisterSingleton(IOutlineModelService, OutlineModelService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { IOutlineModelService } from './outlineModel.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', function (accessor, ...args) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const [resource] = args;\r\n        assertType(URI.isUri(resource));\r\n        const outlineService = accessor.get(IOutlineModelService);\r\n        const modelService = accessor.get(ITextModelService);\r\n        const reference = yield modelService.createModelReference(resource);\r\n        try {\r\n            return (yield outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\r\n        }\r\n        finally {\r\n            reference.dispose();\r\n        }\r\n    });\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Selection } from '../../../common/core/selection.js';\r\nexport class InPlaceReplaceCommand {\r\n    constructor(editRange, originalSelection, text) {\r\n        this._editRange = editRange;\r\n        this._originalSelection = originalSelection;\r\n        this._text = text;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        builder.addTrackedEditOperation(this._editRange, this._text);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        const inverseEditOperations = helper.getInverseEditOperations();\r\n        const srcRange = inverseEditOperations[0].range;\r\n        if (!this._originalSelection.isEmpty()) {\r\n            // Preserve selection and extends to typed text\r\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\r\n        }\r\n        return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar InPlaceReplaceController_1;\r\nimport { createCancelablePromise, timeout } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { EditorState } from '../../editorState/browser/editorState.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\r\nimport './inPlaceReplace.css';\r\nlet InPlaceReplaceController = InPlaceReplaceController_1 = class InPlaceReplaceController {\r\n    static get(editor) {\r\n        return editor.getContribution(InPlaceReplaceController_1.ID);\r\n    }\r\n    constructor(editor, editorWorkerService) {\r\n        this.editor = editor;\r\n        this.editorWorkerService = editorWorkerService;\r\n        this.decorations = this.editor.createDecorationsCollection();\r\n    }\r\n    dispose() {\r\n    }\r\n    run(source, up) {\r\n        var _a;\r\n        // cancel any pending request\r\n        (_a = this.currentRequest) === null || _a === void 0 ? void 0 : _a.cancel();\r\n        const editorSelection = this.editor.getSelection();\r\n        const model = this.editor.getModel();\r\n        if (!model || !editorSelection) {\r\n            return undefined;\r\n        }\r\n        let selection = editorSelection;\r\n        if (selection.startLineNumber !== selection.endLineNumber) {\r\n            // Can't accept multiline selection\r\n            return undefined;\r\n        }\r\n        const state = new EditorState(this.editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\r\n        const modelURI = model.uri;\r\n        if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        this.currentRequest = createCancelablePromise(token => this.editorWorkerService.navigateValueSet(modelURI, selection, up));\r\n        return this.currentRequest.then(result => {\r\n            var _a;\r\n            if (!result || !result.range || !result.value) {\r\n                // No proper result\r\n                return;\r\n            }\r\n            if (!state.validate(this.editor)) {\r\n                // state has changed\r\n                return;\r\n            }\r\n            // Selection\r\n            const editRange = Range.lift(result.range);\r\n            let highlightRange = result.range;\r\n            const diff = result.value.length - (selection.endColumn - selection.startColumn);\r\n            // highlight\r\n            highlightRange = {\r\n                startLineNumber: highlightRange.startLineNumber,\r\n                startColumn: highlightRange.startColumn,\r\n                endLineNumber: highlightRange.endLineNumber,\r\n                endColumn: highlightRange.startColumn + result.value.length\r\n            };\r\n            if (diff > 1) {\r\n                selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\r\n            }\r\n            // Insert new text\r\n            const command = new InPlaceReplaceCommand(editRange, selection, result.value);\r\n            this.editor.pushUndoStop();\r\n            this.editor.executeCommand(source, command);\r\n            this.editor.pushUndoStop();\r\n            // add decoration\r\n            this.decorations.set([{\r\n                    range: highlightRange,\r\n                    options: InPlaceReplaceController_1.DECORATION\r\n                }]);\r\n            // remove decoration after delay\r\n            (_a = this.decorationRemover) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            this.decorationRemover = timeout(350);\r\n            this.decorationRemover.then(() => this.decorations.clear()).catch(onUnexpectedError);\r\n        }).catch(onUnexpectedError);\r\n    }\r\n};\r\nInPlaceReplaceController.ID = 'editor.contrib.inPlaceReplaceController';\r\nInPlaceReplaceController.DECORATION = ModelDecorationOptions.register({\r\n    description: 'in-place-replace',\r\n    className: 'valueSetReplacement'\r\n});\r\nInPlaceReplaceController = InPlaceReplaceController_1 = __decorate([\r\n    __param(1, IEditorWorkerService)\r\n], InPlaceReplaceController);\r\nclass InPlaceReplaceUp extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.inPlaceReplace.up',\r\n            label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\r\n            alias: 'Replace with Previous Value',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 87 /* KeyCode.Comma */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = InPlaceReplaceController.get(editor);\r\n        if (!controller) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        return controller.run(this.id, false);\r\n    }\r\n}\r\nclass InPlaceReplaceDown extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.inPlaceReplace.down',\r\n            label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\r\n            alias: 'Replace with Next Value',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = InPlaceReplaceController.get(editor);\r\n        if (!controller) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        return controller.run(this.id, true);\r\n    }\r\n}\r\nregisterEditorContribution(InPlaceReplaceController.ID, InPlaceReplaceController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(InPlaceReplaceUp);\r\nregisterEditorAction(InPlaceReplaceDown);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar InspectTokensController_1;\r\nimport './inspectTokens.css';\r\nimport { $, append, reset } from '../../../../base/browser/dom.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { TokenizationRegistry } from '../../../common/languages.js';\r\nimport { TokenMetadata } from '../../../common/encodedTokenAttributes.js';\r\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\r\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\r\nlet InspectTokensController = InspectTokensController_1 = class InspectTokensController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(InspectTokensController_1.ID);\r\n    }\r\n    constructor(editor, standaloneColorService, languageService) {\r\n        super();\r\n        this._editor = editor;\r\n        this._languageService = languageService;\r\n        this._widget = null;\r\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\r\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\r\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\r\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* KeyCode.Escape */ && this.stop()));\r\n    }\r\n    dispose() {\r\n        this.stop();\r\n        super.dispose();\r\n    }\r\n    launch() {\r\n        if (this._widget) {\r\n            return;\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\r\n    }\r\n    stop() {\r\n        if (this._widget) {\r\n            this._widget.dispose();\r\n            this._widget = null;\r\n        }\r\n    }\r\n};\r\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\r\nInspectTokensController = InspectTokensController_1 = __decorate([\r\n    __param(1, IStandaloneThemeService),\r\n    __param(2, ILanguageService)\r\n], InspectTokensController);\r\nclass InspectTokens extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.inspectTokens',\r\n            label: InspectTokensNLS.inspectTokensAction,\r\n            alias: 'Developer: Inspect Tokens',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = InspectTokensController.get(editor);\r\n        controller === null || controller === void 0 ? void 0 : controller.launch();\r\n    }\r\n}\r\nfunction renderTokenText(tokenText) {\r\n    let result = '';\r\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\r\n        const charCode = tokenText.charCodeAt(charIndex);\r\n        switch (charCode) {\r\n            case 9 /* CharCode.Tab */:\r\n                result += '\\u2192'; // &rarr;\r\n                break;\r\n            case 32 /* CharCode.Space */:\r\n                result += '\\u00B7'; // &middot;\r\n                break;\r\n            default:\r\n                result += String.fromCharCode(charCode);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\r\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\r\n    if (tokenizationSupport) {\r\n        return tokenizationSupport;\r\n    }\r\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\r\n    return {\r\n        getInitialState: () => NullState,\r\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\r\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\r\n    };\r\n}\r\nclass InspectTokensWidget extends Disposable {\r\n    constructor(editor, languageService) {\r\n        super();\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this._editor = editor;\r\n        this._languageService = languageService;\r\n        this._model = this._editor.getModel();\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.className = 'tokens-inspect-widget';\r\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\r\n        this._compute(this._editor.getPosition());\r\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\r\n        this._editor.addContentWidget(this);\r\n    }\r\n    dispose() {\r\n        this._editor.removeContentWidget(this);\r\n        super.dispose();\r\n    }\r\n    getId() {\r\n        return InspectTokensWidget._ID;\r\n    }\r\n    _compute(position) {\r\n        const data = this._getTokensAtLine(position.lineNumber);\r\n        let token1Index = 0;\r\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\r\n            const t = data.tokens1[i];\r\n            if (position.column - 1 >= t.offset) {\r\n                token1Index = i;\r\n                break;\r\n            }\r\n        }\r\n        let token2Index = 0;\r\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\r\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\r\n                token2Index = i;\r\n                break;\r\n            }\r\n        }\r\n        const lineContent = this._model.getLineContent(position.lineNumber);\r\n        let tokenText = '';\r\n        if (token1Index < data.tokens1.length) {\r\n            const tokenStartIndex = data.tokens1[token1Index].offset;\r\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\r\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\r\n        }\r\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\r\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\r\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\r\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\r\n        append(this._domNode, $('hr.tokens-inspect-separator'));\r\n        if (token1Index < data.tokens1.length) {\r\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\r\n        }\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n    _decodeMetadata(metadata) {\r\n        const colorMap = TokenizationRegistry.getColorMap();\r\n        const languageId = TokenMetadata.getLanguageId(metadata);\r\n        const tokenType = TokenMetadata.getTokenType(metadata);\r\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\r\n        const foreground = TokenMetadata.getForeground(metadata);\r\n        const background = TokenMetadata.getBackground(metadata);\r\n        return {\r\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\r\n            tokenType: tokenType,\r\n            fontStyle: fontStyle,\r\n            foreground: colorMap[foreground],\r\n            background: colorMap[background]\r\n        };\r\n    }\r\n    _tokenTypeToString(tokenType) {\r\n        switch (tokenType) {\r\n            case 0 /* StandardTokenType.Other */: return 'Other';\r\n            case 1 /* StandardTokenType.Comment */: return 'Comment';\r\n            case 2 /* StandardTokenType.String */: return 'String';\r\n            case 3 /* StandardTokenType.RegEx */: return 'RegEx';\r\n            default: return '??';\r\n        }\r\n    }\r\n    _fontStyleToString(fontStyle) {\r\n        let r = '';\r\n        if (fontStyle & 1 /* FontStyle.Italic */) {\r\n            r += 'italic ';\r\n        }\r\n        if (fontStyle & 2 /* FontStyle.Bold */) {\r\n            r += 'bold ';\r\n        }\r\n        if (fontStyle & 4 /* FontStyle.Underline */) {\r\n            r += 'underline ';\r\n        }\r\n        if (fontStyle & 8 /* FontStyle.Strikethrough */) {\r\n            r += 'strikethrough ';\r\n        }\r\n        if (r.length === 0) {\r\n            r = '---';\r\n        }\r\n        return r;\r\n    }\r\n    _getTokensAtLine(lineNumber) {\r\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\r\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\r\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\r\n        return {\r\n            startState: stateBeforeLine,\r\n            tokens1: tokenizationResult1.tokens,\r\n            tokens2: tokenizationResult2.tokens,\r\n            endState: tokenizationResult1.endState\r\n        };\r\n    }\r\n    _getStateBeforeLine(lineNumber) {\r\n        let state = this._tokenizationSupport.getInitialState();\r\n        for (let i = 1; i < lineNumber; i++) {\r\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\r\n            state = tokenizationResult.endState;\r\n        }\r\n        return state;\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            position: this._editor.getPosition(),\r\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\r\n        };\r\n    }\r\n}\r\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\r\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(InspectTokens);\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\nvar __defProp = Object.defineProperty;\r\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\nvar __getOwnPropNames = Object.getOwnPropertyNames;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __copyProps = (to, from, except, desc) => {\r\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\r\n    for (let key of __getOwnPropNames(from))\r\n      if (!__hasOwnProp.call(to, key) && key !== except)\r\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\r\n  }\r\n  return to;\r\n};\r\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\r\n\r\n// src/fillers/monaco-editor-core.ts\r\nvar monaco_editor_core_exports = {};\r\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\r\nimport * as monaco_editor_core_star from \"../editor/editor.api.js\";\r\n\r\n// src/basic-languages/_.contribution.ts\r\nvar languageDefinitions = {};\r\nvar lazyLanguageLoaders = {};\r\nvar LazyLanguageLoader = class {\r\n  static getOrCreate(languageId) {\r\n    if (!lazyLanguageLoaders[languageId]) {\r\n      lazyLanguageLoaders[languageId] = new LazyLanguageLoader(languageId);\r\n    }\r\n    return lazyLanguageLoaders[languageId];\r\n  }\r\n  _languageId;\r\n  _loadingTriggered;\r\n  _lazyLoadPromise;\r\n  _lazyLoadPromiseResolve;\r\n  _lazyLoadPromiseReject;\r\n  constructor(languageId) {\r\n    this._languageId = languageId;\r\n    this._loadingTriggered = false;\r\n    this._lazyLoadPromise = new Promise((resolve, reject) => {\r\n      this._lazyLoadPromiseResolve = resolve;\r\n      this._lazyLoadPromiseReject = reject;\r\n    });\r\n  }\r\n  load() {\r\n    if (!this._loadingTriggered) {\r\n      this._loadingTriggered = true;\r\n      languageDefinitions[this._languageId].loader().then((mod) => this._lazyLoadPromiseResolve(mod), (err) => this._lazyLoadPromiseReject(err));\r\n    }\r\n    return this._lazyLoadPromise;\r\n  }\r\n};\r\nasync function loadLanguage(languageId) {\r\n  await LazyLanguageLoader.getOrCreate(languageId).load();\r\n  const model = monaco_editor_core_exports.editor.createModel(\"\", languageId);\r\n  model.dispose();\r\n}\r\nfunction registerLanguage(def) {\r\n  const languageId = def.id;\r\n  languageDefinitions[languageId] = def;\r\n  monaco_editor_core_exports.languages.register(def);\r\n  const lazyLanguageLoader = LazyLanguageLoader.getOrCreate(languageId);\r\n  monaco_editor_core_exports.languages.registerTokensProviderFactory(languageId, {\r\n    create: async () => {\r\n      const mod = await lazyLanguageLoader.load();\r\n      return mod.language;\r\n    }\r\n  });\r\n  monaco_editor_core_exports.languages.onLanguageEncountered(languageId, async () => {\r\n    const mod = await lazyLanguageLoader.load();\r\n    monaco_editor_core_exports.languages.setLanguageConfiguration(languageId, mod.conf);\r\n  });\r\n}\r\nexport {\r\n  loadLanguage,\r\n  registerLanguage\r\n};\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/abap/abap.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"abap\",\r\n  extensions: [\".abap\"],\r\n  aliases: [\"abap\", \"ABAP\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/abap/abap\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./abap.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/apex/apex.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"apex\",\r\n  extensions: [\".cls\"],\r\n  aliases: [\"Apex\", \"apex\"],\r\n  mimetypes: [\"text/x-apex-source\", \"text/x-apex\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/apex/apex\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./apex.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/azcli/azcli.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"azcli\",\r\n  extensions: [\".azcli\"],\r\n  aliases: [\"Azure CLI\", \"azcli\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/azcli/azcli\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./azcli.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/bat/bat.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"bat\",\r\n  extensions: [\".bat\", \".cmd\"],\r\n  aliases: [\"Batch\", \"bat\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/bat/bat\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./bat.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/bicep/bicep.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"bicep\",\r\n  extensions: [\".bicep\"],\r\n  aliases: [\"Bicep\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/bicep/bicep\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./bicep.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/cameligo/cameligo.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"cameligo\",\r\n  extensions: [\".mligo\"],\r\n  aliases: [\"Cameligo\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/cameligo/cameligo\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./cameligo.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/clojure/clojure.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"clojure\",\r\n  extensions: [\".clj\", \".cljs\", \".cljc\", \".edn\"],\r\n  aliases: [\"clojure\", \"Clojure\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/clojure/clojure\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./clojure.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/coffee/coffee.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"coffeescript\",\r\n  extensions: [\".coffee\"],\r\n  aliases: [\"CoffeeScript\", \"coffeescript\", \"coffee\"],\r\n  mimetypes: [\"text/x-coffeescript\", \"text/coffeescript\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/coffee/coffee\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./coffee.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/cpp/cpp.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"c\",\r\n  extensions: [\".c\", \".h\"],\r\n  aliases: [\"C\", \"c\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./cpp.js\");\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"cpp\",\r\n  extensions: [\".cpp\", \".cc\", \".cxx\", \".hpp\", \".hh\", \".hxx\"],\r\n  aliases: [\"C++\", \"Cpp\", \"cpp\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./cpp.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/csharp/csharp.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"csharp\",\r\n  extensions: [\".cs\", \".csx\", \".cake\"],\r\n  aliases: [\"C#\", \"csharp\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/csharp/csharp\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./csharp.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/csp/csp.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"csp\",\r\n  extensions: [],\r\n  aliases: [\"CSP\", \"csp\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/csp/csp\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./csp.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/css/css.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"css\",\r\n  extensions: [\".css\"],\r\n  aliases: [\"CSS\", \"css\"],\r\n  mimetypes: [\"text/css\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/css/css\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./css.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/cypher/cypher.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"cypher\",\r\n  extensions: [\".cypher\", \".cyp\"],\r\n  aliases: [\"Cypher\", \"OpenCypher\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/cypher/cypher\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./cypher.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/dart/dart.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"dart\",\r\n  extensions: [\".dart\"],\r\n  aliases: [\"Dart\", \"dart\"],\r\n  mimetypes: [\"text/x-dart-source\", \"text/x-dart\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/dart/dart\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./dart.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/dockerfile/dockerfile.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"dockerfile\",\r\n  extensions: [\".dockerfile\"],\r\n  filenames: [\"Dockerfile\"],\r\n  aliases: [\"Dockerfile\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/dockerfile/dockerfile\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./dockerfile.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/ecl/ecl.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"ecl\",\r\n  extensions: [\".ecl\"],\r\n  aliases: [\"ECL\", \"Ecl\", \"ecl\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/ecl/ecl\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./ecl.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/elixir/elixir.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"elixir\",\r\n  extensions: [\".ex\", \".exs\"],\r\n  aliases: [\"Elixir\", \"elixir\", \"ex\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/elixir/elixir\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./elixir.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/flow9/flow9.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"flow9\",\r\n  extensions: [\".flow\"],\r\n  aliases: [\"Flow9\", \"Flow\", \"flow9\", \"flow\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/flow9/flow9\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./flow9.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/fsharp/fsharp.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"fsharp\",\r\n  extensions: [\".fs\", \".fsi\", \".ml\", \".mli\", \".fsx\", \".fsscript\"],\r\n  aliases: [\"F#\", \"FSharp\", \"fsharp\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/fsharp/fsharp\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./fsharp.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/freemarker2/freemarker2.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"freemarker2\",\r\n  extensions: [\".ftl\", \".ftlh\", \".ftlx\"],\r\n  aliases: [\"FreeMarker2\", \"Apache FreeMarker2\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\r\n      }).then((m) => m.TagAngleInterpolationDollar);\r\n    } else {\r\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"freemarker2.tag-angle.interpolation-dollar\",\r\n  aliases: [\"FreeMarker2 (Angle/Dollar)\", \"Apache FreeMarker2 (Angle/Dollar)\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\r\n      }).then((m) => m.TagAngleInterpolationDollar);\r\n    } else {\r\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationDollar);\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"freemarker2.tag-bracket.interpolation-dollar\",\r\n  aliases: [\"FreeMarker2 (Bracket/Dollar)\", \"Apache FreeMarker2 (Bracket/Dollar)\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\r\n      }).then((m) => m.TagBracketInterpolationDollar);\r\n    } else {\r\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationDollar);\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"freemarker2.tag-angle.interpolation-bracket\",\r\n  aliases: [\"FreeMarker2 (Angle/Bracket)\", \"Apache FreeMarker2 (Angle/Bracket)\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\r\n      }).then((m) => m.TagAngleInterpolationBracket);\r\n    } else {\r\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationBracket);\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"freemarker2.tag-bracket.interpolation-bracket\",\r\n  aliases: [\"FreeMarker2 (Bracket/Bracket)\", \"Apache FreeMarker2 (Bracket/Bracket)\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\r\n      }).then((m) => m.TagBracketInterpolationBracket);\r\n    } else {\r\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationBracket);\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"freemarker2.tag-auto.interpolation-dollar\",\r\n  aliases: [\"FreeMarker2 (Auto/Dollar)\", \"Apache FreeMarker2 (Auto/Dollar)\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\r\n      }).then((m) => m.TagAutoInterpolationDollar);\r\n    } else {\r\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"freemarker2.tag-auto.interpolation-bracket\",\r\n  aliases: [\"FreeMarker2 (Auto/Bracket)\", \"Apache FreeMarker2 (Auto/Bracket)\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\r\n      }).then((m) => m.TagAutoInterpolationBracket);\r\n    } else {\r\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationBracket);\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/go/go.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"go\",\r\n  extensions: [\".go\"],\r\n  aliases: [\"Go\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/go/go\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./go.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/graphql/graphql.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"graphql\",\r\n  extensions: [\".graphql\", \".gql\"],\r\n  aliases: [\"GraphQL\", \"graphql\", \"gql\"],\r\n  mimetypes: [\"application/graphql\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/graphql/graphql\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./graphql.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/handlebars/handlebars.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"handlebars\",\r\n  extensions: [\".handlebars\", \".hbs\"],\r\n  aliases: [\"Handlebars\", \"handlebars\", \"hbs\"],\r\n  mimetypes: [\"text/x-handlebars-template\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/handlebars/handlebars\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./handlebars.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/hcl/hcl.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"hcl\",\r\n  extensions: [\".tf\", \".tfvars\", \".hcl\"],\r\n  aliases: [\"Terraform\", \"tf\", \"HCL\", \"hcl\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/hcl/hcl\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./hcl.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/html/html.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"html\",\r\n  extensions: [\".html\", \".htm\", \".shtml\", \".xhtml\", \".mdoc\", \".jsp\", \".asp\", \".aspx\", \".jshtm\"],\r\n  aliases: [\"HTML\", \"htm\", \"html\", \"xhtml\"],\r\n  mimetypes: [\"text/html\", \"text/x-jshtm\", \"text/template\", \"text/ng-template\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/html/html\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./html.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/ini/ini.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"ini\",\r\n  extensions: [\".ini\", \".properties\", \".gitconfig\"],\r\n  filenames: [\"config\", \".gitattributes\", \".gitconfig\", \".editorconfig\"],\r\n  aliases: [\"Ini\", \"ini\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/ini/ini\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./ini.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/java/java.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"java\",\r\n  extensions: [\".java\", \".jav\"],\r\n  aliases: [\"Java\", \"java\"],\r\n  mimetypes: [\"text/x-java-source\", \"text/x-java\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/java/java\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./java.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/javascript/javascript.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"javascript\",\r\n  extensions: [\".js\", \".es6\", \".jsx\", \".mjs\", \".cjs\"],\r\n  firstLine: \"^#!.*\\\\bnode\",\r\n  filenames: [\"jakefile\"],\r\n  aliases: [\"JavaScript\", \"javascript\", \"js\"],\r\n  mimetypes: [\"text/javascript\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/javascript/javascript\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./javascript.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/julia/julia.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"julia\",\r\n  extensions: [\".jl\"],\r\n  aliases: [\"julia\", \"Julia\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/julia/julia\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./julia.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/kotlin/kotlin.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"kotlin\",\r\n  extensions: [\".kt\", \".kts\"],\r\n  aliases: [\"Kotlin\", \"kotlin\"],\r\n  mimetypes: [\"text/x-kotlin-source\", \"text/x-kotlin\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/kotlin/kotlin\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./kotlin.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/less/less.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"less\",\r\n  extensions: [\".less\"],\r\n  aliases: [\"Less\", \"less\"],\r\n  mimetypes: [\"text/x-less\", \"text/less\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/less/less\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./less.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/lexon/lexon.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"lexon\",\r\n  extensions: [\".lex\"],\r\n  aliases: [\"Lexon\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/lexon/lexon\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./lexon.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/lua/lua.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"lua\",\r\n  extensions: [\".lua\"],\r\n  aliases: [\"Lua\", \"lua\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/lua/lua\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./lua.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/liquid/liquid.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"liquid\",\r\n  extensions: [\".liquid\", \".html.liquid\"],\r\n  aliases: [\"Liquid\", \"liquid\"],\r\n  mimetypes: [\"application/liquid\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/liquid/liquid\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./liquid.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/m3/m3.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"m3\",\r\n  extensions: [\".m3\", \".i3\", \".mg\", \".ig\"],\r\n  aliases: [\"Modula-3\", \"Modula3\", \"modula3\", \"m3\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/m3/m3\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./m3.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/markdown/markdown.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"markdown\",\r\n  extensions: [\".md\", \".markdown\", \".mdown\", \".mkdn\", \".mkd\", \".mdwn\", \".mdtxt\", \".mdtext\"],\r\n  aliases: [\"Markdown\", \"markdown\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/markdown/markdown\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./markdown.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/mdx/mdx.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"mdx\",\r\n  extensions: [\".mdx\"],\r\n  aliases: [\"MDX\", \"mdx\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/mdx/mdx\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./mdx.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/mips/mips.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"mips\",\r\n  extensions: [\".s\"],\r\n  aliases: [\"MIPS\", \"MIPS-V\"],\r\n  mimetypes: [\"text/x-mips\", \"text/mips\", \"text/plaintext\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/mips/mips\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./mips.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/msdax/msdax.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"msdax\",\r\n  extensions: [\".dax\", \".msdax\"],\r\n  aliases: [\"DAX\", \"MSDAX\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/msdax/msdax\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./msdax.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/mysql/mysql.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"mysql\",\r\n  extensions: [],\r\n  aliases: [\"MySQL\", \"mysql\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/mysql/mysql\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./mysql.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/objective-c/objective-c.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"objective-c\",\r\n  extensions: [\".m\"],\r\n  aliases: [\"Objective-C\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/objective-c/objective-c\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./objective-c.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/pascal/pascal.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"pascal\",\r\n  extensions: [\".pas\", \".p\", \".pp\"],\r\n  aliases: [\"Pascal\", \"pas\"],\r\n  mimetypes: [\"text/x-pascal-source\", \"text/x-pascal\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/pascal/pascal\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./pascal.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/pascaligo/pascaligo.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"pascaligo\",\r\n  extensions: [\".ligo\"],\r\n  aliases: [\"Pascaligo\", \"ligo\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/pascaligo/pascaligo\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./pascaligo.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/perl/perl.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"perl\",\r\n  extensions: [\".pl\", \".pm\"],\r\n  aliases: [\"Perl\", \"pl\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/perl/perl\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./perl.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/pgsql/pgsql.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"pgsql\",\r\n  extensions: [],\r\n  aliases: [\"PostgreSQL\", \"postgres\", \"pg\", \"postgre\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/pgsql/pgsql\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./pgsql.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/php/php.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"php\",\r\n  extensions: [\".php\", \".php4\", \".php5\", \".phtml\", \".ctp\"],\r\n  aliases: [\"PHP\", \"php\"],\r\n  mimetypes: [\"application/x-php\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/php/php\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./php.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/pla/pla.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"pla\",\r\n  extensions: [\".pla\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/pla/pla\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./pla.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/postiats/postiats.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"postiats\",\r\n  extensions: [\".dats\", \".sats\", \".hats\"],\r\n  aliases: [\"ATS\", \"ATS/Postiats\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/postiats/postiats\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./postiats.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/powerquery/powerquery.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"powerquery\",\r\n  extensions: [\".pq\", \".pqm\"],\r\n  aliases: [\"PQ\", \"M\", \"Power Query\", \"Power Query M\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/powerquery/powerquery\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./powerquery.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/powershell/powershell.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"powershell\",\r\n  extensions: [\".ps1\", \".psm1\", \".psd1\"],\r\n  aliases: [\"PowerShell\", \"powershell\", \"ps\", \"ps1\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/powershell/powershell\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./powershell.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/protobuf/protobuf.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"proto\",\r\n  extensions: [\".proto\"],\r\n  aliases: [\"protobuf\", \"Protocol Buffers\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/protobuf/protobuf\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./protobuf.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/pug/pug.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"pug\",\r\n  extensions: [\".jade\", \".pug\"],\r\n  aliases: [\"Pug\", \"Jade\", \"jade\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/pug/pug\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./pug.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/python/python.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"python\",\r\n  extensions: [\".py\", \".rpy\", \".pyw\", \".cpy\", \".gyp\", \".gypi\"],\r\n  aliases: [\"Python\", \"py\"],\r\n  firstLine: \"^#!/.*\\\\bpython[0-9.-]*\\\\b\",\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/python/python\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./python.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/qsharp/qsharp.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"qsharp\",\r\n  extensions: [\".qs\"],\r\n  aliases: [\"Q#\", \"qsharp\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/qsharp/qsharp\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./qsharp.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/r/r.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"r\",\r\n  extensions: [\".r\", \".rhistory\", \".rmd\", \".rprofile\", \".rt\"],\r\n  aliases: [\"R\", \"r\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/r/r\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./r.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/razor/razor.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"razor\",\r\n  extensions: [\".cshtml\"],\r\n  aliases: [\"Razor\", \"razor\"],\r\n  mimetypes: [\"text/x-cshtml\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/razor/razor\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./razor.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/redis/redis.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"redis\",\r\n  extensions: [\".redis\"],\r\n  aliases: [\"redis\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/redis/redis\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./redis.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/redshift/redshift.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"redshift\",\r\n  extensions: [],\r\n  aliases: [\"Redshift\", \"redshift\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/redshift/redshift\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./redshift.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/restructuredtext/restructuredtext.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"restructuredtext\",\r\n  extensions: [\".rst\"],\r\n  aliases: [\"reStructuredText\", \"restructuredtext\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/restructuredtext/restructuredtext\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./restructuredtext.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/ruby/ruby.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"ruby\",\r\n  extensions: [\".rb\", \".rbx\", \".rjs\", \".gemspec\", \".pp\"],\r\n  filenames: [\"rakefile\", \"Gemfile\"],\r\n  aliases: [\"Ruby\", \"rb\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/ruby/ruby\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./ruby.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/rust/rust.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"rust\",\r\n  extensions: [\".rs\", \".rlib\"],\r\n  aliases: [\"Rust\", \"rust\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/rust/rust\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./rust.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/sb/sb.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"sb\",\r\n  extensions: [\".sb\"],\r\n  aliases: [\"Small Basic\", \"sb\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/sb/sb\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./sb.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/scala/scala.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"scala\",\r\n  extensions: [\".scala\", \".sc\", \".sbt\"],\r\n  aliases: [\"Scala\", \"scala\", \"SBT\", \"Sbt\", \"sbt\", \"Dotty\", \"dotty\"],\r\n  mimetypes: [\"text/x-scala-source\", \"text/x-scala\", \"text/x-sbt\", \"text/x-dotty\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/scala/scala\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./scala.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/scheme/scheme.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"scheme\",\r\n  extensions: [\".scm\", \".ss\", \".sch\", \".rkt\"],\r\n  aliases: [\"scheme\", \"Scheme\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/scheme/scheme\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./scheme.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/scss/scss.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"scss\",\r\n  extensions: [\".scss\"],\r\n  aliases: [\"Sass\", \"sass\", \"scss\"],\r\n  mimetypes: [\"text/x-scss\", \"text/scss\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/scss/scss\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./scss.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/shell/shell.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"shell\",\r\n  extensions: [\".sh\", \".bash\"],\r\n  aliases: [\"Shell\", \"sh\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/shell/shell\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./shell.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/solidity/solidity.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"sol\",\r\n  extensions: [\".sol\"],\r\n  aliases: [\"sol\", \"solidity\", \"Solidity\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/solidity/solidity\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./solidity.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/sophia/sophia.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"aes\",\r\n  extensions: [\".aes\"],\r\n  aliases: [\"aes\", \"sophia\", \"Sophia\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/sophia/sophia\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./sophia.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/sparql/sparql.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"sparql\",\r\n  extensions: [\".rq\"],\r\n  aliases: [\"sparql\", \"SPARQL\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/sparql/sparql\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./sparql.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/sql/sql.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"sql\",\r\n  extensions: [\".sql\"],\r\n  aliases: [\"SQL\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/sql/sql\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./sql.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/st/st.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"st\",\r\n  extensions: [\".st\", \".iecst\", \".iecplc\", \".lc3lib\", \".TcPOU\", \".TcDUT\", \".TcGVL\", \".TcIO\"],\r\n  aliases: [\"StructuredText\", \"scl\", \"stl\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/st/st\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./st.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/swift/swift.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"swift\",\r\n  aliases: [\"Swift\", \"swift\"],\r\n  extensions: [\".swift\"],\r\n  mimetypes: [\"text/swift\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/swift/swift\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./swift.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/systemverilog/systemverilog.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"systemverilog\",\r\n  extensions: [\".sv\", \".svh\"],\r\n  aliases: [\"SV\", \"sv\", \"SystemVerilog\", \"systemverilog\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./systemverilog.js\");\r\n    }\r\n  }\r\n});\r\nregisterLanguage({\r\n  id: \"verilog\",\r\n  extensions: [\".v\", \".vh\"],\r\n  aliases: [\"V\", \"v\", \"Verilog\", \"verilog\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./systemverilog.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/tcl/tcl.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"tcl\",\r\n  extensions: [\".tcl\"],\r\n  aliases: [\"tcl\", \"Tcl\", \"tcltk\", \"TclTk\", \"tcl/tk\", \"Tcl/Tk\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/tcl/tcl\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./tcl.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/twig/twig.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"twig\",\r\n  extensions: [\".twig\"],\r\n  aliases: [\"Twig\", \"twig\"],\r\n  mimetypes: [\"text/x-twig\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/twig/twig\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./twig.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/typescript/typescript.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"typescript\",\r\n  extensions: [\".ts\", \".tsx\", \".cts\", \".mts\"],\r\n  aliases: [\"TypeScript\", \"ts\", \"typescript\"],\r\n  mimetypes: [\"text/typescript\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/typescript/typescript\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./typescript.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/vb/vb.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"vb\",\r\n  extensions: [\".vb\"],\r\n  aliases: [\"Visual Basic\", \"vb\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/vb/vb\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./vb.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/wgsl/wgsl.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"wgsl\",\r\n  extensions: [\".wgsl\"],\r\n  aliases: [\"WebGPU Shading Language\", \"WGSL\", \"wgsl\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/wgsl/wgsl\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./wgsl.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/xml/xml.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"xml\",\r\n  extensions: [\r\n    \".xml\",\r\n    \".xsd\",\r\n    \".dtd\",\r\n    \".ascx\",\r\n    \".csproj\",\r\n    \".config\",\r\n    \".props\",\r\n    \".targets\",\r\n    \".wxi\",\r\n    \".wxl\",\r\n    \".wxs\",\r\n    \".xaml\",\r\n    \".svg\",\r\n    \".svgz\",\r\n    \".opf\",\r\n    \".xslt\",\r\n    \".xsl\"\r\n  ],\r\n  firstLine: \"(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)\",\r\n  aliases: [\"XML\", \"xml\"],\r\n  mimetypes: [\"text/xml\", \"application/xml\", \"application/xaml+xml\", \"application/xml-dtd\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/xml/xml\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./xml.js\");\r\n    }\r\n  }\r\n});\r\n", "/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\n// src/basic-languages/yaml/yaml.contribution.ts\r\nimport { registerLanguage } from \"../_.contribution.js\";\r\nregisterLanguage({\r\n  id: \"yaml\",\r\n  extensions: [\".yaml\", \".yml\"],\r\n  aliases: [\"YAML\", \"yaml\", \"YML\", \"yml\"],\r\n  mimetypes: [\"application/x-yaml\", \"text/x-yaml\"],\r\n  loader: () => {\r\n    if (false) {\r\n      return new Promise((resolve, reject) => {\r\n        __require([\"vs/basic-languages/yaml/yaml\"], resolve, reject);\r\n      });\r\n    } else {\r\n      return import(\"./yaml.js\");\r\n    }\r\n  }\r\n});\r\n", "import '../../editor/editor.api.js';\r\n/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\nvar __defProp = Object.defineProperty;\r\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\nvar __getOwnPropNames = Object.getOwnPropertyNames;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __copyProps = (to, from, except, desc) => {\r\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\r\n    for (let key of __getOwnPropNames(from))\r\n      if (!__hasOwnProp.call(to, key) && key !== except)\r\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\r\n  }\r\n  return to;\r\n};\r\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\r\n\r\n// src/fillers/monaco-editor-core.ts\r\nvar monaco_editor_core_exports = {};\r\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\r\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\r\n\r\n// src/language/css/monaco.contribution.ts\r\nvar LanguageServiceDefaultsImpl = class {\r\n  _onDidChange = new monaco_editor_core_exports.Emitter();\r\n  _options;\r\n  _modeConfiguration;\r\n  _languageId;\r\n  constructor(languageId, options, modeConfiguration) {\r\n    this._languageId = languageId;\r\n    this.setOptions(options);\r\n    this.setModeConfiguration(modeConfiguration);\r\n  }\r\n  get onDidChange() {\r\n    return this._onDidChange.event;\r\n  }\r\n  get languageId() {\r\n    return this._languageId;\r\n  }\r\n  get modeConfiguration() {\r\n    return this._modeConfiguration;\r\n  }\r\n  get diagnosticsOptions() {\r\n    return this.options;\r\n  }\r\n  get options() {\r\n    return this._options;\r\n  }\r\n  setOptions(options) {\r\n    this._options = options || /* @__PURE__ */ Object.create(null);\r\n    this._onDidChange.fire(this);\r\n  }\r\n  setDiagnosticsOptions(options) {\r\n    this.setOptions(options);\r\n  }\r\n  setModeConfiguration(modeConfiguration) {\r\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\r\n    this._onDidChange.fire(this);\r\n  }\r\n};\r\nvar optionsDefault = {\r\n  validate: true,\r\n  lint: {\r\n    compatibleVendorPrefixes: \"ignore\",\r\n    vendorPrefix: \"warning\",\r\n    duplicateProperties: \"warning\",\r\n    emptyRules: \"warning\",\r\n    importStatement: \"ignore\",\r\n    boxModel: \"ignore\",\r\n    universalSelector: \"ignore\",\r\n    zeroUnits: \"ignore\",\r\n    fontFaceProperties: \"warning\",\r\n    hexColorLength: \"error\",\r\n    argumentsInColorFunction: \"error\",\r\n    unknownProperties: \"warning\",\r\n    ieHack: \"ignore\",\r\n    unknownVendorSpecificProperties: \"ignore\",\r\n    propertyIgnoredDueToDisplay: \"warning\",\r\n    important: \"ignore\",\r\n    float: \"ignore\",\r\n    idSelector: \"ignore\"\r\n  },\r\n  data: { useDefaultDataProvider: true },\r\n  format: {\r\n    newlineBetweenSelectors: true,\r\n    newlineBetweenRules: true,\r\n    spaceAroundSelectorSeparator: false,\r\n    braceStyle: \"collapse\",\r\n    maxPreserveNewLines: void 0,\r\n    preserveNewLines: true\r\n  }\r\n};\r\nvar modeConfigurationDefault = {\r\n  completionItems: true,\r\n  hovers: true,\r\n  documentSymbols: true,\r\n  definitions: true,\r\n  references: true,\r\n  documentHighlights: true,\r\n  rename: true,\r\n  colors: true,\r\n  foldingRanges: true,\r\n  diagnostics: true,\r\n  selectionRanges: true,\r\n  documentFormattingEdits: true,\r\n  documentRangeFormattingEdits: true\r\n};\r\nvar cssDefaults = new LanguageServiceDefaultsImpl(\"css\", optionsDefault, modeConfigurationDefault);\r\nvar scssDefaults = new LanguageServiceDefaultsImpl(\"scss\", optionsDefault, modeConfigurationDefault);\r\nvar lessDefaults = new LanguageServiceDefaultsImpl(\"less\", optionsDefault, modeConfigurationDefault);\r\nmonaco_editor_core_exports.languages.css = { cssDefaults, lessDefaults, scssDefaults };\r\nfunction getMode() {\r\n  if (false) {\r\n    return new Promise((resolve, reject) => {\r\n      __require([\"vs/language/css/cssMode\"], resolve, reject);\r\n    });\r\n  } else {\r\n    return import(\"./cssMode.js\");\r\n  }\r\n}\r\nmonaco_editor_core_exports.languages.onLanguage(\"less\", () => {\r\n  getMode().then((mode) => mode.setupMode(lessDefaults));\r\n});\r\nmonaco_editor_core_exports.languages.onLanguage(\"scss\", () => {\r\n  getMode().then((mode) => mode.setupMode(scssDefaults));\r\n});\r\nmonaco_editor_core_exports.languages.onLanguage(\"css\", () => {\r\n  getMode().then((mode) => mode.setupMode(cssDefaults));\r\n});\r\nexport {\r\n  cssDefaults,\r\n  lessDefaults,\r\n  scssDefaults\r\n};\r\n", "import '../../editor/editor.api.js';\r\n/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\nvar __defProp = Object.defineProperty;\r\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\nvar __getOwnPropNames = Object.getOwnPropertyNames;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __copyProps = (to, from, except, desc) => {\r\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\r\n    for (let key of __getOwnPropNames(from))\r\n      if (!__hasOwnProp.call(to, key) && key !== except)\r\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\r\n  }\r\n  return to;\r\n};\r\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\r\n\r\n// src/fillers/monaco-editor-core.ts\r\nvar monaco_editor_core_exports = {};\r\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\r\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\r\n\r\n// src/language/html/monaco.contribution.ts\r\nvar LanguageServiceDefaultsImpl = class {\r\n  _onDidChange = new monaco_editor_core_exports.Emitter();\r\n  _options;\r\n  _modeConfiguration;\r\n  _languageId;\r\n  constructor(languageId, options, modeConfiguration) {\r\n    this._languageId = languageId;\r\n    this.setOptions(options);\r\n    this.setModeConfiguration(modeConfiguration);\r\n  }\r\n  get onDidChange() {\r\n    return this._onDidChange.event;\r\n  }\r\n  get languageId() {\r\n    return this._languageId;\r\n  }\r\n  get options() {\r\n    return this._options;\r\n  }\r\n  get modeConfiguration() {\r\n    return this._modeConfiguration;\r\n  }\r\n  setOptions(options) {\r\n    this._options = options || /* @__PURE__ */ Object.create(null);\r\n    this._onDidChange.fire(this);\r\n  }\r\n  setModeConfiguration(modeConfiguration) {\r\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\r\n    this._onDidChange.fire(this);\r\n  }\r\n};\r\nvar formatDefaults = {\r\n  tabSize: 4,\r\n  insertSpaces: false,\r\n  wrapLineLength: 120,\r\n  unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\r\n  contentUnformatted: \"pre\",\r\n  indentInnerHtml: false,\r\n  preserveNewLines: true,\r\n  maxPreserveNewLines: void 0,\r\n  indentHandlebars: false,\r\n  endWithNewline: false,\r\n  extraLiners: \"head, body, /html\",\r\n  wrapAttributes: \"auto\"\r\n};\r\nvar optionsDefault = {\r\n  format: formatDefaults,\r\n  suggest: {},\r\n  data: { useDefaultDataProvider: true }\r\n};\r\nfunction getConfigurationDefault(languageId) {\r\n  return {\r\n    completionItems: true,\r\n    hovers: true,\r\n    documentSymbols: true,\r\n    links: true,\r\n    documentHighlights: true,\r\n    rename: true,\r\n    colors: true,\r\n    foldingRanges: true,\r\n    selectionRanges: true,\r\n    diagnostics: languageId === htmlLanguageId,\r\n    documentFormattingEdits: languageId === htmlLanguageId,\r\n    documentRangeFormattingEdits: languageId === htmlLanguageId\r\n  };\r\n}\r\nvar htmlLanguageId = \"html\";\r\nvar handlebarsLanguageId = \"handlebars\";\r\nvar razorLanguageId = \"razor\";\r\nvar htmlLanguageService = registerHTMLLanguageService(htmlLanguageId, optionsDefault, getConfigurationDefault(htmlLanguageId));\r\nvar htmlDefaults = htmlLanguageService.defaults;\r\nvar handlebarLanguageService = registerHTMLLanguageService(handlebarsLanguageId, optionsDefault, getConfigurationDefault(handlebarsLanguageId));\r\nvar handlebarDefaults = handlebarLanguageService.defaults;\r\nvar razorLanguageService = registerHTMLLanguageService(razorLanguageId, optionsDefault, getConfigurationDefault(razorLanguageId));\r\nvar razorDefaults = razorLanguageService.defaults;\r\nmonaco_editor_core_exports.languages.html = {\r\n  htmlDefaults,\r\n  razorDefaults,\r\n  handlebarDefaults,\r\n  htmlLanguageService,\r\n  handlebarLanguageService,\r\n  razorLanguageService,\r\n  registerHTMLLanguageService\r\n};\r\nfunction getMode() {\r\n  if (false) {\r\n    return new Promise((resolve, reject) => {\r\n      __require([\"vs/language/html/htmlMode\"], resolve, reject);\r\n    });\r\n  } else {\r\n    return import(\"./htmlMode.js\");\r\n  }\r\n}\r\nfunction registerHTMLLanguageService(languageId, options = optionsDefault, modeConfiguration = getConfigurationDefault(languageId)) {\r\n  const defaults = new LanguageServiceDefaultsImpl(languageId, options, modeConfiguration);\r\n  let mode;\r\n  const onLanguageListener = monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\r\n    mode = (await getMode()).setupMode(defaults);\r\n  });\r\n  return {\r\n    defaults,\r\n    dispose() {\r\n      onLanguageListener.dispose();\r\n      mode?.dispose();\r\n      mode = void 0;\r\n    }\r\n  };\r\n}\r\nexport {\r\n  handlebarDefaults,\r\n  handlebarLanguageService,\r\n  htmlDefaults,\r\n  htmlLanguageService,\r\n  razorDefaults,\r\n  razorLanguageService,\r\n  registerHTMLLanguageService\r\n};\r\n", "import '../../editor/editor.api.js';\r\n/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\nvar __defProp = Object.defineProperty;\r\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\nvar __getOwnPropNames = Object.getOwnPropertyNames;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __copyProps = (to, from, except, desc) => {\r\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\r\n    for (let key of __getOwnPropNames(from))\r\n      if (!__hasOwnProp.call(to, key) && key !== except)\r\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\r\n  }\r\n  return to;\r\n};\r\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\r\n\r\n// src/fillers/monaco-editor-core.ts\r\nvar monaco_editor_core_exports = {};\r\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\r\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\r\n\r\n// src/language/json/monaco.contribution.ts\r\nvar LanguageServiceDefaultsImpl = class {\r\n  _onDidChange = new monaco_editor_core_exports.Emitter();\r\n  _diagnosticsOptions;\r\n  _modeConfiguration;\r\n  _languageId;\r\n  constructor(languageId, diagnosticsOptions, modeConfiguration) {\r\n    this._languageId = languageId;\r\n    this.setDiagnosticsOptions(diagnosticsOptions);\r\n    this.setModeConfiguration(modeConfiguration);\r\n  }\r\n  get onDidChange() {\r\n    return this._onDidChange.event;\r\n  }\r\n  get languageId() {\r\n    return this._languageId;\r\n  }\r\n  get modeConfiguration() {\r\n    return this._modeConfiguration;\r\n  }\r\n  get diagnosticsOptions() {\r\n    return this._diagnosticsOptions;\r\n  }\r\n  setDiagnosticsOptions(options) {\r\n    this._diagnosticsOptions = options || /* @__PURE__ */ Object.create(null);\r\n    this._onDidChange.fire(this);\r\n  }\r\n  setModeConfiguration(modeConfiguration) {\r\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\r\n    this._onDidChange.fire(this);\r\n  }\r\n};\r\nvar diagnosticDefault = {\r\n  validate: true,\r\n  allowComments: true,\r\n  schemas: [],\r\n  enableSchemaRequest: false,\r\n  schemaRequest: \"warning\",\r\n  schemaValidation: \"warning\",\r\n  comments: \"error\",\r\n  trailingCommas: \"error\"\r\n};\r\nvar modeConfigurationDefault = {\r\n  documentFormattingEdits: true,\r\n  documentRangeFormattingEdits: true,\r\n  completionItems: true,\r\n  hovers: true,\r\n  documentSymbols: true,\r\n  tokens: true,\r\n  colors: true,\r\n  foldingRanges: true,\r\n  diagnostics: true,\r\n  selectionRanges: true\r\n};\r\nvar jsonDefaults = new LanguageServiceDefaultsImpl(\"json\", diagnosticDefault, modeConfigurationDefault);\r\nmonaco_editor_core_exports.languages.json = { jsonDefaults };\r\nfunction getMode() {\r\n  if (false) {\r\n    return new Promise((resolve, reject) => {\r\n      __require([\"vs/language/json/jsonMode\"], resolve, reject);\r\n    });\r\n  } else {\r\n    return import(\"./jsonMode.js\");\r\n  }\r\n}\r\nmonaco_editor_core_exports.languages.register({\r\n  id: \"json\",\r\n  extensions: [\".json\", \".bowerrc\", \".jshintrc\", \".jscsrc\", \".eslintrc\", \".babelrc\", \".har\"],\r\n  aliases: [\"JSON\", \"json\"],\r\n  mimetypes: [\"application/json\"]\r\n});\r\nmonaco_editor_core_exports.languages.onLanguage(\"json\", () => {\r\n  getMode().then((mode) => mode.setupMode(jsonDefaults));\r\n});\r\nexport {\r\n  jsonDefaults\r\n};\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { getActiveElement } from '../../../../base/browser/dom.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { EditorAction2 } from '../../editorExtensions.js';\r\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\r\nimport { DiffEditorWidget } from './diffEditorWidget.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyEqualsExpr, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nexport class ToggleCollapseUnchangedRegions extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'diffEditor.toggleCollapseUnchangedRegions',\r\n            title: { value: localize('toggleCollapseUnchangedRegions', \"Toggle Collapse Unchanged Regions\"), original: 'Toggle Collapse Unchanged Regions' },\r\n            icon: Codicon.map,\r\n            toggled: ContextKeyExpr.has('config.diffEditor.hideUnchangedRegions.enabled'),\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            menu: {\r\n                when: ContextKeyExpr.has('isInDiffEditor'),\r\n                id: MenuId.EditorTitle,\r\n                order: 22,\r\n                group: 'navigation',\r\n            },\r\n        });\r\n    }\r\n    run(accessor, ...args) {\r\n        const configurationService = accessor.get(IConfigurationService);\r\n        const newValue = !configurationService.getValue('diffEditor.hideUnchangedRegions.enabled');\r\n        configurationService.updateValue('diffEditor.hideUnchangedRegions.enabled', newValue);\r\n    }\r\n}\r\nregisterAction2(ToggleCollapseUnchangedRegions);\r\nexport class ToggleShowMovedCodeBlocks extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'diffEditor.toggleShowMovedCodeBlocks',\r\n            title: { value: localize('toggleShowMovedCodeBlocks', \"Toggle Show Moved Code Blocks\"), original: 'Toggle Show Moved Code Blocks' },\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n        });\r\n    }\r\n    run(accessor, ...args) {\r\n        const configurationService = accessor.get(IConfigurationService);\r\n        const newValue = !configurationService.getValue('diffEditor.experimental.showMoves');\r\n        configurationService.updateValue('diffEditor.experimental.showMoves', newValue);\r\n    }\r\n}\r\nregisterAction2(ToggleShowMovedCodeBlocks);\r\nexport class ToggleUseInlineViewWhenSpaceIsLimited extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'diffEditor.toggleUseInlineViewWhenSpaceIsLimited',\r\n            title: { value: localize('toggleUseInlineViewWhenSpaceIsLimited', \"Toggle Use Inline View When Space Is Limited\"), original: 'Toggle Use Inline View When Space Is Limited' },\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n        });\r\n    }\r\n    run(accessor, ...args) {\r\n        const configurationService = accessor.get(IConfigurationService);\r\n        const newValue = !configurationService.getValue('diffEditor.useInlineViewWhenSpaceIsLimited');\r\n        configurationService.updateValue('diffEditor.useInlineViewWhenSpaceIsLimited', newValue);\r\n    }\r\n}\r\nregisterAction2(ToggleUseInlineViewWhenSpaceIsLimited);\r\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\r\n    command: {\r\n        id: new ToggleUseInlineViewWhenSpaceIsLimited().desc.id,\r\n        title: localize('useInlineViewWhenSpaceIsLimited', \"Use Inline View When Space Is Limited\"),\r\n        toggled: ContextKeyExpr.has('config.diffEditor.useInlineViewWhenSpaceIsLimited'),\r\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n    },\r\n    order: 11,\r\n    group: '1_diff',\r\n    when: ContextKeyExpr.and(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, ContextKeyExpr.has('isInDiffEditor')),\r\n});\r\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\r\n    command: {\r\n        id: new ToggleShowMovedCodeBlocks().desc.id,\r\n        title: localize('showMoves', \"Show Moved Code Blocks\"),\r\n        icon: Codicon.move,\r\n        toggled: ContextKeyEqualsExpr.create('config.diffEditor.experimental.showMoves', true),\r\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n    },\r\n    order: 10,\r\n    group: '1_diff',\r\n    when: ContextKeyExpr.has('isInDiffEditor'),\r\n});\r\nconst diffEditorCategory = {\r\n    value: localize('diffEditor', 'Diff Editor'),\r\n    original: 'Diff Editor',\r\n};\r\nexport class SwitchSide extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'diffEditor.switchSide',\r\n            title: { value: localize('switchSide', \"Switch Side\"), original: 'Switch Side' },\r\n            icon: Codicon.arrowSwap,\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            f1: true,\r\n            category: diffEditorCategory,\r\n        });\r\n    }\r\n    runEditorCommand(accessor, editor, arg) {\r\n        const diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor instanceof DiffEditorWidget) {\r\n            if (arg && arg.dryRun) {\r\n                return { destinationSelection: diffEditor.mapToOtherSide().destinationSelection };\r\n            }\r\n            else {\r\n                diffEditor.switchSide();\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nregisterAction2(SwitchSide);\r\nexport class ExitCompareMove extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'diffEditor.exitCompareMove',\r\n            title: { value: localize('exitCompareMove', \"Exit Compare Move\"), original: 'Exit Compare Move' },\r\n            icon: Codicon.close,\r\n            precondition: EditorContextKeys.comparingMovedCode,\r\n            f1: false,\r\n            category: diffEditorCategory,\r\n            keybinding: {\r\n                weight: 10000,\r\n                primary: 9 /* KeyCode.Escape */,\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(accessor, editor, ...args) {\r\n        const diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor instanceof DiffEditorWidget) {\r\n            diffEditor.exitCompareMove();\r\n        }\r\n    }\r\n}\r\nregisterAction2(ExitCompareMove);\r\nexport class CollapseAllUnchangedRegions extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'diffEditor.collapseAllUnchangedRegions',\r\n            title: { value: localize('collapseAllUnchangedRegions', \"Collapse All Unchanged Regions\"), original: 'Collapse All Unchanged Regions' },\r\n            icon: Codicon.fold,\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            f1: true,\r\n            category: diffEditorCategory,\r\n        });\r\n    }\r\n    runEditorCommand(accessor, editor, ...args) {\r\n        const diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor instanceof DiffEditorWidget) {\r\n            diffEditor.collapseAllUnchangedRegions();\r\n        }\r\n    }\r\n}\r\nregisterAction2(CollapseAllUnchangedRegions);\r\nexport class ShowAllUnchangedRegions extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'diffEditor.showAllUnchangedRegions',\r\n            title: { value: localize('showAllUnchangedRegions', \"Show All Unchanged Regions\"), original: 'Show All Unchanged Regions' },\r\n            icon: Codicon.unfold,\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            f1: true,\r\n            category: diffEditorCategory,\r\n        });\r\n    }\r\n    runEditorCommand(accessor, editor, ...args) {\r\n        const diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor instanceof DiffEditorWidget) {\r\n            diffEditor.showAllUnchangedRegions();\r\n        }\r\n    }\r\n}\r\nregisterAction2(ShowAllUnchangedRegions);\r\nconst accessibleDiffViewerCategory = {\r\n    value: localize('accessibleDiffViewer', 'Accessible Diff Viewer'),\r\n    original: 'Accessible Diff Viewer',\r\n};\r\nexport class AccessibleDiffViewerNext extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: AccessibleDiffViewerNext.id,\r\n            title: { value: localize('editor.action.accessibleDiffViewer.next', \"Go to Next Difference\"), original: 'Go to Next Difference' },\r\n            category: accessibleDiffViewerCategory,\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            keybinding: {\r\n                primary: 65 /* KeyCode.F7 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            f1: true,\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const diffEditor = findFocusedDiffEditor(accessor);\r\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerNext();\r\n    }\r\n}\r\nAccessibleDiffViewerNext.id = 'editor.action.accessibleDiffViewer.next';\r\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\r\n    command: {\r\n        id: AccessibleDiffViewerNext.id,\r\n        title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\r\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n    },\r\n    order: 10,\r\n    group: '2_diff',\r\n    when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor')),\r\n});\r\nexport class AccessibleDiffViewerPrev extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: AccessibleDiffViewerPrev.id,\r\n            title: { value: localize('editor.action.accessibleDiffViewer.prev', \"Go to Previous Difference\"), original: 'Go to Previous Difference' },\r\n            category: accessibleDiffViewerCategory,\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            keybinding: {\r\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            f1: true,\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const diffEditor = findFocusedDiffEditor(accessor);\r\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerPrev();\r\n    }\r\n}\r\nAccessibleDiffViewerPrev.id = 'editor.action.accessibleDiffViewer.prev';\r\nexport function findFocusedDiffEditor(accessor) {\r\n    var _a;\r\n    const codeEditorService = accessor.get(ICodeEditorService);\r\n    const diffEditors = codeEditorService.listDiffEditors();\r\n    const activeCodeEditor = (_a = codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : codeEditorService.getActiveCodeEditor();\r\n    if (!activeCodeEditor) {\r\n        return null;\r\n    }\r\n    for (let i = 0, len = diffEditors.length; i < len; i++) {\r\n        const diffEditor = diffEditors[i];\r\n        if (diffEditor.getModifiedEditor().getId() === activeCodeEditor.getId() || diffEditor.getOriginalEditor().getId() === activeCodeEditor.getId()) {\r\n            return diffEditor;\r\n        }\r\n    }\r\n    const activeElement = getActiveElement();\r\n    if (activeElement) {\r\n        for (const d of diffEditors) {\r\n            const container = d.getContainerDomNode();\r\n            if (isElementOrParentOf(container, activeElement)) {\r\n                return d;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction isElementOrParentOf(elementOrParent, element) {\r\n    let e = element;\r\n    while (e) {\r\n        if (e === elementOrParent) {\r\n            return true;\r\n        }\r\n        e = e.parentElement;\r\n    }\r\n    return false;\r\n}\r\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\r\nregisterAction2(AccessibleDiffViewerNext);\r\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\r\nregisterAction2(AccessibleDiffViewerPrev);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar SelectionAnchorController_1;\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport './anchorSelect.css';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\r\nlet SelectionAnchorController = SelectionAnchorController_1 = class SelectionAnchorController {\r\n    static get(editor) {\r\n        return editor.getContribution(SelectionAnchorController_1.ID);\r\n    }\r\n    constructor(editor, contextKeyService) {\r\n        this.editor = editor;\r\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\r\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\r\n    }\r\n    setSelectionAnchor() {\r\n        if (this.editor.hasModel()) {\r\n            const position = this.editor.getPosition();\r\n            this.editor.changeDecorations((accessor) => {\r\n                if (this.decorationId) {\r\n                    accessor.removeDecoration(this.decorationId);\r\n                }\r\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\r\n                    description: 'selection-anchor',\r\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\r\n                    className: 'selection-anchor'\r\n                });\r\n            });\r\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\r\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\r\n        }\r\n    }\r\n    goToSelectionAnchor() {\r\n        if (this.editor.hasModel() && this.decorationId) {\r\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\r\n            if (anchorPosition) {\r\n                this.editor.setPosition(anchorPosition.getStartPosition());\r\n            }\r\n        }\r\n    }\r\n    selectFromAnchorToCursor() {\r\n        if (this.editor.hasModel() && this.decorationId) {\r\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\r\n            if (start) {\r\n                const end = this.editor.getPosition();\r\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\r\n                this.cancelSelectionAnchor();\r\n            }\r\n        }\r\n    }\r\n    cancelSelectionAnchor() {\r\n        if (this.decorationId) {\r\n            const decorationId = this.decorationId;\r\n            this.editor.changeDecorations((accessor) => {\r\n                accessor.removeDecoration(decorationId);\r\n                this.decorationId = undefined;\r\n            });\r\n            this.selectionAnchorSetContextKey.set(false);\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancelSelectionAnchor();\r\n        this.modelChangeListener.dispose();\r\n    }\r\n};\r\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\r\nSelectionAnchorController = SelectionAnchorController_1 = __decorate([\r\n    __param(1, IContextKeyService)\r\n], SelectionAnchorController);\r\nclass SetSelectionAnchor extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.setSelectionAnchor',\r\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\r\n            alias: 'Set Selection Anchor',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\r\n        });\r\n    }\r\n}\r\nclass GoToSelectionAnchor extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.goToSelectionAnchor',\r\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\r\n            alias: 'Go to Selection Anchor',\r\n            precondition: SelectionAnchorSet,\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\r\n        });\r\n    }\r\n}\r\nclass SelectFromAnchorToCursor extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.selectFromAnchorToCursor',\r\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\r\n            alias: 'Select from Anchor to Cursor',\r\n            precondition: SelectionAnchorSet,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\r\n        });\r\n    }\r\n}\r\nclass CancelSelectionAnchor extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.cancelSelectionAnchor',\r\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\r\n            alias: 'Cancel Selection Anchor',\r\n            precondition: SelectionAnchorSet,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 9 /* KeyCode.Escape */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\r\n        });\r\n    }\r\n}\r\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(SetSelectionAnchor);\r\nregisterEditorAction(GoToSelectionAnchor);\r\nregisterEditorAction(SelectFromAnchorToCursor);\r\nregisterEditorAction(CancelSelectionAnchor);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport './bracketMatching.css';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { OverviewRulerLane } from '../../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\r\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\r\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\r\nclass JumpToBracketAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.jumpToBracket',\r\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\r\n            alias: 'Go to Bracket',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 93 /* KeyCode.Backslash */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\r\n    }\r\n}\r\nclass SelectToBracketAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.selectToBracket',\r\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\r\n            alias: 'Select to Bracket',\r\n            precondition: undefined,\r\n            description: {\r\n                description: `Select to Bracket`,\r\n                args: [{\r\n                        name: 'args',\r\n                        schema: {\r\n                            type: 'object',\r\n                            properties: {\r\n                                'selectBrackets': {\r\n                                    type: 'boolean',\r\n                                    default: true\r\n                                }\r\n                            },\r\n                        }\r\n                    }]\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        var _a;\r\n        let selectBrackets = true;\r\n        if (args && args.selectBrackets === false) {\r\n            selectBrackets = false;\r\n        }\r\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\r\n    }\r\n}\r\nclass RemoveBracketsAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.removeBrackets',\r\n            label: nls.localize('smartSelect.removeBrackets', \"Remove Brackets\"),\r\n            alias: 'Remove Brackets',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.removeBrackets(this.id);\r\n    }\r\n}\r\nclass BracketsData {\r\n    constructor(position, brackets, options) {\r\n        this.position = position;\r\n        this.brackets = brackets;\r\n        this.options = options;\r\n    }\r\n}\r\nexport class BracketMatchingController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(BracketMatchingController.ID);\r\n    }\r\n    constructor(editor) {\r\n        super();\r\n        this._editor = editor;\r\n        this._lastBracketsData = [];\r\n        this._lastVersionId = 0;\r\n        this._decorations = this._editor.createDecorationsCollection();\r\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\r\n        this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\r\n        this._updateBracketsSoon.schedule();\r\n        this._register(editor.onDidChangeCursorPosition((e) => {\r\n            if (this._matchBrackets === 'never') {\r\n                // Early exit if nothing needs to be done!\r\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n                return;\r\n            }\r\n            this._updateBracketsSoon.schedule();\r\n        }));\r\n        this._register(editor.onDidChangeModelContent((e) => {\r\n            this._updateBracketsSoon.schedule();\r\n        }));\r\n        this._register(editor.onDidChangeModel((e) => {\r\n            this._lastBracketsData = [];\r\n            this._updateBracketsSoon.schedule();\r\n        }));\r\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\r\n            this._lastBracketsData = [];\r\n            this._updateBracketsSoon.schedule();\r\n        }));\r\n        this._register(editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(71 /* EditorOption.matchBrackets */)) {\r\n                this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\r\n                this._decorations.clear();\r\n                this._lastBracketsData = [];\r\n                this._lastVersionId = 0;\r\n                this._updateBracketsSoon.schedule();\r\n            }\r\n        }));\r\n        this._register(editor.onDidBlurEditorWidget(() => {\r\n            this._updateBracketsSoon.schedule();\r\n        }));\r\n        this._register(editor.onDidFocusEditorWidget(() => {\r\n            this._updateBracketsSoon.schedule();\r\n        }));\r\n    }\r\n    jumpToBracket() {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const newSelections = this._editor.getSelections().map(selection => {\r\n            const position = selection.getStartPosition();\r\n            // find matching brackets if position is on a bracket\r\n            const brackets = model.bracketPairs.matchBracket(position);\r\n            let newCursorPosition = null;\r\n            if (brackets) {\r\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\r\n                    newCursorPosition = brackets[1].getStartPosition();\r\n                }\r\n                else if (brackets[1].containsPosition(position)) {\r\n                    newCursorPosition = brackets[0].getStartPosition();\r\n                }\r\n            }\r\n            else {\r\n                // find the enclosing brackets if the position isn't on a matching bracket\r\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\r\n                if (enclosingBrackets) {\r\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\r\n                }\r\n                else {\r\n                    // no enclosing brackets, try the very first next bracket\r\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\r\n                    if (nextBracket && nextBracket.range) {\r\n                        newCursorPosition = nextBracket.range.getStartPosition();\r\n                    }\r\n                }\r\n            }\r\n            if (newCursorPosition) {\r\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\r\n            }\r\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        });\r\n        this._editor.setSelections(newSelections);\r\n        this._editor.revealRange(newSelections[0]);\r\n    }\r\n    selectToBracket(selectBrackets) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const newSelections = [];\r\n        this._editor.getSelections().forEach(selection => {\r\n            const position = selection.getStartPosition();\r\n            let brackets = model.bracketPairs.matchBracket(position);\r\n            if (!brackets) {\r\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\r\n                if (!brackets) {\r\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\r\n                    if (nextBracket && nextBracket.range) {\r\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\r\n                    }\r\n                }\r\n            }\r\n            let selectFrom = null;\r\n            let selectTo = null;\r\n            if (brackets) {\r\n                brackets.sort(Range.compareRangesUsingStarts);\r\n                const [open, close] = brackets;\r\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\r\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\r\n                if (close.containsPosition(position)) {\r\n                    // select backwards if the cursor was on the closing bracket\r\n                    const tmp = selectFrom;\r\n                    selectFrom = selectTo;\r\n                    selectTo = tmp;\r\n                }\r\n            }\r\n            if (selectFrom && selectTo) {\r\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\r\n            }\r\n        });\r\n        if (newSelections.length > 0) {\r\n            this._editor.setSelections(newSelections);\r\n            this._editor.revealRange(newSelections[0]);\r\n        }\r\n    }\r\n    removeBrackets(editSource) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        this._editor.getSelections().forEach((selection) => {\r\n            const position = selection.getPosition();\r\n            let brackets = model.bracketPairs.matchBracket(position);\r\n            if (!brackets) {\r\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\r\n            }\r\n            if (brackets) {\r\n                this._editor.pushUndoStop();\r\n                this._editor.executeEdits(editSource, [\r\n                    { range: brackets[0], text: '' },\r\n                    { range: brackets[1], text: '' }\r\n                ]);\r\n                this._editor.pushUndoStop();\r\n            }\r\n        });\r\n    }\r\n    _updateBrackets() {\r\n        if (this._matchBrackets === 'never') {\r\n            return;\r\n        }\r\n        this._recomputeBrackets();\r\n        const newDecorations = [];\r\n        let newDecorationsLen = 0;\r\n        for (const bracketData of this._lastBracketsData) {\r\n            const brackets = bracketData.brackets;\r\n            if (brackets) {\r\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\r\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\r\n            }\r\n        }\r\n        this._decorations.set(newDecorations);\r\n    }\r\n    _recomputeBrackets() {\r\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\r\n            // no model or no focus => no brackets!\r\n            this._lastBracketsData = [];\r\n            this._lastVersionId = 0;\r\n            return;\r\n        }\r\n        const selections = this._editor.getSelections();\r\n        if (selections.length > 100) {\r\n            // no bracket matching for high numbers of selections\r\n            this._lastBracketsData = [];\r\n            this._lastVersionId = 0;\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const versionId = model.getVersionId();\r\n        let previousData = [];\r\n        if (this._lastVersionId === versionId) {\r\n            // use the previous data only if the model is at the same version id\r\n            previousData = this._lastBracketsData;\r\n        }\r\n        const positions = [];\r\n        let positionsLen = 0;\r\n        for (let i = 0, len = selections.length; i < len; i++) {\r\n            const selection = selections[i];\r\n            if (selection.isEmpty()) {\r\n                // will bracket match a cursor only if the selection is collapsed\r\n                positions[positionsLen++] = selection.getStartPosition();\r\n            }\r\n        }\r\n        // sort positions for `previousData` cache hits\r\n        if (positions.length > 1) {\r\n            positions.sort(Position.compare);\r\n        }\r\n        const newData = [];\r\n        let newDataLen = 0;\r\n        let previousIndex = 0;\r\n        const previousLen = previousData.length;\r\n        for (let i = 0, len = positions.length; i < len; i++) {\r\n            const position = positions[i];\r\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\r\n                previousIndex++;\r\n            }\r\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\r\n                newData[newDataLen++] = previousData[previousIndex];\r\n            }\r\n            else {\r\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\r\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\r\n                if (!brackets && this._matchBrackets === 'always') {\r\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\r\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\r\n                }\r\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\r\n            }\r\n        }\r\n        this._lastBracketsData = newData;\r\n        this._lastVersionId = versionId;\r\n    }\r\n}\r\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\r\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\r\n    description: 'bracket-match-overview',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'bracket-match',\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\r\n        position: OverviewRulerLane.Center\r\n    }\r\n});\r\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\r\n    description: 'bracket-match-no-overview',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'bracket-match'\r\n});\r\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nregisterEditorAction(SelectToBracketAction);\r\nregisterEditorAction(JumpToBracketAction);\r\nregisterEditorAction(RemoveBracketsAction);\r\n// Go to menu\r\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\r\n    group: '5_infile_nav',\r\n    command: {\r\n        id: 'editor.action.jumpToBracket',\r\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\r\n    },\r\n    order: 2\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { MoveCaretCommand } from './moveCaretCommand.js';\r\nimport * as nls from '../../../../nls.js';\r\nclass MoveCaretAction extends EditorAction {\r\n    constructor(left, opts) {\r\n        super(opts);\r\n        this.left = left;\r\n    }\r\n    run(accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const commands = [];\r\n        const selections = editor.getSelections();\r\n        for (const selection of selections) {\r\n            commands.push(new MoveCaretCommand(selection, this.left));\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nclass MoveCaretLeftAction extends MoveCaretAction {\r\n    constructor() {\r\n        super(true, {\r\n            id: 'editor.action.moveCarretLeftAction',\r\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\r\n            alias: 'Move Selected Text Left',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nclass MoveCaretRightAction extends MoveCaretAction {\r\n    constructor() {\r\n        super(false, {\r\n            id: 'editor.action.moveCarretRightAction',\r\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\r\n            alias: 'Move Selected Text Right',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nregisterEditorAction(MoveCaretLeftAction);\r\nregisterEditorAction(MoveCaretRightAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nexport class MoveCaretCommand {\r\n    constructor(selection, isMovingLeft) {\r\n        this._selection = selection;\r\n        this._isMovingLeft = isMovingLeft;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\r\n            return;\r\n        }\r\n        const lineNumber = this._selection.startLineNumber;\r\n        const startColumn = this._selection.startColumn;\r\n        const endColumn = this._selection.endColumn;\r\n        if (this._isMovingLeft && startColumn === 1) {\r\n            return;\r\n        }\r\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\r\n            return;\r\n        }\r\n        if (this._isMovingLeft) {\r\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\r\n            const charBefore = model.getValueInRange(rangeBefore);\r\n            builder.addEditOperation(rangeBefore, null);\r\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\r\n        }\r\n        else {\r\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\r\n            const charAfter = model.getValueInRange(rangeAfter);\r\n            builder.addEditOperation(rangeAfter, null);\r\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\r\n        }\r\n    }\r\n    computeCursorState(model, helper) {\r\n        if (this._isMovingLeft) {\r\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\r\n        }\r\n        else {\r\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\r\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport * as nls from '../../../../nls.js';\r\nclass TransposeLettersAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transposeLetters',\r\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\r\n            alias: 'Transpose Letters',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: {\r\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = editor.getModel();\r\n        const commands = [];\r\n        const selections = editor.getSelections();\r\n        for (const selection of selections) {\r\n            if (!selection.isEmpty()) {\r\n                continue;\r\n            }\r\n            const lineNumber = selection.startLineNumber;\r\n            const column = selection.startColumn;\r\n            const lastColumn = model.getLineMaxColumn(lineNumber);\r\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\r\n                // at beginning of file, nothing to do\r\n                continue;\r\n            }\r\n            // handle special case: when at end of line, transpose left two chars\r\n            // otherwise, transpose left and right chars\r\n            const endPosition = (column === lastColumn) ?\r\n                selection.getPosition() :\r\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\r\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\r\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\r\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\r\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\r\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\r\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\r\n        }\r\n        if (commands.length > 0) {\r\n            editor.pushUndoStop();\r\n            editor.executeCommands(this.id, commands);\r\n            editor.pushUndoStop();\r\n        }\r\n    }\r\n}\r\nregisterEditorAction(TransposeLettersAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as browser from '../../../../base/browser/browser.js';\r\nimport { getActiveDocument } from '../../../../base/browser/dom.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\r\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\r\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\r\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\r\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\r\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\r\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\r\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\r\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\r\nfunction registerCommand(command) {\r\n    command.register();\r\n    return command;\r\n}\r\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\r\n    id: 'editor.action.clipboardCutAction',\r\n    precondition: undefined,\r\n    kbOpts: (\r\n    // Do not bind cut keybindings in the browser,\r\n    // since browsers do that for us and it avoids security prompts\r\n    platform.isNative ? {\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\r\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\r\n        weight: 100 /* KeybindingWeight.EditorContrib */\r\n    } : undefined),\r\n    menuOpts: [{\r\n            menuId: MenuId.MenubarEditMenu,\r\n            group: '2_ccp',\r\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\r\n            order: 1\r\n        }, {\r\n            menuId: MenuId.EditorContext,\r\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\r\n            when: EditorContextKeys.writable,\r\n            order: 1,\r\n        }, {\r\n            menuId: MenuId.CommandPalette,\r\n            group: '',\r\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\r\n            order: 1\r\n        }, {\r\n            menuId: MenuId.SimpleEditorContext,\r\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\r\n            when: EditorContextKeys.writable,\r\n            order: 1,\r\n        }]\r\n})) : undefined;\r\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\r\n    id: 'editor.action.clipboardCopyAction',\r\n    precondition: undefined,\r\n    kbOpts: (\r\n    // Do not bind copy keybindings in the browser,\r\n    // since browsers do that for us and it avoids security prompts\r\n    platform.isNative ? {\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\r\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\r\n        weight: 100 /* KeybindingWeight.EditorContrib */\r\n    } : undefined),\r\n    menuOpts: [{\r\n            menuId: MenuId.MenubarEditMenu,\r\n            group: '2_ccp',\r\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\r\n            order: 2\r\n        }, {\r\n            menuId: MenuId.EditorContext,\r\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\r\n            order: 2,\r\n        }, {\r\n            menuId: MenuId.CommandPalette,\r\n            group: '',\r\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\r\n            order: 1\r\n        }, {\r\n            menuId: MenuId.SimpleEditorContext,\r\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\r\n            order: 2,\r\n        }]\r\n})) : undefined;\r\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\r\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\r\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1, when: ContextKeyExpr.and(ContextKeyExpr.notEquals('resourceScheme', 'output'), EditorContextKeys.editorTextFocus) });\r\nMenuRegistry.appendMenuItem(MenuId.EditorTitleContext, { submenu: MenuId.EditorTitleContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\r\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, { submenu: MenuId.ExplorerContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\r\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\r\n    id: 'editor.action.clipboardPasteAction',\r\n    precondition: undefined,\r\n    kbOpts: (\r\n    // Do not bind paste keybindings in the browser,\r\n    // since browsers do that for us and it avoids security prompts\r\n    platform.isNative ? {\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\r\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\r\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\r\n        weight: 100 /* KeybindingWeight.EditorContrib */\r\n    } : undefined),\r\n    menuOpts: [{\r\n            menuId: MenuId.MenubarEditMenu,\r\n            group: '2_ccp',\r\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\r\n            order: 4\r\n        }, {\r\n            menuId: MenuId.EditorContext,\r\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\r\n            when: EditorContextKeys.writable,\r\n            order: 4,\r\n        }, {\r\n            menuId: MenuId.CommandPalette,\r\n            group: '',\r\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\r\n            order: 1\r\n        }, {\r\n            menuId: MenuId.SimpleEditorContext,\r\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\r\n            when: EditorContextKeys.writable,\r\n            order: 4,\r\n        }]\r\n})) : undefined;\r\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\r\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\r\n            alias: 'Copy With Syntax Highlighting',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const emptySelectionClipboard = editor.getOption(37 /* EditorOption.emptySelectionClipboard */);\r\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\r\n            return;\r\n        }\r\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\r\n        editor.focus();\r\n        editor.getContainerDomNode().ownerDocument.execCommand('copy');\r\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\r\n    }\r\n}\r\nfunction registerExecCommandImpl(target, browserCommand) {\r\n    if (!target) {\r\n        return;\r\n    }\r\n    // 1. handle case when focus is in editor.\r\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\r\n        // Only if editor text focus (i.e. not if editor has widget focus).\r\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\r\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\r\n            // Do not execute if there is no selection and empty selection clipboard is off\r\n            const emptySelectionClipboard = focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */);\r\n            const selection = focusedEditor.getSelection();\r\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\r\n                return true;\r\n            }\r\n            focusedEditor.getContainerDomNode().ownerDocument.execCommand(browserCommand);\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    // 2. (default) handle case when focus is somewhere else.\r\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\r\n        getActiveDocument().execCommand(browserCommand);\r\n        return true;\r\n    });\r\n}\r\nregisterExecCommandImpl(CutAction, 'cut');\r\nregisterExecCommandImpl(CopyAction, 'copy');\r\nif (PasteAction) {\r\n    // 1. Paste: handle case when focus is in editor.\r\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\r\n        const codeEditorService = accessor.get(ICodeEditorService);\r\n        const clipboardService = accessor.get(IClipboardService);\r\n        // Only if editor text focus (i.e. not if editor has widget focus).\r\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\r\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\r\n            const result = focusedEditor.getContainerDomNode().ownerDocument.execCommand('paste');\r\n            // Use the clipboard service if document.execCommand('paste') was not successful\r\n            if (!result && platform.isWeb) {\r\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\r\n                    const clipboardText = yield clipboardService.readText();\r\n                    if (clipboardText !== '') {\r\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\r\n                        let pasteOnNewLine = false;\r\n                        let multicursorText = null;\r\n                        let mode = null;\r\n                        if (metadata) {\r\n                            pasteOnNewLine = (focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\r\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\r\n                            mode = metadata.mode;\r\n                        }\r\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\r\n                            text: clipboardText,\r\n                            pasteOnNewLine,\r\n                            multicursorText,\r\n                            mode\r\n                        });\r\n                    }\r\n                }))();\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    // 2. Paste: (default) handle case when focus is somewhere else.\r\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\r\n        getActiveDocument().execCommand('paste');\r\n        return true;\r\n    });\r\n}\r\nif (supportsCopy) {\r\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\r\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, RefactorAction, SourceAction } from './codeActionCommands.js';\r\nimport { CodeActionController } from './codeActionController.js';\r\nimport { LightBulbWidget } from './lightBulbWidget.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\r\nimport { Registry } from '../../../../platform/registry/common/platform.js';\r\nregisterEditorContribution(CodeActionController.ID, CodeActionController, 3 /* EditorContributionInstantiation.Eventually */);\r\nregisterEditorContribution(LightBulbWidget.ID, LightBulbWidget, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(QuickFixAction);\r\nregisterEditorAction(RefactorAction);\r\nregisterEditorAction(SourceAction);\r\nregisterEditorAction(OrganizeImportsAction);\r\nregisterEditorAction(AutoFixAction);\r\nregisterEditorAction(FixAllAction);\r\nregisterEditorCommand(new CodeActionCommand());\r\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\r\n        'editor.codeActionWidget.showHeaders': {\r\n            type: 'boolean',\r\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\r\n            description: nls.localize('showCodeActionHeaders', \"Enable/disable showing group headers in the Code Action menu.\"),\r\n            default: true,\r\n        },\r\n    } }));\r\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\r\n        'editor.codeActionWidget.includeNearbyQuickfixes': {\r\n            type: 'boolean',\r\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\r\n            description: nls.localize('includeNearbyQuickfixes', \"Enable/disable showing nearest quickfix within a line when not currently on a diagnostic.\"),\r\n            default: false,\r\n        },\r\n    } }));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\r\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { autoFixCommandId, codeActionCommandId, fixAllCommandId, organizeImportsCommandId, quickFixCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\r\nimport { CodeActionController } from './codeActionController.js';\r\nimport { SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\r\nfunction contextKeyForSupportedActions(kind) {\r\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\r\n}\r\nconst argsSchema = {\r\n    type: 'object',\r\n    defaultSnippets: [{ body: { kind: '' } }],\r\n    properties: {\r\n        'kind': {\r\n            type: 'string',\r\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\r\n        },\r\n        'apply': {\r\n            type: 'string',\r\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\r\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\r\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\r\n            enumDescriptions: [\r\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\r\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\r\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\r\n            ]\r\n        },\r\n        'preferred': {\r\n            type: 'boolean',\r\n            default: false,\r\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\r\n        }\r\n    }\r\n};\r\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, triggerAction = CodeActionTriggerSource.Default) {\r\n    if (editor.hasModel()) {\r\n        const controller = CodeActionController.get(editor);\r\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply);\r\n    }\r\n}\r\nexport class QuickFixAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: quickFixCommandId,\r\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\r\n            alias: 'Quick Fix...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, CodeActionTriggerSource.QuickFix);\r\n    }\r\n}\r\nexport class CodeActionCommand extends EditorCommand {\r\n    constructor() {\r\n        super({\r\n            id: codeActionCommandId,\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            description: {\r\n                description: 'Trigger a code action',\r\n                args: [{ name: 'args', schema: argsSchema, }]\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor, userArgs) {\r\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\r\n            kind: CodeActionKind.Empty,\r\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\r\n        });\r\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\r\n            ? args.preferred\r\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\r\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\r\n            : args.preferred\r\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\r\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\r\n            include: args.kind,\r\n            includeSourceActions: true,\r\n            onlyIncludePreferredActions: args.preferred,\r\n        }, args.apply);\r\n    }\r\n}\r\nexport class RefactorAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: refactorCommandId,\r\n            label: nls.localize('refactor.label', \"Refactor...\"),\r\n            alias: 'Refactor...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\r\n                mac: {\r\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 2,\r\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\r\n            },\r\n            description: {\r\n                description: 'Refactor...',\r\n                args: [{ name: 'args', schema: argsSchema }]\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor, userArgs) {\r\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\r\n            kind: CodeActionKind.Refactor,\r\n            apply: \"never\" /* CodeActionAutoApply.Never */\r\n        });\r\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\r\n            ? args.preferred\r\n                ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\r\n                : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\r\n            : args.preferred\r\n                ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\r\n                : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\r\n            include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\r\n            onlyIncludePreferredActions: args.preferred\r\n        }, args.apply, CodeActionTriggerSource.Refactor);\r\n    }\r\n}\r\nexport class SourceAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: sourceActionCommandId,\r\n            label: nls.localize('source.label', \"Source Action...\"),\r\n            alias: 'Source Action...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 2.1,\r\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\r\n            },\r\n            description: {\r\n                description: 'Source Action...',\r\n                args: [{ name: 'args', schema: argsSchema }]\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor, userArgs) {\r\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\r\n            kind: CodeActionKind.Source,\r\n            apply: \"never\" /* CodeActionAutoApply.Never */\r\n        });\r\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\r\n            ? args.preferred\r\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\r\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\r\n            : args.preferred\r\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\r\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\r\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\r\n            includeSourceActions: true,\r\n            onlyIncludePreferredActions: args.preferred,\r\n        }, args.apply, CodeActionTriggerSource.SourceAction);\r\n    }\r\n}\r\nexport class OrganizeImportsAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: organizeImportsCommandId,\r\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\r\n            alias: 'Organize Imports',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.OrganizeImports);\r\n    }\r\n}\r\nexport class FixAllAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: fixAllCommandId,\r\n            label: nls.localize('fixAll.label', \"Fix All\"),\r\n            alias: 'Fix All',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.FixAll);\r\n    }\r\n}\r\nexport class AutoFixAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: autoFixCommandId,\r\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\r\n            alias: 'Auto Fix...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\r\n                mac: {\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.Period */\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\r\n            include: CodeActionKind.QuickFix,\r\n            onlyIncludePreferredActions: true\r\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.AutoFix);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { Progress } from '../../../../platform/progress/common/progress.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\r\nexport const codeActionCommandId = 'editor.action.codeAction';\r\nexport const quickFixCommandId = 'editor.action.quickFix';\r\nexport const autoFixCommandId = 'editor.action.autoFix';\r\nexport const refactorCommandId = 'editor.action.refactor';\r\nexport const sourceActionCommandId = 'editor.action.sourceAction';\r\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\r\nexport const fixAllCommandId = 'editor.action.fixAll';\r\nclass ManagedCodeActionSet extends Disposable {\r\n    static codeActionsPreferredComparator(a, b) {\r\n        if (a.isPreferred && !b.isPreferred) {\r\n            return -1;\r\n        }\r\n        else if (!a.isPreferred && b.isPreferred) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    static codeActionsComparator({ action: a }, { action: b }) {\r\n        if (isNonEmptyArray(a.diagnostics)) {\r\n            return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\r\n        }\r\n        else if (isNonEmptyArray(b.diagnostics)) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\r\n        }\r\n    }\r\n    constructor(actions, documentation, disposables) {\r\n        super();\r\n        this.documentation = documentation;\r\n        this._register(disposables);\r\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\r\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\r\n    }\r\n    get hasAutoFix() {\r\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\r\n    }\r\n}\r\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\r\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\r\n    var _a;\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const filter = trigger.filter || {};\r\n        const notebookFilter = Object.assign(Object.assign({}, filter), { excludes: [...(filter.excludes || []), CodeActionKind.Notebook] });\r\n        const codeActionContext = {\r\n            only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\r\n            trigger: trigger.type,\r\n        };\r\n        const cts = new TextModelCancellationTokenSource(model, token);\r\n        // if the trigger is auto (autosave, lightbulb, etc), we should exclude notebook codeActions\r\n        const excludeNotebookCodeActions = (trigger.type === 2 /* languages.CodeActionTriggerType.Auto */);\r\n        const providers = getCodeActionProviders(registry, model, (excludeNotebookCodeActions) ? notebookFilter : filter);\r\n        const disposables = new DisposableStore();\r\n        const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                progress.report(provider);\r\n                const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\r\n                if (providedCodeActions) {\r\n                    disposables.add(providedCodeActions);\r\n                }\r\n                if (cts.token.isCancellationRequested) {\r\n                    return emptyCodeActionsResponse;\r\n                }\r\n                const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\r\n                const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\r\n                return {\r\n                    actions: filteredActions.map(action => new CodeActionItem(action, provider)),\r\n                    documentation\r\n                };\r\n            }\r\n            catch (err) {\r\n                if (isCancellationError(err)) {\r\n                    throw err;\r\n                }\r\n                onUnexpectedExternalError(err);\r\n                return emptyCodeActionsResponse;\r\n            }\r\n        }));\r\n        const listener = registry.onDidChange(() => {\r\n            const newProviders = registry.all(model);\r\n            if (!equals(newProviders, providers)) {\r\n                cts.cancel();\r\n            }\r\n        });\r\n        try {\r\n            const actions = yield Promise.all(promises);\r\n            const allActions = actions.map(x => x.actions).flat();\r\n            const allDocumentation = [\r\n                ...coalesce(actions.map(x => x.documentation)),\r\n                ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)\r\n            ];\r\n            return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\r\n        }\r\n        finally {\r\n            listener.dispose();\r\n            cts.dispose();\r\n        }\r\n    });\r\n}\r\nfunction getCodeActionProviders(registry, model, filter) {\r\n    return registry.all(model)\r\n        // Don't include providers that we know will not return code actions of interest\r\n        .filter(provider => {\r\n        if (!provider.providedCodeActionKinds) {\r\n            // We don't know what type of actions this provider will return.\r\n            return true;\r\n        }\r\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\r\n    });\r\n}\r\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\r\n    var _a, _b, _c;\r\n    if (model && actionsToShow.length) {\r\n        for (const provider of registry.all(model)) {\r\n            if (provider._getAdditionalMenuItems) {\r\n                yield* (_a = provider._getAdditionalMenuItems) === null || _a === void 0 ? void 0 : _a.call(provider, { trigger: trigger.type, only: (_c = (_b = trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.value }, actionsToShow.map(item => item.action));\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\r\n    if (!provider.documentation) {\r\n        return undefined;\r\n    }\r\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\r\n    if (only) {\r\n        let currentBest;\r\n        for (const entry of documentation) {\r\n            if (entry.kind.contains(only)) {\r\n                if (!currentBest) {\r\n                    currentBest = entry;\r\n                }\r\n                else {\r\n                    // Take best match\r\n                    if (currentBest.kind.contains(entry.kind)) {\r\n                        currentBest = entry;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (currentBest) {\r\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\r\n        }\r\n    }\r\n    // Otherwise, check to see if any of the provided actions match.\r\n    for (const action of providedCodeActions) {\r\n        if (!action.kind) {\r\n            continue;\r\n        }\r\n        for (const entry of documentation) {\r\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\r\n                return entry.command;\r\n            }\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport var ApplyCodeActionReason;\r\n(function (ApplyCodeActionReason) {\r\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\r\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\r\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\r\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\r\nexport function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\r\n    var _a;\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const bulkEditService = accessor.get(IBulkEditService);\r\n        const commandService = accessor.get(ICommandService);\r\n        const telemetryService = accessor.get(ITelemetryService);\r\n        const notificationService = accessor.get(INotificationService);\r\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\r\n            codeActionTitle: item.action.title,\r\n            codeActionKind: item.action.kind,\r\n            codeActionIsPreferred: !!item.action.isPreferred,\r\n            reason: codeActionReason,\r\n        });\r\n        yield item.resolve(token);\r\n        if (token.isCancellationRequested) {\r\n            return;\r\n        }\r\n        if ((_a = item.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) {\r\n            const result = yield bulkEditService.apply(item.action.edit, {\r\n                editor: options === null || options === void 0 ? void 0 : options.editor,\r\n                label: item.action.title,\r\n                quotableLabel: item.action.title,\r\n                code: 'undoredo.codeAction',\r\n                respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\r\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\r\n            });\r\n            if (!result.isApplied) {\r\n                return;\r\n            }\r\n        }\r\n        if (item.action.command) {\r\n            try {\r\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\r\n            }\r\n            catch (err) {\r\n                const message = asMessage(err);\r\n                notificationService.error(typeof message === 'string'\r\n                    ? message\r\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction asMessage(err) {\r\n    if (typeof err === 'string') {\r\n        return err;\r\n    }\r\n    else if (err instanceof Error && typeof err.message === 'string') {\r\n        return err.message;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (!(resource instanceof URI)) {\r\n            throw illegalArgument();\r\n        }\r\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\r\n        const model = accessor.get(IModelService).getModel(resource);\r\n        if (!model) {\r\n            throw illegalArgument();\r\n        }\r\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\r\n            ? Selection.liftSelection(rangeOrSelection)\r\n            : Range.isIRange(rangeOrSelection)\r\n                ? model.validateRange(rangeOrSelection)\r\n                : undefined;\r\n        if (!validatedRangeOrSelection) {\r\n            throw illegalArgument();\r\n        }\r\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\r\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\r\n        const resolving = [];\r\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\r\n        for (let i = 0; i < resolveCount; i++) {\r\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\r\n        }\r\n        try {\r\n            yield Promise.all(resolving);\r\n            return codeActionSet.validActions.map(item => item.action);\r\n        }\r\n        finally {\r\n            setTimeout(() => codeActionSet.dispose(), 100);\r\n        }\r\n    });\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nexport class CodeActionKind {\r\n    constructor(value) {\r\n        this.value = value;\r\n    }\r\n    equals(other) {\r\n        return this.value === other.value;\r\n    }\r\n    contains(other) {\r\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\r\n    }\r\n    intersects(other) {\r\n        return this.contains(other) || other.contains(this);\r\n    }\r\n    append(part) {\r\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\r\n    }\r\n}\r\nCodeActionKind.sep = '.';\r\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\r\nCodeActionKind.Empty = new CodeActionKind('');\r\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\r\nCodeActionKind.Refactor = new CodeActionKind('refactor');\r\nCodeActionKind.RefactorExtract = CodeActionKind.Refactor.append('extract');\r\nCodeActionKind.RefactorInline = CodeActionKind.Refactor.append('inline');\r\nCodeActionKind.RefactorMove = CodeActionKind.Refactor.append('move');\r\nCodeActionKind.RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\r\nCodeActionKind.Notebook = new CodeActionKind('notebook');\r\nCodeActionKind.Source = new CodeActionKind('source');\r\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\r\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\r\nCodeActionKind.SurroundWith = CodeActionKind.Refactor.append('surround');\r\nexport var CodeActionTriggerSource;\r\n(function (CodeActionTriggerSource) {\r\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\r\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\r\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\r\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\r\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\r\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\r\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\r\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\r\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\r\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\r\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\r\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\r\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\r\nexport function mayIncludeActionsOfKind(filter, providedKind) {\r\n    // A provided kind may be a subset or superset of our filtered kind.\r\n    if (filter.include && !filter.include.intersects(providedKind)) {\r\n        return false;\r\n    }\r\n    if (filter.excludes) {\r\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\r\n            return false;\r\n        }\r\n    }\r\n    // Don't return source actions unless they are explicitly requested\r\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexport function filtersAction(filter, action) {\r\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\r\n    // Filter out actions by kind\r\n    if (filter.include) {\r\n        if (!actionKind || !filter.include.contains(actionKind)) {\r\n            return false;\r\n        }\r\n    }\r\n    if (filter.excludes) {\r\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\r\n            return false;\r\n        }\r\n    }\r\n    // Don't return source actions unless they are explicitly requested\r\n    if (!filter.includeSourceActions) {\r\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\r\n            return false;\r\n        }\r\n    }\r\n    if (filter.onlyIncludePreferredActions) {\r\n        if (!action.isPreferred) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction excludesAction(providedKind, exclude, include) {\r\n    if (!exclude.contains(providedKind)) {\r\n        return false;\r\n    }\r\n    if (include && exclude.contains(include)) {\r\n        // The include is more specific, don't filter out\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexport class CodeActionCommandArgs {\r\n    static fromUser(arg, defaults) {\r\n        if (!arg || typeof arg !== 'object') {\r\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\r\n        }\r\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\r\n    }\r\n    static getApplyFromUser(arg, defaultAutoApply) {\r\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\r\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\r\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\r\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\r\n            default: return defaultAutoApply;\r\n        }\r\n    }\r\n    static getKindFromUser(arg, defaultKind) {\r\n        return typeof arg.kind === 'string'\r\n            ? new CodeActionKind(arg.kind)\r\n            : defaultKind;\r\n    }\r\n    static getPreferredUser(arg) {\r\n        return typeof arg.preferred === 'boolean'\r\n            ? arg.preferred\r\n            : false;\r\n    }\r\n    constructor(kind, apply, preferred) {\r\n        this.kind = kind;\r\n        this.apply = apply;\r\n        this.preferred = preferred;\r\n    }\r\n}\r\nexport class CodeActionItem {\r\n    constructor(action, provider, highlightRange) {\r\n        this.action = action;\r\n        this.provider = provider;\r\n        this.highlightRange = highlightRange;\r\n    }\r\n    resolve(token) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\r\n                let action;\r\n                try {\r\n                    action = yield this.provider.resolveCodeAction(this.action, token);\r\n                }\r\n                catch (err) {\r\n                    onUnexpectedExternalError(err);\r\n                }\r\n                if (action) {\r\n                    this.action.edit = action.edit;\r\n                }\r\n            }\r\n            return this;\r\n        });\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar CodeActionController_1;\r\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\r\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Lazy } from '../../../../base/common/lazy.js';\r\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ApplyCodeActionReason, applyCodeAction } from './codeAction.js';\r\nimport { CodeActionKeybindingResolver } from './codeActionKeybindingResolver.js';\r\nimport { toMenuItems } from './codeActionMenu.js';\r\nimport { LightBulbWidget } from './lightBulbWidget.js';\r\nimport { MessageController } from '../../message/browser/messageController.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IActionWidgetService } from '../../../../platform/actionWidget/browser/actionWidget.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\r\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\r\nimport { editorFindMatchHighlight, editorFindMatchHighlightBorder } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { CodeActionTriggerSource } from '../common/types.js';\r\nimport { CodeActionModel } from './codeActionModel.js';\r\nconst DECORATION_CLASS_NAME = 'quickfix-edit-highlight';\r\nlet CodeActionController = CodeActionController_1 = class CodeActionController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(CodeActionController_1.ID);\r\n    }\r\n    constructor(editor, markerService, contextKeyService, instantiationService, languageFeaturesService, progressService, _commandService, _configurationService, _actionWidgetService, _instantiationService) {\r\n        super();\r\n        this._commandService = _commandService;\r\n        this._configurationService = _configurationService;\r\n        this._actionWidgetService = _actionWidgetService;\r\n        this._instantiationService = _instantiationService;\r\n        this._activeCodeActions = this._register(new MutableDisposable());\r\n        this._showDisabled = false;\r\n        this._disposed = false;\r\n        this._editor = editor;\r\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService, _configurationService));\r\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\r\n        this._lightBulbWidget = new Lazy(() => {\r\n            const widget = this._editor.getContribution(LightBulbWidget.ID);\r\n            if (widget) {\r\n                this._register(widget.onClick(e => this.showCodeActionList(e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\r\n            }\r\n            return widget;\r\n        });\r\n        this._resolver = instantiationService.createInstance(CodeActionKeybindingResolver);\r\n        this._register(this._editor.onDidLayoutChange(() => this._actionWidgetService.hide()));\r\n    }\r\n    dispose() {\r\n        this._disposed = true;\r\n        super.dispose();\r\n    }\r\n    showCodeActions(_trigger, actions, at) {\r\n        return this.showCodeActionList(actions, at, { includeDisabledActions: false, fromLightbulb: false });\r\n    }\r\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply) {\r\n        var _a;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\r\n        const triggerPosition = this._editor.getPosition();\r\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition } });\r\n    }\r\n    _trigger(trigger) {\r\n        return this._model.trigger(trigger);\r\n    }\r\n    _applyCodeAction(action, retrigger, preview) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                yield this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\r\n            }\r\n            finally {\r\n                if (retrigger) {\r\n                    this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    update(newState) {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\r\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\r\n                return;\r\n            }\r\n            let actions;\r\n            try {\r\n                actions = yield newState.actions;\r\n            }\r\n            catch (e) {\r\n                onUnexpectedError(e);\r\n                return;\r\n            }\r\n            if (this._disposed) {\r\n                return;\r\n            }\r\n            (_b = this._lightBulbWidget.value) === null || _b === void 0 ? void 0 : _b.update(actions, newState.trigger, newState.position);\r\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\r\n                if ((_c = newState.trigger.filter) === null || _c === void 0 ? void 0 : _c.include) { // Triggered for specific scope\r\n                    // Check to see if we want to auto apply.\r\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\r\n                    if (validActionToApply) {\r\n                        try {\r\n                            (_d = this._lightBulbWidget.value) === null || _d === void 0 ? void 0 : _d.hide();\r\n                            yield this._applyCodeAction(validActionToApply, false, false);\r\n                        }\r\n                        finally {\r\n                            actions.dispose();\r\n                        }\r\n                        return;\r\n                    }\r\n                    // Check to see if there is an action that we would have applied were it not invalid\r\n                    if (newState.trigger.context) {\r\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\r\n                        if (invalidAction && invalidAction.action.disabled) {\r\n                            (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\r\n                            actions.dispose();\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                const includeDisabledActions = !!((_f = newState.trigger.filter) === null || _f === void 0 ? void 0 : _f.include);\r\n                if (newState.trigger.context) {\r\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\r\n                        (_g = MessageController.get(this._editor)) === null || _g === void 0 ? void 0 : _g.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\r\n                        this._activeCodeActions.value = actions;\r\n                        actions.dispose();\r\n                        return;\r\n                    }\r\n                }\r\n                this._activeCodeActions.value = actions;\r\n                this.showCodeActionList(actions, this.toCoords(newState.position), { includeDisabledActions, fromLightbulb: false });\r\n            }\r\n            else {\r\n                // auto magically triggered\r\n                if (this._actionWidgetService.isVisible) {\r\n                    // TODO: Figure out if we should update the showing menu?\r\n                    actions.dispose();\r\n                }\r\n                else {\r\n                    this._activeCodeActions.value = actions;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\r\n        if (!actions.allActions.length) {\r\n            return undefined;\r\n        }\r\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\r\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\r\n            return actions.allActions.find(({ action }) => action.disabled);\r\n        }\r\n        return undefined;\r\n    }\r\n    tryGetValidActionToApply(trigger, actions) {\r\n        if (!actions.validActions.length) {\r\n            return undefined;\r\n        }\r\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\r\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\r\n            return actions.validActions[0];\r\n        }\r\n        return undefined;\r\n    }\r\n    showCodeActionList(actions, at, options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const currentDecorations = this._editor.createDecorationsCollection();\r\n            const editorDom = this._editor.getDomNode();\r\n            if (!editorDom) {\r\n                return;\r\n            }\r\n            const actionsToShow = options.includeDisabledActions && (this._showDisabled || actions.validActions.length === 0) ? actions.allActions : actions.validActions;\r\n            if (!actionsToShow.length) {\r\n                return;\r\n            }\r\n            const anchor = Position.isIPosition(at) ? this.toCoords(at) : at;\r\n            const delegate = {\r\n                onSelect: (action, preview) => __awaiter(this, void 0, void 0, function* () {\r\n                    this._applyCodeAction(action, /* retrigger */ true, !!preview);\r\n                    this._actionWidgetService.hide();\r\n                    currentDecorations.clear();\r\n                }),\r\n                onHide: () => {\r\n                    var _a;\r\n                    (_a = this._editor) === null || _a === void 0 ? void 0 : _a.focus();\r\n                    currentDecorations.clear();\r\n                },\r\n                onHover: (action, token) => __awaiter(this, void 0, void 0, function* () {\r\n                    var _a;\r\n                    yield action.resolve(token);\r\n                    if (token.isCancellationRequested) {\r\n                        return;\r\n                    }\r\n                    return { canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) };\r\n                }),\r\n                onFocus: (action) => {\r\n                    var _a, _b;\r\n                    if (action && action.highlightRange && action.action.diagnostics) {\r\n                        const decorations = [{ range: action.action.diagnostics[0], options: CodeActionController_1.DECORATION }];\r\n                        currentDecorations.set(decorations);\r\n                        const diagnostic = action.action.diagnostics[0];\r\n                        const selectionText = (_b = (_a = this._editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition({ lineNumber: diagnostic.startLineNumber, column: diagnostic.startColumn })) === null || _b === void 0 ? void 0 : _b.word;\r\n                        aria.status(localize('editingNewSelection', \"Context: {0} at line {1} and column {2}.\", selectionText, diagnostic.startLineNumber, diagnostic.startColumn));\r\n                    }\r\n                    else {\r\n                        currentDecorations.clear();\r\n                    }\r\n                }\r\n            };\r\n            this._actionWidgetService.show('codeActionWidget', true, toMenuItems(actionsToShow, this._shouldShowHeaders(), this._resolver.getResolver()), delegate, anchor, editorDom, this._getActionBarActions(actions, at, options));\r\n        });\r\n    }\r\n    toCoords(position) {\r\n        if (!this._editor.hasModel()) {\r\n            return { x: 0, y: 0 };\r\n        }\r\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\r\n        this._editor.render();\r\n        // Translate to absolute editor position\r\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\r\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\r\n        const x = editorCoords.left + cursorCoords.left;\r\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n        return { x, y };\r\n    }\r\n    _shouldShowHeaders() {\r\n        var _a;\r\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\r\n        return this._configurationService.getValue('editor.codeActionWidget.showHeaders', { resource: model === null || model === void 0 ? void 0 : model.uri });\r\n    }\r\n    _getActionBarActions(actions, at, options) {\r\n        if (options.fromLightbulb) {\r\n            return [];\r\n        }\r\n        const resultActions = actions.documentation.map((command) => {\r\n            var _a;\r\n            return ({\r\n                id: command.id,\r\n                label: command.title,\r\n                tooltip: (_a = command.tooltip) !== null && _a !== void 0 ? _a : '',\r\n                class: undefined,\r\n                enabled: true,\r\n                run: () => { var _a; return this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : [])); },\r\n            });\r\n        });\r\n        if (options.includeDisabledActions && actions.validActions.length > 0 && actions.allActions.length !== actions.validActions.length) {\r\n            resultActions.push(this._showDisabled ? {\r\n                id: 'hideMoreActions',\r\n                label: localize('hideMoreActions', 'Hide Disabled'),\r\n                enabled: true,\r\n                tooltip: '',\r\n                class: undefined,\r\n                run: () => {\r\n                    this._showDisabled = false;\r\n                    return this.showCodeActionList(actions, at, options);\r\n                }\r\n            } : {\r\n                id: 'showMoreActions',\r\n                label: localize('showMoreActions', 'Show Disabled'),\r\n                enabled: true,\r\n                tooltip: '',\r\n                class: undefined,\r\n                run: () => {\r\n                    this._showDisabled = true;\r\n                    return this.showCodeActionList(actions, at, options);\r\n                }\r\n            });\r\n        }\r\n        return resultActions;\r\n    }\r\n};\r\nCodeActionController.ID = 'editor.contrib.codeActionController';\r\nCodeActionController.DECORATION = ModelDecorationOptions.register({\r\n    description: 'quickfix-highlight',\r\n    className: DECORATION_CLASS_NAME\r\n});\r\nCodeActionController = CodeActionController_1 = __decorate([\r\n    __param(1, IMarkerService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, IInstantiationService),\r\n    __param(4, ILanguageFeaturesService),\r\n    __param(5, IEditorProgressService),\r\n    __param(6, ICommandService),\r\n    __param(7, IConfigurationService),\r\n    __param(8, IActionWidgetService),\r\n    __param(9, IInstantiationService)\r\n], CodeActionController);\r\nexport { CodeActionController };\r\nregisterThemingParticipant((theme, collector) => {\r\n    const addBackgroundColorRule = (selector, color) => {\r\n        if (color) {\r\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\r\n        }\r\n    };\r\n    addBackgroundColorRule('.quickfix-edit-highlight', theme.getColor(editorFindMatchHighlight));\r\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\r\n    if (findMatchHighlightBorder) {\r\n        collector.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar CodeActionKeybindingResolver_1;\r\nimport { Lazy } from '../../../../base/common/lazy.js';\r\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\r\nimport { CodeActionCommandArgs, CodeActionKind } from '../common/types.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nlet CodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = class CodeActionKeybindingResolver {\r\n    constructor(keybindingService) {\r\n        this.keybindingService = keybindingService;\r\n    }\r\n    getResolver() {\r\n        // Lazy since we may not actually ever read the value\r\n        const allCodeActionBindings = new Lazy(() => this.keybindingService.getKeybindings()\r\n            .filter(item => CodeActionKeybindingResolver_1.codeActionCommands.indexOf(item.command) >= 0)\r\n            .filter(item => item.resolvedKeybinding)\r\n            .map((item) => {\r\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\r\n            let commandArgs = item.commandArgs;\r\n            if (item.command === organizeImportsCommandId) {\r\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\r\n            }\r\n            else if (item.command === fixAllCommandId) {\r\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\r\n            }\r\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\r\n                kind: CodeActionKind.None,\r\n                apply: \"never\" /* CodeActionAutoApply.Never */\r\n            }));\r\n        }));\r\n        return (action) => {\r\n            if (action.kind) {\r\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.value);\r\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\r\n            }\r\n            return undefined;\r\n        };\r\n    }\r\n    bestKeybindingForCodeAction(action, candidates) {\r\n        if (!action.kind) {\r\n            return undefined;\r\n        }\r\n        const kind = new CodeActionKind(action.kind);\r\n        return candidates\r\n            .filter(candidate => candidate.kind.contains(kind))\r\n            .filter(candidate => {\r\n            if (candidate.preferred) {\r\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\r\n                return action.isPreferred;\r\n            }\r\n            return true;\r\n        })\r\n            .reduceRight((currentBest, candidate) => {\r\n            if (!currentBest) {\r\n                return candidate;\r\n            }\r\n            // Select the more specific binding\r\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\r\n        }, undefined);\r\n    }\r\n};\r\nCodeActionKeybindingResolver.codeActionCommands = [\r\n    refactorCommandId,\r\n    codeActionCommandId,\r\n    sourceActionCommandId,\r\n    organizeImportsCommandId,\r\n    fixAllCommandId\r\n];\r\nCodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = __decorate([\r\n    __param(0, IKeybindingService)\r\n], CodeActionKeybindingResolver);\r\nexport { CodeActionKeybindingResolver };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './codicon/codicon.css';\r\nimport './codicon/codicon-modifiers.css';\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { CodeActionKind } from '../common/types.js';\r\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\r\nimport { localize } from '../../../../nls.js';\r\nconst uncategorizedCodeActionGroup = Object.freeze({ kind: CodeActionKind.Empty, title: localize('codeAction.widget.id.more', 'More Actions...') });\r\nconst codeActionGroups = Object.freeze([\r\n    { kind: CodeActionKind.QuickFix, title: localize('codeAction.widget.id.quickfix', 'Quick Fix') },\r\n    { kind: CodeActionKind.RefactorExtract, title: localize('codeAction.widget.id.extract', 'Extract'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.RefactorInline, title: localize('codeAction.widget.id.inline', 'Inline'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.RefactorRewrite, title: localize('codeAction.widget.id.convert', 'Rewrite'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.RefactorMove, title: localize('codeAction.widget.id.move', 'Move'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.SurroundWith, title: localize('codeAction.widget.id.surround', 'Surround With'), icon: Codicon.symbolSnippet },\r\n    { kind: CodeActionKind.Source, title: localize('codeAction.widget.id.source', 'Source Action'), icon: Codicon.symbolFile },\r\n    uncategorizedCodeActionGroup,\r\n]);\r\nexport function toMenuItems(inputCodeActions, showHeaders, keybindingResolver) {\r\n    if (!showHeaders) {\r\n        return inputCodeActions.map((action) => {\r\n            var _a;\r\n            return {\r\n                kind: \"action\" /* ActionListItemKind.Action */,\r\n                item: action,\r\n                group: uncategorizedCodeActionGroup,\r\n                disabled: !!action.action.disabled,\r\n                label: action.action.disabled || action.action.title,\r\n                canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length),\r\n            };\r\n        });\r\n    }\r\n    // Group code actions\r\n    const menuEntries = codeActionGroups.map(group => ({ group, actions: [] }));\r\n    for (const action of inputCodeActions) {\r\n        const kind = action.action.kind ? new CodeActionKind(action.action.kind) : CodeActionKind.None;\r\n        for (const menuEntry of menuEntries) {\r\n            if (menuEntry.group.kind.contains(kind)) {\r\n                menuEntry.actions.push(action);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    const allMenuItems = [];\r\n    for (const menuEntry of menuEntries) {\r\n        if (menuEntry.actions.length) {\r\n            allMenuItems.push({ kind: \"header\" /* ActionListItemKind.Header */, group: menuEntry.group });\r\n            for (const action of menuEntry.actions) {\r\n                allMenuItems.push({\r\n                    kind: \"action\" /* ActionListItemKind.Action */,\r\n                    item: action,\r\n                    group: menuEntry.group,\r\n                    label: action.action.title,\r\n                    disabled: !!action.action.disabled,\r\n                    keybinding: keybindingResolver(action.action),\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return allMenuItems;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './symbolIcons.css';\r\nimport { localize } from '../../../../nls.js';\r\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground,\r\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground,\r\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\r\n    dark: '#EE9D28',\r\n    light: '#D67E00',\r\n    hcDark: '#EE9D28',\r\n    hcLight: '#D67E00'\r\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\r\n    dark: '#B180D7',\r\n    light: '#652D90',\r\n    hcDark: '#B180D7',\r\n    hcLight: '#652D90'\r\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\r\n    dark: '#EE9D28',\r\n    light: '#D67E00',\r\n    hcDark: '#EE9D28',\r\n    hcLight: '#D67E00'\r\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hcDark: '#75BEFF',\r\n    hcLight: '#007ACC'\r\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\r\n    dark: '#EE9D28',\r\n    light: '#D67E00',\r\n    hcDark: '#EE9D28',\r\n    hcLight: '#D67E00'\r\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hcDark: '#75BEFF',\r\n    hcLight: '#007ACC'\r\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\r\n    dark: '#B180D7',\r\n    light: '#652D90',\r\n    hcDark: '#B180D7',\r\n    hcLight: '#652D90'\r\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hcDark: '#75BEFF',\r\n    hcLight: '#007ACC'\r\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\r\n    dark: '#B180D7',\r\n    light: '#652D90',\r\n    hcDark: '#B180D7',\r\n    hcLight: '#652D90'\r\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground,\r\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hcDark: foreground,\r\n    hcLight: foreground\r\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hcDark: '#75BEFF',\r\n    hcLight: '#007ACC',\r\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar LightBulbWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Gesture } from '../../../../base/browser/touch.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Emitter, Event } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport './lightBulbWidget.css';\r\nimport { computeIndentLevel } from '../../../common/model/utils.js';\r\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nvar LightBulbState;\r\n(function (LightBulbState) {\r\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\r\n    class Showing {\r\n        constructor(actions, trigger, editorPosition, widgetPosition) {\r\n            this.actions = actions;\r\n            this.trigger = trigger;\r\n            this.editorPosition = editorPosition;\r\n            this.widgetPosition = widgetPosition;\r\n            this.type = 1 /* Type.Showing */;\r\n        }\r\n    }\r\n    LightBulbState.Showing = Showing;\r\n})(LightBulbState || (LightBulbState = {}));\r\nlet LightBulbWidget = LightBulbWidget_1 = class LightBulbWidget extends Disposable {\r\n    constructor(_editor, keybindingService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._onClick = this._register(new Emitter());\r\n        this.onClick = this._onClick.event;\r\n        this._state = LightBulbState.Hidden;\r\n        this._domNode = dom.$('div.lightBulbWidget');\r\n        this._register(Gesture.ignoreTarget(this._domNode));\r\n        this._editor.addContentWidget(this);\r\n        this._register(this._editor.onDidChangeModelContent(_ => {\r\n            // cancel when the line in question has been removed\r\n            const editorModel = this._editor.getModel();\r\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\r\n                this.hide();\r\n            }\r\n        }));\r\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\r\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\r\n                return;\r\n            }\r\n            // Make sure that focus / cursor location is not lost when clicking widget icon\r\n            this._editor.focus();\r\n            e.preventDefault();\r\n            // a bit of extra work to make sure the menu\r\n            // doesn't cover the line-text\r\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\r\n            const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n            let pad = Math.floor(lineHeight / 3);\r\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\r\n                pad += lineHeight;\r\n            }\r\n            this._onClick.fire({\r\n                x: e.posx,\r\n                y: top + height + pad,\r\n                actions: this.state.actions,\r\n                trigger: this.state.trigger,\r\n            });\r\n        }));\r\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\r\n            if ((e.buttons & 1) !== 1) {\r\n                return;\r\n            }\r\n            // mouse enters lightbulb while the primary/left button\r\n            // is being pressed -> hide the lightbulb\r\n            this.hide();\r\n        }));\r\n        this._register(this._editor.onDidChangeConfiguration(e => {\r\n            // hide when told to do so\r\n            if (e.hasChanged(64 /* EditorOption.lightbulb */) && !this._editor.getOption(64 /* EditorOption.lightbulb */).enabled) {\r\n                this.hide();\r\n            }\r\n        }));\r\n        this._register(Event.runAndSubscribe(keybindingService.onDidUpdateKeybindings, () => {\r\n            var _a, _b, _c, _d;\r\n            this._preferredKbLabel = (_b = (_a = keybindingService.lookupKeybinding(autoFixCommandId)) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : undefined;\r\n            this._quickFixKbLabel = (_d = (_c = keybindingService.lookupKeybinding(quickFixCommandId)) === null || _c === void 0 ? void 0 : _c.getLabel()) !== null && _d !== void 0 ? _d : undefined;\r\n            this._updateLightBulbTitleAndIcon();\r\n        }));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._editor.removeContentWidget(this);\r\n    }\r\n    getId() {\r\n        return 'LightBulbWidget';\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\r\n    }\r\n    update(actions, trigger, atPosition) {\r\n        if (actions.validActions.length <= 0) {\r\n            return this.hide();\r\n        }\r\n        const options = this._editor.getOptions();\r\n        if (!options.get(64 /* EditorOption.lightbulb */).enabled) {\r\n            return this.hide();\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return this.hide();\r\n        }\r\n        const { lineNumber, column } = model.validatePosition(atPosition);\r\n        const tabSize = model.getOptions().tabSize;\r\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\r\n        const lineContent = model.getLineContent(lineNumber);\r\n        const indent = computeIndentLevel(lineContent, tabSize);\r\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\r\n        const isFolded = (lineNumber) => {\r\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\r\n        };\r\n        let effectiveLineNumber = lineNumber;\r\n        if (!lineHasSpace) {\r\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\r\n                effectiveLineNumber -= 1;\r\n            }\r\n            else if (!isFolded(lineNumber + 1)) {\r\n                effectiveLineNumber += 1;\r\n            }\r\n            else if (column * fontInfo.spaceWidth < 22) {\r\n                // cannot show lightbulb above/below and showing\r\n                // it inline would overlay the cursor...\r\n                return this.hide();\r\n            }\r\n        }\r\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\r\n            position: { lineNumber: effectiveLineNumber, column: 1 },\r\n            preference: LightBulbWidget_1._posPref\r\n        });\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n    hide() {\r\n        if (this.state === LightBulbState.Hidden) {\r\n            return;\r\n        }\r\n        this.state = LightBulbState.Hidden;\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n    get state() { return this._state; }\r\n    set state(value) {\r\n        this._state = value;\r\n        this._updateLightBulbTitleAndIcon();\r\n    }\r\n    _updateLightBulbTitleAndIcon() {\r\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\r\n            // update icon\r\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\r\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\r\n            if (this._preferredKbLabel) {\r\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\r\n                return;\r\n            }\r\n        }\r\n        // update icon\r\n        this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\r\n        this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\r\n        if (this._quickFixKbLabel) {\r\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\r\n        }\r\n        else {\r\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\r\n        }\r\n    }\r\n    set title(value) {\r\n        this._domNode.title = value;\r\n    }\r\n};\r\nLightBulbWidget.ID = 'editor.contrib.lightbulbWidget';\r\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\r\nLightBulbWidget = LightBulbWidget_1 = __decorate([\r\n    __param(1, IKeybindingService)\r\n], LightBulbWidget);\r\nexport { LightBulbWidget };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar MessageController_1;\r\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport './messageController.css';\r\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { openLinkFromMarkdown } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nlet MessageController = MessageController_1 = class MessageController {\r\n    static get(editor) {\r\n        return editor.getContribution(MessageController_1.ID);\r\n    }\r\n    constructor(editor, contextKeyService, _openerService) {\r\n        this._openerService = _openerService;\r\n        this._messageWidget = new MutableDisposable();\r\n        this._messageListeners = new DisposableStore();\r\n        this._mouseOverMessage = false;\r\n        this._editor = editor;\r\n        this._visible = MessageController_1.MESSAGE_VISIBLE.bindTo(contextKeyService);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        (_a = this._message) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._messageListeners.dispose();\r\n        this._messageWidget.dispose();\r\n        this._visible.reset();\r\n    }\r\n    showMessage(message, position) {\r\n        alert(isMarkdownString(message) ? message.value : message);\r\n        this._visible.set(true);\r\n        this._messageWidget.clear();\r\n        this._messageListeners.clear();\r\n        this._message = isMarkdownString(message) ? renderMarkdown(message, {\r\n            actionHandler: {\r\n                callback: (url) => openLinkFromMarkdown(this._openerService, url, isMarkdownString(message) ? message.isTrusted : undefined),\r\n                disposables: this._messageListeners\r\n            },\r\n        }) : undefined;\r\n        this._messageWidget.value = new MessageWidget(this._editor, position, typeof message === 'string' ? message : this._message.element);\r\n        // close on blur (debounced to allow to tab into the message), cursor, model change, dispose\r\n        this._messageListeners.add(Event.debounce(this._editor.onDidBlurEditorText, (last, event) => event, 0)(() => {\r\n            if (this._mouseOverMessage) {\r\n                return; // override when mouse over message\r\n            }\r\n            if (this._messageWidget.value && dom.isAncestor(dom.getActiveElement(), this._messageWidget.value.getDomNode())) {\r\n                return; // override when focus is inside the message\r\n            }\r\n            this.closeMessage();\r\n        }));\r\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\r\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\r\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\r\n        this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_ENTER, () => this._mouseOverMessage = true, true));\r\n        this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_LEAVE, () => this._mouseOverMessage = false, true));\r\n        // close on mouse move\r\n        let bounds;\r\n        this._messageListeners.add(this._editor.onMouseMove(e => {\r\n            // outside the text area\r\n            if (!e.target.position) {\r\n                return;\r\n            }\r\n            if (!bounds) {\r\n                // define bounding box around position and first mouse occurance\r\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\r\n            }\r\n            else if (!bounds.containsPosition(e.target.position)) {\r\n                // check if position is still in bounds\r\n                this.closeMessage();\r\n            }\r\n        }));\r\n    }\r\n    closeMessage() {\r\n        this._visible.reset();\r\n        this._messageListeners.clear();\r\n        if (this._messageWidget.value) {\r\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\r\n        }\r\n    }\r\n};\r\nMessageController.ID = 'editor.contrib.messageController';\r\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\r\nMessageController = MessageController_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, IOpenerService)\r\n], MessageController);\r\nexport { MessageController };\r\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\r\nregisterEditorCommand(new MessageCommand({\r\n    id: 'leaveEditorMessage',\r\n    precondition: MessageController.MESSAGE_VISIBLE,\r\n    handler: c => c.closeMessage(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\r\n        primary: 9 /* KeyCode.Escape */\r\n    }\r\n}));\r\nclass MessageWidget {\r\n    static fadeOut(messageWidget) {\r\n        const dispose = () => {\r\n            messageWidget.dispose();\r\n            clearTimeout(handle);\r\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\r\n        };\r\n        const handle = setTimeout(dispose, 110);\r\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\r\n        messageWidget.getDomNode().classList.add('fadeOut');\r\n        return { dispose };\r\n    }\r\n    constructor(editor, { lineNumber, column }, text) {\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this._editor = editor;\r\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\r\n        this._position = { lineNumber, column };\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.classList.add('monaco-editor-overlaymessage');\r\n        this._domNode.style.marginLeft = '-6px';\r\n        const anchorTop = document.createElement('div');\r\n        anchorTop.classList.add('anchor', 'top');\r\n        this._domNode.appendChild(anchorTop);\r\n        const message = document.createElement('div');\r\n        if (typeof text === 'string') {\r\n            message.classList.add('message');\r\n            message.textContent = text;\r\n        }\r\n        else {\r\n            text.classList.add('message');\r\n            message.appendChild(text);\r\n        }\r\n        this._domNode.appendChild(message);\r\n        const anchorBottom = document.createElement('div');\r\n        anchorBottom.classList.add('anchor', 'below');\r\n        this._domNode.appendChild(anchorBottom);\r\n        this._editor.addContentWidget(this);\r\n        this._domNode.classList.add('fadeIn');\r\n    }\r\n    dispose() {\r\n        this._editor.removeContentWidget(this);\r\n    }\r\n    getId() {\r\n        return 'messageoverlay';\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            position: this._position,\r\n            preference: [\r\n                1 /* ContentWidgetPositionPreference.ABOVE */,\r\n                2 /* ContentWidgetPositionPreference.BELOW */,\r\n            ],\r\n            positionAffinity: 1 /* PositionAffinity.Right */,\r\n        };\r\n    }\r\n    afterRender(position) {\r\n        this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\r\n    }\r\n}\r\nregisterEditorContribution(MessageController.ID, MessageController, 4 /* EditorContributionInstantiation.Lazy */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar MarkdownRenderer_1;\r\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\r\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport './renderedMarkdown.css';\r\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\r\nimport { tokenizeToString } from '../../../common/languages/textToHtmlTokenizer.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\n/**\r\n * Markdown renderer that can render codeblocks with the editor mechanics. This\r\n * renderer should always be preferred.\r\n */\r\nlet MarkdownRenderer = MarkdownRenderer_1 = class MarkdownRenderer {\r\n    constructor(_options, _languageService, _openerService) {\r\n        this._options = _options;\r\n        this._languageService = _languageService;\r\n        this._openerService = _openerService;\r\n        this._onDidRenderAsync = new Emitter();\r\n        this.onDidRenderAsync = this._onDidRenderAsync.event;\r\n    }\r\n    dispose() {\r\n        this._onDidRenderAsync.dispose();\r\n    }\r\n    render(markdown, options, markedOptions) {\r\n        if (!markdown) {\r\n            const element = document.createElement('span');\r\n            return { element, dispose: () => { } };\r\n        }\r\n        const disposables = new DisposableStore();\r\n        const rendered = disposables.add(renderMarkdown(markdown, Object.assign(Object.assign({}, this._getRenderOptions(markdown, disposables)), options), markedOptions));\r\n        rendered.element.classList.add('rendered-markdown');\r\n        return {\r\n            element: rendered.element,\r\n            dispose: () => disposables.dispose()\r\n        };\r\n    }\r\n    _getRenderOptions(markdown, disposables) {\r\n        return {\r\n            codeBlockRenderer: (languageAlias, value) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a, _b, _c;\r\n                // In markdown,\r\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\r\n                // it is possible no alias is given in which case we fall back to the current editor lang\r\n                let languageId;\r\n                if (languageAlias) {\r\n                    languageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\r\n                }\r\n                else if (this._options.editor) {\r\n                    languageId = (_a = this._options.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId();\r\n                }\r\n                if (!languageId) {\r\n                    languageId = PLAINTEXT_LANGUAGE_ID;\r\n                }\r\n                const html = yield tokenizeToString(this._languageService, value, languageId);\r\n                const element = document.createElement('span');\r\n                element.innerHTML = ((_c = (_b = MarkdownRenderer_1._ttpTokenizer) === null || _b === void 0 ? void 0 : _b.createHTML(html)) !== null && _c !== void 0 ? _c : html);\r\n                // use \"good\" font\r\n                if (this._options.editor) {\r\n                    const fontInfo = this._options.editor.getOption(50 /* EditorOption.fontInfo */);\r\n                    applyFontInfo(element, fontInfo);\r\n                }\r\n                else if (this._options.codeBlockFontFamily) {\r\n                    element.style.fontFamily = this._options.codeBlockFontFamily;\r\n                }\r\n                if (this._options.codeBlockFontSize !== undefined) {\r\n                    element.style.fontSize = this._options.codeBlockFontSize;\r\n                }\r\n                return element;\r\n            }),\r\n            asyncRenderCallback: () => this._onDidRenderAsync.fire(),\r\n            actionHandler: {\r\n                callback: (link) => openLinkFromMarkdown(this._openerService, link, markdown.isTrusted),\r\n                disposables: disposables\r\n            }\r\n        };\r\n    }\r\n};\r\nMarkdownRenderer._ttpTokenizer = createTrustedTypesPolicy('tokenizeToString', {\r\n    createHTML(html) {\r\n        return html;\r\n    }\r\n});\r\nMarkdownRenderer = MarkdownRenderer_1 = __decorate([\r\n    __param(1, ILanguageService),\r\n    __param(2, IOpenerService)\r\n], MarkdownRenderer);\r\nexport { MarkdownRenderer };\r\nexport function openLinkFromMarkdown(openerService, link, isTrusted) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            return yield openerService.open(link, {\r\n                fromUserGesture: true,\r\n                allowContributedOpeners: true,\r\n                allowCommands: toAllowCommandsOption(isTrusted),\r\n            });\r\n        }\r\n        catch (e) {\r\n            onUnexpectedError(e);\r\n            return false;\r\n        }\r\n    });\r\n}\r\nfunction toAllowCommandsOption(isTrusted) {\r\n    if (isTrusted === true) {\r\n        return true; // Allow all commands\r\n    }\r\n    if (isTrusted && Array.isArray(isTrusted.enabledCommands)) {\r\n        return isTrusted.enabledCommands; // Allow subset of commands\r\n    }\r\n    return false; // Block commands\r\n}\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport './actionWidget.css';\r\nimport { localize } from '../../../nls.js';\r\nimport { acceptSelectedActionCommand, ActionList, previewSelectedActionCommand } from './actionList.js';\r\nimport { Action2, registerAction2 } from '../../actions/common/actions.js';\r\nimport { IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\r\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\r\nimport { registerSingleton } from '../../instantiation/common/extensions.js';\r\nimport { createDecorator, IInstantiationService } from '../../instantiation/common/instantiation.js';\r\nimport { inputActiveOptionBackground, registerColor } from '../../theme/common/colorRegistry.js';\r\nregisterColor('actionBar.toggledBackground', { dark: inputActiveOptionBackground, light: inputActiveOptionBackground, hcDark: inputActiveOptionBackground, hcLight: inputActiveOptionBackground, }, localize('actionBar.toggledBackground', 'Background color for toggled action items in action bar.'));\r\nconst ActionWidgetContextKeys = {\r\n    Visible: new RawContextKey('codeActionMenuVisible', false, localize('codeActionMenuVisible', \"Whether the action widget list is visible\"))\r\n};\r\nexport const IActionWidgetService = createDecorator('actionWidgetService');\r\nlet ActionWidgetService = class ActionWidgetService extends Disposable {\r\n    get isVisible() {\r\n        return ActionWidgetContextKeys.Visible.getValue(this._contextKeyService) || false;\r\n    }\r\n    constructor(_contextViewService, _contextKeyService, _instantiationService) {\r\n        super();\r\n        this._contextViewService = _contextViewService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._instantiationService = _instantiationService;\r\n        this._list = this._register(new MutableDisposable());\r\n    }\r\n    show(user, supportsPreview, items, delegate, anchor, container, actionBarActions) {\r\n        const visibleContext = ActionWidgetContextKeys.Visible.bindTo(this._contextKeyService);\r\n        const list = this._instantiationService.createInstance(ActionList, user, supportsPreview, items, delegate);\r\n        this._contextViewService.showContextView({\r\n            getAnchor: () => anchor,\r\n            render: (container) => {\r\n                visibleContext.set(true);\r\n                return this._renderWidget(container, list, actionBarActions !== null && actionBarActions !== void 0 ? actionBarActions : []);\r\n            },\r\n            onHide: (didCancel) => {\r\n                visibleContext.reset();\r\n                this._onWidgetClosed(didCancel);\r\n            },\r\n        }, container, false);\r\n    }\r\n    acceptSelected(preview) {\r\n        var _a;\r\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.acceptSelected(preview);\r\n    }\r\n    focusPrevious() {\r\n        var _a, _b;\r\n        (_b = (_a = this._list) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.focusPrevious();\r\n    }\r\n    focusNext() {\r\n        var _a, _b;\r\n        (_b = (_a = this._list) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.focusNext();\r\n    }\r\n    hide() {\r\n        var _a;\r\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.hide();\r\n        this._list.clear();\r\n    }\r\n    _renderWidget(element, list, actionBarActions) {\r\n        var _a;\r\n        const widget = document.createElement('div');\r\n        widget.classList.add('action-widget');\r\n        element.appendChild(widget);\r\n        this._list.value = list;\r\n        if (this._list.value) {\r\n            widget.appendChild(this._list.value.domNode);\r\n        }\r\n        else {\r\n            throw new Error('List has no value');\r\n        }\r\n        const renderDisposables = new DisposableStore();\r\n        // Invisible div to block mouse interaction in the rest of the UI\r\n        const menuBlock = document.createElement('div');\r\n        const block = element.appendChild(menuBlock);\r\n        block.classList.add('context-view-block');\r\n        renderDisposables.add(dom.addDisposableListener(block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\r\n        // Invisible div to block mouse interaction with the menu\r\n        const pointerBlockDiv = document.createElement('div');\r\n        const pointerBlock = element.appendChild(pointerBlockDiv);\r\n        pointerBlock.classList.add('context-view-pointerBlock');\r\n        // Removes block on click INSIDE widget or ANY mouse movement\r\n        renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.POINTER_MOVE, () => pointerBlock.remove()));\r\n        renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.MOUSE_DOWN, () => pointerBlock.remove()));\r\n        // Action bar\r\n        let actionBarWidth = 0;\r\n        if (actionBarActions.length) {\r\n            const actionBar = this._createActionBar('.action-widget-action-bar', actionBarActions);\r\n            if (actionBar) {\r\n                widget.appendChild(actionBar.getContainer().parentElement);\r\n                renderDisposables.add(actionBar);\r\n                actionBarWidth = actionBar.getContainer().offsetWidth;\r\n            }\r\n        }\r\n        const width = (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.layout(actionBarWidth);\r\n        widget.style.width = `${width}px`;\r\n        const focusTracker = renderDisposables.add(dom.trackFocus(element));\r\n        renderDisposables.add(focusTracker.onDidBlur(() => this.hide()));\r\n        return renderDisposables;\r\n    }\r\n    _createActionBar(className, actions) {\r\n        if (!actions.length) {\r\n            return undefined;\r\n        }\r\n        const container = dom.$(className);\r\n        const actionBar = new ActionBar(container);\r\n        actionBar.push(actions, { icon: false, label: true });\r\n        return actionBar;\r\n    }\r\n    _onWidgetClosed(didCancel) {\r\n        var _a;\r\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.hide(didCancel);\r\n    }\r\n};\r\nActionWidgetService = __decorate([\r\n    __param(0, IContextViewService),\r\n    __param(1, IContextKeyService),\r\n    __param(2, IInstantiationService)\r\n], ActionWidgetService);\r\nregisterSingleton(IActionWidgetService, ActionWidgetService, 1 /* InstantiationType.Delayed */);\r\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 1000;\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'hideCodeActionWidget',\r\n            title: {\r\n                value: localize('hideCodeActionWidget.title', \"Hide action widget\"),\r\n                original: 'Hide action widget'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 9 /* KeyCode.Escape */,\r\n                secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n            },\r\n        });\r\n    }\r\n    run(accessor) {\r\n        accessor.get(IActionWidgetService).hide();\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'selectPrevCodeAction',\r\n            title: {\r\n                value: localize('selectPrevCodeAction.title', \"Select previous action\"),\r\n                original: 'Select previous action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 16 /* KeyCode.UpArrow */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\r\n                mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] },\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.focusPrevious();\r\n        }\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'selectNextCodeAction',\r\n            title: {\r\n                value: localize('selectNextCodeAction.title', \"Select next action\"),\r\n                original: 'Select next action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 18 /* KeyCode.DownArrow */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\r\n                mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.focusNext();\r\n        }\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: acceptSelectedActionCommand,\r\n            title: {\r\n                value: localize('acceptSelected.title', \"Accept selected action\"),\r\n                original: 'Accept selected action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 3 /* KeyCode.Enter */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */],\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.acceptSelected();\r\n        }\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: previewSelectedActionCommand,\r\n            title: {\r\n                value: localize('previewSelected.title', \"Preview selected action\"),\r\n                original: 'Preview selected action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.acceptSelected(true);\r\n        }\r\n    }\r\n});\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\r\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { Codicon } from '../../../base/common/codicons.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { OS } from '../../../base/common/platform.js';\r\nimport { ThemeIcon } from '../../../base/common/themables.js';\r\nimport './actionWidget.css';\r\nimport { localize } from '../../../nls.js';\r\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { defaultListStyles } from '../../theme/browser/defaultStyles.js';\r\nimport { asCssVariable } from '../../theme/common/colorRegistry.js';\r\nexport const acceptSelectedActionCommand = 'acceptSelectedCodeAction';\r\nexport const previewSelectedActionCommand = 'previewSelectedCodeAction';\r\nclass HeaderRenderer {\r\n    get templateId() { return \"header\" /* ActionListItemKind.Header */; }\r\n    renderTemplate(container) {\r\n        container.classList.add('group-header');\r\n        const text = document.createElement('span');\r\n        container.append(text);\r\n        return { container, text };\r\n    }\r\n    renderElement(element, _index, templateData) {\r\n        var _a, _b;\r\n        templateData.text.textContent = (_b = (_a = element.group) === null || _a === void 0 ? void 0 : _a.title) !== null && _b !== void 0 ? _b : '';\r\n    }\r\n    disposeTemplate(_templateData) {\r\n        // noop\r\n    }\r\n}\r\nlet ActionItemRenderer = class ActionItemRenderer {\r\n    get templateId() { return \"action\" /* ActionListItemKind.Action */; }\r\n    constructor(_supportsPreview, _keybindingService) {\r\n        this._supportsPreview = _supportsPreview;\r\n        this._keybindingService = _keybindingService;\r\n    }\r\n    renderTemplate(container) {\r\n        container.classList.add(this.templateId);\r\n        const icon = document.createElement('div');\r\n        icon.className = 'icon';\r\n        container.append(icon);\r\n        const text = document.createElement('span');\r\n        text.className = 'title';\r\n        container.append(text);\r\n        const keybinding = new KeybindingLabel(container, OS);\r\n        return { container, icon, text, keybinding };\r\n    }\r\n    renderElement(element, _index, data) {\r\n        var _a, _b, _c;\r\n        if ((_a = element.group) === null || _a === void 0 ? void 0 : _a.icon) {\r\n            data.icon.className = ThemeIcon.asClassName(element.group.icon);\r\n            if (element.group.icon.color) {\r\n                data.icon.style.color = asCssVariable(element.group.icon.color.id);\r\n            }\r\n        }\r\n        else {\r\n            data.icon.className = ThemeIcon.asClassName(Codicon.lightBulb);\r\n            data.icon.style.color = 'var(--vscode-editorLightBulb-foreground)';\r\n        }\r\n        if (!element.item || !element.label) {\r\n            return;\r\n        }\r\n        data.text.textContent = stripNewlines(element.label);\r\n        data.keybinding.set(element.keybinding);\r\n        dom.setVisibility(!!element.keybinding, data.keybinding.element);\r\n        const actionTitle = (_b = this._keybindingService.lookupKeybinding(acceptSelectedActionCommand)) === null || _b === void 0 ? void 0 : _b.getLabel();\r\n        const previewTitle = (_c = this._keybindingService.lookupKeybinding(previewSelectedActionCommand)) === null || _c === void 0 ? void 0 : _c.getLabel();\r\n        data.container.classList.toggle('option-disabled', element.disabled);\r\n        if (element.disabled) {\r\n            data.container.title = element.label;\r\n        }\r\n        else if (actionTitle && previewTitle) {\r\n            if (this._supportsPreview && element.canPreview) {\r\n                data.container.title = localize({ key: 'label-preview', comment: ['placeholders are keybindings, e.g \"F2 to apply, Shift+F2 to preview\"'] }, \"{0} to apply, {1} to preview\", actionTitle, previewTitle);\r\n            }\r\n            else {\r\n                data.container.title = localize({ key: 'label', comment: ['placeholder is a keybinding, e.g \"F2 to apply\"'] }, \"{0} to apply\", actionTitle);\r\n            }\r\n        }\r\n        else {\r\n            data.container.title = '';\r\n        }\r\n    }\r\n    disposeTemplate(_templateData) {\r\n        // noop\r\n    }\r\n};\r\nActionItemRenderer = __decorate([\r\n    __param(1, IKeybindingService)\r\n], ActionItemRenderer);\r\nclass AcceptSelectedEvent extends UIEvent {\r\n    constructor() { super('acceptSelectedAction'); }\r\n}\r\nclass PreviewSelectedEvent extends UIEvent {\r\n    constructor() { super('previewSelectedAction'); }\r\n}\r\nfunction getKeyboardNavigationLabel(item) {\r\n    // Filter out header vs. action\r\n    if (item.kind === 'action') {\r\n        return item.label;\r\n    }\r\n    return undefined;\r\n}\r\nlet ActionList = class ActionList extends Disposable {\r\n    constructor(user, preview, items, _delegate, _contextViewService, _keybindingService) {\r\n        super();\r\n        this._delegate = _delegate;\r\n        this._contextViewService = _contextViewService;\r\n        this._keybindingService = _keybindingService;\r\n        this._actionLineHeight = 24;\r\n        this._headerLineHeight = 26;\r\n        this.cts = this._register(new CancellationTokenSource());\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.classList.add('actionList');\r\n        const virtualDelegate = {\r\n            getHeight: element => element.kind === \"header\" /* ActionListItemKind.Header */ ? this._headerLineHeight : this._actionLineHeight,\r\n            getTemplateId: element => element.kind\r\n        };\r\n        this._list = this._register(new List(user, this.domNode, virtualDelegate, [\r\n            new ActionItemRenderer(preview, this._keybindingService),\r\n            new HeaderRenderer(),\r\n        ], {\r\n            keyboardSupport: false,\r\n            typeNavigationEnabled: true,\r\n            keyboardNavigationLabelProvider: { getKeyboardNavigationLabel },\r\n            accessibilityProvider: {\r\n                getAriaLabel: element => {\r\n                    if (element.kind === \"action\" /* ActionListItemKind.Action */) {\r\n                        let label = element.label ? stripNewlines(element === null || element === void 0 ? void 0 : element.label) : '';\r\n                        if (element.disabled) {\r\n                            label = localize({ key: 'customQuickFixWidget.labels', comment: [`Action widget labels for accessibility.`] }, \"{0}, Disabled Reason: {1}\", label, element.disabled);\r\n                        }\r\n                        return label;\r\n                    }\r\n                    return null;\r\n                },\r\n                getWidgetAriaLabel: () => localize({ key: 'customQuickFixWidget', comment: [`An action widget option`] }, \"Action Widget\"),\r\n                getRole: (e) => e.kind === \"action\" /* ActionListItemKind.Action */ ? 'option' : 'separator',\r\n                getWidgetRole: () => 'listbox',\r\n            },\r\n        }));\r\n        this._list.style(defaultListStyles);\r\n        this._register(this._list.onMouseClick(e => this.onListClick(e)));\r\n        this._register(this._list.onMouseOver(e => this.onListHover(e)));\r\n        this._register(this._list.onDidChangeFocus(() => this.onFocus()));\r\n        this._register(this._list.onDidChangeSelection(e => this.onListSelection(e)));\r\n        this._allMenuItems = items;\r\n        this._list.splice(0, this._list.length, this._allMenuItems);\r\n        if (this._list.length) {\r\n            this.focusNext();\r\n        }\r\n    }\r\n    focusCondition(element) {\r\n        return !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */;\r\n    }\r\n    hide(didCancel) {\r\n        this._delegate.onHide(didCancel);\r\n        this.cts.cancel();\r\n        this._contextViewService.hideContextView();\r\n    }\r\n    layout(minWidth) {\r\n        // Updating list height, depending on how many separators and headers there are.\r\n        const numHeaders = this._allMenuItems.filter(item => item.kind === 'header').length;\r\n        const itemsHeight = this._allMenuItems.length * this._actionLineHeight;\r\n        const heightWithHeaders = itemsHeight + numHeaders * this._headerLineHeight - numHeaders * this._actionLineHeight;\r\n        this._list.layout(heightWithHeaders);\r\n        // For finding width dynamically (not using resize observer)\r\n        const itemWidths = this._allMenuItems.map((_, index) => {\r\n            const element = document.getElementById(this._list.getElementID(index));\r\n            if (element) {\r\n                element.style.width = 'auto';\r\n                const width = element.getBoundingClientRect().width;\r\n                element.style.width = '';\r\n                return width;\r\n            }\r\n            return 0;\r\n        });\r\n        // resize observer - can be used in the future since list widget supports dynamic height but not width\r\n        const width = Math.max(...itemWidths, minWidth);\r\n        const maxVhPrecentage = 0.7;\r\n        const height = Math.min(heightWithHeaders, document.body.clientHeight * maxVhPrecentage);\r\n        this._list.layout(height, width);\r\n        this.domNode.style.height = `${height}px`;\r\n        this._list.domFocus();\r\n        return width;\r\n    }\r\n    focusPrevious() {\r\n        this._list.focusPrevious(1, true, undefined, this.focusCondition);\r\n    }\r\n    focusNext() {\r\n        this._list.focusNext(1, true, undefined, this.focusCondition);\r\n    }\r\n    acceptSelected(preview) {\r\n        const focused = this._list.getFocus();\r\n        if (focused.length === 0) {\r\n            return;\r\n        }\r\n        const focusIndex = focused[0];\r\n        const element = this._list.element(focusIndex);\r\n        if (!this.focusCondition(element)) {\r\n            return;\r\n        }\r\n        const event = preview ? new PreviewSelectedEvent() : new AcceptSelectedEvent();\r\n        this._list.setSelection([focusIndex], event);\r\n    }\r\n    onListSelection(e) {\r\n        if (!e.elements.length) {\r\n            return;\r\n        }\r\n        const element = e.elements[0];\r\n        if (element.item && this.focusCondition(element)) {\r\n            this._delegate.onSelect(element.item, e.browserEvent instanceof PreviewSelectedEvent);\r\n        }\r\n        else {\r\n            this._list.setSelection([]);\r\n        }\r\n    }\r\n    onFocus() {\r\n        var _a, _b;\r\n        this._list.domFocus();\r\n        const focused = this._list.getFocus();\r\n        if (focused.length === 0) {\r\n            return;\r\n        }\r\n        const focusIndex = focused[0];\r\n        const element = this._list.element(focusIndex);\r\n        (_b = (_a = this._delegate).onFocus) === null || _b === void 0 ? void 0 : _b.call(_a, element.item);\r\n    }\r\n    onListHover(e) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const element = e.element;\r\n            if (element && element.item && this.focusCondition(element)) {\r\n                if (this._delegate.onHover && !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */) {\r\n                    const result = yield this._delegate.onHover(element.item, this.cts.token);\r\n                    element.canPreview = result ? result.canPreview : undefined;\r\n                }\r\n                if (e.index) {\r\n                    this._list.splice(e.index, 1, [element]);\r\n                }\r\n            }\r\n            this._list.setFocus(typeof e.index === 'number' ? [e.index] : []);\r\n        });\r\n    }\r\n    onListClick(e) {\r\n        if (e.element && this.focusCondition(e.element)) {\r\n            this._list.setFocus([]);\r\n        }\r\n    }\r\n};\r\nActionList = __decorate([\r\n    __param(4, IContextViewService),\r\n    __param(5, IKeybindingService)\r\n], ActionList);\r\nexport { ActionList };\r\nfunction stripNewlines(str) {\r\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\r\nimport { isCancellationError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { isEqual } from '../../../../base/common/resources.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { Progress } from '../../../../platform/progress/common/progress.js';\r\nimport { CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\r\nimport { getCodeActions } from './codeAction.js';\r\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\r\nclass CodeActionOracle extends Disposable {\r\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._markerService = _markerService;\r\n        this._signalChange = _signalChange;\r\n        this._delay = _delay;\r\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\r\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\r\n        this._register(this._editor.onDidChangeCursorPosition(() => this._tryAutoTrigger()));\r\n    }\r\n    trigger(trigger) {\r\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\r\n        this._signalChange(selection ? { trigger, selection } : undefined);\r\n    }\r\n    _onMarkerChanges(resources) {\r\n        const model = this._editor.getModel();\r\n        if (model && resources.some(resource => isEqual(resource, model.uri))) {\r\n            this._tryAutoTrigger();\r\n        }\r\n    }\r\n    _tryAutoTrigger() {\r\n        this._autoTriggerTimer.cancelAndSet(() => {\r\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\r\n        }, this._delay);\r\n    }\r\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\r\n        if (!this._editor.hasModel()) {\r\n            return undefined;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const selection = this._editor.getSelection();\r\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\r\n            const { lineNumber, column } = selection.getPosition();\r\n            const line = model.getLineContent(lineNumber);\r\n            if (line.length === 0) {\r\n                // empty line\r\n                return undefined;\r\n            }\r\n            else if (column === 1) {\r\n                // look only right\r\n                if (/\\s/.test(line[0])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else if (column === model.getLineMaxColumn(lineNumber)) {\r\n                // look only left\r\n                if (/\\s/.test(line[line.length - 1])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else {\r\n                // look left and right\r\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n        }\r\n        return selection;\r\n    }\r\n}\r\nexport var CodeActionsState;\r\n(function (CodeActionsState) {\r\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\r\n    class Triggered {\r\n        constructor(trigger, position, _cancellablePromise) {\r\n            this.trigger = trigger;\r\n            this.position = position;\r\n            this._cancellablePromise = _cancellablePromise;\r\n            this.type = 1 /* Type.Triggered */;\r\n            this.actions = _cancellablePromise.catch((e) => {\r\n                if (isCancellationError(e)) {\r\n                    return emptyCodeActionSet;\r\n                }\r\n                throw e;\r\n            });\r\n        }\r\n        cancel() {\r\n            this._cancellablePromise.cancel();\r\n        }\r\n    }\r\n    CodeActionsState.Triggered = Triggered;\r\n})(CodeActionsState || (CodeActionsState = {}));\r\nconst emptyCodeActionSet = Object.freeze({\r\n    allActions: [],\r\n    validActions: [],\r\n    dispose: () => { },\r\n    documentation: [],\r\n    hasAutoFix: false\r\n});\r\nexport class CodeActionModel extends Disposable {\r\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService, _configurationService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._registry = _registry;\r\n        this._markerService = _markerService;\r\n        this._progressService = _progressService;\r\n        this._configurationService = _configurationService;\r\n        this._codeActionOracle = this._register(new MutableDisposable());\r\n        this._state = CodeActionsState.Empty;\r\n        this._onDidChangeState = this._register(new Emitter());\r\n        this.onDidChangeState = this._onDidChangeState.event;\r\n        this._disposed = false;\r\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\r\n        this._register(this._editor.onDidChangeModel(() => this._update()));\r\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\r\n        this._register(this._registry.onDidChange(() => this._update()));\r\n        this._update();\r\n    }\r\n    dispose() {\r\n        if (this._disposed) {\r\n            return;\r\n        }\r\n        this._disposed = true;\r\n        super.dispose();\r\n        this.setState(CodeActionsState.Empty, true);\r\n    }\r\n    _settingEnabledNearbyQuickfixes() {\r\n        var _a;\r\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\r\n        return this._configurationService ? this._configurationService.getValue('editor.codeActionWidget.includeNearbyQuickfixes', { resource: model === null || model === void 0 ? void 0 : model.uri }) : false;\r\n    }\r\n    _update() {\r\n        if (this._disposed) {\r\n            return;\r\n        }\r\n        this._codeActionOracle.value = undefined;\r\n        this.setState(CodeActionsState.Empty);\r\n        const model = this._editor.getModel();\r\n        if (model\r\n            && this._registry.has(model)\r\n            && !this._editor.getOption(90 /* EditorOption.readOnly */)) {\r\n            const supportedActions = this._registry.all(model).flatMap(provider => { var _a; return (_a = provider.providedCodeActionKinds) !== null && _a !== void 0 ? _a : []; });\r\n            this._supportedCodeActions.set(supportedActions.join(' '));\r\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\r\n                var _a;\r\n                if (!trigger) {\r\n                    this.setState(CodeActionsState.Empty);\r\n                    return;\r\n                }\r\n                const startPosition = trigger.selection.getStartPosition();\r\n                const actions = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n                    var _b, _c, _d, _e, _f, _g;\r\n                    if (this._settingEnabledNearbyQuickfixes() && trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */ && (trigger.trigger.triggerAction === CodeActionTriggerSource.QuickFix || ((_c = (_b = trigger.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.contains(CodeActionKind.QuickFix)))) {\r\n                        const codeActionSet = yield getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\r\n                        if (token.isCancellationRequested) {\r\n                            return emptyCodeActionSet;\r\n                        }\r\n                        // Search for quickfixes in the curret code action set.\r\n                        const foundQuickfix = (_d = codeActionSet.validActions) === null || _d === void 0 ? void 0 : _d.some(action => action.action.kind ? CodeActionKind.QuickFix.contains(new CodeActionKind(action.action.kind)) : false);\r\n                        if (!foundQuickfix) {\r\n                            const allMarkers = this._markerService.read({ resource: model.uri });\r\n                            // If markers exists, and there are no quickfixes found or length is zero, check for quickfixes on that line.\r\n                            if (allMarkers.length > 0) {\r\n                                const currPosition = trigger.selection.getPosition();\r\n                                let trackedPosition = currPosition;\r\n                                let distance = Number.MAX_VALUE;\r\n                                let toBeModified = false;\r\n                                for (const marker of allMarkers) {\r\n                                    const col = marker.endColumn;\r\n                                    const row = marker.endLineNumber;\r\n                                    const startRow = marker.startLineNumber;\r\n                                    // Found quickfix on the same line and check relative distance to other markers\r\n                                    if ((row === currPosition.lineNumber || startRow === currPosition.lineNumber) && Math.abs(currPosition.column - col) < distance) {\r\n                                        distance = Math.abs(currPosition.column - col);\r\n                                        toBeModified = true;\r\n                                        trackedPosition = new Position(row, col);\r\n                                    }\r\n                                }\r\n                                // Only retriggers if actually found quickfix on the same line as cursor\r\n                                if (toBeModified) {\r\n                                    const newCodeActionTrigger = {\r\n                                        type: trigger.trigger.type,\r\n                                        triggerAction: trigger.trigger.triggerAction,\r\n                                        filter: { include: ((_e = trigger.trigger.filter) === null || _e === void 0 ? void 0 : _e.include) ? (_f = trigger.trigger.filter) === null || _f === void 0 ? void 0 : _f.include : CodeActionKind.QuickFix },\r\n                                        autoApply: trigger.trigger.autoApply,\r\n                                        context: { notAvailableMessage: ((_g = trigger.trigger.context) === null || _g === void 0 ? void 0 : _g.notAvailableMessage) || '', position: trackedPosition }\r\n                                    };\r\n                                    const selectionAsPosition = new Selection(trackedPosition.lineNumber, trackedPosition.column, trackedPosition.lineNumber, trackedPosition.column);\r\n                                    const actionsAtMarker = yield getCodeActions(this._registry, model, selectionAsPosition, newCodeActionTrigger, Progress.None, token);\r\n                                    const currentActions = [...codeActionSet.validActions];\r\n                                    if (actionsAtMarker.validActions.length !== 0) {\r\n                                        actionsAtMarker.validActions.forEach(action => {\r\n                                            action.highlightRange = action.action.isPreferred;\r\n                                        });\r\n                                        // Already filtered through to only get quickfixes, so no need to filter again.\r\n                                        currentActions.push(...actionsAtMarker.validActions);\r\n                                    }\r\n                                    return { validActions: currentActions, allActions: codeActionSet.allActions, documentation: codeActionSet.documentation, hasAutoFix: codeActionSet.hasAutoFix, dispose: () => { codeActionSet.dispose(); } };\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    // temporarilly hiding here as this is enabled/disabled behind a setting.\r\n                    return getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\r\n                }));\r\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\r\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\r\n                }\r\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, startPosition, actions));\r\n            }, undefined);\r\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\r\n        }\r\n        else {\r\n            this._supportedCodeActions.reset();\r\n        }\r\n    }\r\n    trigger(trigger) {\r\n        var _a;\r\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\r\n    }\r\n    setState(newState, skipNotify) {\r\n        if (newState === this._state) {\r\n            return;\r\n        }\r\n        // Cancel old request\r\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\r\n            this._state.cancel();\r\n        }\r\n        this._state = newState;\r\n        if (!skipNotify && !this._disposed) {\r\n            this._onDidChangeState.fire(newState);\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { getCodeLensModel } from './codelens.js';\r\nimport { ICodeLensCache } from './codeLensCache.js';\r\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nlet CodeLensContribution = class CodeLensContribution {\r\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\r\n        this._editor = _editor;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._commandService = _commandService;\r\n        this._notificationService = _notificationService;\r\n        this._codeLensCache = _codeLensCache;\r\n        this._disposables = new DisposableStore();\r\n        this._localToDispose = new DisposableStore();\r\n        this._lenses = [];\r\n        this._oldCodeLensModels = new DisposableStore();\r\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\r\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\r\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\r\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\r\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\r\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(19 /* EditorOption.codeLensFontSize */) || e.hasChanged(18 /* EditorOption.codeLensFontFamily */)) {\r\n                this._updateLensStyle();\r\n            }\r\n            if (e.hasChanged(17 /* EditorOption.codeLens */)) {\r\n                this._onModelChange();\r\n            }\r\n        }));\r\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\r\n        this._onModelChange();\r\n        this._updateLensStyle();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        this._localDispose();\r\n        this._disposables.dispose();\r\n        this._oldCodeLensModels.dispose();\r\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\r\n    }\r\n    _getLayoutInfo() {\r\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(66 /* EditorOption.lineHeight */) / this._editor.getOption(52 /* EditorOption.fontSize */));\r\n        let fontSize = this._editor.getOption(19 /* EditorOption.codeLensFontSize */);\r\n        if (!fontSize || fontSize < 5) {\r\n            fontSize = (this._editor.getOption(52 /* EditorOption.fontSize */) * .9) | 0;\r\n        }\r\n        return {\r\n            fontSize,\r\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\r\n        };\r\n    }\r\n    _updateLensStyle() {\r\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\r\n        const fontFamily = this._editor.getOption(18 /* EditorOption.codeLensFontFamily */);\r\n        const editorFontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        const { style } = this._editor.getContainerDomNode();\r\n        style.setProperty('--vscode-editorCodeLens-lineHeight', `${codeLensHeight}px`);\r\n        style.setProperty('--vscode-editorCodeLens-fontSize', `${fontSize}px`);\r\n        style.setProperty('--vscode-editorCodeLens-fontFeatureSettings', editorFontInfo.fontFeatureSettings);\r\n        if (fontFamily) {\r\n            style.setProperty('--vscode-editorCodeLens-fontFamily', fontFamily);\r\n            style.setProperty('--vscode-editorCodeLens-fontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\r\n        }\r\n        //\r\n        this._editor.changeViewZones(accessor => {\r\n            for (const lens of this._lenses) {\r\n                lens.updateHeight(codeLensHeight, accessor);\r\n            }\r\n        });\r\n    }\r\n    _localDispose() {\r\n        var _a, _b, _c;\r\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\r\n        this._getCodeLensModelPromise = undefined;\r\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\r\n        this._resolveCodeLensesPromise = undefined;\r\n        this._localToDispose.clear();\r\n        this._oldCodeLensModels.clear();\r\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\r\n    }\r\n    _onModelChange() {\r\n        this._localDispose();\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        if (!this._editor.getOption(17 /* EditorOption.codeLens */) || model.isTooLargeForTokenization()) {\r\n            return;\r\n        }\r\n        const cachedLenses = this._codeLensCache.get(model);\r\n        if (cachedLenses) {\r\n            this._renderCodeLensSymbols(cachedLenses);\r\n        }\r\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\r\n            // no provider -> return but check with\r\n            // cached lenses. they expire after 30 seconds\r\n            if (cachedLenses) {\r\n                this._localToDispose.add(disposableTimeout(() => {\r\n                    const cachedLensesNow = this._codeLensCache.get(model);\r\n                    if (cachedLenses === cachedLensesNow) {\r\n                        this._codeLensCache.delete(model);\r\n                        this._onModelChange();\r\n                    }\r\n                }, 30 * 1000));\r\n            }\r\n            return;\r\n        }\r\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\r\n            if (typeof provider.onDidChange === 'function') {\r\n                const registration = provider.onDidChange(() => scheduler.schedule());\r\n                this._localToDispose.add(registration);\r\n            }\r\n        }\r\n        const scheduler = new RunOnceScheduler(() => {\r\n            var _a;\r\n            const t1 = Date.now();\r\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\r\n            this._getCodeLensModelPromise.then(result => {\r\n                if (this._currentCodeLensModel) {\r\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\r\n                }\r\n                this._currentCodeLensModel = result;\r\n                // cache model to reduce flicker\r\n                this._codeLensCache.put(model, result);\r\n                // update moving average\r\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\r\n                scheduler.delay = newDelay;\r\n                // render lenses\r\n                this._renderCodeLensSymbols(result);\r\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\r\n                this._resolveCodeLensesInViewportSoon();\r\n            }, onUnexpectedError);\r\n        }, this._provideCodeLensDebounce.get(model));\r\n        this._localToDispose.add(scheduler);\r\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\r\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\r\n            var _a;\r\n            this._editor.changeDecorations(decorationsAccessor => {\r\n                this._editor.changeViewZones(viewZonesAccessor => {\r\n                    const toDispose = [];\r\n                    let lastLensLineNumber = -1;\r\n                    this._lenses.forEach((lens) => {\r\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\r\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\r\n                            // line_number -> lenses should never be on the same line\r\n                            toDispose.push(lens);\r\n                        }\r\n                        else {\r\n                            lens.update(viewZonesAccessor);\r\n                            lastLensLineNumber = lens.getLineNumber();\r\n                        }\r\n                    });\r\n                    const helper = new CodeLensHelper();\r\n                    toDispose.forEach((l) => {\r\n                        l.dispose(helper, viewZonesAccessor);\r\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\r\n                    });\r\n                    helper.commit(decorationsAccessor);\r\n                });\r\n            });\r\n            // Ask for all references again\r\n            scheduler.schedule();\r\n            // Cancel pending and active resolve requests\r\n            this._resolveCodeLensesScheduler.cancel();\r\n            (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            this._resolveCodeLensesPromise = undefined;\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\r\n            scheduler.schedule();\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidBlurEditorText(() => {\r\n            scheduler.cancel();\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\r\n            if (e.scrollTopChanged && this._lenses.length > 0) {\r\n                this._resolveCodeLensesInViewportSoon();\r\n            }\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\r\n            this._resolveCodeLensesInViewportSoon();\r\n        }));\r\n        this._localToDispose.add(toDisposable(() => {\r\n            if (this._editor.getModel()) {\r\n                const scrollState = StableEditorScrollState.capture(this._editor);\r\n                this._editor.changeDecorations(decorationsAccessor => {\r\n                    this._editor.changeViewZones(viewZonesAccessor => {\r\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\r\n                    });\r\n                });\r\n                scrollState.restore(this._editor);\r\n            }\r\n            else {\r\n                // No accessors available\r\n                this._disposeAllLenses(undefined, undefined);\r\n            }\r\n        }));\r\n        this._localToDispose.add(this._editor.onMouseDown(e => {\r\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\r\n                return;\r\n            }\r\n            let target = e.target.element;\r\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\r\n                target = target.parentElement;\r\n            }\r\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\r\n                for (const lens of this._lenses) {\r\n                    const command = lens.getCommand(target);\r\n                    if (command) {\r\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }));\r\n        scheduler.schedule();\r\n    }\r\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\r\n        const helper = new CodeLensHelper();\r\n        for (const lens of this._lenses) {\r\n            lens.dispose(helper, viewZoneChangeAccessor);\r\n        }\r\n        if (decChangeAccessor) {\r\n            helper.commit(decChangeAccessor);\r\n        }\r\n        this._lenses.length = 0;\r\n    }\r\n    _renderCodeLensSymbols(symbols) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const maxLineNumber = this._editor.getModel().getLineCount();\r\n        const groups = [];\r\n        let lastGroup;\r\n        for (const symbol of symbols.lenses) {\r\n            const line = symbol.symbol.range.startLineNumber;\r\n            if (line < 1 || line > maxLineNumber) {\r\n                // invalid code lens\r\n                continue;\r\n            }\r\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\r\n                // on same line as previous\r\n                lastGroup.push(symbol);\r\n            }\r\n            else {\r\n                // on later line as previous\r\n                lastGroup = [symbol];\r\n                groups.push(lastGroup);\r\n            }\r\n        }\r\n        if (!groups.length && !this._lenses.length) {\r\n            // Nothing to change\r\n            return;\r\n        }\r\n        const scrollState = StableEditorScrollState.capture(this._editor);\r\n        const layoutInfo = this._getLayoutInfo();\r\n        this._editor.changeDecorations(decorationsAccessor => {\r\n            this._editor.changeViewZones(viewZoneAccessor => {\r\n                const helper = new CodeLensHelper();\r\n                let codeLensIndex = 0;\r\n                let groupsIndex = 0;\r\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\r\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\r\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\r\n                    if (codeLensLineNumber < symbolsLineNumber) {\r\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\r\n                        this._lenses.splice(codeLensIndex, 1);\r\n                    }\r\n                    else if (codeLensLineNumber === symbolsLineNumber) {\r\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\r\n                        groupsIndex++;\r\n                        codeLensIndex++;\r\n                    }\r\n                    else {\r\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\r\n                        codeLensIndex++;\r\n                        groupsIndex++;\r\n                    }\r\n                }\r\n                // Delete extra code lenses\r\n                while (codeLensIndex < this._lenses.length) {\r\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\r\n                    this._lenses.splice(codeLensIndex, 1);\r\n                }\r\n                // Create extra symbols\r\n                while (groupsIndex < groups.length) {\r\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\r\n                    groupsIndex++;\r\n                }\r\n                helper.commit(decorationsAccessor);\r\n            });\r\n        });\r\n        scrollState.restore(this._editor);\r\n    }\r\n    _resolveCodeLensesInViewportSoon() {\r\n        const model = this._editor.getModel();\r\n        if (model) {\r\n            this._resolveCodeLensesScheduler.schedule();\r\n        }\r\n    }\r\n    _resolveCodeLensesInViewport() {\r\n        var _a;\r\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\r\n        this._resolveCodeLensesPromise = undefined;\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        const toResolve = [];\r\n        const lenses = [];\r\n        this._lenses.forEach((lens) => {\r\n            const request = lens.computeIfNecessary(model);\r\n            if (request) {\r\n                toResolve.push(request);\r\n                lenses.push(lens);\r\n            }\r\n        });\r\n        if (toResolve.length === 0) {\r\n            return;\r\n        }\r\n        const t1 = Date.now();\r\n        const resolvePromise = createCancelablePromise(token => {\r\n            const promises = toResolve.map((request, i) => {\r\n                const resolvedSymbols = new Array(request.length);\r\n                const promises = request.map((request, i) => {\r\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\r\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\r\n                            resolvedSymbols[i] = symbol;\r\n                        }, onUnexpectedExternalError);\r\n                    }\r\n                    else {\r\n                        resolvedSymbols[i] = request.symbol;\r\n                        return Promise.resolve(undefined);\r\n                    }\r\n                });\r\n                return Promise.all(promises).then(() => {\r\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\r\n                        lenses[i].updateCommands(resolvedSymbols);\r\n                    }\r\n                });\r\n            });\r\n            return Promise.all(promises);\r\n        });\r\n        this._resolveCodeLensesPromise = resolvePromise;\r\n        this._resolveCodeLensesPromise.then(() => {\r\n            // update moving average\r\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\r\n            this._resolveCodeLensesScheduler.delay = newDelay;\r\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\r\n                this._codeLensCache.put(model, this._currentCodeLensModel);\r\n            }\r\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\r\n            if (resolvePromise === this._resolveCodeLensesPromise) {\r\n                this._resolveCodeLensesPromise = undefined;\r\n            }\r\n        }, err => {\r\n            onUnexpectedError(err); // can also be cancellation!\r\n            if (resolvePromise === this._resolveCodeLensesPromise) {\r\n                this._resolveCodeLensesPromise = undefined;\r\n            }\r\n        });\r\n    }\r\n    getModel() {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._getCodeLensModelPromise;\r\n            yield this._resolveCodeLensesPromise;\r\n            return !((_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.isDisposed)\r\n                ? this._currentCodeLensModel\r\n                : undefined;\r\n        });\r\n    }\r\n};\r\nCodeLensContribution.ID = 'css.editor.codeLens';\r\nCodeLensContribution = __decorate([\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, ILanguageFeatureDebounceService),\r\n    __param(3, ICommandService),\r\n    __param(4, INotificationService),\r\n    __param(5, ICodeLensCache)\r\n], CodeLensContribution);\r\nexport { CodeLensContribution };\r\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'codelens.showLensesInCurrentLine',\r\n            precondition: EditorContextKeys.hasCodeLensProvider,\r\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\r\n            alias: 'Show CodeLens Commands For Current Line',\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!editor.hasModel()) {\r\n                return;\r\n            }\r\n            const quickInputService = accessor.get(IQuickInputService);\r\n            const commandService = accessor.get(ICommandService);\r\n            const notificationService = accessor.get(INotificationService);\r\n            const lineNumber = editor.getSelection().positionLineNumber;\r\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\r\n            if (!codelensController) {\r\n                return;\r\n            }\r\n            const model = yield codelensController.getModel();\r\n            if (!model) {\r\n                // nothing\r\n                return;\r\n            }\r\n            const items = [];\r\n            for (const lens of model.lenses) {\r\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\r\n                    items.push({\r\n                        label: lens.symbol.command.title,\r\n                        command: lens.symbol.command\r\n                    });\r\n                }\r\n            }\r\n            if (items.length === 0) {\r\n                // We dont want an empty picker\r\n                return;\r\n            }\r\n            const item = yield quickInputService.pick(items, {\r\n                canPickMany: false,\r\n                placeHolder: localize('placeHolder', \"Select a command\")\r\n            });\r\n            if (!item) {\r\n                // Nothing picked\r\n                return;\r\n            }\r\n            let command = item.command;\r\n            if (model.isDisposed) {\r\n                // try to find the same command again in-case the model has been re-created in the meantime\r\n                // this is a best attempt approach which shouldn't be needed because eager model re-creates\r\n                // shouldn't happen due to focus in/out anymore\r\n                const newModel = yield codelensController.getModel();\r\n                const newLens = newModel === null || newModel === void 0 ? void 0 : newModel.lenses.find(lens => { var _a; return lens.symbol.range.startLineNumber === lineNumber && ((_a = lens.symbol.command) === null || _a === void 0 ? void 0 : _a.title) === command.title; });\r\n                if (!newLens || !newLens.symbol.command) {\r\n                    return;\r\n                }\r\n                command = newLens.symbol.command;\r\n            }\r\n            try {\r\n                yield commandService.executeCommand(command.id, ...(command.arguments || []));\r\n            }\r\n            catch (err) {\r\n                notificationService.error(err);\r\n            }\r\n        });\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nexport class CodeLensModel {\r\n    constructor() {\r\n        this.lenses = [];\r\n        this._disposables = new DisposableStore();\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n    }\r\n    get isDisposed() {\r\n        return this._disposables.isDisposed;\r\n    }\r\n    add(list, provider) {\r\n        this._disposables.add(list);\r\n        for (const symbol of list.lenses) {\r\n            this.lenses.push({ symbol, provider });\r\n        }\r\n    }\r\n}\r\nexport function getCodeLensModel(registry, model, token) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const provider = registry.ordered(model);\r\n        const providerRanks = new Map();\r\n        const result = new CodeLensModel();\r\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\r\n            providerRanks.set(provider, i);\r\n            try {\r\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\r\n                if (list) {\r\n                    result.add(list, provider);\r\n                }\r\n            }\r\n            catch (err) {\r\n                onUnexpectedExternalError(err);\r\n            }\r\n        }));\r\n        yield Promise.all(promises);\r\n        result.lenses = result.lenses.sort((a, b) => {\r\n            // sort by lineNumber, provider-rank, and column\r\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\r\n                return -1;\r\n            }\r\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\r\n                return 1;\r\n            }\r\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\r\n                return -1;\r\n            }\r\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\r\n                return 1;\r\n            }\r\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\r\n                return -1;\r\n            }\r\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n        return result;\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\r\n    let [uri, itemResolveCount] = args;\r\n    assertType(URI.isUri(uri));\r\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\r\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\r\n    const model = accessor.get(IModelService).getModel(uri);\r\n    if (!model) {\r\n        throw illegalArgument();\r\n    }\r\n    const result = [];\r\n    const disposables = new DisposableStore();\r\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\r\n        disposables.add(value);\r\n        const resolve = [];\r\n        for (const item of value.lenses) {\r\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\r\n                result.push(item.symbol);\r\n            }\r\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\r\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\r\n            }\r\n        }\r\n        return Promise.all(resolve);\r\n    }).then(() => {\r\n        return result;\r\n    }).finally(() => {\r\n        // make sure to return results, then (on next tick)\r\n        // dispose the results\r\n        setTimeout(() => disposables.dispose(), 100);\r\n    });\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { runWhenIdle } from '../../../../base/common/async.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { LRUCache } from '../../../../base/common/map.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { CodeLensModel } from './codelens.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\r\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\r\nclass CacheItem {\r\n    constructor(lineCount, data) {\r\n        this.lineCount = lineCount;\r\n        this.data = data;\r\n    }\r\n}\r\nlet CodeLensCache = class CodeLensCache {\r\n    constructor(storageService) {\r\n        this._fakeProvider = new class {\r\n            provideCodeLenses() {\r\n                throw new Error('not supported');\r\n            }\r\n        };\r\n        this._cache = new LRUCache(20, 0.75);\r\n        // remove old data\r\n        const oldkey = 'codelens/cache';\r\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\r\n        // restore lens data on start\r\n        const key = 'codelens/cache2';\r\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\r\n        this._deserialize(raw);\r\n        // store lens data on shutdown\r\n        Event.once(storageService.onWillSaveState)(e => {\r\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\r\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\r\n            }\r\n        });\r\n    }\r\n    put(model, data) {\r\n        // create a copy of the model that is without command-ids\r\n        // but with comand-labels\r\n        const copyItems = data.lenses.map(item => {\r\n            var _a;\r\n            return {\r\n                range: item.symbol.range,\r\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\r\n            };\r\n        });\r\n        const copyModel = new CodeLensModel();\r\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\r\n        const item = new CacheItem(model.getLineCount(), copyModel);\r\n        this._cache.set(model.uri.toString(), item);\r\n    }\r\n    get(model) {\r\n        const item = this._cache.get(model.uri.toString());\r\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\r\n    }\r\n    delete(model) {\r\n        this._cache.delete(model.uri.toString());\r\n    }\r\n    // --- persistence\r\n    _serialize() {\r\n        const data = Object.create(null);\r\n        for (const [key, value] of this._cache) {\r\n            const lines = new Set();\r\n            for (const d of value.data.lenses) {\r\n                lines.add(d.symbol.range.startLineNumber);\r\n            }\r\n            data[key] = {\r\n                lineCount: value.lineCount,\r\n                lines: [...lines.values()]\r\n            };\r\n        }\r\n        return JSON.stringify(data);\r\n    }\r\n    _deserialize(raw) {\r\n        try {\r\n            const data = JSON.parse(raw);\r\n            for (const key in data) {\r\n                const element = data[key];\r\n                const lenses = [];\r\n                for (const line of element.lines) {\r\n                    lenses.push({ range: new Range(line, 1, line, 11) });\r\n                }\r\n                const model = new CodeLensModel();\r\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\r\n                this._cache.set(key, new CacheItem(element.lineCount, model));\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // ignore...\r\n        }\r\n    }\r\n};\r\nCodeLensCache = __decorate([\r\n    __param(0, IStorageService)\r\n], CodeLensCache);\r\nexport { CodeLensCache };\r\nregisterSingleton(ICodeLensCache, CodeLensCache, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\r\nimport './codelensWidget.css';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nclass CodeLensViewZone {\r\n    constructor(afterLineNumber, heightInPx, onHeight) {\r\n        /**\r\n         * We want that this view zone, which reserves space for a code lens appears\r\n         * as close as possible to the next line, so we use a very large value here.\r\n         */\r\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.heightInPx = heightInPx;\r\n        this._onHeight = onHeight;\r\n        this.suppressMouseDown = true;\r\n        this.domNode = document.createElement('div');\r\n    }\r\n    onComputedHeight(height) {\r\n        if (this._lastHeight === undefined) {\r\n            this._lastHeight = height;\r\n        }\r\n        else if (this._lastHeight !== height) {\r\n            this._lastHeight = height;\r\n            this._onHeight();\r\n        }\r\n    }\r\n    isVisible() {\r\n        return this._lastHeight !== 0\r\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\r\n    }\r\n}\r\nclass CodeLensContentWidget {\r\n    constructor(editor, line) {\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = false;\r\n        this.suppressMouseDown = true;\r\n        this._commands = new Map();\r\n        this._isEmpty = true;\r\n        this._editor = editor;\r\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\r\n        this.updatePosition(line);\r\n        this._domNode = document.createElement('span');\r\n        this._domNode.className = `codelens-decoration`;\r\n    }\r\n    withCommands(lenses, animate) {\r\n        this._commands.clear();\r\n        const children = [];\r\n        let hasSymbol = false;\r\n        for (let i = 0; i < lenses.length; i++) {\r\n            const lens = lenses[i];\r\n            if (!lens) {\r\n                continue;\r\n            }\r\n            hasSymbol = true;\r\n            if (lens.command) {\r\n                const title = renderLabelWithIcons(lens.command.title.trim());\r\n                if (lens.command.id) {\r\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\r\n                    this._commands.set(String(i), lens.command);\r\n                }\r\n                else {\r\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\r\n                }\r\n                if (i + 1 < lenses.length) {\r\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\r\n                }\r\n            }\r\n        }\r\n        if (!hasSymbol) {\r\n            // symbols but no commands\r\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\r\n        }\r\n        else {\r\n            // symbols and commands\r\n            dom.reset(this._domNode, ...children);\r\n            if (this._isEmpty && animate) {\r\n                this._domNode.classList.add('fadein');\r\n            }\r\n            this._isEmpty = false;\r\n        }\r\n    }\r\n    getCommand(link) {\r\n        return link.parentElement === this._domNode\r\n            ? this._commands.get(link.id)\r\n            : undefined;\r\n    }\r\n    getId() {\r\n        return this._id;\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    updatePosition(line) {\r\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\r\n        this._widgetPosition = {\r\n            position: { lineNumber: line, column: column },\r\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\r\n        };\r\n    }\r\n    getPosition() {\r\n        return this._widgetPosition || null;\r\n    }\r\n}\r\nCodeLensContentWidget._idPool = 0;\r\nexport class CodeLensHelper {\r\n    constructor() {\r\n        this._removeDecorations = [];\r\n        this._addDecorations = [];\r\n        this._addDecorationsCallbacks = [];\r\n    }\r\n    addDecoration(decoration, callback) {\r\n        this._addDecorations.push(decoration);\r\n        this._addDecorationsCallbacks.push(callback);\r\n    }\r\n    removeDecoration(decorationId) {\r\n        this._removeDecorations.push(decorationId);\r\n    }\r\n    commit(changeAccessor) {\r\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\r\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\r\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\r\n        }\r\n    }\r\n}\r\nconst codeLensDecorationOptions = ModelDecorationOptions.register({\r\n    collapseOnReplaceEdit: true,\r\n    description: 'codelens'\r\n});\r\nexport class CodeLensWidget {\r\n    constructor(data, editor, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\r\n        this._isDisposed = false;\r\n        this._editor = editor;\r\n        this._data = data;\r\n        // create combined range, track all ranges with decorations,\r\n        // check if there is already something to render\r\n        this._decorationIds = [];\r\n        let range;\r\n        const lenses = [];\r\n        this._data.forEach((codeLensData, i) => {\r\n            if (codeLensData.symbol.command) {\r\n                lenses.push(codeLensData.symbol);\r\n            }\r\n            helper.addDecoration({\r\n                range: codeLensData.symbol.range,\r\n                options: codeLensDecorationOptions\r\n            }, id => this._decorationIds[i] = id);\r\n            // the range contains all lenses on this line\r\n            if (!range) {\r\n                range = Range.lift(codeLensData.symbol.range);\r\n            }\r\n            else {\r\n                range = Range.plusRange(range, codeLensData.symbol.range);\r\n            }\r\n        });\r\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\r\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\r\n        if (lenses.length > 0) {\r\n            this._createContentWidgetIfNecessary();\r\n            this._contentWidget.withCommands(lenses, false);\r\n        }\r\n    }\r\n    _createContentWidgetIfNecessary() {\r\n        if (!this._contentWidget) {\r\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._viewZone.afterLineNumber + 1);\r\n            this._editor.addContentWidget(this._contentWidget);\r\n        }\r\n        else {\r\n            this._editor.layoutContentWidget(this._contentWidget);\r\n        }\r\n    }\r\n    dispose(helper, viewZoneChangeAccessor) {\r\n        this._decorationIds.forEach(helper.removeDecoration, helper);\r\n        this._decorationIds = [];\r\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\r\n        if (this._contentWidget) {\r\n            this._editor.removeContentWidget(this._contentWidget);\r\n            this._contentWidget = undefined;\r\n        }\r\n        this._isDisposed = true;\r\n    }\r\n    isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    isValid() {\r\n        return this._decorationIds.some((id, i) => {\r\n            const range = this._editor.getModel().getDecorationRange(id);\r\n            const symbol = this._data[i].symbol;\r\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\r\n        });\r\n    }\r\n    updateCodeLensSymbols(data, helper) {\r\n        this._decorationIds.forEach(helper.removeDecoration, helper);\r\n        this._decorationIds = [];\r\n        this._data = data;\r\n        this._data.forEach((codeLensData, i) => {\r\n            helper.addDecoration({\r\n                range: codeLensData.symbol.range,\r\n                options: codeLensDecorationOptions\r\n            }, id => this._decorationIds[i] = id);\r\n        });\r\n    }\r\n    updateHeight(height, viewZoneChangeAccessor) {\r\n        this._viewZone.heightInPx = height;\r\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\r\n        if (this._contentWidget) {\r\n            this._editor.layoutContentWidget(this._contentWidget);\r\n        }\r\n    }\r\n    computeIfNecessary(model) {\r\n        if (!this._viewZone.isVisible()) {\r\n            return null;\r\n        }\r\n        // Read editor current state\r\n        for (let i = 0; i < this._decorationIds.length; i++) {\r\n            const range = model.getDecorationRange(this._decorationIds[i]);\r\n            if (range) {\r\n                this._data[i].symbol.range = range;\r\n            }\r\n        }\r\n        return this._data;\r\n    }\r\n    updateCommands(symbols) {\r\n        this._createContentWidgetIfNecessary();\r\n        this._contentWidget.withCommands(symbols, true);\r\n        for (let i = 0; i < this._data.length; i++) {\r\n            const resolved = symbols[i];\r\n            if (resolved) {\r\n                const { symbol } = this._data[i];\r\n                symbol.command = resolved.command || symbol.command;\r\n            }\r\n        }\r\n    }\r\n    getCommand(link) {\r\n        var _a;\r\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\r\n    }\r\n    getLineNumber() {\r\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\r\n        if (range) {\r\n            return range.startLineNumber;\r\n        }\r\n        return -1;\r\n    }\r\n    update(viewZoneChangeAccessor) {\r\n        if (this.isValid()) {\r\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\r\n            if (range) {\r\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\r\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\r\n                if (this._contentWidget) {\r\n                    this._contentWidget.updatePosition(range.startLineNumber);\r\n                    this._editor.layoutContentWidget(this._contentWidget);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\r\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\r\nimport { ModesHoverController } from '../../hover/browser/hover.js';\r\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\r\nexport class ColorContribution extends Disposable {\r\n    constructor(_editor) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    onMouseDown(mouseEvent) {\r\n        const colorDecoratorsActivatedOn = this._editor.getOption(146 /* EditorOption.colorDecoratorsActivatedOn */);\r\n        if (colorDecoratorsActivatedOn !== 'click' && colorDecoratorsActivatedOn !== 'clickAndHover') {\r\n            return;\r\n        }\r\n        const target = mouseEvent.target;\r\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\r\n            return;\r\n        }\r\n        if (!target.detail.injectedText) {\r\n            return;\r\n        }\r\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\r\n            return;\r\n        }\r\n        if (!target.range) {\r\n            return;\r\n        }\r\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\r\n        if (!hoverController) {\r\n            return;\r\n        }\r\n        if (!hoverController.isColorPickerVisible) {\r\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\r\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false, true);\r\n        }\r\n    }\r\n}\r\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\r\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nHoverParticipantRegistry.register(ColorHoverParticipant);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar ColorDetector_1;\r\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\r\nimport { RGBA } from '../../../../base/common/color.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\r\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { getColors } from './color.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nexport const ColorDecorationInjectedTextMarker = Object.create({});\r\nlet ColorDetector = ColorDetector_1 = class ColorDetector extends Disposable {\r\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._configurationService = _configurationService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._localToDispose = this._register(new DisposableStore());\r\n        this._decorationsIds = [];\r\n        this._colorDatas = new Map();\r\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\r\n        this._ruleFactory = new DynamicCssRules(this._editor);\r\n        this._decoratorLimitReporter = new DecoratorLimitReporter();\r\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\r\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector_1.RECOMPUTE_TIME });\r\n        this._register(_editor.onDidChangeModel(() => {\r\n            this._isColorDecoratorsEnabled = this.isEnabled();\r\n            this.updateColors();\r\n        }));\r\n        this._register(_editor.onDidChangeModelLanguage(() => this.updateColors()));\r\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.updateColors()));\r\n        this._register(_editor.onDidChangeConfiguration((e) => {\r\n            const prevIsEnabled = this._isColorDecoratorsEnabled;\r\n            this._isColorDecoratorsEnabled = this.isEnabled();\r\n            this._isDefaultColorDecoratorsEnabled = this._editor.getOption(145 /* EditorOption.defaultColorDecorators */);\r\n            const updatedColorDecoratorsSetting = prevIsEnabled !== this._isColorDecoratorsEnabled || e.hasChanged(21 /* EditorOption.colorDecoratorsLimit */);\r\n            const updatedDefaultColorDecoratorsSetting = e.hasChanged(145 /* EditorOption.defaultColorDecorators */);\r\n            if (updatedColorDecoratorsSetting || updatedDefaultColorDecoratorsSetting) {\r\n                if (this._isColorDecoratorsEnabled) {\r\n                    this.updateColors();\r\n                }\r\n                else {\r\n                    this.removeAllDecorations();\r\n                }\r\n            }\r\n        }));\r\n        this._timeoutTimer = null;\r\n        this._computePromise = null;\r\n        this._isColorDecoratorsEnabled = this.isEnabled();\r\n        this._isDefaultColorDecoratorsEnabled = this._editor.getOption(145 /* EditorOption.defaultColorDecorators */);\r\n        this.updateColors();\r\n    }\r\n    isEnabled() {\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return false;\r\n        }\r\n        const languageId = model.getLanguageId();\r\n        // handle deprecated settings. [languageId].colorDecorators.enable\r\n        const deprecatedConfig = this._configurationService.getValue(languageId);\r\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\r\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\r\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\r\n                return colorDecorators['enable'];\r\n            }\r\n        }\r\n        return this._editor.getOption(20 /* EditorOption.colorDecorators */);\r\n    }\r\n    static get(editor) {\r\n        return editor.getContribution(this.ID);\r\n    }\r\n    dispose() {\r\n        this.stop();\r\n        this.removeAllDecorations();\r\n        super.dispose();\r\n    }\r\n    updateColors() {\r\n        this.stop();\r\n        if (!this._isColorDecoratorsEnabled) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\r\n            return;\r\n        }\r\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\r\n            if (!this._timeoutTimer) {\r\n                this._timeoutTimer = new TimeoutTimer();\r\n                this._timeoutTimer.cancelAndSet(() => {\r\n                    this._timeoutTimer = null;\r\n                    this.beginCompute();\r\n                }, this._debounceInformation.get(model));\r\n            }\r\n        }));\r\n        this.beginCompute();\r\n    }\r\n    beginCompute() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n                const model = this._editor.getModel();\r\n                if (!model) {\r\n                    return [];\r\n                }\r\n                const sw = new StopWatch(false);\r\n                const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token, this._isDefaultColorDecoratorsEnabled);\r\n                this._debounceInformation.update(model, sw.elapsed());\r\n                return colors;\r\n            }));\r\n            try {\r\n                const colors = yield this._computePromise;\r\n                this.updateDecorations(colors);\r\n                this.updateColorDecorators(colors);\r\n                this._computePromise = null;\r\n            }\r\n            catch (e) {\r\n                onUnexpectedError(e);\r\n            }\r\n        });\r\n    }\r\n    stop() {\r\n        if (this._timeoutTimer) {\r\n            this._timeoutTimer.cancel();\r\n            this._timeoutTimer = null;\r\n        }\r\n        if (this._computePromise) {\r\n            this._computePromise.cancel();\r\n            this._computePromise = null;\r\n        }\r\n        this._localToDispose.clear();\r\n    }\r\n    updateDecorations(colorDatas) {\r\n        const decorations = colorDatas.map(c => ({\r\n            range: {\r\n                startLineNumber: c.colorInfo.range.startLineNumber,\r\n                startColumn: c.colorInfo.range.startColumn,\r\n                endLineNumber: c.colorInfo.range.endLineNumber,\r\n                endColumn: c.colorInfo.range.endColumn\r\n            },\r\n            options: ModelDecorationOptions.EMPTY\r\n        }));\r\n        this._editor.changeDecorations((changeAccessor) => {\r\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\r\n            this._colorDatas = new Map();\r\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\r\n        });\r\n    }\r\n    updateColorDecorators(colorData) {\r\n        this._colorDecorationClassRefs.clear();\r\n        const decorations = [];\r\n        const limit = this._editor.getOption(21 /* EditorOption.colorDecoratorsLimit */);\r\n        for (let i = 0; i < colorData.length && decorations.length < limit; i++) {\r\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\r\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\r\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\r\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\r\n                backgroundColor: color\r\n            }));\r\n            decorations.push({\r\n                range: {\r\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\r\n                    startColumn: colorData[i].colorInfo.range.startColumn,\r\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\r\n                    endColumn: colorData[i].colorInfo.range.endColumn\r\n                },\r\n                options: {\r\n                    description: 'colorDetector',\r\n                    before: {\r\n                        content: noBreakWhitespace,\r\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\r\n                        inlineClassNameAffectsLetterSpacing: true,\r\n                        attachedData: ColorDecorationInjectedTextMarker\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const limited = limit < colorData.length ? limit : false;\r\n        this._decoratorLimitReporter.update(colorData.length, limited);\r\n        this._colorDecoratorIds.set(decorations);\r\n    }\r\n    removeAllDecorations() {\r\n        this._editor.removeDecorations(this._decorationsIds);\r\n        this._decorationsIds = [];\r\n        this._colorDecoratorIds.clear();\r\n        this._colorDecorationClassRefs.clear();\r\n    }\r\n    getColorData(position) {\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return null;\r\n        }\r\n        const decorations = model\r\n            .getDecorationsInRange(Range.fromPositions(position, position))\r\n            .filter(d => this._colorDatas.has(d.id));\r\n        if (decorations.length === 0) {\r\n            return null;\r\n        }\r\n        return this._colorDatas.get(decorations[0].id);\r\n    }\r\n    isColorDecoration(decoration) {\r\n        return this._colorDecoratorIds.has(decoration);\r\n    }\r\n};\r\nColorDetector.ID = 'editor.contrib.colorDetector';\r\nColorDetector.RECOMPUTE_TIME = 1000; // ms\r\nColorDetector = ColorDetector_1 = __decorate([\r\n    __param(1, IConfigurationService),\r\n    __param(2, ILanguageFeaturesService),\r\n    __param(3, ILanguageFeatureDebounceService)\r\n], ColorDetector);\r\nexport { ColorDetector };\r\nexport class DecoratorLimitReporter {\r\n    constructor() {\r\n        this._onDidChange = new Emitter();\r\n        this._computed = 0;\r\n        this._limited = false;\r\n    }\r\n    update(computed, limited) {\r\n        if (computed !== this._computed || limited !== this._limited) {\r\n            this._computed = computed;\r\n            this._limited = limited;\r\n            this._onDidChange.fire();\r\n        }\r\n    }\r\n}\r\nregisterEditorContribution(ColorDetector.ID, ColorDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nexport function getColors(colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled = true) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return _findColorData(new ColorDataCollector(), colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled);\r\n    });\r\n}\r\nexport function getColorPresentations(model, colorInfo, provider, token) {\r\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\r\n}\r\nclass ColorDataCollector {\r\n    constructor() { }\r\n    compute(provider, model, token, colors) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const documentColors = yield provider.provideDocumentColors(model, token);\r\n            if (Array.isArray(documentColors)) {\r\n                for (const colorInfo of documentColors) {\r\n                    colors.push({ colorInfo, provider });\r\n                }\r\n            }\r\n            return Array.isArray(documentColors);\r\n        });\r\n    }\r\n}\r\nclass ExtColorDataCollector {\r\n    constructor() { }\r\n    compute(provider, model, token, colors) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const documentColors = yield provider.provideDocumentColors(model, token);\r\n            if (Array.isArray(documentColors)) {\r\n                for (const colorInfo of documentColors) {\r\n                    colors.push({ range: colorInfo.range, color: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha] });\r\n                }\r\n            }\r\n            return Array.isArray(documentColors);\r\n        });\r\n    }\r\n}\r\nclass ColorPresentationsCollector {\r\n    constructor(colorInfo) {\r\n        this.colorInfo = colorInfo;\r\n    }\r\n    compute(provider, model, _token, colors) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const documentColors = yield provider.provideColorPresentations(model, this.colorInfo, CancellationToken.None);\r\n            if (Array.isArray(documentColors)) {\r\n                colors.push(...documentColors);\r\n            }\r\n            return Array.isArray(documentColors);\r\n        });\r\n    }\r\n}\r\nfunction _findColorData(collector, colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let validDocumentColorProviderFound = false;\r\n        let defaultProvider;\r\n        const colorData = [];\r\n        const documentColorProviders = colorProviderRegistry.ordered(model);\r\n        for (let i = documentColorProviders.length - 1; i >= 0; i--) {\r\n            const provider = documentColorProviders[i];\r\n            if (provider instanceof DefaultDocumentColorProvider) {\r\n                defaultProvider = provider;\r\n            }\r\n            else {\r\n                try {\r\n                    if (yield collector.compute(provider, model, token, colorData)) {\r\n                        validDocumentColorProviderFound = true;\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    onUnexpectedExternalError(e);\r\n                }\r\n            }\r\n        }\r\n        if (validDocumentColorProviderFound) {\r\n            return colorData;\r\n        }\r\n        if (defaultProvider && isDefaultColorDecoratorsEnabled) {\r\n            yield collector.compute(defaultProvider, model, token, colorData);\r\n            return colorData;\r\n        }\r\n        return [];\r\n    });\r\n}\r\nfunction _setupColorCommand(accessor, resource) {\r\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\r\n    const model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument();\r\n    }\r\n    const isDefaultColorDecoratorsEnabled = accessor.get(IConfigurationService).getValue('editor.defaultColorDecorators', { resource });\r\n    return { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled };\r\n}\r\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\r\n    const [resource] = args;\r\n    if (!(resource instanceof URI)) {\r\n        throw illegalArgument();\r\n    }\r\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, resource);\r\n    return _findColorData(new ExtColorDataCollector(), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\r\n});\r\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\r\n    const [color, context] = args;\r\n    const { uri, range } = context;\r\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\r\n        throw illegalArgument();\r\n    }\r\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, uri);\r\n    const [red, green, blue, alpha] = color;\r\n    return _findColorData(new ColorPresentationsCollector({ range: range, color: { red, green, blue, alpha } }), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Color, RGBA } from '../../../../base/common/color.js';\r\nimport { EditorWorkerClient } from '../../../browser/services/editorWorkerService.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\r\nexport class DefaultDocumentColorProvider {\r\n    constructor(modelService, languageConfigurationService) {\r\n        this._editorWorkerClient = new EditorWorkerClient(modelService, false, 'editorWorkerService', languageConfigurationService);\r\n    }\r\n    provideDocumentColors(model, _token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this._editorWorkerClient.computeDefaultDocumentColors(model.uri);\r\n        });\r\n    }\r\n    provideColorPresentations(_model, colorInfo, _token) {\r\n        const range = colorInfo.range;\r\n        const colorFromInfo = colorInfo.color;\r\n        const alpha = colorFromInfo.alpha;\r\n        const color = new Color(new RGBA(Math.round(255 * colorFromInfo.red), Math.round(255 * colorFromInfo.green), Math.round(255 * colorFromInfo.blue), alpha));\r\n        const rgb = alpha ? Color.Format.CSS.formatRGB(color) : Color.Format.CSS.formatRGBA(color);\r\n        const hsl = alpha ? Color.Format.CSS.formatHSL(color) : Color.Format.CSS.formatHSLA(color);\r\n        const hex = alpha ? Color.Format.CSS.formatHex(color) : Color.Format.CSS.formatHexA(color);\r\n        const colorPresentations = [];\r\n        colorPresentations.push({ label: rgb, textEdit: { range: range, text: rgb } });\r\n        colorPresentations.push({ label: hsl, textEdit: { range: range, text: hsl } });\r\n        colorPresentations.push({ label: hex, textEdit: { range: range, text: hex } });\r\n        return colorPresentations;\r\n    }\r\n}\r\nlet DefaultDocumentColorProviderFeature = class DefaultDocumentColorProviderFeature extends Disposable {\r\n    constructor(_modelService, _languageConfigurationService, _languageFeaturesService) {\r\n        super();\r\n        this._register(_languageFeaturesService.colorProvider.register('*', new DefaultDocumentColorProvider(_modelService, _languageConfigurationService)));\r\n    }\r\n};\r\nDefaultDocumentColorProviderFeature = __decorate([\r\n    __param(0, IModelService),\r\n    __param(1, ILanguageConfigurationService),\r\n    __param(2, ILanguageFeaturesService)\r\n], DefaultDocumentColorProviderFeature);\r\nregisterEditorFeature(DefaultDocumentColorProviderFeature);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { Color, RGBA } from '../../../../base/common/color.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { getColorPresentations, getColors } from './color.js';\r\nimport { ColorDetector } from './colorDetector.js';\r\nimport { ColorPickerModel } from './colorPickerModel.js';\r\nimport { ColorPickerWidget } from './colorPickerWidget.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nimport { Dimension } from '../../../../base/browser/dom.js';\r\nexport class ColorHover {\r\n    constructor(owner, range, model, provider) {\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.model = model;\r\n        this.provider = provider;\r\n        /**\r\n         * Force the hover to always be rendered at this specific range,\r\n         * even in the case of multiple hover parts.\r\n         */\r\n        this.forceShowAtRange = true;\r\n    }\r\n    isValidForHoverAnchor(anchor) {\r\n        return (anchor.type === 1 /* HoverAnchorType.Range */\r\n            && this.range.startColumn <= anchor.range.startColumn\r\n            && this.range.endColumn >= anchor.range.endColumn);\r\n    }\r\n}\r\nlet ColorHoverParticipant = class ColorHoverParticipant {\r\n    constructor(_editor, _themeService) {\r\n        this._editor = _editor;\r\n        this._themeService = _themeService;\r\n        this.hoverOrdinal = 2;\r\n    }\r\n    computeSync(_anchor, _lineDecorations) {\r\n        return [];\r\n    }\r\n    computeAsync(anchor, lineDecorations, token) {\r\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\r\n    }\r\n    _computeAsync(_anchor, lineDecorations, _token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel()) {\r\n                return [];\r\n            }\r\n            const colorDetector = ColorDetector.get(this._editor);\r\n            if (!colorDetector) {\r\n                return [];\r\n            }\r\n            for (const d of lineDecorations) {\r\n                if (!colorDetector.isColorDecoration(d)) {\r\n                    continue;\r\n                }\r\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\r\n                if (colorData) {\r\n                    const colorHover = yield _createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\r\n                    return [colorHover];\r\n                }\r\n            }\r\n            return [];\r\n        });\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\r\n    }\r\n};\r\nColorHoverParticipant = __decorate([\r\n    __param(1, IThemeService)\r\n], ColorHoverParticipant);\r\nexport { ColorHoverParticipant };\r\nexport class StandaloneColorPickerHover {\r\n    constructor(owner, range, model, provider) {\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.model = model;\r\n        this.provider = provider;\r\n    }\r\n}\r\nlet StandaloneColorPickerParticipant = class StandaloneColorPickerParticipant {\r\n    constructor(_editor, _themeService) {\r\n        this._editor = _editor;\r\n        this._themeService = _themeService;\r\n        this._color = null;\r\n    }\r\n    createColorHover(defaultColorInfo, defaultColorProvider, colorProviderRegistry) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel()) {\r\n                return null;\r\n            }\r\n            const colorDetector = ColorDetector.get(this._editor);\r\n            if (!colorDetector) {\r\n                return null;\r\n            }\r\n            const colors = yield getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\r\n            let foundColorInfo = null;\r\n            let foundColorProvider = null;\r\n            for (const colorData of colors) {\r\n                const colorInfo = colorData.colorInfo;\r\n                if (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\r\n                    foundColorInfo = colorInfo;\r\n                    foundColorProvider = colorData.provider;\r\n                }\r\n            }\r\n            const colorInfo = foundColorInfo !== null && foundColorInfo !== void 0 ? foundColorInfo : defaultColorInfo;\r\n            const colorProvider = foundColorProvider !== null && foundColorProvider !== void 0 ? foundColorProvider : defaultColorProvider;\r\n            const foundInEditor = !!foundColorInfo;\r\n            return { colorHover: yield _createColorHover(this, this._editor.getModel(), colorInfo, colorProvider), foundInEditor: foundInEditor };\r\n        });\r\n    }\r\n    updateEditorModel(colorHoverData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel()) {\r\n                return;\r\n            }\r\n            const colorPickerModel = colorHoverData.model;\r\n            let range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\r\n            if (this._color) {\r\n                yield _updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\r\n                range = _updateEditorModel(this._editor, range, colorPickerModel);\r\n            }\r\n        });\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n};\r\nStandaloneColorPickerParticipant = __decorate([\r\n    __param(1, IThemeService)\r\n], StandaloneColorPickerParticipant);\r\nexport { StandaloneColorPickerParticipant };\r\nfunction _createColorHover(participant, editorModel, colorInfo, provider) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const originalText = editorModel.getValueInRange(colorInfo.range);\r\n        const { red, green, blue, alpha } = colorInfo.color;\r\n        const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\r\n        const color = new Color(rgba);\r\n        const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\r\n        const model = new ColorPickerModel(color, [], 0);\r\n        model.colorPresentations = colorPresentations || [];\r\n        model.guessColorPresentation(color, originalText);\r\n        if (participant instanceof ColorHoverParticipant) {\r\n            return new ColorHover(participant, Range.lift(colorInfo.range), model, provider);\r\n        }\r\n        else {\r\n            return new StandaloneColorPickerHover(participant, Range.lift(colorInfo.range), model, provider);\r\n        }\r\n    });\r\n}\r\nfunction renderHoverParts(participant, editor, themeService, hoverParts, context) {\r\n    if (hoverParts.length === 0 || !editor.hasModel()) {\r\n        return Disposable.None;\r\n    }\r\n    if (context.setMinimumDimensions) {\r\n        const minimumHeight = editor.getOption(66 /* EditorOption.lineHeight */) + 8;\r\n        context.setMinimumDimensions(new Dimension(302, minimumHeight));\r\n    }\r\n    const disposables = new DisposableStore();\r\n    const colorHover = hoverParts[0];\r\n    const editorModel = editor.getModel();\r\n    const model = colorHover.model;\r\n    const widget = disposables.add(new ColorPickerWidget(context.fragment, model, editor.getOption(141 /* EditorOption.pixelRatio */), themeService, participant instanceof StandaloneColorPickerParticipant));\r\n    context.setColorPicker(widget);\r\n    let editorUpdatedByColorPicker = false;\r\n    let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\r\n    if (participant instanceof StandaloneColorPickerParticipant) {\r\n        const color = hoverParts[0].model.color;\r\n        participant.color = color;\r\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\r\n        disposables.add(model.onColorFlushed((color) => {\r\n            participant.color = color;\r\n        }));\r\n    }\r\n    else {\r\n        disposables.add(model.onColorFlushed((color) => __awaiter(this, void 0, void 0, function* () {\r\n            yield _updateColorPresentations(editorModel, model, color, range, colorHover);\r\n            editorUpdatedByColorPicker = true;\r\n            range = _updateEditorModel(editor, range, model, context);\r\n        })));\r\n    }\r\n    disposables.add(model.onDidChangeColor((color) => {\r\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\r\n    }));\r\n    disposables.add(editor.onDidChangeModelContent((e) => {\r\n        if (editorUpdatedByColorPicker) {\r\n            editorUpdatedByColorPicker = false;\r\n        }\r\n        else {\r\n            context.hide();\r\n            editor.focus();\r\n        }\r\n    }));\r\n    return disposables;\r\n}\r\nfunction _updateEditorModel(editor, range, model, context) {\r\n    let textEdits;\r\n    let newRange;\r\n    if (model.presentation.textEdit) {\r\n        textEdits = [model.presentation.textEdit];\r\n        newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\r\n        const trackedRange = editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\r\n        editor.pushUndoStop();\r\n        editor.executeEdits('colorpicker', textEdits);\r\n        newRange = editor.getModel()._getTrackedRange(trackedRange) || newRange;\r\n    }\r\n    else {\r\n        textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\r\n        newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\r\n        editor.pushUndoStop();\r\n        editor.executeEdits('colorpicker', textEdits);\r\n    }\r\n    if (model.presentation.additionalTextEdits) {\r\n        textEdits = [...model.presentation.additionalTextEdits];\r\n        editor.executeEdits('colorpicker', textEdits);\r\n        if (context) {\r\n            context.hide();\r\n        }\r\n    }\r\n    editor.pushUndoStop();\r\n    return newRange;\r\n}\r\nfunction _updateColorPresentations(editorModel, colorPickerModel, color, range, colorHover) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const colorPresentations = yield getColorPresentations(editorModel, {\r\n            range: range,\r\n            color: {\r\n                red: color.rgba.r / 255,\r\n                green: color.rgba.g / 255,\r\n                blue: color.rgba.b / 255,\r\n                alpha: color.rgba.a\r\n            }\r\n        }, colorHover.provider, CancellationToken.None);\r\n        colorPickerModel.colorPresentations = colorPresentations || [];\r\n    });\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nexport class ColorPickerModel {\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        if (this._color.equals(color)) {\r\n            return;\r\n        }\r\n        this._color = color;\r\n        this._onDidChangeColor.fire(color);\r\n    }\r\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\r\n    get colorPresentations() {\r\n        return this._colorPresentations;\r\n    }\r\n    set colorPresentations(colorPresentations) {\r\n        this._colorPresentations = colorPresentations;\r\n        if (this.presentationIndex > colorPresentations.length - 1) {\r\n            this.presentationIndex = 0;\r\n        }\r\n        this._onDidChangePresentation.fire(this.presentation);\r\n    }\r\n    constructor(color, availableColorPresentations, presentationIndex) {\r\n        this.presentationIndex = presentationIndex;\r\n        this._onColorFlushed = new Emitter();\r\n        this.onColorFlushed = this._onColorFlushed.event;\r\n        this._onDidChangeColor = new Emitter();\r\n        this.onDidChangeColor = this._onDidChangeColor.event;\r\n        this._onDidChangePresentation = new Emitter();\r\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\r\n        this.originalColor = color;\r\n        this._color = color;\r\n        this._colorPresentations = availableColorPresentations;\r\n    }\r\n    selectNextColorPresentation() {\r\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\r\n        this.flushColor();\r\n        this._onDidChangePresentation.fire(this.presentation);\r\n    }\r\n    guessColorPresentation(color, originalText) {\r\n        let presentationIndex = -1;\r\n        for (let i = 0; i < this.colorPresentations.length; i++) {\r\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\r\n                presentationIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (presentationIndex === -1) {\r\n            // check which color presentation text has same prefix as original text's prefix\r\n            const originalTextPrefix = originalText.split('(')[0].toLowerCase();\r\n            for (let i = 0; i < this.colorPresentations.length; i++) {\r\n                if (this.colorPresentations[i].label.toLowerCase().startsWith(originalTextPrefix)) {\r\n                    presentationIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (presentationIndex !== -1 && presentationIndex !== this.presentationIndex) {\r\n            this.presentationIndex = presentationIndex;\r\n            this._onDidChangePresentation.fire(this.presentation);\r\n        }\r\n    }\r\n    flushColor() {\r\n        this._onColorFlushed.fire(this._color);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { PixelRatio } from '../../../../base/browser/browser.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\r\nimport { Widget } from '../../../../base/browser/ui/widget.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport './colorPicker.css';\r\nimport { localize } from '../../../../nls.js';\r\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nconst $ = dom.$;\r\nexport class ColorPickerHeader extends Disposable {\r\n    constructor(container, model, themeService, showingStandaloneColorPicker = false) {\r\n        super();\r\n        this.model = model;\r\n        this.showingStandaloneColorPicker = showingStandaloneColorPicker;\r\n        this._closeButton = null;\r\n        this._domNode = $('.colorpicker-header');\r\n        dom.append(container, this._domNode);\r\n        this._pickedColorNode = dom.append(this._domNode, $('.picked-color'));\r\n        dom.append(this._pickedColorNode, $('span.codicon.codicon-color-mode'));\r\n        this._pickedColorPresentation = dom.append(this._pickedColorNode, document.createElement('span'));\r\n        this._pickedColorPresentation.classList.add('picked-color-presentation');\r\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\r\n        this._pickedColorNode.setAttribute('title', tooltip);\r\n        this._originalColorNode = dom.append(this._domNode, $('.original-color'));\r\n        this._originalColorNode.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\r\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\r\n        this._register(themeService.onDidColorThemeChange(theme => {\r\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\r\n        }));\r\n        this._register(dom.addDisposableListener(this._pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\r\n        this._register(dom.addDisposableListener(this._originalColorNode, dom.EventType.CLICK, () => {\r\n            this.model.color = this.model.originalColor;\r\n            this.model.flushColor();\r\n        }));\r\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\r\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\r\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\r\n        this._pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\r\n        this.onDidChangeColor(this.model.color);\r\n        // When the color picker widget is a standalone color picker widget, then add a close button\r\n        if (this.showingStandaloneColorPicker) {\r\n            this._domNode.classList.add('standalone-colorpicker');\r\n            this._closeButton = this._register(new CloseButton(this._domNode));\r\n        }\r\n    }\r\n    get closeButton() {\r\n        return this._closeButton;\r\n    }\r\n    get pickedColorNode() {\r\n        return this._pickedColorNode;\r\n    }\r\n    get originalColorNode() {\r\n        return this._originalColorNode;\r\n    }\r\n    onDidChangeColor(color) {\r\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\r\n        this._pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\r\n        this.onDidChangePresentation();\r\n    }\r\n    onDidChangePresentation() {\r\n        this._pickedColorPresentation.textContent = this.model.presentation ? this.model.presentation.label : '';\r\n    }\r\n}\r\nclass CloseButton extends Disposable {\r\n    constructor(container) {\r\n        super();\r\n        this._onClicked = this._register(new Emitter());\r\n        this.onClicked = this._onClicked.event;\r\n        this._button = document.createElement('div');\r\n        this._button.classList.add('close-button');\r\n        dom.append(container, this._button);\r\n        const innerDiv = document.createElement('div');\r\n        innerDiv.classList.add('close-button-inner-div');\r\n        dom.append(this._button, innerDiv);\r\n        const closeButton = dom.append(innerDiv, $('.button' + ThemeIcon.asCSSSelector(registerIcon('color-picker-close', Codicon.close, localize('closeIcon', 'Icon to close the color picker')))));\r\n        closeButton.classList.add('close-icon');\r\n        this._button.onclick = () => {\r\n            this._onClicked.fire();\r\n        };\r\n    }\r\n}\r\nexport class ColorPickerBody extends Disposable {\r\n    constructor(container, model, pixelRatio, isStandaloneColorPicker = false) {\r\n        super();\r\n        this.model = model;\r\n        this.pixelRatio = pixelRatio;\r\n        this._insertButton = null;\r\n        this._domNode = $('.colorpicker-body');\r\n        dom.append(container, this._domNode);\r\n        this._saturationBox = new SaturationBox(this._domNode, this.model, this.pixelRatio);\r\n        this._register(this._saturationBox);\r\n        this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange, this));\r\n        this._register(this._saturationBox.onColorFlushed(this.flushColor, this));\r\n        this._opacityStrip = new OpacityStrip(this._domNode, this.model, isStandaloneColorPicker);\r\n        this._register(this._opacityStrip);\r\n        this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange, this));\r\n        this._register(this._opacityStrip.onColorFlushed(this.flushColor, this));\r\n        this._hueStrip = new HueStrip(this._domNode, this.model, isStandaloneColorPicker);\r\n        this._register(this._hueStrip);\r\n        this._register(this._hueStrip.onDidChange(this.onDidHueChange, this));\r\n        this._register(this._hueStrip.onColorFlushed(this.flushColor, this));\r\n        if (isStandaloneColorPicker) {\r\n            this._insertButton = this._register(new InsertButton(this._domNode));\r\n            this._domNode.classList.add('standalone-colorpicker');\r\n        }\r\n    }\r\n    flushColor() {\r\n        this.model.flushColor();\r\n    }\r\n    onDidSaturationValueChange({ s, v }) {\r\n        const hsva = this.model.color.hsva;\r\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\r\n    }\r\n    onDidOpacityChange(a) {\r\n        const hsva = this.model.color.hsva;\r\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\r\n    }\r\n    onDidHueChange(value) {\r\n        const hsva = this.model.color.hsva;\r\n        const h = (1 - value) * 360;\r\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\r\n    }\r\n    get domNode() {\r\n        return this._domNode;\r\n    }\r\n    get saturationBox() {\r\n        return this._saturationBox;\r\n    }\r\n    get enterButton() {\r\n        return this._insertButton;\r\n    }\r\n    layout() {\r\n        this._saturationBox.layout();\r\n        this._opacityStrip.layout();\r\n        this._hueStrip.layout();\r\n    }\r\n}\r\nclass SaturationBox extends Disposable {\r\n    constructor(container, model, pixelRatio) {\r\n        super();\r\n        this.model = model;\r\n        this.pixelRatio = pixelRatio;\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._onColorFlushed = new Emitter();\r\n        this.onColorFlushed = this._onColorFlushed.event;\r\n        this._domNode = $('.saturation-wrap');\r\n        dom.append(container, this._domNode);\r\n        // Create canvas, draw selected color\r\n        this._canvas = document.createElement('canvas');\r\n        this._canvas.className = 'saturation-box';\r\n        dom.append(this._domNode, this._canvas);\r\n        // Add selection circle\r\n        this.selection = $('.saturation-selection');\r\n        dom.append(this._domNode, this.selection);\r\n        this.layout();\r\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\r\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\r\n        this.monitor = null;\r\n    }\r\n    get domNode() {\r\n        return this._domNode;\r\n    }\r\n    onPointerDown(e) {\r\n        if (!e.target || !(e.target instanceof Element)) {\r\n            return;\r\n        }\r\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\r\n        const origin = dom.getDomNodePagePosition(this._domNode);\r\n        if (e.target !== this.selection) {\r\n            this.onDidChangePosition(e.offsetX, e.offsetY);\r\n        }\r\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\r\n        const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\r\n            this._onColorFlushed.fire();\r\n            pointerUpListener.dispose();\r\n            if (this.monitor) {\r\n                this.monitor.stopMonitoring(true);\r\n                this.monitor = null;\r\n            }\r\n        }, true);\r\n    }\r\n    onDidChangePosition(left, top) {\r\n        const s = Math.max(0, Math.min(1, left / this.width));\r\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\r\n        this.paintSelection(s, v);\r\n        this._onDidChange.fire({ s, v });\r\n    }\r\n    layout() {\r\n        this.width = this._domNode.offsetWidth;\r\n        this.height = this._domNode.offsetHeight;\r\n        this._canvas.width = this.width * this.pixelRatio;\r\n        this._canvas.height = this.height * this.pixelRatio;\r\n        this.paint();\r\n        const hsva = this.model.color.hsva;\r\n        this.paintSelection(hsva.s, hsva.v);\r\n    }\r\n    paint() {\r\n        const hsva = this.model.color.hsva;\r\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\r\n        const ctx = this._canvas.getContext('2d');\r\n        const whiteGradient = ctx.createLinearGradient(0, 0, this._canvas.width, 0);\r\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\r\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\r\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\r\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this._canvas.height);\r\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\r\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\r\n        ctx.rect(0, 0, this._canvas.width, this._canvas.height);\r\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\r\n        ctx.fill();\r\n        ctx.fillStyle = whiteGradient;\r\n        ctx.fill();\r\n        ctx.fillStyle = blackGradient;\r\n        ctx.fill();\r\n    }\r\n    paintSelection(s, v) {\r\n        this.selection.style.left = `${s * this.width}px`;\r\n        this.selection.style.top = `${this.height - v * this.height}px`;\r\n    }\r\n    onDidChangeColor(color) {\r\n        if (this.monitor && this.monitor.isMonitoring()) {\r\n            return;\r\n        }\r\n        this.paint();\r\n        const hsva = color.hsva;\r\n        this.paintSelection(hsva.s, hsva.v);\r\n    }\r\n}\r\nclass Strip extends Disposable {\r\n    constructor(container, model, showingStandaloneColorPicker = false) {\r\n        super();\r\n        this.model = model;\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._onColorFlushed = new Emitter();\r\n        this.onColorFlushed = this._onColorFlushed.event;\r\n        if (showingStandaloneColorPicker) {\r\n            this.domNode = dom.append(container, $('.standalone-strip'));\r\n            this.overlay = dom.append(this.domNode, $('.standalone-overlay'));\r\n        }\r\n        else {\r\n            this.domNode = dom.append(container, $('.strip'));\r\n            this.overlay = dom.append(this.domNode, $('.overlay'));\r\n        }\r\n        this.slider = dom.append(this.domNode, $('.slider'));\r\n        this.slider.style.top = `0px`;\r\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\r\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\r\n        this.layout();\r\n    }\r\n    layout() {\r\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\r\n        const value = this.getValue(this.model.color);\r\n        this.updateSliderPosition(value);\r\n    }\r\n    onDidChangeColor(color) {\r\n        const value = this.getValue(color);\r\n        this.updateSliderPosition(value);\r\n    }\r\n    onPointerDown(e) {\r\n        if (!e.target || !(e.target instanceof Element)) {\r\n            return;\r\n        }\r\n        const monitor = this._register(new GlobalPointerMoveMonitor());\r\n        const origin = dom.getDomNodePagePosition(this.domNode);\r\n        this.domNode.classList.add('grabbing');\r\n        if (e.target !== this.slider) {\r\n            this.onDidChangeTop(e.offsetY);\r\n        }\r\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\r\n        const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\r\n            this._onColorFlushed.fire();\r\n            pointerUpListener.dispose();\r\n            monitor.stopMonitoring(true);\r\n            this.domNode.classList.remove('grabbing');\r\n        }, true);\r\n    }\r\n    onDidChangeTop(top) {\r\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\r\n        this.updateSliderPosition(value);\r\n        this._onDidChange.fire(value);\r\n    }\r\n    updateSliderPosition(value) {\r\n        this.slider.style.top = `${(1 - value) * this.height}px`;\r\n    }\r\n}\r\nclass OpacityStrip extends Strip {\r\n    constructor(container, model, showingStandaloneColorPicker = false) {\r\n        super(container, model, showingStandaloneColorPicker);\r\n        this.domNode.classList.add('opacity-strip');\r\n        this.onDidChangeColor(this.model.color);\r\n    }\r\n    onDidChangeColor(color) {\r\n        super.onDidChangeColor(color);\r\n        const { r, g, b } = color.rgba;\r\n        const opaque = new Color(new RGBA(r, g, b, 1));\r\n        const transparent = new Color(new RGBA(r, g, b, 0));\r\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\r\n    }\r\n    getValue(color) {\r\n        return color.hsva.a;\r\n    }\r\n}\r\nclass HueStrip extends Strip {\r\n    constructor(container, model, showingStandaloneColorPicker = false) {\r\n        super(container, model, showingStandaloneColorPicker);\r\n        this.domNode.classList.add('hue-strip');\r\n    }\r\n    getValue(color) {\r\n        return 1 - (color.hsva.h / 360);\r\n    }\r\n}\r\nexport class InsertButton extends Disposable {\r\n    constructor(container) {\r\n        super();\r\n        this._onClicked = this._register(new Emitter());\r\n        this.onClicked = this._onClicked.event;\r\n        this._button = dom.append(container, document.createElement('button'));\r\n        this._button.classList.add('insert-button');\r\n        this._button.textContent = 'Insert';\r\n        this._button.onclick = e => {\r\n            this._onClicked.fire();\r\n        };\r\n    }\r\n    get button() {\r\n        return this._button;\r\n    }\r\n}\r\nexport class ColorPickerWidget extends Widget {\r\n    constructor(container, model, pixelRatio, themeService, standaloneColorPicker = false) {\r\n        super();\r\n        this.model = model;\r\n        this.pixelRatio = pixelRatio;\r\n        this._register(PixelRatio.onDidChange(() => this.layout()));\r\n        const element = $('.colorpicker-widget');\r\n        container.appendChild(element);\r\n        this.header = this._register(new ColorPickerHeader(element, this.model, themeService, standaloneColorPicker));\r\n        this.body = this._register(new ColorPickerBody(element, this.model, this.pixelRatio, standaloneColorPicker));\r\n    }\r\n    layout() {\r\n        this.body.layout();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ModesHoverController_1;\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\r\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\r\nimport { MarginHoverWidget } from './marginHover.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { HoverParticipantRegistry } from './hoverTypes.js';\r\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\r\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\r\nimport { InlineSuggestionHintsContentWidget } from '../../inlineCompletions/browser/inlineCompletionsHintsWidget.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport './hover.css';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\n// sticky hover widget which doesn't disappear on focus out and such\r\nconst _sticky = false;\r\nlet ModesHoverController = ModesHoverController_1 = class ModesHoverController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(ModesHoverController_1.ID);\r\n    }\r\n    constructor(_editor, _instantiationService, _openerService, _languageService, _keybindingService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._instantiationService = _instantiationService;\r\n        this._openerService = _openerService;\r\n        this._languageService = _languageService;\r\n        this._keybindingService = _keybindingService;\r\n        this._toUnhook = new DisposableStore();\r\n        this._hoverActivatedByColorDecoratorClick = false;\r\n        this._isMouseDown = false;\r\n        this._hoverClicked = false;\r\n        this._contentWidget = null;\r\n        this._glyphWidget = null;\r\n        this._reactToEditorMouseMoveRunner = this._register(new RunOnceScheduler(() => this._reactToEditorMouseMove(this._mouseMoveEvent), 0));\r\n        this._hookEvents();\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(60 /* EditorOption.hover */)) {\r\n                this._unhookEvents();\r\n                this._hookEvents();\r\n            }\r\n        }));\r\n        this._register(this._editor.onMouseLeave(() => {\r\n            this._mouseMoveEvent = undefined;\r\n            this._reactToEditorMouseMoveRunner.cancel();\r\n        }));\r\n    }\r\n    _hookEvents() {\r\n        const hideWidgetsEventHandler = () => this._hideWidgets();\r\n        const hoverOpts = this._editor.getOption(60 /* EditorOption.hover */);\r\n        this._isHoverEnabled = hoverOpts.enabled;\r\n        this._isHoverSticky = hoverOpts.sticky;\r\n        this._hidingDelay = hoverOpts.hidingDelay;\r\n        if (this._isHoverEnabled) {\r\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\r\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\r\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\r\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\r\n        }\r\n        else {\r\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\r\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\r\n        }\r\n        this._toUnhook.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\r\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\r\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\r\n    }\r\n    _unhookEvents() {\r\n        this._toUnhook.clear();\r\n    }\r\n    _onEditorScrollChanged(e) {\r\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _onEditorMouseDown(mouseEvent) {\r\n        var _a;\r\n        this._isMouseDown = true;\r\n        const target = mouseEvent.target;\r\n        if (target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\r\n            this._hoverClicked = true;\r\n            // mouse down on top of content hover widget\r\n            return;\r\n        }\r\n        if (target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\r\n            // mouse down on top of overlay hover widget\r\n            return;\r\n        }\r\n        if (target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */) {\r\n            this._hoverClicked = false;\r\n        }\r\n        if (!((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.widget.isResizing)) {\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _onEditorMouseUp(mouseEvent) {\r\n        this._isMouseDown = false;\r\n    }\r\n    _onEditorMouseLeave(mouseEvent) {\r\n        var _a, _b;\r\n        const targetEm = (mouseEvent.event.browserEvent.relatedTarget);\r\n        if (((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.widget.isResizing) || ((_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.containsNode(targetEm))) {\r\n            // When the content widget is resizing\r\n            // when the mouse is inside hover widget\r\n            return;\r\n        }\r\n        if (!_sticky) {\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _isMouseOverWidget(mouseEvent) {\r\n        var _a, _b, _c, _d, _e;\r\n        const target = mouseEvent.target;\r\n        if (this._isHoverSticky\r\n            && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */\r\n            && target.detail === ContentHoverWidget.ID) {\r\n            // mouse moved on top of content hover widget\r\n            return true;\r\n        }\r\n        if (this._isHoverSticky\r\n            && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.containsNode((_b = mouseEvent.event.browserEvent.view) === null || _b === void 0 ? void 0 : _b.document.activeElement))\r\n            && !((_d = (_c = mouseEvent.event.browserEvent.view) === null || _c === void 0 ? void 0 : _c.getSelection()) === null || _d === void 0 ? void 0 : _d.isCollapsed)) {\r\n            // selected text within content hover widget\r\n            return true;\r\n        }\r\n        if (!this._isHoverSticky\r\n            && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */\r\n            && target.detail === ContentHoverWidget.ID\r\n            && ((_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.isColorPickerVisible)) {\r\n            // though the hover is not sticky, the color picker needs to.\r\n            return true;\r\n        }\r\n        if (this._isHoverSticky\r\n            && target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */\r\n            && target.detail === MarginHoverWidget.ID) {\r\n            // mouse moved on top of overlay hover widget\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _onEditorMouseMove(mouseEvent) {\r\n        var _a, _b, _c, _d;\r\n        this._mouseMoveEvent = mouseEvent;\r\n        if (((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isFocused) || ((_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.isResizing)) {\r\n            return;\r\n        }\r\n        if (this._isMouseDown && this._hoverClicked) {\r\n            return;\r\n        }\r\n        if (this._isHoverSticky && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isVisibleFromKeyboard)) {\r\n            // Sticky mode is on and the hover has been shown via keyboard\r\n            // so moving the mouse has no effect\r\n            return;\r\n        }\r\n        const mouseIsOverWidget = this._isMouseOverWidget(mouseEvent);\r\n        // If the mouse is over the widget and the hiding timeout is defined, then cancel it\r\n        if (mouseIsOverWidget) {\r\n            this._reactToEditorMouseMoveRunner.cancel();\r\n            return;\r\n        }\r\n        // If the mouse is not over the widget, and if sticky is on,\r\n        // then give it a grace period before reacting to the mouse event\r\n        if (((_d = this._contentWidget) === null || _d === void 0 ? void 0 : _d.isVisible) && this._isHoverSticky && this._hidingDelay > 0) {\r\n            if (!this._reactToEditorMouseMoveRunner.isScheduled()) {\r\n                this._reactToEditorMouseMoveRunner.schedule(this._hidingDelay);\r\n            }\r\n            return;\r\n        }\r\n        this._reactToEditorMouseMove(mouseEvent);\r\n    }\r\n    _reactToEditorMouseMove(mouseEvent) {\r\n        var _a, _b, _c;\r\n        if (!mouseEvent) {\r\n            return;\r\n        }\r\n        const target = mouseEvent.target;\r\n        const mouseOnDecorator = (_a = target.element) === null || _a === void 0 ? void 0 : _a.classList.contains('colorpicker-color-decoration');\r\n        const decoratorActivatedOn = this._editor.getOption(146 /* EditorOption.colorDecoratorsActivatedOn */);\r\n        if ((mouseOnDecorator && ((decoratorActivatedOn === 'click' && !this._hoverActivatedByColorDecoratorClick) ||\r\n            (decoratorActivatedOn === 'hover' && !this._isHoverEnabled && !_sticky) ||\r\n            (decoratorActivatedOn === 'clickAndHover' && !this._isHoverEnabled && !this._hoverActivatedByColorDecoratorClick)))\r\n            || !mouseOnDecorator && !this._isHoverEnabled && !this._hoverActivatedByColorDecoratorClick) {\r\n            this._hideWidgets();\r\n            return;\r\n        }\r\n        const contentWidget = this._getOrCreateContentWidget();\r\n        if (contentWidget.maybeShowAt(mouseEvent)) {\r\n            (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\r\n            return;\r\n        }\r\n        if (target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ && target.position) {\r\n            (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\r\n            if (!this._glyphWidget) {\r\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\r\n            }\r\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\r\n            return;\r\n        }\r\n        if (_sticky) {\r\n            return;\r\n        }\r\n        this._hideWidgets();\r\n    }\r\n    _onKeyDown(e) {\r\n        var _a;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const resolvedKeyboardEvent = this._keybindingService.softDispatch(e, this._editor.getDomNode());\r\n        // If the beginning of a multi-chord keybinding is pressed, or the command aims to focus the hover, set the variable to true, otherwise false\r\n        const mightTriggerFocus = (resolvedKeyboardEvent.kind === 1 /* ResultKind.MoreChordsNeeded */ || (resolvedKeyboardEvent.kind === 2 /* ResultKind.KbFound */ && resolvedKeyboardEvent.commandId === 'editor.action.showHover' && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isVisible)));\r\n        if (e.keyCode !== 5 /* KeyCode.Ctrl */ && e.keyCode !== 6 /* KeyCode.Alt */ && e.keyCode !== 57 /* KeyCode.Meta */ && e.keyCode !== 4 /* KeyCode.Shift */\r\n            && !mightTriggerFocus) {\r\n            // Do not hide hover when a modifier key is pressed\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _hideWidgets() {\r\n        var _a, _b, _c;\r\n        if (_sticky) {\r\n            return;\r\n        }\r\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible)) || InlineSuggestionHintsContentWidget.dropDownVisible) {\r\n            return;\r\n        }\r\n        this._hoverActivatedByColorDecoratorClick = false;\r\n        this._hoverClicked = false;\r\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\r\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\r\n    }\r\n    _getOrCreateContentWidget() {\r\n        if (!this._contentWidget) {\r\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\r\n        }\r\n        return this._contentWidget;\r\n    }\r\n    showContentHover(range, mode, source, focus, activatedByColorDecoratorClick = false) {\r\n        this._hoverActivatedByColorDecoratorClick = activatedByColorDecoratorClick;\r\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, source, focus);\r\n    }\r\n    focus() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.focus();\r\n    }\r\n    scrollUp() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollUp();\r\n    }\r\n    scrollDown() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollDown();\r\n    }\r\n    scrollLeft() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollLeft();\r\n    }\r\n    scrollRight() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollRight();\r\n    }\r\n    pageUp() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.pageUp();\r\n    }\r\n    pageDown() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.pageDown();\r\n    }\r\n    goToTop() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.goToTop();\r\n    }\r\n    goToBottom() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.goToBottom();\r\n    }\r\n    get isColorPickerVisible() {\r\n        var _a;\r\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible;\r\n    }\r\n    get isHoverVisible() {\r\n        var _a;\r\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isVisible;\r\n    }\r\n    dispose() {\r\n        var _a, _b;\r\n        super.dispose();\r\n        this._unhookEvents();\r\n        this._toUnhook.dispose();\r\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\r\n    }\r\n};\r\nModesHoverController.ID = 'editor.contrib.hover';\r\nModesHoverController = ModesHoverController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IOpenerService),\r\n    __param(3, ILanguageService),\r\n    __param(4, IKeybindingService)\r\n], ModesHoverController);\r\nexport { ModesHoverController };\r\nclass ShowOrFocusHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.showHover',\r\n            label: nls.localize({\r\n                key: 'showOrFocusHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing/focusing of a hover in the editor.',\r\n                    'If the hover is not visible, it will show the hover.',\r\n                    'This allows for users to show the hover without using the mouse.',\r\n                    'If the hover is already visible, it will take focus.'\r\n                ]\r\n            }, \"Show or Focus Hover\"),\r\n            description: {\r\n                description: `Show or Focus Hover`,\r\n                args: [{\r\n                        name: 'args',\r\n                        schema: {\r\n                            type: 'object',\r\n                            properties: {\r\n                                'focus': {\r\n                                    description: 'Controls if when triggered with the keyboard, the hover should take focus immediately.',\r\n                                    type: 'boolean',\r\n                                    default: false\r\n                                }\r\n                            },\r\n                        }\r\n                    }]\r\n            },\r\n            alias: 'Show or Focus Hover',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        const position = editor.getPosition();\r\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        const focus = editor.getOption(2 /* EditorOption.accessibilitySupport */) === 2 /* AccessibilitySupport.Enabled */ || !!(args === null || args === void 0 ? void 0 : args.focus);\r\n        if (controller.isHoverVisible) {\r\n            controller.focus();\r\n        }\r\n        else {\r\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, focus);\r\n        }\r\n    }\r\n}\r\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.showDefinitionPreviewHover',\r\n            label: nls.localize({\r\n                key: 'showDefinitionPreviewHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\r\n                    'This allows for users to show the definition preview hover without using the mouse.'\r\n                ]\r\n            }, \"Show Definition Preview Hover\"),\r\n            alias: 'Show Definition Preview Hover',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        const position = editor.getPosition();\r\n        if (!position) {\r\n            return;\r\n        }\r\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\r\n        if (!goto) {\r\n            return;\r\n        }\r\n        const promise = goto.startFindDefinitionFromCursor(position);\r\n        promise.then(() => {\r\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, true);\r\n        });\r\n    }\r\n}\r\nclass ScrollUpHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollUpHover',\r\n            label: nls.localize({\r\n                key: 'scrollUpHover',\r\n                comment: [\r\n                    'Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Up Hover\"),\r\n            alias: 'Scroll Up Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 16 /* KeyCode.UpArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollUp();\r\n    }\r\n}\r\nclass ScrollDownHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollDownHover',\r\n            label: nls.localize({\r\n                key: 'scrollDownHover',\r\n                comment: [\r\n                    'Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Down Hover\"),\r\n            alias: 'Scroll Down Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 18 /* KeyCode.DownArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollDown();\r\n    }\r\n}\r\nclass ScrollLeftHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollLeftHover',\r\n            label: nls.localize({\r\n                key: 'scrollLeftHover',\r\n                comment: [\r\n                    'Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Left Hover\"),\r\n            alias: 'Scroll Left Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 15 /* KeyCode.LeftArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollLeft();\r\n    }\r\n}\r\nclass ScrollRightHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollRightHover',\r\n            label: nls.localize({\r\n                key: 'scrollRightHover',\r\n                comment: [\r\n                    'Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Right Hover\"),\r\n            alias: 'Scroll Right Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 17 /* KeyCode.RightArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollRight();\r\n    }\r\n}\r\nclass PageUpHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.pageUpHover',\r\n            label: nls.localize({\r\n                key: 'pageUpHover',\r\n                comment: [\r\n                    'Action that allows to page up in the hover widget with the page up command when the hover widget is focused.'\r\n                ]\r\n            }, \"Page Up Hover\"),\r\n            alias: 'Page Up Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 11 /* KeyCode.PageUp */,\r\n                secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.pageUp();\r\n    }\r\n}\r\nclass PageDownHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.pageDownHover',\r\n            label: nls.localize({\r\n                key: 'pageDownHover',\r\n                comment: [\r\n                    'Action that allows to page down in the hover widget with the page down command when the hover widget is focused.'\r\n                ]\r\n            }, \"Page Down Hover\"),\r\n            alias: 'Page Down Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 12 /* KeyCode.PageDown */,\r\n                secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.pageDown();\r\n    }\r\n}\r\nclass GoToTopHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.goToTopHover',\r\n            label: nls.localize({\r\n                key: 'goToTopHover',\r\n                comment: [\r\n                    'Action that allows to go to the top of the hover widget with the home command when the hover widget is focused.'\r\n                ]\r\n            }, \"Go To Top Hover\"),\r\n            alias: 'Go To Bottom Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 14 /* KeyCode.Home */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.goToTop();\r\n    }\r\n}\r\nclass GoToBottomHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.goToBottomHover',\r\n            label: nls.localize({\r\n                key: 'goToBottomHover',\r\n                comment: [\r\n                    'Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused.'\r\n                ]\r\n            }, \"Go To Bottom Hover\"),\r\n            alias: 'Go To Bottom Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 13 /* KeyCode.End */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.goToBottom();\r\n    }\r\n}\r\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorAction(ShowOrFocusHoverAction);\r\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\r\nregisterEditorAction(ScrollUpHoverAction);\r\nregisterEditorAction(ScrollDownHoverAction);\r\nregisterEditorAction(ScrollLeftHoverAction);\r\nregisterEditorAction(ScrollRightHoverAction);\r\nregisterEditorAction(PageUpHoverAction);\r\nregisterEditorAction(PageDownHoverAction);\r\nregisterEditorAction(GoToTopHoverAction);\r\nregisterEditorAction(GoToBottomHoverAction);\r\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\r\nHoverParticipantRegistry.register(MarkerHoverParticipant);\r\n// theming\r\nregisterThemingParticipant((theme, collector) => {\r\n    const hoverBorder = theme.getColor(editorHoverBorder);\r\n    if (hoverBorder) {\r\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\r\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\r\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar GotoDefinitionAtPositionEditorContribution_1;\r\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\r\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\r\nimport './goToDefinitionAtPosition.css';\r\nimport { EditorState } from '../../../editorState/browser/editorState.js';\r\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../../common/core/range.js';\r\nimport { ILanguageService } from '../../../../common/languages/language.js';\r\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\r\nimport { ClickLinkGesture } from './clickLinkGesture.js';\r\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../../nls.js';\r\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\r\nimport { DefinitionAction } from '../goToCommands.js';\r\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\r\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\r\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\r\nlet GotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = class GotoDefinitionAtPositionEditorContribution {\r\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\r\n        this.textModelResolverService = textModelResolverService;\r\n        this.languageService = languageService;\r\n        this.languageFeaturesService = languageFeaturesService;\r\n        this.toUnhook = new DisposableStore();\r\n        this.toUnhookForKeyboard = new DisposableStore();\r\n        this.currentWordAtPosition = null;\r\n        this.previousPromise = null;\r\n        this.editor = editor;\r\n        this.linkDecorations = this.editor.createDecorationsCollection();\r\n        const linkGesture = new ClickLinkGesture(editor);\r\n        this.toUnhook.add(linkGesture);\r\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\r\n            this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent !== null && keyboardEvent !== void 0 ? keyboardEvent : undefined);\r\n        }));\r\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\r\n            if (this.isEnabled(mouseEvent)) {\r\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\r\n                    .catch((error) => {\r\n                    onUnexpectedError(error);\r\n                })\r\n                    .finally(() => {\r\n                    this.removeLinkDecorations();\r\n                });\r\n            }\r\n        }));\r\n        this.toUnhook.add(linkGesture.onCancel(() => {\r\n            this.removeLinkDecorations();\r\n            this.currentWordAtPosition = null;\r\n        }));\r\n    }\r\n    static get(editor) {\r\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\r\n    }\r\n    startFindDefinitionFromCursor(position) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // For issue: https://github.com/microsoft/vscode/issues/46257\r\n            // equivalent to mouse move with meta/ctrl key\r\n            // First find the definition and add decorations\r\n            // to the editor to be shown with the content hover widget\r\n            yield this.startFindDefinition(position);\r\n            // Add listeners for editor cursor move and key down events\r\n            // Dismiss the \"extended\" editor decorations when the user hides\r\n            // the hover widget. There is no event for the widget itself so these\r\n            // serve as a best effort. After removing the link decorations, the hover\r\n            // widget is clean and will only show declarations per next request.\r\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\r\n                this.currentWordAtPosition = null;\r\n                this.removeLinkDecorations();\r\n                this.toUnhookForKeyboard.clear();\r\n            }));\r\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\r\n                if (e) {\r\n                    this.currentWordAtPosition = null;\r\n                    this.removeLinkDecorations();\r\n                    this.toUnhookForKeyboard.clear();\r\n                }\r\n            }));\r\n        });\r\n    }\r\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\r\n        // check if we are active and on a content widget\r\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\r\n            this.currentWordAtPosition = null;\r\n            this.removeLinkDecorations();\r\n            return;\r\n        }\r\n        const position = mouseEvent.target.position;\r\n        this.startFindDefinition(position);\r\n    }\r\n    startFindDefinition(position) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // Dispose listeners for updating decorations when using keyboard to show definition hover\r\n            this.toUnhookForKeyboard.clear();\r\n            // Find word at mouse position\r\n            const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\r\n            if (!word) {\r\n                this.currentWordAtPosition = null;\r\n                this.removeLinkDecorations();\r\n                return;\r\n            }\r\n            // Return early if word at position is still the same\r\n            if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\r\n                return;\r\n            }\r\n            this.currentWordAtPosition = word;\r\n            // Find definition and decorate word if found\r\n            const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\r\n            if (this.previousPromise) {\r\n                this.previousPromise.cancel();\r\n                this.previousPromise = null;\r\n            }\r\n            this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\r\n            let results;\r\n            try {\r\n                results = yield this.previousPromise;\r\n            }\r\n            catch (error) {\r\n                onUnexpectedError(error);\r\n                return;\r\n            }\r\n            if (!results || !results.length || !state.validate(this.editor)) {\r\n                this.removeLinkDecorations();\r\n                return;\r\n            }\r\n            const linkRange = results[0].originSelectionRange\r\n                ? Range.lift(results[0].originSelectionRange)\r\n                : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n            // Multiple results\r\n            if (results.length > 1) {\r\n                let combinedRange = linkRange;\r\n                for (const { originSelectionRange } of results) {\r\n                    if (originSelectionRange) {\r\n                        combinedRange = Range.plusRange(combinedRange, originSelectionRange);\r\n                    }\r\n                }\r\n                this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\r\n            }\r\n            else {\r\n                // Single result\r\n                const result = results[0];\r\n                if (!result.uri) {\r\n                    return;\r\n                }\r\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\r\n                    if (!ref.object || !ref.object.textEditorModel) {\r\n                        ref.dispose();\r\n                        return;\r\n                    }\r\n                    const { object: { textEditorModel } } = ref;\r\n                    const { startLineNumber } = result.range;\r\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\r\n                        // invalid range\r\n                        ref.dispose();\r\n                        return;\r\n                    }\r\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\r\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\r\n                    this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\r\n                    ref.dispose();\r\n                });\r\n            }\r\n        });\r\n    }\r\n    getPreviewValue(textEditorModel, startLineNumber, result) {\r\n        let rangeToUse = result.range;\r\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\r\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\r\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\r\n        }\r\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\r\n        return previewValue;\r\n    }\r\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\r\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\r\n        let minIndent = startIndent;\r\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\r\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\r\n            minIndent = Math.min(minIndent, endIndent);\r\n        }\r\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\r\n        return previewValue;\r\n    }\r\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\r\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\r\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\r\n        let endLineNumber = startLineNumber + 1;\r\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\r\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\r\n            if (startIndent === endIndent) {\r\n                break;\r\n            }\r\n        }\r\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\r\n    }\r\n    addDecoration(range, hoverMessage) {\r\n        const newDecorations = {\r\n            range: range,\r\n            options: {\r\n                description: 'goto-definition-link',\r\n                inlineClassName: 'goto-definition-link',\r\n                hoverMessage\r\n            }\r\n        };\r\n        this.linkDecorations.set([newDecorations]);\r\n    }\r\n    removeLinkDecorations() {\r\n        this.linkDecorations.clear();\r\n    }\r\n    isEnabled(mouseEvent, withKey) {\r\n        var _a;\r\n        return this.editor.hasModel()\r\n            && mouseEvent.isLeftClick\r\n            && mouseEvent.isNoneOrSingleMouseDown\r\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\r\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\r\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\r\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\r\n    }\r\n    findDefinition(position, token) {\r\n        const model = this.editor.getModel();\r\n        if (!model) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\r\n    }\r\n    gotoDefinition(position, openToSide) {\r\n        this.editor.setPosition(position);\r\n        return this.editor.invokeWithinContext((accessor) => {\r\n            const canPeek = !openToSide && this.editor.getOption(87 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\r\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\r\n            return action.run(accessor);\r\n        });\r\n    }\r\n    isInPeekEditor(accessor) {\r\n        const contextKeyService = accessor.get(IContextKeyService);\r\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\r\n    }\r\n    dispose() {\r\n        this.toUnhook.dispose();\r\n        this.toUnhookForKeyboard.dispose();\r\n    }\r\n};\r\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\r\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\r\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([\r\n    __param(1, ITextModelService),\r\n    __param(2, ILanguageService),\r\n    __param(3, ILanguageFeaturesService)\r\n], GotoDefinitionAtPositionEditorContribution);\r\nexport { GotoDefinitionAtPositionEditorContribution };\r\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../../../base/common/platform.js';\r\nfunction hasModifier(e, modifier) {\r\n    return !!e[modifier];\r\n}\r\n/**\r\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\r\n */\r\nexport class ClickLinkMouseEvent {\r\n    constructor(source, opts) {\r\n        this.target = source.target;\r\n        this.isLeftClick = source.event.leftButton;\r\n        this.isMiddleClick = source.event.middleButton;\r\n        this.isRightClick = source.event.rightButton;\r\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\r\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\r\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\r\n    }\r\n}\r\n/**\r\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\r\n */\r\nexport class ClickLinkKeyboardEvent {\r\n    constructor(source, opts) {\r\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\r\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\r\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\r\n    }\r\n}\r\nexport class ClickLinkOptions {\r\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\r\n        this.triggerKey = triggerKey;\r\n        this.triggerModifier = triggerModifier;\r\n        this.triggerSideBySideKey = triggerSideBySideKey;\r\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\r\n    }\r\n    equals(other) {\r\n        return (this.triggerKey === other.triggerKey\r\n            && this.triggerModifier === other.triggerModifier\r\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\r\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\r\n    }\r\n}\r\nfunction createOptions(multiCursorModifier) {\r\n    if (multiCursorModifier === 'altKey') {\r\n        if (platform.isMacintosh) {\r\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\r\n        }\r\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\r\n    }\r\n    if (platform.isMacintosh) {\r\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\r\n    }\r\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\r\n}\r\nexport class ClickLinkGesture extends Disposable {\r\n    constructor(editor, opts) {\r\n        var _a;\r\n        super();\r\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\r\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\r\n        this._onExecute = this._register(new Emitter());\r\n        this.onExecute = this._onExecute.event;\r\n        this._onCancel = this._register(new Emitter());\r\n        this.onCancel = this._onCancel.event;\r\n        this._editor = editor;\r\n        this._extractLineNumberFromMouseEvent = (_a = opts === null || opts === void 0 ? void 0 : opts.extractLineNumberFromMouseEvent) !== null && _a !== void 0 ? _a : ((e) => e.target.position ? e.target.position.lineNumber : 0);\r\n        this._opts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\r\n        this._lastMouseMoveEvent = null;\r\n        this._hasTriggerKeyOnMouseDown = false;\r\n        this._lineNumberOnMouseDown = 0;\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(77 /* EditorOption.multiCursorModifier */)) {\r\n                const newOpts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\r\n                if (this._opts.equals(newOpts)) {\r\n                    return;\r\n                }\r\n                this._opts = newOpts;\r\n                this._lastMouseMoveEvent = null;\r\n                this._hasTriggerKeyOnMouseDown = false;\r\n                this._lineNumberOnMouseDown = 0;\r\n                this._onCancel.fire();\r\n            }\r\n        }));\r\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\r\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\r\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\r\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\r\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\r\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\r\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\r\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\r\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\r\n        this._register(this._editor.onDidScrollChange((e) => {\r\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\r\n                this._resetHandler();\r\n            }\r\n        }));\r\n    }\r\n    _onDidChangeCursorSelection(e) {\r\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\r\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\r\n        }\r\n    }\r\n    _onEditorMouseMove(mouseEvent) {\r\n        this._lastMouseMoveEvent = mouseEvent;\r\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\r\n    }\r\n    _onEditorMouseDown(mouseEvent) {\r\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\r\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\r\n        // release the mouse button without wanting to do the navigation.\r\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\r\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\r\n        this._lineNumberOnMouseDown = this._extractLineNumberFromMouseEvent(mouseEvent);\r\n    }\r\n    _onEditorMouseUp(mouseEvent) {\r\n        const currentLineNumber = this._extractLineNumberFromMouseEvent(mouseEvent);\r\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\r\n            this._onExecute.fire(mouseEvent);\r\n        }\r\n    }\r\n    _onEditorKeyDown(e) {\r\n        if (this._lastMouseMoveEvent\r\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\r\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\r\n            )) {\r\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\r\n        }\r\n        else if (e.hasTriggerModifier) {\r\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\r\n        }\r\n    }\r\n    _onEditorKeyUp(e) {\r\n        if (e.keyCodeIsTriggerKey) {\r\n            this._onCancel.fire();\r\n        }\r\n    }\r\n    _resetHandler() {\r\n        this._lastMouseMoveEvent = null;\r\n        this._hasTriggerKeyOnMouseDown = false;\r\n        this._onCancel.fire();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Action } from '../../../../base/common/actions.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport * as objects from '../../../../base/common/objects.js';\r\nimport './media/peekViewWidget.css';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nexport const IPeekViewService = createDecorator('IPeekViewService');\r\nregisterSingleton(IPeekViewService, class {\r\n    constructor() {\r\n        this._widgets = new Map();\r\n    }\r\n    addExclusiveWidget(editor, widget) {\r\n        const existing = this._widgets.get(editor);\r\n        if (existing) {\r\n            existing.listener.dispose();\r\n            existing.widget.dispose();\r\n        }\r\n        const remove = () => {\r\n            const data = this._widgets.get(editor);\r\n            if (data && data.widget === widget) {\r\n                data.listener.dispose();\r\n                this._widgets.delete(editor);\r\n            }\r\n        };\r\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\r\n    }\r\n}, 1 /* InstantiationType.Delayed */);\r\nexport var PeekContext;\r\n(function (PeekContext) {\r\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\r\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\r\n})(PeekContext || (PeekContext = {}));\r\nlet PeekContextController = class PeekContextController {\r\n    constructor(editor, contextKeyService) {\r\n        if (editor instanceof EmbeddedCodeEditorWidget) {\r\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\r\n        }\r\n    }\r\n    dispose() { }\r\n};\r\nPeekContextController.ID = 'editor.contrib.referenceController';\r\nPeekContextController = __decorate([\r\n    __param(1, IContextKeyService)\r\n], PeekContextController);\r\nregisterEditorContribution(PeekContextController.ID, PeekContextController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to define a context key\r\nexport function getOuterEditor(accessor) {\r\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\r\n    if (editor instanceof EmbeddedCodeEditorWidget) {\r\n        return editor.getParentEditor();\r\n    }\r\n    return editor;\r\n}\r\nconst defaultOptions = {\r\n    headerBackgroundColor: Color.white,\r\n    primaryHeadingColor: Color.fromHex('#333333'),\r\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\r\n};\r\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\r\n    constructor(editor, options, instantiationService) {\r\n        super(editor, options);\r\n        this.instantiationService = instantiationService;\r\n        this._onDidClose = new Emitter();\r\n        this.onDidClose = this._onDidClose.event;\r\n        objects.mixin(this.options, defaultOptions, false);\r\n    }\r\n    dispose() {\r\n        if (!this.disposed) {\r\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\r\n            super.dispose();\r\n            this._onDidClose.fire(this);\r\n        }\r\n    }\r\n    style(styles) {\r\n        const options = this.options;\r\n        if (styles.headerBackgroundColor) {\r\n            options.headerBackgroundColor = styles.headerBackgroundColor;\r\n        }\r\n        if (styles.primaryHeadingColor) {\r\n            options.primaryHeadingColor = styles.primaryHeadingColor;\r\n        }\r\n        if (styles.secondaryHeadingColor) {\r\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\r\n        }\r\n        super.style(styles);\r\n    }\r\n    _applyStyles() {\r\n        super._applyStyles();\r\n        const options = this.options;\r\n        if (this._headElement && options.headerBackgroundColor) {\r\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\r\n        }\r\n        if (this._primaryHeading && options.primaryHeadingColor) {\r\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\r\n        }\r\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\r\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\r\n        }\r\n        if (this._bodyElement && options.frameColor) {\r\n            this._bodyElement.style.borderColor = options.frameColor.toString();\r\n        }\r\n    }\r\n    _fillContainer(container) {\r\n        this.setCssClass('peekview-widget');\r\n        this._headElement = dom.$('.head');\r\n        this._bodyElement = dom.$('.body');\r\n        this._fillHead(this._headElement);\r\n        this._fillBody(this._bodyElement);\r\n        container.appendChild(this._headElement);\r\n        container.appendChild(this._bodyElement);\r\n    }\r\n    _fillHead(container, noCloseAction) {\r\n        this._titleElement = dom.$('.peekview-title');\r\n        if (this.options.supportOnTitleClick) {\r\n            this._titleElement.classList.add('clickable');\r\n            dom.addStandardDisposableListener(this._titleElement, 'click', event => this._onTitleClick(event));\r\n        }\r\n        dom.append(this._headElement, this._titleElement);\r\n        this._fillTitleIcon(this._titleElement);\r\n        this._primaryHeading = dom.$('span.filename');\r\n        this._secondaryHeading = dom.$('span.dirname');\r\n        this._metaHeading = dom.$('span.meta');\r\n        dom.append(this._titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\r\n        const actionsContainer = dom.$('.peekview-actions');\r\n        dom.append(this._headElement, actionsContainer);\r\n        const actionBarOptions = this._getActionBarOptions();\r\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\r\n        this._disposables.add(this._actionbarWidget);\r\n        if (!noCloseAction) {\r\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), ThemeIcon.asClassName(Codicon.close), true, () => {\r\n                this.dispose();\r\n                return Promise.resolve();\r\n            }), { label: false, icon: true });\r\n        }\r\n    }\r\n    _fillTitleIcon(container) {\r\n    }\r\n    _getActionBarOptions() {\r\n        return {\r\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\r\n            orientation: 0 /* ActionsOrientation.HORIZONTAL */\r\n        };\r\n    }\r\n    _onTitleClick(event) {\r\n        // implement me if supportOnTitleClick option is set\r\n    }\r\n    setTitle(primaryHeading, secondaryHeading) {\r\n        if (this._primaryHeading && this._secondaryHeading) {\r\n            this._primaryHeading.innerText = primaryHeading;\r\n            this._primaryHeading.setAttribute('title', primaryHeading);\r\n            if (secondaryHeading) {\r\n                this._secondaryHeading.innerText = secondaryHeading;\r\n            }\r\n            else {\r\n                dom.clearNode(this._secondaryHeading);\r\n            }\r\n        }\r\n    }\r\n    setMetaTitle(value) {\r\n        if (this._metaHeading) {\r\n            if (value) {\r\n                this._metaHeading.innerText = value;\r\n                dom.show(this._metaHeading);\r\n            }\r\n            else {\r\n                dom.hide(this._metaHeading);\r\n            }\r\n        }\r\n    }\r\n    _doLayout(heightInPixel, widthInPixel) {\r\n        if (!this._isShowing && heightInPixel < 0) {\r\n            // Looks like the view zone got folded away!\r\n            this.dispose();\r\n            return;\r\n        }\r\n        const headHeight = Math.ceil(this.editor.getOption(66 /* EditorOption.lineHeight */) * 1.2);\r\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\r\n        this._doLayoutHead(headHeight, widthInPixel);\r\n        this._doLayoutBody(bodyHeight, widthInPixel);\r\n    }\r\n    _doLayoutHead(heightInPixel, widthInPixel) {\r\n        if (this._headElement) {\r\n            this._headElement.style.height = `${heightInPixel}px`;\r\n            this._headElement.style.lineHeight = this._headElement.style.height;\r\n        }\r\n    }\r\n    _doLayoutBody(heightInPixel, widthInPixel) {\r\n        if (this._bodyElement) {\r\n            this._bodyElement.style.height = `${heightInPixel}px`;\r\n        }\r\n    }\r\n};\r\nPeekViewWidget = __decorate([\r\n    __param(2, IInstantiationService)\r\n], PeekViewWidget);\r\nexport { PeekViewWidget };\r\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\r\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\r\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hcDark: '#FFFFFF99', hcLight: '#292929' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\r\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\r\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\r\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\r\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\r\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hcDark: null, hcLight: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\r\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\r\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\r\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\r\nexport const peekViewEditorStickyScrollBackground = registerColor('peekViewEditorStickyScroll.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorStickScrollBackground', 'Background color of sticky scroll in the peek view editor.'));\r\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hcDark: null, hcLight: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\r\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hcDark: null, hcLight: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\r\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { CodeEditorWidget } from './codeEditorWidget.js';\r\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\r\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\r\n    constructor(domElement, options, codeEditorWidgetOptions, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\r\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\r\n        this._parentEditor = parentEditor;\r\n        this._overwriteOptions = options;\r\n        // Overwrite parent's options\r\n        super.updateOptions(this._overwriteOptions);\r\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\r\n    }\r\n    getParentEditor() {\r\n        return this._parentEditor;\r\n    }\r\n    _onParentConfigurationChanged(e) {\r\n        super.updateOptions(this._parentEditor.getRawOptions());\r\n        super.updateOptions(this._overwriteOptions);\r\n    }\r\n    updateOptions(newOptions) {\r\n        objects.mixin(this._overwriteOptions, newOptions, true);\r\n        super.updateOptions(this._overwriteOptions);\r\n    }\r\n};\r\nEmbeddedCodeEditorWidget = __decorate([\r\n    __param(4, IInstantiationService),\r\n    __param(5, ICodeEditorService),\r\n    __param(6, ICommandService),\r\n    __param(7, IContextKeyService),\r\n    __param(8, IThemeService),\r\n    __param(9, INotificationService),\r\n    __param(10, IAccessibilityService),\r\n    __param(11, ILanguageConfigurationService),\r\n    __param(12, ILanguageFeaturesService)\r\n], EmbeddedCodeEditorWidget);\r\nexport { EmbeddedCodeEditorWidget };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\r\nimport { Color, RGBA } from '../../../../base/common/color.js';\r\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../../base/common/objects.js';\r\nimport './zoneWidget.css';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nconst defaultColor = new Color(new RGBA(0, 122, 204));\r\nconst defaultOptions = {\r\n    showArrow: true,\r\n    showFrame: true,\r\n    className: '',\r\n    frameColor: defaultColor,\r\n    arrowColor: defaultColor,\r\n    keepEditorSelection: false\r\n};\r\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\r\nclass ViewZoneDelegate {\r\n    constructor(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight, showInHiddenAreas, ordinal) {\r\n        this.id = ''; // A valid zone id should be greater than 0\r\n        this.domNode = domNode;\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.afterColumn = afterColumn;\r\n        this.heightInLines = heightInLines;\r\n        this.showInHiddenAreas = showInHiddenAreas;\r\n        this.ordinal = ordinal;\r\n        this._onDomNodeTop = onDomNodeTop;\r\n        this._onComputedHeight = onComputedHeight;\r\n    }\r\n    onDomNodeTop(top) {\r\n        this._onDomNodeTop(top);\r\n    }\r\n    onComputedHeight(height) {\r\n        this._onComputedHeight(height);\r\n    }\r\n}\r\nexport class OverlayWidgetDelegate {\r\n    constructor(id, domNode) {\r\n        this._id = id;\r\n        this._domNode = domNode;\r\n    }\r\n    getId() {\r\n        return this._id;\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return null;\r\n    }\r\n}\r\nclass Arrow {\r\n    constructor(_editor) {\r\n        this._editor = _editor;\r\n        this._ruleName = Arrow._IdGenerator.nextId();\r\n        this._decorations = this._editor.createDecorationsCollection();\r\n        this._color = null;\r\n        this._height = -1;\r\n    }\r\n    dispose() {\r\n        this.hide();\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n    }\r\n    set color(value) {\r\n        if (this._color !== value) {\r\n            this._color = value;\r\n            this._updateStyle();\r\n        }\r\n    }\r\n    set height(value) {\r\n        if (this._height !== value) {\r\n            this._height = value;\r\n            this._updateStyle();\r\n        }\r\n    }\r\n    _updateStyle() {\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n        dom.createCSSRule(`.monaco-editor ${this._ruleName}`, `border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `);\r\n    }\r\n    show(where) {\r\n        if (where.column === 1) {\r\n            // the arrow isn't pretty at column 1 and we need to push it out a little\r\n            where = { lineNumber: where.lineNumber, column: 2 };\r\n        }\r\n        this._decorations.set([{\r\n                range: Range.fromPositions(where),\r\n                options: {\r\n                    description: 'zone-widget-arrow',\r\n                    className: this._ruleName,\r\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\r\n                }\r\n            }]);\r\n    }\r\n    hide() {\r\n        this._decorations.clear();\r\n    }\r\n}\r\nArrow._IdGenerator = new IdGenerator('.arrow-decoration-');\r\nexport class ZoneWidget {\r\n    constructor(editor, options = {}) {\r\n        this._arrow = null;\r\n        this._overlayWidget = null;\r\n        this._resizeSash = null;\r\n        this._viewZone = null;\r\n        this._disposables = new DisposableStore();\r\n        this.container = null;\r\n        this._isShowing = false;\r\n        this.editor = editor;\r\n        this._positionMarkerId = this.editor.createDecorationsCollection();\r\n        this.options = objects.deepClone(options);\r\n        objects.mixin(this.options, defaultOptions, false);\r\n        this.domNode = document.createElement('div');\r\n        if (!this.options.isAccessible) {\r\n            this.domNode.setAttribute('aria-hidden', 'true');\r\n            this.domNode.setAttribute('role', 'presentation');\r\n        }\r\n        this._disposables.add(this.editor.onDidLayoutChange((info) => {\r\n            const width = this._getWidth(info);\r\n            this.domNode.style.width = width + 'px';\r\n            this.domNode.style.left = this._getLeft(info) + 'px';\r\n            this._onWidth(width);\r\n        }));\r\n    }\r\n    dispose() {\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(accessor => {\r\n                if (this._viewZone) {\r\n                    accessor.removeZone(this._viewZone.id);\r\n                }\r\n                this._viewZone = null;\r\n            });\r\n        }\r\n        this._positionMarkerId.clear();\r\n        this._disposables.dispose();\r\n    }\r\n    create() {\r\n        this.domNode.classList.add('zone-widget');\r\n        if (this.options.className) {\r\n            this.domNode.classList.add(this.options.className);\r\n        }\r\n        this.container = document.createElement('div');\r\n        this.container.classList.add('zone-widget-container');\r\n        this.domNode.appendChild(this.container);\r\n        if (this.options.showArrow) {\r\n            this._arrow = new Arrow(this.editor);\r\n            this._disposables.add(this._arrow);\r\n        }\r\n        this._fillContainer(this.container);\r\n        this._initSash();\r\n        this._applyStyles();\r\n    }\r\n    style(styles) {\r\n        if (styles.frameColor) {\r\n            this.options.frameColor = styles.frameColor;\r\n        }\r\n        if (styles.arrowColor) {\r\n            this.options.arrowColor = styles.arrowColor;\r\n        }\r\n        this._applyStyles();\r\n    }\r\n    _applyStyles() {\r\n        if (this.container && this.options.frameColor) {\r\n            const frameColor = this.options.frameColor.toString();\r\n            this.container.style.borderTopColor = frameColor;\r\n            this.container.style.borderBottomColor = frameColor;\r\n        }\r\n        if (this._arrow && this.options.arrowColor) {\r\n            const arrowColor = this.options.arrowColor.toString();\r\n            this._arrow.color = arrowColor;\r\n        }\r\n    }\r\n    _getWidth(info) {\r\n        return info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\r\n    }\r\n    _getLeft(info) {\r\n        // If minimap is to the left, we move beyond it\r\n        if (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\r\n            return info.minimap.minimapWidth;\r\n        }\r\n        return 0;\r\n    }\r\n    _onViewZoneTop(top) {\r\n        this.domNode.style.top = top + 'px';\r\n    }\r\n    _onViewZoneHeight(height) {\r\n        var _a;\r\n        this.domNode.style.height = `${height}px`;\r\n        if (this.container) {\r\n            const containerHeight = height - this._decoratingElementsHeight();\r\n            this.container.style.height = `${containerHeight}px`;\r\n            const layoutInfo = this.editor.getLayoutInfo();\r\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\r\n        }\r\n        (_a = this._resizeSash) === null || _a === void 0 ? void 0 : _a.layout();\r\n    }\r\n    get position() {\r\n        const range = this._positionMarkerId.getRange(0);\r\n        if (!range) {\r\n            return undefined;\r\n        }\r\n        return range.getStartPosition();\r\n    }\r\n    show(rangeOrPos, heightInLines) {\r\n        const range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\r\n        this._isShowing = true;\r\n        this._showImpl(range, heightInLines);\r\n        this._isShowing = false;\r\n        this._positionMarkerId.set([{ range, options: ModelDecorationOptions.EMPTY }]);\r\n    }\r\n    hide() {\r\n        var _a;\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(accessor => {\r\n                if (this._viewZone) {\r\n                    accessor.removeZone(this._viewZone.id);\r\n                }\r\n            });\r\n            this._viewZone = null;\r\n        }\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        (_a = this._arrow) === null || _a === void 0 ? void 0 : _a.hide();\r\n        this._positionMarkerId.clear();\r\n    }\r\n    _decoratingElementsHeight() {\r\n        const lineHeight = this.editor.getOption(66 /* EditorOption.lineHeight */);\r\n        let result = 0;\r\n        if (this.options.showArrow) {\r\n            const arrowHeight = Math.round(lineHeight / 3);\r\n            result += 2 * arrowHeight;\r\n        }\r\n        if (this.options.showFrame) {\r\n            const frameThickness = Math.round(lineHeight / 9);\r\n            result += 2 * frameThickness;\r\n        }\r\n        return result;\r\n    }\r\n    _showImpl(where, heightInLines) {\r\n        const position = where.getStartPosition();\r\n        const layoutInfo = this.editor.getLayoutInfo();\r\n        const width = this._getWidth(layoutInfo);\r\n        this.domNode.style.width = `${width}px`;\r\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\r\n        // Render the widget as zone (rendering) and widget (lifecycle)\r\n        const viewZoneDomNode = document.createElement('div');\r\n        viewZoneDomNode.style.overflow = 'hidden';\r\n        const lineHeight = this.editor.getOption(66 /* EditorOption.lineHeight */);\r\n        // adjust heightInLines to viewport\r\n        if (!this.options.allowUnlimitedHeight) {\r\n            const maxHeightInLines = Math.max(12, (this.editor.getLayoutInfo().height / lineHeight) * 0.8);\r\n            heightInLines = Math.min(heightInLines, maxHeightInLines);\r\n        }\r\n        let arrowHeight = 0;\r\n        let frameThickness = 0;\r\n        // Render the arrow one 1/3 of an editor line height\r\n        if (this._arrow && this.options.showArrow) {\r\n            arrowHeight = Math.round(lineHeight / 3);\r\n            this._arrow.height = arrowHeight;\r\n            this._arrow.show(position);\r\n        }\r\n        // Render the frame as 1/9 of an editor line height\r\n        if (this.options.showFrame) {\r\n            frameThickness = Math.round(lineHeight / 9);\r\n        }\r\n        // insert zone widget\r\n        this.editor.changeViewZones((accessor) => {\r\n            if (this._viewZone) {\r\n                accessor.removeZone(this._viewZone.id);\r\n            }\r\n            if (this._overlayWidget) {\r\n                this.editor.removeOverlayWidget(this._overlayWidget);\r\n                this._overlayWidget = null;\r\n            }\r\n            this.domNode.style.top = '-1000px';\r\n            this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, (top) => this._onViewZoneTop(top), (height) => this._onViewZoneHeight(height), this.options.showInHiddenAreas, this.options.ordinal);\r\n            this._viewZone.id = accessor.addZone(this._viewZone);\r\n            this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\r\n            this.editor.addOverlayWidget(this._overlayWidget);\r\n        });\r\n        if (this.container && this.options.showFrame) {\r\n            const width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\r\n            this.container.style.borderTopWidth = width + 'px';\r\n            this.container.style.borderBottomWidth = width + 'px';\r\n        }\r\n        const containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\r\n        if (this.container) {\r\n            this.container.style.top = arrowHeight + 'px';\r\n            this.container.style.height = containerHeight + 'px';\r\n            this.container.style.overflow = 'hidden';\r\n        }\r\n        this._doLayout(containerHeight, width);\r\n        if (!this.options.keepEditorSelection) {\r\n            this.editor.setSelection(where);\r\n        }\r\n        const model = this.editor.getModel();\r\n        if (model) {\r\n            const range = model.validateRange(new Range(where.startLineNumber, 1, where.endLineNumber + 1, 1));\r\n            this.revealRange(range, range.startLineNumber === model.getLineCount());\r\n        }\r\n    }\r\n    revealRange(range, isLastLine) {\r\n        if (isLastLine) {\r\n            this.editor.revealLineNearTop(range.endLineNumber, 0 /* ScrollType.Smooth */);\r\n        }\r\n        else {\r\n            this.editor.revealRange(range, 0 /* ScrollType.Smooth */);\r\n        }\r\n    }\r\n    setCssClass(className, classToReplace) {\r\n        if (!this.container) {\r\n            return;\r\n        }\r\n        if (classToReplace) {\r\n            this.container.classList.remove(classToReplace);\r\n        }\r\n        this.container.classList.add(className);\r\n    }\r\n    _onWidth(widthInPixel) {\r\n        // implement in subclass\r\n    }\r\n    _doLayout(heightInPixel, widthInPixel) {\r\n        // implement in subclass\r\n    }\r\n    _relayout(newHeightInLines) {\r\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\r\n            this.editor.changeViewZones(accessor => {\r\n                if (this._viewZone) {\r\n                    this._viewZone.heightInLines = newHeightInLines;\r\n                    accessor.layoutZone(this._viewZone.id);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    // --- sash\r\n    _initSash() {\r\n        if (this._resizeSash) {\r\n            return;\r\n        }\r\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* Orientation.HORIZONTAL */ }));\r\n        if (!this.options.isResizeable) {\r\n            this._resizeSash.state = 0 /* SashState.Disabled */;\r\n        }\r\n        let data;\r\n        this._disposables.add(this._resizeSash.onDidStart((e) => {\r\n            if (this._viewZone) {\r\n                data = {\r\n                    startY: e.startY,\r\n                    heightInLines: this._viewZone.heightInLines,\r\n                };\r\n            }\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidEnd(() => {\r\n            data = undefined;\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidChange((evt) => {\r\n            if (data) {\r\n                const lineDelta = (evt.currentY - data.startY) / this.editor.getOption(66 /* EditorOption.lineHeight */);\r\n                const roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\r\n                const newHeightInLines = data.heightInLines + roundedLineDelta;\r\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\r\n                    this._relayout(newHeightInLines);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    getHorizontalSashLeft() {\r\n        return 0;\r\n    }\r\n    getHorizontalSashTop() {\r\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\r\n    }\r\n    getHorizontalSashWidth() {\r\n        const layoutInfo = this.editor.getLayoutInfo();\r\n        return layoutInfo.width - layoutInfo.minimap.minimapWidth;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar _a, _b, _c, _d, _e, _f, _g, _h;\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\r\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport * as corePosition from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { isLocationLink } from '../../../common/languages.js';\r\nimport { ReferencesController } from './peek/referencesController.js';\r\nimport { ReferencesModel } from './referencesModel.js';\r\nimport { ISymbolNavigationService } from './symbolNavigation.js';\r\nimport { MessageController } from '../../message/browser/messageController.js';\r\nimport { PeekContext } from '../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\r\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\r\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\r\n    submenu: MenuId.EditorContextPeek,\r\n    title: nls.localize('peek.submenu', \"Peek\"),\r\n    group: 'navigation',\r\n    order: 100\r\n});\r\nexport class SymbolNavigationAnchor {\r\n    static is(thing) {\r\n        if (!thing || typeof thing !== 'object') {\r\n            return false;\r\n        }\r\n        if (thing instanceof SymbolNavigationAnchor) {\r\n            return true;\r\n        }\r\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    constructor(model, position) {\r\n        this.model = model;\r\n        this.position = position;\r\n    }\r\n}\r\nexport class SymbolNavigationAction extends EditorAction2 {\r\n    static all() {\r\n        return SymbolNavigationAction._allSymbolNavigationCommands.values();\r\n    }\r\n    static _patchConfig(opts) {\r\n        const result = Object.assign(Object.assign({}, opts), { f1: true });\r\n        // patch context menu when clause\r\n        if (result.menu) {\r\n            for (const item of Iterable.wrap(result.menu)) {\r\n                if (item.id === MenuId.EditorContext || item.id === MenuId.EditorContextPeek) {\r\n                    item.when = ContextKeyExpr.and(opts.precondition, item.when);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    constructor(configuration, opts) {\r\n        super(SymbolNavigationAction._patchConfig(opts));\r\n        this.configuration = configuration;\r\n        SymbolNavigationAction._allSymbolNavigationCommands.set(opts.id, this);\r\n    }\r\n    runEditorCommand(accessor, editor, arg, range) {\r\n        if (!editor.hasModel()) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        const notificationService = accessor.get(INotificationService);\r\n        const editorService = accessor.get(ICodeEditorService);\r\n        const progressService = accessor.get(IEditorProgressService);\r\n        const symbolNavService = accessor.get(ISymbolNavigationService);\r\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n        const instaService = accessor.get(IInstantiationService);\r\n        const model = editor.getModel();\r\n        const position = editor.getPosition();\r\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\r\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\r\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\r\n            var _j;\r\n            if (!references || cts.token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            alert(references.ariaMessage);\r\n            let altAction;\r\n            if (references.referenceAt(model.uri, position)) {\r\n                const altActionId = this._getAlternativeCommand(editor);\r\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && SymbolNavigationAction._allSymbolNavigationCommands.has(altActionId)) {\r\n                    altAction = SymbolNavigationAction._allSymbolNavigationCommands.get(altActionId);\r\n                }\r\n            }\r\n            const referenceCount = references.references.length;\r\n            if (referenceCount === 0) {\r\n                // no result -> show message\r\n                if (!this.configuration.muteMessage) {\r\n                    const info = model.getWordAtPosition(position);\r\n                    (_j = MessageController.get(editor)) === null || _j === void 0 ? void 0 : _j.showMessage(this._getNoResultFoundMessage(info), position);\r\n                }\r\n            }\r\n            else if (referenceCount === 1 && altAction) {\r\n                // already at the only result, run alternative\r\n                SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id);\r\n                instaService.invokeFunction((accessor) => altAction.runEditorCommand(accessor, editor, arg, range).finally(() => {\r\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id);\r\n                }));\r\n            }\r\n            else {\r\n                // normal results handling\r\n                return this._onResult(editorService, symbolNavService, editor, references, range);\r\n            }\r\n        }), (err) => {\r\n            // report an error\r\n            notificationService.error(err);\r\n        }).finally(() => {\r\n            cts.dispose();\r\n        });\r\n        progressService.showWhile(promise, 250);\r\n        return promise;\r\n    }\r\n    _onResult(editorService, symbolNavService, editor, model, range) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const gotoLocation = this._getGoToPreference(editor);\r\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\r\n                this._openInPeek(editor, model, range);\r\n            }\r\n            else {\r\n                const next = model.firstReference();\r\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\r\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\r\n                if (peek && targetEditor) {\r\n                    this._openInPeek(targetEditor, model, range);\r\n                }\r\n                else {\r\n                    model.dispose();\r\n                }\r\n                // keep remaining locations around when using\r\n                // 'goto'-mode\r\n                if (gotoLocation === 'goto') {\r\n                    symbolNavService.put(next);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // range is the target-selection-range when we have one\r\n            // and the fallback is the 'full' range\r\n            let range = undefined;\r\n            if (isLocationLink(reference)) {\r\n                range = reference.targetSelectionRange;\r\n            }\r\n            if (!range) {\r\n                range = reference.range;\r\n            }\r\n            if (!range) {\r\n                return undefined;\r\n            }\r\n            const targetEditor = yield editorService.openCodeEditor({\r\n                resource: reference.uri,\r\n                options: {\r\n                    selection: Range.collapseToStart(range),\r\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\r\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\r\n                }\r\n            }, editor, sideBySide);\r\n            if (!targetEditor) {\r\n                return undefined;\r\n            }\r\n            if (highlight) {\r\n                const modelNow = targetEditor.getModel();\r\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\r\n                setTimeout(() => {\r\n                    if (targetEditor.getModel() === modelNow) {\r\n                        decorations.clear();\r\n                    }\r\n                }, 350);\r\n            }\r\n            return targetEditor;\r\n        });\r\n    }\r\n    _openInPeek(target, model, range) {\r\n        const controller = ReferencesController.get(target);\r\n        if (controller && target.hasModel()) {\r\n            controller.toggleWidget(range !== null && range !== void 0 ? range : target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\r\n        }\r\n        else {\r\n            model.dispose();\r\n        }\r\n    }\r\n}\r\nSymbolNavigationAction._allSymbolNavigationCommands = new Map();\r\nSymbolNavigationAction._activeAlternativeCommands = new Set();\r\n//#region --- DEFINITION\r\nexport class DefinitionAction extends SymbolNavigationAction {\r\n    _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\r\n        });\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\r\n            : nls.localize('generic.noResults', \"No definition found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDefinitions;\r\n    }\r\n}\r\nregisterAction2((_a = class GoToDefinitionAction extends DefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _a.id,\r\n                title: {\r\n                    value: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\r\n                    original: 'Go to Definition',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: [{\r\n                        when: EditorContextKeys.editorTextFocus,\r\n                        primary: 70 /* KeyCode.F12 */,\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }, {\r\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\r\n                        primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }],\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.1\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 2,\r\n                    }]\r\n            });\r\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', _a.id);\r\n        }\r\n    },\r\n    _a.id = 'editor.action.revealDefinition',\r\n    _a));\r\nregisterAction2((_b = class OpenDefinitionToSideAction extends DefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: true,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _b.id,\r\n                title: {\r\n                    value: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\r\n                    original: 'Open Definition to the Side'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: [{\r\n                        when: EditorContextKeys.editorTextFocus,\r\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 70 /* KeyCode.F12 */),\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }, {\r\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\r\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */),\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }]\r\n            });\r\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', _b.id);\r\n        }\r\n    },\r\n    _b.id = 'editor.action.revealDefinitionAside',\r\n    _b));\r\nregisterAction2((_c = class PeekDefinitionAction extends DefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: _c.id,\r\n                title: {\r\n                    value: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\r\n                    original: 'Peek Definition'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\r\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: {\r\n                    id: MenuId.EditorContextPeek,\r\n                    group: 'peek',\r\n                    order: 2\r\n                }\r\n            });\r\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', _c.id);\r\n        }\r\n    },\r\n    _c.id = 'editor.action.peekDefinition',\r\n    _c));\r\n//#endregion\r\n//#region --- DECLARATION\r\nclass DeclarationAction extends SymbolNavigationAction {\r\n    _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\r\n        });\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDeclarations;\r\n    }\r\n}\r\nregisterAction2((_d = class GoToDeclarationAction extends DeclarationAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _d.id,\r\n                title: {\r\n                    value: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\r\n                    original: 'Go to Declaration',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.3\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 3,\r\n                    }],\r\n            });\r\n        }\r\n        _getNoResultFoundMessage(info) {\r\n            return info && info.word\r\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n        }\r\n    },\r\n    _d.id = 'editor.action.revealDeclaration',\r\n    _d));\r\nregisterAction2(class PeekDeclarationAction extends DeclarationAction {\r\n    constructor() {\r\n        super({\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.peekDeclaration',\r\n            title: {\r\n                value: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\r\n                original: 'Peek Declaration'\r\n            },\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n            menu: {\r\n                id: MenuId.EditorContextPeek,\r\n                group: 'peek',\r\n                order: 3\r\n            }\r\n        });\r\n    }\r\n});\r\n//#endregion\r\n//#region --- TYPE DEFINITION\r\nclass TypeDefinitionAction extends SymbolNavigationAction {\r\n    _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\r\n        });\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\r\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\r\n    }\r\n}\r\nregisterAction2((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _e.ID,\r\n                title: {\r\n                    value: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\r\n                    original: 'Go to Type Definition',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 0,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.4\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 3,\r\n                    }]\r\n            });\r\n        }\r\n    },\r\n    _e.ID = 'editor.action.goToTypeDefinition',\r\n    _e));\r\nregisterAction2((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: _f.ID,\r\n                title: {\r\n                    value: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\r\n                    original: 'Peek Type Definition'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                menu: {\r\n                    id: MenuId.EditorContextPeek,\r\n                    group: 'peek',\r\n                    order: 4\r\n                }\r\n            });\r\n        }\r\n    },\r\n    _f.ID = 'editor.action.peekTypeDefinition',\r\n    _f));\r\n//#endregion\r\n//#region --- IMPLEMENTATION\r\nclass ImplementationAction extends SymbolNavigationAction {\r\n    _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\r\n        });\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\r\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleImplementations;\r\n    }\r\n}\r\nregisterAction2((_g = class GoToImplementationAction extends ImplementationAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _g.ID,\r\n                title: {\r\n                    value: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\r\n                    original: 'Go to Implementations',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.45\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 4,\r\n                    }]\r\n            });\r\n        }\r\n    },\r\n    _g.ID = 'editor.action.goToImplementation',\r\n    _g));\r\nregisterAction2((_h = class PeekImplementationAction extends ImplementationAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: _h.ID,\r\n                title: {\r\n                    value: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\r\n                    original: 'Peek Implementations'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: {\r\n                    id: MenuId.EditorContextPeek,\r\n                    group: 'peek',\r\n                    order: 5\r\n                }\r\n            });\r\n        }\r\n    },\r\n    _h.ID = 'editor.action.peekImplementation',\r\n    _h));\r\n//#endregion\r\n//#region --- REFERENCES\r\nclass ReferencesAction extends SymbolNavigationAction {\r\n    _getNoResultFoundMessage(info) {\r\n        return info\r\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\r\n            : nls.localize('references.noGeneric', \"No references found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\r\n    }\r\n}\r\nregisterAction2(class GoToReferencesAction extends ReferencesAction {\r\n    constructor() {\r\n        super({\r\n            openToSide: false,\r\n            openInPeek: false,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.goToReferences',\r\n            title: {\r\n                value: nls.localize('goToReferences.label', \"Go to References\"),\r\n                original: 'Go to References',\r\n                mnemonicTitle: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\r\n            },\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n            keybinding: {\r\n                when: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menu: [{\r\n                    id: MenuId.EditorContext,\r\n                    group: 'navigation',\r\n                    order: 1.45\r\n                }, {\r\n                    id: MenuId.MenubarGoMenu,\r\n                    precondition: null,\r\n                    group: '4_symbol_nav',\r\n                    order: 5,\r\n                }]\r\n        });\r\n    }\r\n    _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\r\n        });\r\n    }\r\n});\r\nregisterAction2(class PeekReferencesAction extends ReferencesAction {\r\n    constructor() {\r\n        super({\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.referenceSearch.trigger',\r\n            title: {\r\n                value: nls.localize('references.action.label', \"Peek References\"),\r\n                original: 'Peek References'\r\n            },\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n            menu: {\r\n                id: MenuId.EditorContextPeek,\r\n                group: 'peek',\r\n                order: 6\r\n            }\r\n        });\r\n    }\r\n    _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\r\n        });\r\n    }\r\n});\r\n//#endregion\r\n//#region --- GENERIC goto symbols command\r\nclass GenericGoToLocationAction extends SymbolNavigationAction {\r\n    constructor(config, _references, _gotoMultipleBehaviour) {\r\n        super(config, {\r\n            id: 'editor.action.goToLocation',\r\n            title: {\r\n                value: nls.localize('label.generic', \"Go to Any Symbol\"),\r\n                original: 'Go to Any Symbol'\r\n            },\r\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n        });\r\n        this._references = _references;\r\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\r\n    }\r\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\r\n        });\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\r\n    }\r\n    _getGoToPreference(editor) {\r\n        var _j;\r\n        return (_j = this._gotoMultipleBehaviour) !== null && _j !== void 0 ? _j : editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\r\n    }\r\n    _getAlternativeCommand() { return ''; }\r\n}\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.goToLocations',\r\n    description: {\r\n        description: 'Go to locations from a position in a file',\r\n        args: [\r\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\r\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\r\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\r\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\r\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\r\n        ]\r\n    },\r\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\r\n        assertType(URI.isUri(resource));\r\n        assertType(corePosition.Position.isIPosition(position));\r\n        assertType(Array.isArray(references));\r\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\r\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\r\n        const editorService = accessor.get(ICodeEditorService);\r\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\r\n        if (isCodeEditor(editor)) {\r\n            editor.setPosition(position);\r\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\r\n            return editor.invokeWithinContext(accessor => {\r\n                const command = new class extends GenericGoToLocationAction {\r\n                    _getNoResultFoundMessage(info) {\r\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\r\n                    }\r\n                }({\r\n                    muteMessage: !Boolean(noResultsMessage),\r\n                    openInPeek: Boolean(openInPeek),\r\n                    openToSide: false\r\n                }, references, multiple);\r\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\r\n            });\r\n        }\r\n    })\r\n});\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.peekLocations',\r\n    description: {\r\n        description: 'Peek locations from a position in a file',\r\n        args: [\r\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\r\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\r\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\r\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\r\n        ]\r\n    },\r\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\r\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\r\n    })\r\n});\r\n//#endregion\r\n//#region --- REFERENCE search special commands\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.findReferences',\r\n    handler: (accessor, resource, position) => {\r\n        assertType(URI.isUri(resource));\r\n        assertType(corePosition.Position.isIPosition(position));\r\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n        const codeEditorService = accessor.get(ICodeEditorService);\r\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\r\n            if (!isCodeEditor(control) || !control.hasModel()) {\r\n                return undefined;\r\n            }\r\n            const controller = ReferencesController.get(control);\r\n            if (!controller) {\r\n                return undefined;\r\n            }\r\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\r\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n            return Promise.resolve(controller.toggleWidget(range, references, false));\r\n        });\r\n    }\r\n});\r\n// use NEW command\r\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\r\n//#endregion\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar ReferencesController_1;\r\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\r\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\r\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\r\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\r\nimport { Position } from '../../../../common/core/position.js';\r\nimport { Range } from '../../../../common/core/range.js';\r\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../../nls.js';\r\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\r\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\r\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\r\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\r\nimport { OneReference } from '../referencesModel.js';\r\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\r\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\r\nlet ReferencesController = ReferencesController_1 = class ReferencesController {\r\n    static get(editor) {\r\n        return editor.getContribution(ReferencesController_1.ID);\r\n    }\r\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\r\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\r\n        this._editor = _editor;\r\n        this._editorService = _editorService;\r\n        this._notificationService = _notificationService;\r\n        this._instantiationService = _instantiationService;\r\n        this._storageService = _storageService;\r\n        this._configurationService = _configurationService;\r\n        this._disposables = new DisposableStore();\r\n        this._requestIdPool = 0;\r\n        this._ignoreModelChangeEvent = false;\r\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\r\n    }\r\n    dispose() {\r\n        var _a, _b;\r\n        this._referenceSearchVisible.reset();\r\n        this._disposables.dispose();\r\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n    }\r\n    toggleWidget(range, modelPromise, peekMode) {\r\n        // close current widget and return early is position didn't change\r\n        let widgetPosition;\r\n        if (this._widget) {\r\n            widgetPosition = this._widget.position;\r\n        }\r\n        this.closeWidget();\r\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\r\n            return;\r\n        }\r\n        this._peekMode = peekMode;\r\n        this._referenceSearchVisible.set(true);\r\n        // close the widget on model/mode changes\r\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\r\n        this._disposables.add(this._editor.onDidChangeModel(() => {\r\n            if (!this._ignoreModelChangeEvent) {\r\n                this.closeWidget();\r\n            }\r\n        }));\r\n        const storageKey = 'peekViewLayout';\r\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\r\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\r\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\r\n        this._widget.show(range);\r\n        this._disposables.add(this._widget.onDidClose(() => {\r\n            modelPromise.cancel();\r\n            if (this._widget) {\r\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\r\n                this._widget = undefined;\r\n            }\r\n            this.closeWidget();\r\n        }));\r\n        this._disposables.add(this._widget.onDidSelectReference(event => {\r\n            const { element, kind } = event;\r\n            if (!element) {\r\n                return;\r\n            }\r\n            switch (kind) {\r\n                case 'open':\r\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\r\n                        // when stable peek is configured we don't close\r\n                        // the peek window on selecting the editor\r\n                        this.openReference(element, false, false);\r\n                    }\r\n                    break;\r\n                case 'side':\r\n                    this.openReference(element, true, false);\r\n                    break;\r\n                case 'goto':\r\n                    if (peekMode) {\r\n                        this._gotoReference(element, true);\r\n                    }\r\n                    else {\r\n                        this.openReference(element, false, true);\r\n                    }\r\n                    break;\r\n            }\r\n        }));\r\n        const requestId = ++this._requestIdPool;\r\n        modelPromise.then(model => {\r\n            var _a;\r\n            // still current request? widget still open?\r\n            if (requestId !== this._requestIdPool || !this._widget) {\r\n                model.dispose();\r\n                return undefined;\r\n            }\r\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\r\n            this._model = model;\r\n            // show widget\r\n            return this._widget.setModel(this._model).then(() => {\r\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\r\n                    // set title\r\n                    if (!this._model.isEmpty) {\r\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\r\n                    }\r\n                    else {\r\n                        this._widget.setMetaTitle('');\r\n                    }\r\n                    // set 'best' selection\r\n                    const uri = this._editor.getModel().uri;\r\n                    const pos = new Position(range.startLineNumber, range.startColumn);\r\n                    const selection = this._model.nearestReference(uri, pos);\r\n                    if (selection) {\r\n                        return this._widget.setSelection(selection).then(() => {\r\n                            if (this._widget && this._editor.getOption(86 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\r\n                                this._widget.focusOnPreviewEditor();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                return undefined;\r\n            });\r\n        }, error => {\r\n            this._notificationService.error(error);\r\n        });\r\n    }\r\n    changeFocusBetweenPreviewAndReferences() {\r\n        if (!this._widget) {\r\n            // can be called while still resolving...\r\n            return;\r\n        }\r\n        if (this._widget.isPreviewEditorFocused()) {\r\n            this._widget.focusOnReferenceTree();\r\n        }\r\n        else {\r\n            this._widget.focusOnPreviewEditor();\r\n        }\r\n    }\r\n    goToNextOrPreviousReference(fwd) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\r\n                // can be called while still resolving...\r\n                return;\r\n            }\r\n            const currentPosition = this._widget.position;\r\n            if (!currentPosition) {\r\n                return;\r\n            }\r\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\r\n            if (!source) {\r\n                return;\r\n            }\r\n            const target = this._model.nextOrPreviousReference(source, fwd);\r\n            const editorFocus = this._editor.hasTextFocus();\r\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\r\n            yield this._widget.setSelection(target);\r\n            yield this._gotoReference(target, false);\r\n            if (editorFocus) {\r\n                this._editor.focus();\r\n            }\r\n            else if (this._widget && previewEditorFocus) {\r\n                this._widget.focusOnPreviewEditor();\r\n            }\r\n        });\r\n    }\r\n    revealReference(reference) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\r\n                // can be called while still resolving...\r\n                return;\r\n            }\r\n            yield this._widget.revealReference(reference);\r\n        });\r\n    }\r\n    closeWidget(focusEditor = true) {\r\n        var _a, _b;\r\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\r\n        this._referenceSearchVisible.reset();\r\n        this._disposables.clear();\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n        if (focusEditor) {\r\n            this._editor.focus();\r\n        }\r\n        this._requestIdPool += 1; // Cancel pending requests\r\n    }\r\n    _gotoReference(ref, pinned) {\r\n        var _a;\r\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.hide();\r\n        this._ignoreModelChangeEvent = true;\r\n        const range = Range.lift(ref.range).collapseToStart();\r\n        return this._editorService.openCodeEditor({\r\n            resource: ref.uri,\r\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\r\n        }, this._editor).then(openedEditor => {\r\n            var _a;\r\n            this._ignoreModelChangeEvent = false;\r\n            if (!openedEditor || !this._widget) {\r\n                // something went wrong...\r\n                this.closeWidget();\r\n                return;\r\n            }\r\n            if (this._editor === openedEditor) {\r\n                //\r\n                this._widget.show(range);\r\n                this._widget.focusOnReferenceTree();\r\n            }\r\n            else {\r\n                // we opened a different editor instance which means a different controller instance.\r\n                // therefore we stop with this controller and continue with the other\r\n                const other = ReferencesController_1.get(openedEditor);\r\n                const model = this._model.clone();\r\n                this.closeWidget();\r\n                openedEditor.focus();\r\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\r\n            }\r\n        }, (err) => {\r\n            this._ignoreModelChangeEvent = false;\r\n            onUnexpectedError(err);\r\n        });\r\n    }\r\n    openReference(ref, sideBySide, pinned) {\r\n        // clear stage\r\n        if (!sideBySide) {\r\n            this.closeWidget();\r\n        }\r\n        const { uri, range } = ref;\r\n        this._editorService.openCodeEditor({\r\n            resource: uri,\r\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\r\n        }, this._editor, sideBySide);\r\n    }\r\n};\r\nReferencesController.ID = 'editor.contrib.referencesController';\r\nReferencesController = ReferencesController_1 = __decorate([\r\n    __param(2, IContextKeyService),\r\n    __param(3, ICodeEditorService),\r\n    __param(4, INotificationService),\r\n    __param(5, IInstantiationService),\r\n    __param(6, IStorageService),\r\n    __param(7, IConfigurationService)\r\n], ReferencesController);\r\nexport { ReferencesController };\r\nfunction withController(accessor, fn) {\r\n    const outerEditor = getOuterEditor(accessor);\r\n    if (!outerEditor) {\r\n        return;\r\n    }\r\n    const controller = ReferencesController.get(outerEditor);\r\n    if (controller) {\r\n        fn(controller);\r\n    }\r\n}\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'togglePeekWidgetFocus',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */,\r\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\r\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\r\n    handler(accessor) {\r\n        withController(accessor, controller => {\r\n            controller.changeFocusBetweenPreviewAndReferences();\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToNextReference',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\r\n    primary: 62 /* KeyCode.F4 */,\r\n    secondary: [70 /* KeyCode.F12 */],\r\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\r\n    handler(accessor) {\r\n        withController(accessor, controller => {\r\n            controller.goToNextOrPreviousReference(true);\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToPreviousReference',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\r\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\r\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\r\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\r\n    handler(accessor) {\r\n        withController(accessor, controller => {\r\n            controller.goToNextOrPreviousReference(false);\r\n        });\r\n    }\r\n});\r\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\r\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\r\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\r\n// close\r\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\r\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'closeReferenceSearch',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\r\n    primary: 9 /* KeyCode.Escape */,\r\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\r\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\r\n});\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'closeReferenceSearch',\r\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\r\n    primary: 9 /* KeyCode.Escape */,\r\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'revealReference',\r\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\r\n    primary: 3 /* KeyCode.Enter */,\r\n    mac: {\r\n        primary: 3 /* KeyCode.Enter */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\r\n    },\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\r\n    handler(accessor) {\r\n        var _a;\r\n        const listService = accessor.get(IListService);\r\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\r\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\r\n            withController(accessor, controller => controller.revealReference(focus[0]));\r\n        }\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'openReferenceToSide',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */,\r\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\r\n    mac: {\r\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\r\n    },\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\r\n    handler(accessor) {\r\n        var _a;\r\n        const listService = accessor.get(IListService);\r\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\r\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\r\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\r\n        }\r\n    }\r\n});\r\nCommandsRegistry.registerCommand('openReference', (accessor) => {\r\n    var _a;\r\n    const listService = accessor.get(IListService);\r\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\r\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\r\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\r\nimport { dispose } from '../../../../base/common/lifecycle.js';\r\nimport { ResourceMap } from '../../../../base/common/map.js';\r\nimport { basename, extUri } from '../../../../base/common/resources.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { localize } from '../../../../nls.js';\r\nexport class OneReference {\r\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\r\n        this.isProviderFirst = isProviderFirst;\r\n        this.parent = parent;\r\n        this.link = link;\r\n        this._rangeCallback = _rangeCallback;\r\n        this.id = defaultGenerator.nextId();\r\n    }\r\n    get uri() {\r\n        return this.link.uri;\r\n    }\r\n    get range() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\r\n    }\r\n    set range(value) {\r\n        this._range = value;\r\n        this._rangeCallback(this);\r\n    }\r\n    get ariaMessage() {\r\n        var _a;\r\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\r\n        if (!preview) {\r\n            return localize('aria.oneReference', \"in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\r\n        }\r\n        else {\r\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"{0} in {1} on line {2} at column {3}\", preview.value, basename(this.uri), this.range.startLineNumber, this.range.startColumn);\r\n        }\r\n    }\r\n}\r\nexport class FilePreview {\r\n    constructor(_modelReference) {\r\n        this._modelReference = _modelReference;\r\n    }\r\n    dispose() {\r\n        this._modelReference.dispose();\r\n    }\r\n    preview(range, n = 8) {\r\n        const model = this._modelReference.object.textEditorModel;\r\n        if (!model) {\r\n            return undefined;\r\n        }\r\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\r\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\r\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\r\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\r\n        const inside = model.getValueInRange(range);\r\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\r\n        return {\r\n            value: before + inside + after,\r\n            highlight: { start: before.length, end: before.length + inside.length }\r\n        };\r\n    }\r\n}\r\nexport class FileReferences {\r\n    constructor(parent, uri) {\r\n        this.parent = parent;\r\n        this.uri = uri;\r\n        this.children = [];\r\n        this._previews = new ResourceMap();\r\n    }\r\n    dispose() {\r\n        dispose(this._previews.values());\r\n        this._previews.clear();\r\n    }\r\n    getPreview(child) {\r\n        return this._previews.get(child.uri);\r\n    }\r\n    get ariaMessage() {\r\n        const len = this.children.length;\r\n        if (len === 1) {\r\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\r\n        }\r\n        else {\r\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\r\n        }\r\n    }\r\n    resolve(textModelResolverService) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._previews.size !== 0) {\r\n                return this;\r\n            }\r\n            for (const child of this.children) {\r\n                if (this._previews.has(child.uri)) {\r\n                    continue;\r\n                }\r\n                try {\r\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\r\n                    this._previews.set(child.uri, new FilePreview(ref));\r\n                }\r\n                catch (err) {\r\n                    onUnexpectedError(err);\r\n                }\r\n            }\r\n            return this;\r\n        });\r\n    }\r\n}\r\nexport class ReferencesModel {\r\n    constructor(links, title) {\r\n        this.groups = [];\r\n        this.references = [];\r\n        this._onDidChangeReferenceRange = new Emitter();\r\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\r\n        this._links = links;\r\n        this._title = title;\r\n        // grouping and sorting\r\n        const [providersFirst] = links;\r\n        links.sort(ReferencesModel._compareReferences);\r\n        let current;\r\n        for (const link of links) {\r\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\r\n                // new group\r\n                current = new FileReferences(this, link.uri);\r\n                this.groups.push(current);\r\n            }\r\n            // append, check for equality first!\r\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\r\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\r\n                this.references.push(oneRef);\r\n                current.children.push(oneRef);\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        dispose(this.groups);\r\n        this._onDidChangeReferenceRange.dispose();\r\n        this.groups.length = 0;\r\n    }\r\n    clone() {\r\n        return new ReferencesModel(this._links, this._title);\r\n    }\r\n    get title() {\r\n        return this._title;\r\n    }\r\n    get isEmpty() {\r\n        return this.groups.length === 0;\r\n    }\r\n    get ariaMessage() {\r\n        if (this.isEmpty) {\r\n            return localize('aria.result.0', \"No results found\");\r\n        }\r\n        else if (this.references.length === 1) {\r\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\r\n        }\r\n        else if (this.groups.length === 1) {\r\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\r\n        }\r\n        else {\r\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\r\n        }\r\n    }\r\n    nextOrPreviousReference(reference, next) {\r\n        const { parent } = reference;\r\n        let idx = parent.children.indexOf(reference);\r\n        const childCount = parent.children.length;\r\n        const groupCount = parent.parent.groups.length;\r\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\r\n            // cycling within one file\r\n            if (next) {\r\n                idx = (idx + 1) % childCount;\r\n            }\r\n            else {\r\n                idx = (idx + childCount - 1) % childCount;\r\n            }\r\n            return parent.children[idx];\r\n        }\r\n        idx = parent.parent.groups.indexOf(parent);\r\n        if (next) {\r\n            idx = (idx + 1) % groupCount;\r\n            return parent.parent.groups[idx].children[0];\r\n        }\r\n        else {\r\n            idx = (idx + groupCount - 1) % groupCount;\r\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\r\n        }\r\n    }\r\n    nearestReference(resource, position) {\r\n        const nearest = this.references.map((ref, idx) => {\r\n            return {\r\n                idx,\r\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\r\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\r\n            };\r\n        }).sort((a, b) => {\r\n            if (a.prefixLen > b.prefixLen) {\r\n                return -1;\r\n            }\r\n            else if (a.prefixLen < b.prefixLen) {\r\n                return 1;\r\n            }\r\n            else if (a.offsetDist < b.offsetDist) {\r\n                return -1;\r\n            }\r\n            else if (a.offsetDist > b.offsetDist) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        })[0];\r\n        if (nearest) {\r\n            return this.references[nearest.idx];\r\n        }\r\n        return undefined;\r\n    }\r\n    referenceAt(resource, position) {\r\n        for (const ref of this.references) {\r\n            if (ref.uri.toString() === resource.toString()) {\r\n                if (Range.containsPosition(ref.range, position)) {\r\n                    return ref;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    firstReference() {\r\n        for (const ref of this.references) {\r\n            if (ref.isProviderFirst) {\r\n                return ref;\r\n            }\r\n        }\r\n        return this.references[0];\r\n    }\r\n    static _compareReferences(a, b) {\r\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as dom from '../../../../../base/browser/dom.js';\r\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\r\nimport { Color } from '../../../../../base/common/color.js';\r\nimport { Emitter, Event } from '../../../../../base/common/event.js';\r\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../../../base/common/network.js';\r\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\r\nimport './referencesWidget.css';\r\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { Range } from '../../../../common/core/range.js';\r\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\r\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\r\nimport { ILanguageService } from '../../../../common/languages/language.js';\r\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\r\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\r\nimport * as peekView from '../../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\r\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\r\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\r\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\r\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\r\nimport { FileReferences, OneReference } from '../referencesModel.js';\r\nclass DecorationsManager {\r\n    constructor(_editor, _model) {\r\n        this._editor = _editor;\r\n        this._model = _model;\r\n        this._decorations = new Map();\r\n        this._decorationIgnoreSet = new Set();\r\n        this._callOnDispose = new DisposableStore();\r\n        this._callOnModelChange = new DisposableStore();\r\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\r\n        this._onModelChanged();\r\n    }\r\n    dispose() {\r\n        this._callOnModelChange.dispose();\r\n        this._callOnDispose.dispose();\r\n        this.removeDecorations();\r\n    }\r\n    _onModelChanged() {\r\n        this._callOnModelChange.clear();\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (const ref of this._model.references) {\r\n            if (ref.uri.toString() === model.uri.toString()) {\r\n                this._addDecorations(ref.parent);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    _addDecorations(reference) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\r\n        const newDecorations = [];\r\n        const newDecorationsActualIndex = [];\r\n        for (let i = 0, len = reference.children.length; i < len; i++) {\r\n            const oneReference = reference.children[i];\r\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\r\n                continue;\r\n            }\r\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\r\n                continue;\r\n            }\r\n            newDecorations.push({\r\n                range: oneReference.range,\r\n                options: DecorationsManager.DecorationOptions\r\n            });\r\n            newDecorationsActualIndex.push(i);\r\n        }\r\n        this._editor.changeDecorations((changeAccessor) => {\r\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\r\n            for (let i = 0; i < decorations.length; i++) {\r\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\r\n            }\r\n        });\r\n    }\r\n    _onDecorationChanged() {\r\n        const toRemove = [];\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (const [decorationId, reference] of this._decorations) {\r\n            const newRange = model.getDecorationRange(decorationId);\r\n            if (!newRange) {\r\n                continue;\r\n            }\r\n            let ignore = false;\r\n            if (Range.equalsRange(newRange, reference.range)) {\r\n                continue;\r\n            }\r\n            if (Range.spansMultipleLines(newRange)) {\r\n                ignore = true;\r\n            }\r\n            else {\r\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\r\n                const newLineLength = newRange.endColumn - newRange.startColumn;\r\n                if (lineLength !== newLineLength) {\r\n                    ignore = true;\r\n                }\r\n            }\r\n            if (ignore) {\r\n                this._decorationIgnoreSet.add(reference.id);\r\n                toRemove.push(decorationId);\r\n            }\r\n            else {\r\n                reference.range = newRange;\r\n            }\r\n        }\r\n        for (let i = 0, len = toRemove.length; i < len; i++) {\r\n            this._decorations.delete(toRemove[i]);\r\n        }\r\n        this._editor.removeDecorations(toRemove);\r\n    }\r\n    removeDecorations() {\r\n        this._editor.removeDecorations([...this._decorations.keys()]);\r\n        this._decorations.clear();\r\n    }\r\n}\r\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\r\n    description: 'reference-decoration',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'reference-decoration'\r\n});\r\nexport class LayoutData {\r\n    constructor() {\r\n        this.ratio = 0.7;\r\n        this.heightInLines = 18;\r\n    }\r\n    static fromJSON(raw) {\r\n        let ratio;\r\n        let heightInLines;\r\n        try {\r\n            const data = JSON.parse(raw);\r\n            ratio = data.ratio;\r\n            heightInLines = data.heightInLines;\r\n        }\r\n        catch (_a) {\r\n            //\r\n        }\r\n        return {\r\n            ratio: ratio || 0.7,\r\n            heightInLines: heightInLines || 18\r\n        };\r\n    }\r\n}\r\nclass ReferencesTree extends WorkbenchAsyncDataTree {\r\n}\r\n/**\r\n * ZoneWidget that is shown inside the editor\r\n */\r\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\r\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\r\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\r\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\r\n        this.layoutData = layoutData;\r\n        this._textModelResolverService = _textModelResolverService;\r\n        this._instantiationService = _instantiationService;\r\n        this._peekViewService = _peekViewService;\r\n        this._uriLabel = _uriLabel;\r\n        this._undoRedoService = _undoRedoService;\r\n        this._keybindingService = _keybindingService;\r\n        this._languageService = _languageService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._disposeOnNewModel = new DisposableStore();\r\n        this._callOnDispose = new DisposableStore();\r\n        this._onDidSelectReference = new Emitter();\r\n        this.onDidSelectReference = this._onDidSelectReference.event;\r\n        this._dim = new dom.Dimension(0, 0);\r\n        this._applyTheme(themeService.getColorTheme());\r\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\r\n        this._peekViewService.addExclusiveWidget(editor, this);\r\n        this.create();\r\n    }\r\n    dispose() {\r\n        this.setModel(undefined);\r\n        this._callOnDispose.dispose();\r\n        this._disposeOnNewModel.dispose();\r\n        dispose(this._preview);\r\n        dispose(this._previewNotAvailableMessage);\r\n        dispose(this._tree);\r\n        dispose(this._previewModelReference);\r\n        this._splitView.dispose();\r\n        super.dispose();\r\n    }\r\n    _applyTheme(theme) {\r\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\r\n        this.style({\r\n            arrowColor: borderColor,\r\n            frameColor: borderColor,\r\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\r\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\r\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\r\n        });\r\n    }\r\n    show(where) {\r\n        super.show(where, this.layoutData.heightInLines || 18);\r\n    }\r\n    focusOnReferenceTree() {\r\n        this._tree.domFocus();\r\n    }\r\n    focusOnPreviewEditor() {\r\n        this._preview.focus();\r\n    }\r\n    isPreviewEditorFocused() {\r\n        return this._preview.hasTextFocus();\r\n    }\r\n    _onTitleClick(e) {\r\n        if (this._preview && this._preview.getModel()) {\r\n            this._onDidSelectReference.fire({\r\n                element: this._getFocusedReference(),\r\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\r\n                source: 'title'\r\n            });\r\n        }\r\n    }\r\n    _fillBody(containerElement) {\r\n        this.setCssClass('reference-zone-widget');\r\n        // message pane\r\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\r\n        dom.hide(this._messageContainer);\r\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\r\n        // editor\r\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\r\n        const options = {\r\n            scrollBeyondLastLine: false,\r\n            scrollbar: {\r\n                verticalScrollbarSize: 14,\r\n                horizontal: 'auto',\r\n                useShadows: true,\r\n                verticalHasArrows: false,\r\n                horizontalHasArrows: false,\r\n                alwaysConsumeMouseWheel: true\r\n            },\r\n            overviewRulerLanes: 2,\r\n            fixedOverflowWidgets: true,\r\n            minimap: {\r\n                enabled: false\r\n            }\r\n        };\r\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\r\n        dom.hide(this._previewContainer);\r\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\r\n        // tree\r\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\r\n        const treeOptions = {\r\n            keyboardSupport: this._defaultTreeKeyboardSupport,\r\n            accessibilityProvider: new AccessibilityProvider(),\r\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\r\n            identityProvider: new IdentityProvider(),\r\n            openOnSingleClick: true,\r\n            selectionNavigation: true,\r\n            overrideStyles: {\r\n                listBackground: peekView.peekViewResultsBackground\r\n            }\r\n        };\r\n        if (this._defaultTreeKeyboardSupport) {\r\n            // the tree will consume `Escape` and prevent the widget from closing\r\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\r\n                if (e.equals(9 /* KeyCode.Escape */)) {\r\n                    this._keybindingService.dispatchEvent(e, e.target);\r\n                    e.stopPropagation();\r\n                }\r\n            }, true));\r\n        }\r\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\r\n            this._instantiationService.createInstance(FileReferencesRenderer),\r\n            this._instantiationService.createInstance(OneReferenceRenderer),\r\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\r\n        // split stuff\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._previewContainer,\r\n            minimumSize: 200,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: (width) => {\r\n                this._preview.layout({ height: this._dim.height, width });\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._treeContainer,\r\n            minimumSize: 100,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: (width) => {\r\n                this._treeContainer.style.height = `${this._dim.height}px`;\r\n                this._treeContainer.style.width = `${width}px`;\r\n                this._tree.layout(this._dim.height, width);\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._disposables.add(this._splitView.onDidSashChange(() => {\r\n            if (this._dim.width) {\r\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\r\n            }\r\n        }, undefined));\r\n        // listen on selection and focus\r\n        const onEvent = (element, kind) => {\r\n            if (element instanceof OneReference) {\r\n                if (kind === 'show') {\r\n                    this._revealReference(element, false);\r\n                }\r\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\r\n            }\r\n        };\r\n        this._tree.onDidOpen(e => {\r\n            if (e.sideBySide) {\r\n                onEvent(e.element, 'side');\r\n            }\r\n            else if (e.editorOptions.pinned) {\r\n                onEvent(e.element, 'goto');\r\n            }\r\n            else {\r\n                onEvent(e.element, 'show');\r\n            }\r\n        });\r\n        dom.hide(this._treeContainer);\r\n    }\r\n    _onWidth(width) {\r\n        if (this._dim) {\r\n            this._doLayoutBody(this._dim.height, width);\r\n        }\r\n    }\r\n    _doLayoutBody(heightInPixel, widthInPixel) {\r\n        super._doLayoutBody(heightInPixel, widthInPixel);\r\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\r\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\r\n        this._splitView.layout(widthInPixel);\r\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\r\n    }\r\n    setSelection(selection) {\r\n        return this._revealReference(selection, true).then(() => {\r\n            if (!this._model) {\r\n                // disposed\r\n                return;\r\n            }\r\n            // show in tree\r\n            this._tree.setSelection([selection]);\r\n            this._tree.setFocus([selection]);\r\n        });\r\n    }\r\n    setModel(newModel) {\r\n        // clean up\r\n        this._disposeOnNewModel.clear();\r\n        this._model = newModel;\r\n        if (this._model) {\r\n            return this._onNewModel();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    _onNewModel() {\r\n        if (!this._model) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        if (this._model.isEmpty) {\r\n            this.setTitle('');\r\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\r\n            dom.show(this._messageContainer);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        dom.hide(this._messageContainer);\r\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\r\n        this._disposeOnNewModel.add(this._decorationsManager);\r\n        // listen on model changes\r\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\r\n        // listen on editor\r\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\r\n            const { event, target } = e;\r\n            if (event.detail !== 2) {\r\n                return;\r\n            }\r\n            const element = this._getFocusedReference();\r\n            if (!element) {\r\n                return;\r\n            }\r\n            this._onDidSelectReference.fire({\r\n                element: { uri: element.uri, range: target.range },\r\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\r\n                source: 'editor'\r\n            });\r\n        }));\r\n        // make sure things are rendered\r\n        this.container.classList.add('results-loaded');\r\n        dom.show(this._treeContainer);\r\n        dom.show(this._previewContainer);\r\n        this._splitView.layout(this._dim.width);\r\n        this.focusOnReferenceTree();\r\n        // pick input and a reference to begin with\r\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\r\n    }\r\n    _getFocusedReference() {\r\n        const [element] = this._tree.getFocus();\r\n        if (element instanceof OneReference) {\r\n            return element;\r\n        }\r\n        else if (element instanceof FileReferences) {\r\n            if (element.children.length > 0) {\r\n                return element.children[0];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    revealReference(reference) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._revealReference(reference, false);\r\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\r\n        });\r\n    }\r\n    _revealReference(reference, revealParent) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // check if there is anything to do...\r\n            if (this._revealedReference === reference) {\r\n                return;\r\n            }\r\n            this._revealedReference = reference;\r\n            // Update widget header\r\n            if (reference.uri.scheme !== Schemas.inMemory) {\r\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\r\n            }\r\n            else {\r\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\r\n            }\r\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\r\n            if (this._tree.getInput() === reference.parent) {\r\n                this._tree.reveal(reference);\r\n            }\r\n            else {\r\n                if (revealParent) {\r\n                    this._tree.reveal(reference.parent);\r\n                }\r\n                yield this._tree.expand(reference.parent);\r\n                this._tree.reveal(reference);\r\n            }\r\n            const ref = yield promise;\r\n            if (!this._model) {\r\n                // disposed\r\n                ref.dispose();\r\n                return;\r\n            }\r\n            dispose(this._previewModelReference);\r\n            // show in editor\r\n            const model = ref.object;\r\n            if (model) {\r\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\r\n                const sel = Range.lift(reference.range).collapseToStart();\r\n                this._previewModelReference = ref;\r\n                this._preview.setModel(model.textEditorModel);\r\n                this._preview.setSelection(sel);\r\n                this._preview.revealRangeInCenter(sel, scrollType);\r\n            }\r\n            else {\r\n                this._preview.setModel(this._previewNotAvailableMessage);\r\n                ref.dispose();\r\n            }\r\n        });\r\n    }\r\n};\r\nReferenceWidget = __decorate([\r\n    __param(3, IThemeService),\r\n    __param(4, ITextModelService),\r\n    __param(5, IInstantiationService),\r\n    __param(6, peekView.IPeekViewService),\r\n    __param(7, ILabelService),\r\n    __param(8, IUndoRedoService),\r\n    __param(9, IKeybindingService),\r\n    __param(10, ILanguageService),\r\n    __param(11, ILanguageConfigurationService)\r\n], ReferenceWidget);\r\nexport { ReferenceWidget };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar FileReferencesRenderer_1;\r\nimport * as dom from '../../../../../base/browser/dom.js';\r\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\r\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\r\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\r\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\r\nimport { basename, dirname } from '../../../../../base/common/resources.js';\r\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\r\nimport { localize } from '../../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\r\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\r\nimport { defaultCountBadgeStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\r\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\r\nlet DataSource = class DataSource {\r\n    constructor(_resolverService) {\r\n        this._resolverService = _resolverService;\r\n    }\r\n    hasChildren(element) {\r\n        if (element instanceof ReferencesModel) {\r\n            return true;\r\n        }\r\n        if (element instanceof FileReferences) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getChildren(element) {\r\n        if (element instanceof ReferencesModel) {\r\n            return element.groups;\r\n        }\r\n        if (element instanceof FileReferences) {\r\n            return element.resolve(this._resolverService).then(val => {\r\n                // if (element.failure) {\r\n                // \t// refresh the element on failure so that\r\n                // \t// we can update its rendering\r\n                // \treturn tree.refresh(element).then(() => val.children);\r\n                // }\r\n                return val.children;\r\n            });\r\n        }\r\n        throw new Error('bad tree');\r\n    }\r\n};\r\nDataSource = __decorate([\r\n    __param(0, ITextModelService)\r\n], DataSource);\r\nexport { DataSource };\r\n//#endregion\r\nexport class Delegate {\r\n    getHeight() {\r\n        return 23;\r\n    }\r\n    getTemplateId(element) {\r\n        if (element instanceof FileReferences) {\r\n            return FileReferencesRenderer.id;\r\n        }\r\n        else {\r\n            return OneReferenceRenderer.id;\r\n        }\r\n    }\r\n}\r\nlet StringRepresentationProvider = class StringRepresentationProvider {\r\n    constructor(_keybindingService) {\r\n        this._keybindingService = _keybindingService;\r\n    }\r\n    getKeyboardNavigationLabel(element) {\r\n        var _a;\r\n        if (element instanceof OneReference) {\r\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\r\n            if (parts) {\r\n                return parts.value;\r\n            }\r\n        }\r\n        // FileReferences or unresolved OneReference\r\n        return basename(element.uri);\r\n    }\r\n};\r\nStringRepresentationProvider = __decorate([\r\n    __param(0, IKeybindingService)\r\n], StringRepresentationProvider);\r\nexport { StringRepresentationProvider };\r\nexport class IdentityProvider {\r\n    getId(element) {\r\n        return element instanceof OneReference ? element.id : element.uri;\r\n    }\r\n}\r\n//#region render: File\r\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\r\n    constructor(container, _labelService) {\r\n        super();\r\n        this._labelService = _labelService;\r\n        const parent = document.createElement('div');\r\n        parent.classList.add('reference-file');\r\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\r\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')), {}, defaultCountBadgeStyles);\r\n        container.appendChild(parent);\r\n    }\r\n    set(element, matches) {\r\n        const parent = dirname(element.uri);\r\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\r\n        const len = element.children.length;\r\n        this.badge.setCount(len);\r\n        if (len > 1) {\r\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\r\n        }\r\n        else {\r\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\r\n        }\r\n    }\r\n};\r\nFileReferencesTemplate = __decorate([\r\n    __param(1, ILabelService)\r\n], FileReferencesTemplate);\r\nlet FileReferencesRenderer = FileReferencesRenderer_1 = class FileReferencesRenderer {\r\n    constructor(_instantiationService) {\r\n        this._instantiationService = _instantiationService;\r\n        this.templateId = FileReferencesRenderer_1.id;\r\n    }\r\n    renderTemplate(container) {\r\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\r\n    }\r\n    renderElement(node, index, template) {\r\n        template.set(node.element, createMatches(node.filterData));\r\n    }\r\n    disposeTemplate(templateData) {\r\n        templateData.dispose();\r\n    }\r\n};\r\nFileReferencesRenderer.id = 'FileReferencesRenderer';\r\nFileReferencesRenderer = FileReferencesRenderer_1 = __decorate([\r\n    __param(0, IInstantiationService)\r\n], FileReferencesRenderer);\r\nexport { FileReferencesRenderer };\r\n//#endregion\r\n//#region render: Reference\r\nclass OneReferenceTemplate {\r\n    constructor(container) {\r\n        this.label = new HighlightedLabel(container);\r\n    }\r\n    set(element, score) {\r\n        var _a;\r\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\r\n        if (!preview || !preview.value) {\r\n            // this means we FAILED to resolve the document or the value is the empty string\r\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\r\n        }\r\n        else {\r\n            // render search match as highlight unless\r\n            // we have score, then render the score\r\n            const { value, highlight } = preview;\r\n            if (score && !FuzzyScore.isDefault(score)) {\r\n                this.label.element.classList.toggle('referenceMatch', false);\r\n                this.label.set(value, createMatches(score));\r\n            }\r\n            else {\r\n                this.label.element.classList.toggle('referenceMatch', true);\r\n                this.label.set(value, [highlight]);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport class OneReferenceRenderer {\r\n    constructor() {\r\n        this.templateId = OneReferenceRenderer.id;\r\n    }\r\n    renderTemplate(container) {\r\n        return new OneReferenceTemplate(container);\r\n    }\r\n    renderElement(node, index, templateData) {\r\n        templateData.set(node.element, node.filterData);\r\n    }\r\n    disposeTemplate() {\r\n    }\r\n}\r\nOneReferenceRenderer.id = 'OneReferenceRenderer';\r\n//#endregion\r\nexport class AccessibilityProvider {\r\n    getWidgetAriaLabel() {\r\n        return localize('treeAriaLabel', \"References\");\r\n    }\r\n    getAriaLabel(element) {\r\n        return element.ariaMessage;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\r\nimport { isEqual } from '../../../../base/common/resources.js';\r\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\r\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\r\nlet SymbolNavigationService = class SymbolNavigationService {\r\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\r\n        this._editorService = _editorService;\r\n        this._notificationService = _notificationService;\r\n        this._keybindingService = _keybindingService;\r\n        this._currentModel = undefined;\r\n        this._currentIdx = -1;\r\n        this._ignoreEditorChange = false;\r\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\r\n    }\r\n    reset() {\r\n        var _a, _b;\r\n        this._ctxHasSymbols.reset();\r\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\r\n        this._currentModel = undefined;\r\n        this._currentIdx = -1;\r\n    }\r\n    put(anchor) {\r\n        const refModel = anchor.parent.parent;\r\n        if (refModel.references.length <= 1) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._currentModel = refModel;\r\n        this._currentIdx = refModel.references.indexOf(anchor);\r\n        this._ctxHasSymbols.set(true);\r\n        this._showMessage();\r\n        const editorState = new EditorState(this._editorService);\r\n        const listener = editorState.onDidChange(_ => {\r\n            if (this._ignoreEditorChange) {\r\n                return;\r\n            }\r\n            const editor = this._editorService.getActiveCodeEditor();\r\n            if (!editor) {\r\n                return;\r\n            }\r\n            const model = editor.getModel();\r\n            const position = editor.getPosition();\r\n            if (!model || !position) {\r\n                return;\r\n            }\r\n            let seenUri = false;\r\n            let seenPosition = false;\r\n            for (const reference of refModel.references) {\r\n                if (isEqual(reference.uri, model.uri)) {\r\n                    seenUri = true;\r\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\r\n                }\r\n                else if (seenUri) {\r\n                    break;\r\n                }\r\n            }\r\n            if (!seenUri || !seenPosition) {\r\n                this.reset();\r\n            }\r\n        });\r\n        this._currentState = combinedDisposable(editorState, listener);\r\n    }\r\n    revealNext(source) {\r\n        if (!this._currentModel) {\r\n            return Promise.resolve();\r\n        }\r\n        // get next result and advance\r\n        this._currentIdx += 1;\r\n        this._currentIdx %= this._currentModel.references.length;\r\n        const reference = this._currentModel.references[this._currentIdx];\r\n        // status\r\n        this._showMessage();\r\n        // open editor, ignore events while that happens\r\n        this._ignoreEditorChange = true;\r\n        return this._editorService.openCodeEditor({\r\n            resource: reference.uri,\r\n            options: {\r\n                selection: Range.collapseToStart(reference.range),\r\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\r\n            }\r\n        }, source).finally(() => {\r\n            this._ignoreEditorChange = false;\r\n        });\r\n    }\r\n    _showMessage() {\r\n        var _a;\r\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\r\n        const message = kb\r\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\r\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\r\n        this._currentMessage = this._notificationService.status(message);\r\n    }\r\n};\r\nSymbolNavigationService = __decorate([\r\n    __param(0, IContextKeyService),\r\n    __param(1, ICodeEditorService),\r\n    __param(2, INotificationService),\r\n    __param(3, IKeybindingService)\r\n], SymbolNavigationService);\r\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, 1 /* InstantiationType.Delayed */);\r\nregisterEditorCommand(new class extends EditorCommand {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.gotoNextSymbolFromResult',\r\n            precondition: ctxHasSymbols,\r\n            kbOpts: {\r\n                weight: 100 /* KeybindingWeight.EditorContrib */,\r\n                primary: 70 /* KeyCode.F12 */\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(accessor, editor) {\r\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'editor.gotoNextSymbolFromResult.cancel',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */,\r\n    when: ctxHasSymbols,\r\n    primary: 9 /* KeyCode.Escape */,\r\n    handler(accessor) {\r\n        accessor.get(ISymbolNavigationService).reset();\r\n    }\r\n});\r\n//\r\nlet EditorState = class EditorState {\r\n    constructor(editorService) {\r\n        this._listener = new Map();\r\n        this._disposables = new DisposableStore();\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\r\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\r\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this._onDidChange.dispose();\r\n        dispose(this._listener.values());\r\n    }\r\n    _onDidAddEditor(editor) {\r\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\r\n    }\r\n    _onDidRemoveEditor(editor) {\r\n        var _a;\r\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._listener.delete(editor);\r\n    }\r\n};\r\nEditorState = __decorate([\r\n    __param(0, ICodeEditorService)\r\n], EditorState);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ReferencesModel } from './referencesModel.js';\r\nfunction getLocationLinks(model, position, registry, provide) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const provider = registry.ordered(model);\r\n        // get results\r\n        const promises = provider.map((provider) => {\r\n            return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\r\n                onUnexpectedExternalError(err);\r\n                return undefined;\r\n            });\r\n        });\r\n        const values = yield Promise.all(promises);\r\n        return coalesce(values.flat());\r\n    });\r\n}\r\nexport function getDefinitionsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideDefinition(model, position, token);\r\n    });\r\n}\r\nexport function getDeclarationsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideDeclaration(model, position, token);\r\n    });\r\n}\r\nexport function getImplementationsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideImplementation(model, position, token);\r\n    });\r\n}\r\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideTypeDefinition(model, position, token);\r\n    });\r\n}\r\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\r\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\r\n        if (!compact || !result || result.length !== 2) {\r\n            return result;\r\n        }\r\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\r\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\r\n            return resultWithoutDeclaration;\r\n        }\r\n        return result;\r\n    }));\r\n}\r\n// -- API commands ----\r\nfunction _sortedAndDeduped(callback) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const rawLinks = yield callback();\r\n        const model = new ReferencesModel(rawLinks, '');\r\n        const modelLinks = model.references.map(ref => ref.link);\r\n        model.dispose();\r\n        return modelLinks;\r\n    });\r\n}\r\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ContentHoverController_1, ContentHoverWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { HoverAction, HoverWidget, getHoverAccessibleViewHint } from '../../../../base/browser/ui/hover/hoverWidget.js';\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { TokenizationRegistry } from '../../../common/languages.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ResizableContentWidget } from './resizableContentWidget.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\r\nconst $ = dom.$;\r\nlet ContentHoverController = ContentHoverController_1 = class ContentHoverController extends Disposable {\r\n    constructor(_editor, _instantiationService, _keybindingService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._instantiationService = _instantiationService;\r\n        this._keybindingService = _keybindingService;\r\n        this._currentResult = null;\r\n        this._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\r\n        // Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\r\n        this._participants = [];\r\n        for (const participant of HoverParticipantRegistry.getAll()) {\r\n            this._participants.push(this._instantiationService.createInstance(participant, this._editor));\r\n        }\r\n        this._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\r\n        this._computer = new ContentHoverComputer(this._editor, this._participants);\r\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\r\n        this._register(this._hoverOperation.onResult((result) => {\r\n            if (!this._computer.anchor) {\r\n                // invalid state, ignore result\r\n                return;\r\n            }\r\n            const messages = (result.hasLoadingMessage ? this._addLoadingMessage(result.value) : result.value);\r\n            this._withResult(new HoverResult(this._computer.anchor, messages, result.isComplete));\r\n        }));\r\n        this._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\r\n            if (e.equals(9 /* KeyCode.Escape */)) {\r\n                this.hide();\r\n            }\r\n        }));\r\n        this._register(TokenizationRegistry.onDidChange(() => {\r\n            if (this._widget.position && this._currentResult) {\r\n                this._setCurrentResult(this._currentResult); // render again\r\n            }\r\n        }));\r\n    }\r\n    get widget() {\r\n        return this._widget;\r\n    }\r\n    /**\r\n     * Returns true if the hover shows now or will show.\r\n     */\r\n    maybeShowAt(mouseEvent) {\r\n        if (this._widget.isResizing) {\r\n            return true;\r\n        }\r\n        const anchorCandidates = [];\r\n        for (const participant of this._participants) {\r\n            if (participant.suggestHoverAnchor) {\r\n                const anchor = participant.suggestHoverAnchor(mouseEvent);\r\n                if (anchor) {\r\n                    anchorCandidates.push(anchor);\r\n                }\r\n            }\r\n        }\r\n        const target = mouseEvent.target;\r\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\r\n            anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\r\n        }\r\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\r\n            const epsilon = this._editor.getOption(50 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth / 2;\r\n            if (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\r\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\r\n                anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\r\n            }\r\n        }\r\n        if (anchorCandidates.length === 0) {\r\n            return this._startShowingOrUpdateHover(null, 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\r\n        }\r\n        anchorCandidates.sort((a, b) => b.priority - a.priority);\r\n        return this._startShowingOrUpdateHover(anchorCandidates[0], 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\r\n    }\r\n    startShowingAtRange(range, mode, source, focus) {\r\n        this._startShowingOrUpdateHover(new HoverRangeAnchor(0, range, undefined, undefined), mode, source, focus, null);\r\n    }\r\n    /**\r\n     * Returns true if the hover shows now or will show.\r\n     */\r\n    _startShowingOrUpdateHover(anchor, mode, source, focus, mouseEvent) {\r\n        if (!this._widget.position || !this._currentResult) {\r\n            // The hover is not visible\r\n            if (anchor) {\r\n                this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        // The hover is currently visible\r\n        const hoverIsSticky = this._editor.getOption(60 /* EditorOption.hover */).sticky;\r\n        const isGettingCloser = (hoverIsSticky && mouseEvent && this._widget.isMouseGettingCloser(mouseEvent.event.posx, mouseEvent.event.posy));\r\n        if (isGettingCloser) {\r\n            // The mouse is getting closer to the hover, so we will keep the hover untouched\r\n            // But we will kick off a hover update at the new anchor, insisting on keeping the hover visible.\r\n            if (anchor) {\r\n                this._startHoverOperationIfNecessary(anchor, mode, source, focus, true);\r\n            }\r\n            return true;\r\n        }\r\n        if (!anchor) {\r\n            this._setCurrentResult(null);\r\n            return false;\r\n        }\r\n        if (anchor && this._currentResult.anchor.equals(anchor)) {\r\n            // The widget is currently showing results for the exact same anchor, so no update is needed\r\n            return true;\r\n        }\r\n        if (!anchor.canAdoptVisibleHover(this._currentResult.anchor, this._widget.position)) {\r\n            // The new anchor is not compatible with the previous anchor\r\n            this._setCurrentResult(null);\r\n            this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\r\n            return true;\r\n        }\r\n        // We aren't getting any closer to the hover, so we will filter existing results\r\n        // and keep those which also apply to the new anchor.\r\n        this._setCurrentResult(this._currentResult.filter(anchor));\r\n        this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\r\n        return true;\r\n    }\r\n    _startHoverOperationIfNecessary(anchor, mode, source, focus, insistOnKeepingHoverVisible) {\r\n        if (this._computer.anchor && this._computer.anchor.equals(anchor)) {\r\n            // We have to start a hover operation at the exact same anchor as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        this._computer.anchor = anchor;\r\n        this._computer.shouldFocus = focus;\r\n        this._computer.source = source;\r\n        this._computer.insistOnKeepingHoverVisible = insistOnKeepingHoverVisible;\r\n        this._hoverOperation.start(mode);\r\n    }\r\n    _setCurrentResult(hoverResult) {\r\n        if (this._currentResult === hoverResult) {\r\n            // avoid updating the DOM to avoid resetting the user selection\r\n            return;\r\n        }\r\n        if (hoverResult && hoverResult.messages.length === 0) {\r\n            hoverResult = null;\r\n        }\r\n        this._currentResult = hoverResult;\r\n        if (this._currentResult) {\r\n            this._renderMessages(this._currentResult.anchor, this._currentResult.messages);\r\n        }\r\n        else {\r\n            this._widget.hide();\r\n        }\r\n    }\r\n    hide() {\r\n        this._computer.anchor = null;\r\n        this._hoverOperation.cancel();\r\n        this._setCurrentResult(null);\r\n    }\r\n    get isColorPickerVisible() {\r\n        return this._widget.isColorPickerVisible;\r\n    }\r\n    get isVisibleFromKeyboard() {\r\n        return this._widget.isVisibleFromKeyboard;\r\n    }\r\n    get isVisible() {\r\n        return this._widget.isVisible;\r\n    }\r\n    get isFocused() {\r\n        return this._widget.isFocused;\r\n    }\r\n    get isResizing() {\r\n        return this._widget.isResizing;\r\n    }\r\n    containsNode(node) {\r\n        return (node ? this._widget.getDomNode().contains(node) : false);\r\n    }\r\n    _addLoadingMessage(result) {\r\n        if (this._computer.anchor) {\r\n            for (const participant of this._participants) {\r\n                if (participant.createLoadingMessage) {\r\n                    const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\r\n                    if (loadingMessage) {\r\n                        return result.slice(0).concat([loadingMessage]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    _withResult(hoverResult) {\r\n        if (this._widget.position && this._currentResult && this._currentResult.isComplete) {\r\n            // The hover is visible with a previous complete result.\r\n            if (!hoverResult.isComplete) {\r\n                // Instead of rendering the new partial result, we wait for the result to be complete.\r\n                return;\r\n            }\r\n            if (this._computer.insistOnKeepingHoverVisible && hoverResult.messages.length === 0) {\r\n                // The hover would now hide normally, so we'll keep the previous messages\r\n                return;\r\n            }\r\n        }\r\n        this._setCurrentResult(hoverResult);\r\n    }\r\n    _renderMessages(anchor, messages) {\r\n        const { showAtPosition, showAtSecondaryPosition, highlightRange } = ContentHoverController_1.computeHoverRanges(this._editor, anchor.range, messages);\r\n        const disposables = new DisposableStore();\r\n        const statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\r\n        const fragment = document.createDocumentFragment();\r\n        let colorPicker = null;\r\n        const context = {\r\n            fragment,\r\n            statusBar,\r\n            setColorPicker: (widget) => colorPicker = widget,\r\n            onContentsChanged: () => this._widget.onContentsChanged(),\r\n            setMinimumDimensions: (dimensions) => this._widget.setMinimumDimensions(dimensions),\r\n            hide: () => this.hide()\r\n        };\r\n        for (const participant of this._participants) {\r\n            const hoverParts = messages.filter(msg => msg.owner === participant);\r\n            if (hoverParts.length > 0) {\r\n                disposables.add(participant.renderHoverParts(context, hoverParts));\r\n            }\r\n        }\r\n        const isBeforeContent = messages.some(m => m.isBeforeContent);\r\n        if (statusBar.hasContent) {\r\n            fragment.appendChild(statusBar.hoverElement);\r\n        }\r\n        if (fragment.hasChildNodes()) {\r\n            if (highlightRange) {\r\n                const highlightDecoration = this._editor.createDecorationsCollection();\r\n                highlightDecoration.set([{\r\n                        range: highlightRange,\r\n                        options: ContentHoverController_1._DECORATION_OPTIONS\r\n                    }]);\r\n                disposables.add(toDisposable(() => {\r\n                    highlightDecoration.clear();\r\n                }));\r\n            }\r\n            this._widget.showAt(fragment, new ContentHoverVisibleData(colorPicker, showAtPosition, showAtSecondaryPosition, this._editor.getOption(60 /* EditorOption.hover */).above, this._computer.shouldFocus, this._computer.source, isBeforeContent, anchor.initialMousePosX, anchor.initialMousePosY, disposables));\r\n        }\r\n        else {\r\n            disposables.dispose();\r\n        }\r\n    }\r\n    static computeHoverRanges(editor, anchorRange, messages) {\r\n        let startColumnBoundary = 1;\r\n        if (editor.hasModel()) {\r\n            // Ensure the range is on the current view line\r\n            const viewModel = editor._getViewModel();\r\n            const coordinatesConverter = viewModel.coordinatesConverter;\r\n            const anchorViewRange = coordinatesConverter.convertModelRangeToViewRange(anchorRange);\r\n            const anchorViewRangeStart = new Position(anchorViewRange.startLineNumber, viewModel.getLineMinColumn(anchorViewRange.startLineNumber));\r\n            startColumnBoundary = coordinatesConverter.convertViewPositionToModelPosition(anchorViewRangeStart).column;\r\n        }\r\n        // The anchor range is always on a single line\r\n        const anchorLineNumber = anchorRange.startLineNumber;\r\n        let renderStartColumn = anchorRange.startColumn;\r\n        let highlightRange = messages[0].range;\r\n        let forceShowAtRange = null;\r\n        for (const msg of messages) {\r\n            highlightRange = Range.plusRange(highlightRange, msg.range);\r\n            if (msg.range.startLineNumber === anchorLineNumber && msg.range.endLineNumber === anchorLineNumber) {\r\n                // this message has a range that is completely sitting on the line of the anchor\r\n                renderStartColumn = Math.max(Math.min(renderStartColumn, msg.range.startColumn), startColumnBoundary);\r\n            }\r\n            if (msg.forceShowAtRange) {\r\n                forceShowAtRange = msg.range;\r\n            }\r\n        }\r\n        return {\r\n            showAtPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, anchorRange.startColumn),\r\n            showAtSecondaryPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, renderStartColumn),\r\n            highlightRange\r\n        };\r\n    }\r\n    focus() {\r\n        this._widget.focus();\r\n    }\r\n    scrollUp() {\r\n        this._widget.scrollUp();\r\n    }\r\n    scrollDown() {\r\n        this._widget.scrollDown();\r\n    }\r\n    scrollLeft() {\r\n        this._widget.scrollLeft();\r\n    }\r\n    scrollRight() {\r\n        this._widget.scrollRight();\r\n    }\r\n    pageUp() {\r\n        this._widget.pageUp();\r\n    }\r\n    pageDown() {\r\n        this._widget.pageDown();\r\n    }\r\n    goToTop() {\r\n        this._widget.goToTop();\r\n    }\r\n    goToBottom() {\r\n        this._widget.goToBottom();\r\n    }\r\n};\r\nContentHoverController._DECORATION_OPTIONS = ModelDecorationOptions.register({\r\n    description: 'content-hover-highlight',\r\n    className: 'hoverHighlight'\r\n});\r\nContentHoverController = ContentHoverController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IKeybindingService)\r\n], ContentHoverController);\r\nexport { ContentHoverController };\r\nclass HoverResult {\r\n    constructor(anchor, messages, isComplete) {\r\n        this.anchor = anchor;\r\n        this.messages = messages;\r\n        this.isComplete = isComplete;\r\n    }\r\n    filter(anchor) {\r\n        const filteredMessages = this.messages.filter((m) => m.isValidForHoverAnchor(anchor));\r\n        if (filteredMessages.length === this.messages.length) {\r\n            return this;\r\n        }\r\n        return new FilteredHoverResult(this, this.anchor, filteredMessages, this.isComplete);\r\n    }\r\n}\r\nclass FilteredHoverResult extends HoverResult {\r\n    constructor(original, anchor, messages, isComplete) {\r\n        super(anchor, messages, isComplete);\r\n        this.original = original;\r\n    }\r\n    filter(anchor) {\r\n        return this.original.filter(anchor);\r\n    }\r\n}\r\nclass ContentHoverVisibleData {\r\n    constructor(colorPicker, showAtPosition, showAtSecondaryPosition, preferAbove, stoleFocus, source, isBeforeContent, initialMousePosX, initialMousePosY, disposables) {\r\n        this.colorPicker = colorPicker;\r\n        this.showAtPosition = showAtPosition;\r\n        this.showAtSecondaryPosition = showAtSecondaryPosition;\r\n        this.preferAbove = preferAbove;\r\n        this.stoleFocus = stoleFocus;\r\n        this.source = source;\r\n        this.isBeforeContent = isBeforeContent;\r\n        this.initialMousePosX = initialMousePosX;\r\n        this.initialMousePosY = initialMousePosY;\r\n        this.disposables = disposables;\r\n        this.closestMouseDistance = undefined;\r\n    }\r\n}\r\nconst HORIZONTAL_SCROLLING_BY = 30;\r\nconst SCROLLBAR_WIDTH = 10;\r\nconst CONTAINER_HEIGHT_PADDING = 6;\r\nlet ContentHoverWidget = ContentHoverWidget_1 = class ContentHoverWidget extends ResizableContentWidget {\r\n    get isColorPickerVisible() {\r\n        var _a;\r\n        return Boolean((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker);\r\n    }\r\n    get isVisibleFromKeyboard() {\r\n        var _a;\r\n        return (((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.source) === 1 /* HoverStartSource.Keyboard */);\r\n    }\r\n    get isVisible() {\r\n        var _a;\r\n        return (_a = this._hoverVisibleKey.get()) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    get isFocused() {\r\n        var _a;\r\n        return (_a = this._hoverFocusedKey.get()) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    constructor(editor, contextKeyService, _configurationService, _accessibilityService, _keybindingService) {\r\n        const minimumHeight = editor.getOption(66 /* EditorOption.lineHeight */) + 8;\r\n        const minimumWidth = 150;\r\n        const minimumSize = new dom.Dimension(minimumWidth, minimumHeight);\r\n        super(editor, minimumSize);\r\n        this._configurationService = _configurationService;\r\n        this._accessibilityService = _accessibilityService;\r\n        this._keybindingService = _keybindingService;\r\n        this._hover = this._register(new HoverWidget());\r\n        this._minimumSize = minimumSize;\r\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(contextKeyService);\r\n        this._hoverFocusedKey = EditorContextKeys.hoverFocused.bindTo(contextKeyService);\r\n        dom.append(this._resizableNode.domNode, this._hover.containerDomNode);\r\n        this._resizableNode.domNode.style.zIndex = '50';\r\n        this._register(this._editor.onDidLayoutChange(() => this._layout()));\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\r\n                this._updateFont();\r\n            }\r\n        }));\r\n        const focusTracker = this._register(dom.trackFocus(this._resizableNode.domNode));\r\n        this._register(focusTracker.onDidFocus(() => {\r\n            this._hoverFocusedKey.set(true);\r\n        }));\r\n        this._register(focusTracker.onDidBlur(() => {\r\n            this._hoverFocusedKey.set(false);\r\n        }));\r\n        this._setHoverData(undefined);\r\n        this._layout();\r\n        this._editor.addContentWidget(this);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        super.dispose();\r\n        (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.disposables.dispose();\r\n        this._editor.removeContentWidget(this);\r\n    }\r\n    getId() {\r\n        return ContentHoverWidget_1.ID;\r\n    }\r\n    static _applyDimensions(container, width, height) {\r\n        const transformedWidth = typeof width === 'number' ? `${width}px` : width;\r\n        const transformedHeight = typeof height === 'number' ? `${height}px` : height;\r\n        container.style.width = transformedWidth;\r\n        container.style.height = transformedHeight;\r\n    }\r\n    _setContentsDomNodeDimensions(width, height) {\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        return ContentHoverWidget_1._applyDimensions(contentsDomNode, width, height);\r\n    }\r\n    _setContainerDomNodeDimensions(width, height) {\r\n        const containerDomNode = this._hover.containerDomNode;\r\n        return ContentHoverWidget_1._applyDimensions(containerDomNode, width, height);\r\n    }\r\n    _setHoverWidgetDimensions(width, height) {\r\n        this._setContentsDomNodeDimensions(width, height);\r\n        this._setContainerDomNodeDimensions(width, height);\r\n        this._layoutContentWidget();\r\n    }\r\n    static _applyMaxDimensions(container, width, height) {\r\n        const transformedWidth = typeof width === 'number' ? `${width}px` : width;\r\n        const transformedHeight = typeof height === 'number' ? `${height}px` : height;\r\n        container.style.maxWidth = transformedWidth;\r\n        container.style.maxHeight = transformedHeight;\r\n    }\r\n    _setHoverWidgetMaxDimensions(width, height) {\r\n        ContentHoverWidget_1._applyMaxDimensions(this._hover.contentsDomNode, width, height);\r\n        ContentHoverWidget_1._applyMaxDimensions(this._hover.containerDomNode, width, height);\r\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-maxWidth', typeof width === 'number' ? `${width}px` : width);\r\n        this._layoutContentWidget();\r\n    }\r\n    _hasHorizontalScrollbar() {\r\n        const scrollDimensions = this._hover.scrollbar.getScrollDimensions();\r\n        const hasHorizontalScrollbar = scrollDimensions.scrollWidth > scrollDimensions.width;\r\n        return hasHorizontalScrollbar;\r\n    }\r\n    _adjustContentsBottomPadding() {\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        const extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\r\n        if (contentsDomNode.style.paddingBottom !== extraBottomPadding) {\r\n            contentsDomNode.style.paddingBottom = extraBottomPadding;\r\n        }\r\n    }\r\n    _setAdjustedHoverWidgetDimensions(size) {\r\n        this._setHoverWidgetMaxDimensions('none', 'none');\r\n        const width = size.width;\r\n        const height = size.height;\r\n        this._setHoverWidgetDimensions(width, height);\r\n        // measure if widget has horizontal scrollbar after setting the dimensions\r\n        if (this._hasHorizontalScrollbar()) {\r\n            this._adjustContentsBottomPadding();\r\n            this._setContentsDomNodeDimensions(width, height - SCROLLBAR_WIDTH);\r\n        }\r\n    }\r\n    _updateResizableNodeMaxDimensions() {\r\n        var _a, _b;\r\n        const maxRenderingWidth = (_a = this._findMaximumRenderingWidth()) !== null && _a !== void 0 ? _a : Infinity;\r\n        const maxRenderingHeight = (_b = this._findMaximumRenderingHeight()) !== null && _b !== void 0 ? _b : Infinity;\r\n        this._resizableNode.maxSize = new dom.Dimension(maxRenderingWidth, maxRenderingHeight);\r\n        this._setHoverWidgetMaxDimensions(maxRenderingWidth, maxRenderingHeight);\r\n    }\r\n    _resize(size) {\r\n        var _a, _b;\r\n        ContentHoverWidget_1._lastDimensions = new dom.Dimension(size.width, size.height);\r\n        this._setAdjustedHoverWidgetDimensions(size);\r\n        this._resizableNode.layout(size.height, size.width);\r\n        this._updateResizableNodeMaxDimensions();\r\n        this._hover.scrollbar.scanDomNode();\r\n        this._editor.layoutContentWidget(this);\r\n        (_b = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker) === null || _b === void 0 ? void 0 : _b.layout();\r\n    }\r\n    _findAvailableSpaceVertically() {\r\n        var _a;\r\n        const position = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition;\r\n        if (!position) {\r\n            return;\r\n        }\r\n        return this._positionPreference === 1 /* ContentWidgetPositionPreference.ABOVE */ ? this._availableVerticalSpaceAbove(position) : this._availableVerticalSpaceBelow(position);\r\n    }\r\n    _findMaximumRenderingHeight() {\r\n        const availableSpace = this._findAvailableSpaceVertically();\r\n        if (!availableSpace) {\r\n            return;\r\n        }\r\n        // Padding needed in order to stop the resizing down to a smaller height\r\n        let maximumHeight = CONTAINER_HEIGHT_PADDING;\r\n        Array.from(this._hover.contentsDomNode.children).forEach((hoverPart) => {\r\n            maximumHeight += hoverPart.clientHeight;\r\n        });\r\n        if (this._hasHorizontalScrollbar()) {\r\n            maximumHeight += SCROLLBAR_WIDTH;\r\n        }\r\n        return Math.min(availableSpace, maximumHeight);\r\n    }\r\n    _isHoverTextOverflowing() {\r\n        // To find out if the text is overflowing, we will disable wrapping, check the widths, and then re-enable wrapping\r\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-whiteSpace', 'nowrap');\r\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-sourceWhiteSpace', 'nowrap');\r\n        const overflowing = Array.from(this._hover.contentsDomNode.children).some((hoverElement) => {\r\n            return hoverElement.scrollWidth > hoverElement.clientWidth;\r\n        });\r\n        this._hover.containerDomNode.style.removeProperty('--vscode-hover-whiteSpace');\r\n        this._hover.containerDomNode.style.removeProperty('--vscode-hover-sourceWhiteSpace');\r\n        return overflowing;\r\n    }\r\n    _findMaximumRenderingWidth() {\r\n        if (!this._editor || !this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const overflowing = this._isHoverTextOverflowing();\r\n        const initialWidth = (typeof this._contentWidth === 'undefined'\r\n            ? 0\r\n            : this._contentWidth - 2 // - 2 for the borders\r\n        );\r\n        if (overflowing || this._hover.containerDomNode.clientWidth < initialWidth) {\r\n            const bodyBoxWidth = dom.getClientArea(this._hover.containerDomNode.ownerDocument.body).width;\r\n            const horizontalPadding = 14;\r\n            return bodyBoxWidth - horizontalPadding;\r\n        }\r\n        else {\r\n            return this._hover.containerDomNode.clientWidth + 2;\r\n        }\r\n    }\r\n    isMouseGettingCloser(posx, posy) {\r\n        if (!this._visibleData) {\r\n            return false;\r\n        }\r\n        if (typeof this._visibleData.initialMousePosX === 'undefined' || typeof this._visibleData.initialMousePosY === 'undefined') {\r\n            this._visibleData.initialMousePosX = posx;\r\n            this._visibleData.initialMousePosY = posy;\r\n            return false;\r\n        }\r\n        const widgetRect = dom.getDomNodePagePosition(this.getDomNode());\r\n        if (typeof this._visibleData.closestMouseDistance === 'undefined') {\r\n            this._visibleData.closestMouseDistance = computeDistanceFromPointToRectangle(this._visibleData.initialMousePosX, this._visibleData.initialMousePosY, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\r\n        }\r\n        const distance = computeDistanceFromPointToRectangle(posx, posy, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\r\n        if (distance > this._visibleData.closestMouseDistance + 4 /* tolerance of 4 pixels */) {\r\n            // The mouse is getting farther away\r\n            return false;\r\n        }\r\n        this._visibleData.closestMouseDistance = Math.min(this._visibleData.closestMouseDistance, distance);\r\n        return true;\r\n    }\r\n    _setHoverData(hoverData) {\r\n        var _a;\r\n        (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.disposables.dispose();\r\n        this._visibleData = hoverData;\r\n        this._hoverVisibleKey.set(!!hoverData);\r\n        this._hover.containerDomNode.classList.toggle('hidden', !hoverData);\r\n    }\r\n    _layout() {\r\n        const { fontSize, lineHeight } = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        contentsDomNode.style.fontSize = `${fontSize}px`;\r\n        contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\r\n        this._updateMaxDimensions();\r\n    }\r\n    _updateFont() {\r\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\r\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\r\n    }\r\n    _updateContent(node) {\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        contentsDomNode.style.paddingBottom = '';\r\n        contentsDomNode.textContent = '';\r\n        contentsDomNode.appendChild(node);\r\n    }\r\n    _layoutContentWidget() {\r\n        this._editor.layoutContentWidget(this);\r\n        this._hover.onContentsChanged();\r\n    }\r\n    _updateMaxDimensions() {\r\n        const height = Math.max(this._editor.getLayoutInfo().height / 4, 250, ContentHoverWidget_1._lastDimensions.height);\r\n        const width = Math.max(this._editor.getLayoutInfo().width * 0.66, 500, ContentHoverWidget_1._lastDimensions.width);\r\n        this._setHoverWidgetMaxDimensions(width, height);\r\n    }\r\n    _render(node, hoverData) {\r\n        this._setHoverData(hoverData);\r\n        this._updateFont();\r\n        this._updateContent(node);\r\n        this._updateMaxDimensions();\r\n        this.onContentsChanged();\r\n        // Simply force a synchronous render on the editor\r\n        // such that the widget does not really render with left = '0px'\r\n        this._editor.render();\r\n    }\r\n    getPosition() {\r\n        var _a;\r\n        if (!this._visibleData) {\r\n            return null;\r\n        }\r\n        return {\r\n            position: this._visibleData.showAtPosition,\r\n            secondaryPosition: this._visibleData.showAtSecondaryPosition,\r\n            positionAffinity: this._visibleData.isBeforeContent ? 3 /* PositionAffinity.LeftOfInjectedText */ : undefined,\r\n            preference: [(_a = this._positionPreference) !== null && _a !== void 0 ? _a : 1 /* ContentWidgetPositionPreference.ABOVE */]\r\n        };\r\n    }\r\n    showAt(node, hoverData) {\r\n        var _a, _b, _c, _d;\r\n        if (!this._editor || !this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._render(node, hoverData);\r\n        const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\r\n        const widgetPosition = hoverData.showAtPosition;\r\n        this._positionPreference = (_a = this._findPositionPreference(widgetHeight, widgetPosition)) !== null && _a !== void 0 ? _a : 1 /* ContentWidgetPositionPreference.ABOVE */;\r\n        // See https://github.com/microsoft/vscode/issues/140339\r\n        // TODO: Doing a second layout of the hover after force rendering the editor\r\n        this.onContentsChanged();\r\n        if (hoverData.stoleFocus) {\r\n            this._hover.containerDomNode.focus();\r\n        }\r\n        (_b = hoverData.colorPicker) === null || _b === void 0 ? void 0 : _b.layout();\r\n        // The aria label overrides the label, so if we add to it, add the contents of the hover\r\n        const accessibleViewHint = getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), (_d = (_c = this._keybindingService.lookupKeybinding('editor.action.accessibleView')) === null || _c === void 0 ? void 0 : _c.getAriaLabel()) !== null && _d !== void 0 ? _d : '');\r\n        if (accessibleViewHint) {\r\n            this._hover.contentsDomNode.ariaLabel = this._hover.contentsDomNode.textContent + ', ' + accessibleViewHint;\r\n        }\r\n    }\r\n    hide() {\r\n        if (!this._visibleData) {\r\n            return;\r\n        }\r\n        const stoleFocus = this._visibleData.stoleFocus || this._hoverFocusedKey.get();\r\n        this._setHoverData(undefined);\r\n        this._resizableNode.maxSize = new dom.Dimension(Infinity, Infinity);\r\n        this._resizableNode.clearSashHoverState();\r\n        this._hoverFocusedKey.set(false);\r\n        this._editor.layoutContentWidget(this);\r\n        if (stoleFocus) {\r\n            this._editor.focus();\r\n        }\r\n    }\r\n    _removeConstraintsRenderNormally() {\r\n        // Added because otherwise the initial size of the hover content is smaller than should be\r\n        const layoutInfo = this._editor.getLayoutInfo();\r\n        this._resizableNode.layout(layoutInfo.height, layoutInfo.width);\r\n        this._setHoverWidgetDimensions('auto', 'auto');\r\n    }\r\n    _adjustHoverHeightForScrollbar(height) {\r\n        var _a;\r\n        const containerDomNode = this._hover.containerDomNode;\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        const maxRenderingHeight = (_a = this._findMaximumRenderingHeight()) !== null && _a !== void 0 ? _a : Infinity;\r\n        this._setContainerDomNodeDimensions(dom.getTotalWidth(containerDomNode), Math.min(maxRenderingHeight, height));\r\n        this._setContentsDomNodeDimensions(dom.getTotalWidth(contentsDomNode), Math.min(maxRenderingHeight, height - SCROLLBAR_WIDTH));\r\n    }\r\n    setMinimumDimensions(dimensions) {\r\n        // We combine the new minimum dimensions with the previous ones\r\n        this._minimumSize = new dom.Dimension(Math.max(this._minimumSize.width, dimensions.width), Math.max(this._minimumSize.height, dimensions.height));\r\n        this._updateMinimumWidth();\r\n    }\r\n    _updateMinimumWidth() {\r\n        const width = (typeof this._contentWidth === 'undefined'\r\n            ? this._minimumSize.width\r\n            : Math.min(this._contentWidth, this._minimumSize.width));\r\n        // We want to avoid that the hover is artificially large, so we use the content width as minimum width\r\n        this._resizableNode.minSize = new dom.Dimension(width, this._minimumSize.height);\r\n    }\r\n    onContentsChanged() {\r\n        var _a;\r\n        this._removeConstraintsRenderNormally();\r\n        const containerDomNode = this._hover.containerDomNode;\r\n        let height = dom.getTotalHeight(containerDomNode);\r\n        let width = dom.getTotalWidth(containerDomNode);\r\n        this._resizableNode.layout(height, width);\r\n        this._setHoverWidgetDimensions(width, height);\r\n        height = dom.getTotalHeight(containerDomNode);\r\n        width = dom.getTotalWidth(containerDomNode);\r\n        this._contentWidth = width;\r\n        this._updateMinimumWidth();\r\n        this._resizableNode.layout(height, width);\r\n        if (this._hasHorizontalScrollbar()) {\r\n            this._adjustContentsBottomPadding();\r\n            this._adjustHoverHeightForScrollbar(height);\r\n        }\r\n        if ((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition) {\r\n            const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\r\n            this._positionPreference = this._findPositionPreference(widgetHeight, this._visibleData.showAtPosition);\r\n        }\r\n        this._layoutContentWidget();\r\n    }\r\n    focus() {\r\n        this._hover.containerDomNode.focus();\r\n    }\r\n    scrollUp() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - fontInfo.lineHeight });\r\n    }\r\n    scrollDown() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + fontInfo.lineHeight });\r\n    }\r\n    scrollLeft() {\r\n        const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\r\n        this._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft - HORIZONTAL_SCROLLING_BY });\r\n    }\r\n    scrollRight() {\r\n        const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\r\n        this._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft + HORIZONTAL_SCROLLING_BY });\r\n    }\r\n    pageUp() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - scrollHeight });\r\n    }\r\n    pageDown() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + scrollHeight });\r\n    }\r\n    goToTop() {\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: 0 });\r\n    }\r\n    goToBottom() {\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: this._hover.scrollbar.getScrollDimensions().scrollHeight });\r\n    }\r\n};\r\nContentHoverWidget.ID = 'editor.contrib.resizableContentHoverWidget';\r\nContentHoverWidget._lastDimensions = new dom.Dimension(0, 0);\r\nContentHoverWidget = ContentHoverWidget_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, IConfigurationService),\r\n    __param(3, IAccessibilityService),\r\n    __param(4, IKeybindingService)\r\n], ContentHoverWidget);\r\nexport { ContentHoverWidget };\r\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\r\n    get hasContent() {\r\n        return this._hasContent;\r\n    }\r\n    constructor(_keybindingService) {\r\n        super();\r\n        this._keybindingService = _keybindingService;\r\n        this._hasContent = false;\r\n        this.hoverElement = $('div.hover-row.status-bar');\r\n        this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\r\n    }\r\n    addAction(actionOptions) {\r\n        const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\r\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\r\n        this._hasContent = true;\r\n        return this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\r\n    }\r\n    append(element) {\r\n        const result = dom.append(this.actionsElement, element);\r\n        this._hasContent = true;\r\n        return result;\r\n    }\r\n};\r\nEditorHoverStatusBar = __decorate([\r\n    __param(0, IKeybindingService)\r\n], EditorHoverStatusBar);\r\nexport { EditorHoverStatusBar };\r\nclass ContentHoverComputer {\r\n    get anchor() { return this._anchor; }\r\n    set anchor(value) { this._anchor = value; }\r\n    get shouldFocus() { return this._shouldFocus; }\r\n    set shouldFocus(value) { this._shouldFocus = value; }\r\n    get source() { return this._source; }\r\n    set source(value) { this._source = value; }\r\n    get insistOnKeepingHoverVisible() { return this._insistOnKeepingHoverVisible; }\r\n    set insistOnKeepingHoverVisible(value) { this._insistOnKeepingHoverVisible = value; }\r\n    constructor(_editor, _participants) {\r\n        this._editor = _editor;\r\n        this._participants = _participants;\r\n        this._anchor = null;\r\n        this._shouldFocus = false;\r\n        this._source = 0 /* HoverStartSource.Mouse */;\r\n        this._insistOnKeepingHoverVisible = false;\r\n    }\r\n    static _getLineDecorations(editor, anchor) {\r\n        if (anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\r\n            return [];\r\n        }\r\n        const model = editor.getModel();\r\n        const lineNumber = anchor.range.startLineNumber;\r\n        if (lineNumber > model.getLineCount()) {\r\n            // invalid line\r\n            return [];\r\n        }\r\n        const maxColumn = model.getLineMaxColumn(lineNumber);\r\n        return editor.getLineDecorations(lineNumber).filter((d) => {\r\n            if (d.options.isWholeLine) {\r\n                return true;\r\n            }\r\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            if (d.options.showIfCollapsed) {\r\n                // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\r\n                if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\r\n                    return false;\r\n                }\r\n            }\r\n            else {\r\n                if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    computeAsync(token) {\r\n        const anchor = this._anchor;\r\n        if (!this._editor.hasModel() || !anchor) {\r\n            return AsyncIterableObject.EMPTY;\r\n        }\r\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\r\n        return AsyncIterableObject.merge(this._participants.map((participant) => {\r\n            if (!participant.computeAsync) {\r\n                return AsyncIterableObject.EMPTY;\r\n            }\r\n            return participant.computeAsync(anchor, lineDecorations, token);\r\n        }));\r\n    }\r\n    computeSync() {\r\n        if (!this._editor.hasModel() || !this._anchor) {\r\n            return [];\r\n        }\r\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\r\n        let result = [];\r\n        for (const participant of this._participants) {\r\n            result = result.concat(participant.computeSync(this._anchor, lineDecorations));\r\n        }\r\n        return coalesce(result);\r\n    }\r\n}\r\nfunction computeDistanceFromPointToRectangle(pointX, pointY, left, top, width, height) {\r\n    const x = (left + width / 2); // x center of rectangle\r\n    const y = (top + height / 2); // y center of rectangle\r\n    const dx = Math.max(Math.abs(pointX - x) - width / 2, 0);\r\n    const dy = Math.max(Math.abs(pointY - y) - height / 2, 0);\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../dom.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { Disposable } from '../../../common/lifecycle.js';\r\nimport './hover.css';\r\nimport { localize } from '../../../../nls.js';\r\nconst $ = dom.$;\r\nexport class HoverWidget extends Disposable {\r\n    constructor() {\r\n        super();\r\n        this.containerDomNode = document.createElement('div');\r\n        this.containerDomNode.className = 'monaco-hover';\r\n        this.containerDomNode.tabIndex = 0;\r\n        this.containerDomNode.setAttribute('role', 'tooltip');\r\n        this.contentsDomNode = document.createElement('div');\r\n        this.contentsDomNode.className = 'monaco-hover-content';\r\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\r\n            consumeMouseWheelIfScrollbarIsNeeded: true\r\n        }));\r\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\r\n    }\r\n    onContentsChanged() {\r\n        this.scrollbar.scanDomNode();\r\n    }\r\n}\r\nexport class HoverAction extends Disposable {\r\n    static render(parent, actionOptions, keybindingLabel) {\r\n        return new HoverAction(parent, actionOptions, keybindingLabel);\r\n    }\r\n    constructor(parent, actionOptions, keybindingLabel) {\r\n        super();\r\n        this.actionContainer = dom.append(parent, $('div.action-container'));\r\n        this.actionContainer.setAttribute('tabindex', '0');\r\n        this.action = dom.append(this.actionContainer, $('a.action'));\r\n        this.action.setAttribute('role', 'button');\r\n        if (actionOptions.iconClass) {\r\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\r\n        }\r\n        const label = dom.append(this.action, $('span'));\r\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\r\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            actionOptions.run(this.actionContainer);\r\n        }));\r\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_DOWN, e => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                actionOptions.run(this.actionContainer);\r\n            }\r\n        }));\r\n        this.setEnabled(true);\r\n    }\r\n    setEnabled(enabled) {\r\n        if (enabled) {\r\n            this.actionContainer.classList.remove('disabled');\r\n            this.actionContainer.removeAttribute('aria-disabled');\r\n        }\r\n        else {\r\n            this.actionContainer.classList.add('disabled');\r\n            this.actionContainer.setAttribute('aria-disabled', 'true');\r\n        }\r\n    }\r\n}\r\nexport function getHoverAccessibleViewHint(shouldHaveHint, keybinding) {\r\n    return shouldHaveHint && keybinding ? localize('acessibleViewHint', \"Inspect this in the accessible view with {0}.\", keybinding) : shouldHaveHint ? localize('acessibleViewHintNoKbOpen', \"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.\") : '';\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n};\r\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nexport class HoverResult {\r\n    constructor(value, isComplete, hasLoadingMessage) {\r\n        this.value = value;\r\n        this.isComplete = isComplete;\r\n        this.hasLoadingMessage = hasLoadingMessage;\r\n    }\r\n}\r\n/**\r\n * Computing the hover is very fine tuned.\r\n *\r\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\r\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\r\n *   - if async results already come in, they are not rendered yet.\r\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\r\n *   - if there are sync or async results, they are rendered.\r\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\r\n */\r\nexport class HoverOperation extends Disposable {\r\n    constructor(_editor, _computer) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._computer = _computer;\r\n        this._onResult = this._register(new Emitter());\r\n        this.onResult = this._onResult.event;\r\n        this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\r\n        this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\r\n        this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\r\n        this._state = 0 /* HoverOperationState.Idle */;\r\n        this._asyncIterable = null;\r\n        this._asyncIterableDone = false;\r\n        this._result = [];\r\n    }\r\n    dispose() {\r\n        if (this._asyncIterable) {\r\n            this._asyncIterable.cancel();\r\n            this._asyncIterable = null;\r\n        }\r\n        super.dispose();\r\n    }\r\n    get _hoverTime() {\r\n        return this._editor.getOption(60 /* EditorOption.hover */).delay;\r\n    }\r\n    get _firstWaitTime() {\r\n        return this._hoverTime / 2;\r\n    }\r\n    get _secondWaitTime() {\r\n        return this._hoverTime - this._firstWaitTime;\r\n    }\r\n    get _loadingMessageTime() {\r\n        return 3 * this._hoverTime;\r\n    }\r\n    _setState(state, fireResult = true) {\r\n        this._state = state;\r\n        if (fireResult) {\r\n            this._fireResult();\r\n        }\r\n    }\r\n    _triggerAsyncComputation() {\r\n        this._setState(2 /* HoverOperationState.SecondWait */);\r\n        this._secondWaitScheduler.schedule(this._secondWaitTime);\r\n        if (this._computer.computeAsync) {\r\n            this._asyncIterableDone = false;\r\n            this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\r\n            (() => __awaiter(this, void 0, void 0, function* () {\r\n                var _a, e_1, _b, _c;\r\n                try {\r\n                    try {\r\n                        for (var _d = true, _e = __asyncValues(this._asyncIterable), _f; _f = yield _e.next(), _a = _f.done, !_a; _d = true) {\r\n                            _c = _f.value;\r\n                            _d = false;\r\n                            const item = _c;\r\n                            if (item) {\r\n                                this._result.push(item);\r\n                                this._fireResult();\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (!_d && !_a && (_b = _e.return)) yield _b.call(_e);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                    }\r\n                    this._asyncIterableDone = true;\r\n                    if (this._state === 3 /* HoverOperationState.WaitingForAsync */ || this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */) {\r\n                        this._setState(0 /* HoverOperationState.Idle */);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    onUnexpectedError(e);\r\n                }\r\n            }))();\r\n        }\r\n        else {\r\n            this._asyncIterableDone = true;\r\n        }\r\n    }\r\n    _triggerSyncComputation() {\r\n        if (this._computer.computeSync) {\r\n            this._result = this._result.concat(this._computer.computeSync());\r\n        }\r\n        this._setState(this._asyncIterableDone ? 0 /* HoverOperationState.Idle */ : 3 /* HoverOperationState.WaitingForAsync */);\r\n    }\r\n    _triggerLoadingMessage() {\r\n        if (this._state === 3 /* HoverOperationState.WaitingForAsync */) {\r\n            this._setState(4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\r\n        }\r\n    }\r\n    _fireResult() {\r\n        if (this._state === 1 /* HoverOperationState.FirstWait */ || this._state === 2 /* HoverOperationState.SecondWait */) {\r\n            // Do not send out results before the hover time\r\n            return;\r\n        }\r\n        const isComplete = (this._state === 0 /* HoverOperationState.Idle */);\r\n        const hasLoadingMessage = (this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\r\n        this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\r\n    }\r\n    start(mode) {\r\n        if (mode === 0 /* HoverStartMode.Delayed */) {\r\n            if (this._state === 0 /* HoverOperationState.Idle */) {\r\n                this._setState(1 /* HoverOperationState.FirstWait */);\r\n                this._firstWaitScheduler.schedule(this._firstWaitTime);\r\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime);\r\n            }\r\n        }\r\n        else {\r\n            switch (this._state) {\r\n                case 0 /* HoverOperationState.Idle */:\r\n                    this._triggerAsyncComputation();\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n                case 2 /* HoverOperationState.SecondWait */:\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    cancel() {\r\n        this._firstWaitScheduler.cancel();\r\n        this._secondWaitScheduler.cancel();\r\n        this._loadingMessageScheduler.cancel();\r\n        if (this._asyncIterable) {\r\n            this._asyncIterable.cancel();\r\n            this._asyncIterable = null;\r\n        }\r\n        this._result = [];\r\n        this._setState(0 /* HoverOperationState.Idle */, false);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class HoverRangeAnchor {\r\n    constructor(priority, range, initialMousePosX, initialMousePosY) {\r\n        this.priority = priority;\r\n        this.range = range;\r\n        this.initialMousePosX = initialMousePosX;\r\n        this.initialMousePosY = initialMousePosY;\r\n        this.type = 1 /* HoverAnchorType.Range */;\r\n    }\r\n    equals(other) {\r\n        return (other.type === 1 /* HoverAnchorType.Range */ && this.range.equalsRange(other.range));\r\n    }\r\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\r\n        return (lastAnchor.type === 1 /* HoverAnchorType.Range */ && showAtPosition.lineNumber === this.range.startLineNumber);\r\n    }\r\n}\r\nexport class HoverForeignElementAnchor {\r\n    constructor(priority, owner, range, initialMousePosX, initialMousePosY, supportsMarkerHover) {\r\n        this.priority = priority;\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.initialMousePosX = initialMousePosX;\r\n        this.initialMousePosY = initialMousePosY;\r\n        this.supportsMarkerHover = supportsMarkerHover;\r\n        this.type = 2 /* HoverAnchorType.ForeignElement */;\r\n    }\r\n    equals(other) {\r\n        return (other.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === other.owner);\r\n    }\r\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\r\n        return (lastAnchor.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === lastAnchor.owner);\r\n    }\r\n}\r\nexport const HoverParticipantRegistry = (new class HoverParticipantRegistry {\r\n    constructor() {\r\n        this._participants = [];\r\n    }\r\n    register(ctor) {\r\n        this._participants.push(ctor);\r\n    }\r\n    getAll() {\r\n        return this._participants;\r\n    }\r\n}());\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Dimension } from '../../dom.js';\r\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\r\nimport { Emitter, Event } from '../../../common/event.js';\r\nimport { DisposableStore } from '../../../common/lifecycle.js';\r\nexport class ResizableHTMLElement {\r\n    constructor() {\r\n        this._onDidWillResize = new Emitter();\r\n        this.onDidWillResize = this._onDidWillResize.event;\r\n        this._onDidResize = new Emitter();\r\n        this.onDidResize = this._onDidResize.event;\r\n        this._sashListener = new DisposableStore();\r\n        this._size = new Dimension(0, 0);\r\n        this._minSize = new Dimension(0, 0);\r\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\r\n        this.domNode = document.createElement('div');\r\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\r\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\r\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\r\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\r\n        this._northSash.orthogonalStartSash = this._westSash;\r\n        this._northSash.orthogonalEndSash = this._eastSash;\r\n        this._southSash.orthogonalStartSash = this._westSash;\r\n        this._southSash.orthogonalEndSash = this._eastSash;\r\n        let currentSize;\r\n        let deltaY = 0;\r\n        let deltaX = 0;\r\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\r\n            if (currentSize === undefined) {\r\n                this._onDidWillResize.fire();\r\n                currentSize = this._size;\r\n                deltaY = 0;\r\n                deltaX = 0;\r\n            }\r\n        }));\r\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\r\n            if (currentSize !== undefined) {\r\n                currentSize = undefined;\r\n                deltaY = 0;\r\n                deltaX = 0;\r\n                this._onDidResize.fire({ dimension: this._size, done: true });\r\n            }\r\n        }));\r\n        this._sashListener.add(this._eastSash.onDidChange(e => {\r\n            if (currentSize) {\r\n                deltaX = e.currentX - e.startX;\r\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\r\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\r\n            }\r\n        }));\r\n        this._sashListener.add(this._westSash.onDidChange(e => {\r\n            if (currentSize) {\r\n                deltaX = -(e.currentX - e.startX);\r\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\r\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\r\n            }\r\n        }));\r\n        this._sashListener.add(this._northSash.onDidChange(e => {\r\n            if (currentSize) {\r\n                deltaY = -(e.currentY - e.startY);\r\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\r\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\r\n            }\r\n        }));\r\n        this._sashListener.add(this._southSash.onDidChange(e => {\r\n            if (currentSize) {\r\n                deltaY = e.currentY - e.startY;\r\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\r\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\r\n            }\r\n        }));\r\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\r\n            if (this._preferredSize) {\r\n                this.layout(this._size.height, this._preferredSize.width);\r\n                this._onDidResize.fire({ dimension: this._size, done: true });\r\n            }\r\n        }));\r\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\r\n            if (this._preferredSize) {\r\n                this.layout(this._preferredSize.height, this._size.width);\r\n                this._onDidResize.fire({ dimension: this._size, done: true });\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._northSash.dispose();\r\n        this._southSash.dispose();\r\n        this._eastSash.dispose();\r\n        this._westSash.dispose();\r\n        this._sashListener.dispose();\r\n        this._onDidResize.dispose();\r\n        this._onDidWillResize.dispose();\r\n        this.domNode.remove();\r\n    }\r\n    enableSashes(north, east, south, west) {\r\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\r\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\r\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\r\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\r\n    }\r\n    layout(height = this.size.height, width = this.size.width) {\r\n        const { height: minHeight, width: minWidth } = this._minSize;\r\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\r\n        height = Math.max(minHeight, Math.min(maxHeight, height));\r\n        width = Math.max(minWidth, Math.min(maxWidth, width));\r\n        const newSize = new Dimension(width, height);\r\n        if (!Dimension.equals(newSize, this._size)) {\r\n            this.domNode.style.height = height + 'px';\r\n            this.domNode.style.width = width + 'px';\r\n            this._size = newSize;\r\n            this._northSash.layout();\r\n            this._eastSash.layout();\r\n            this._southSash.layout();\r\n            this._westSash.layout();\r\n        }\r\n    }\r\n    clearSashHoverState() {\r\n        this._eastSash.clearSashHoverState();\r\n        this._westSash.clearSashHoverState();\r\n        this._northSash.clearSashHoverState();\r\n        this._southSash.clearSashHoverState();\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    set maxSize(value) {\r\n        this._maxSize = value;\r\n    }\r\n    get maxSize() {\r\n        return this._maxSize;\r\n    }\r\n    set minSize(value) {\r\n        this._minSize = value;\r\n    }\r\n    get minSize() {\r\n        return this._minSize;\r\n    }\r\n    set preferredSize(value) {\r\n        this._preferredSize = value;\r\n    }\r\n    get preferredSize() {\r\n        return this._preferredSize;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nconst TOP_HEIGHT = 30;\r\nconst BOTTOM_HEIGHT = 24;\r\nexport class ResizableContentWidget extends Disposable {\r\n    constructor(_editor, minimumSize = new dom.Dimension(10, 10)) {\r\n        super();\r\n        this._editor = _editor;\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this._resizableNode = this._register(new ResizableHTMLElement());\r\n        this._contentPosition = null;\r\n        this._isResizing = false;\r\n        this._resizableNode.domNode.style.position = 'absolute';\r\n        this._resizableNode.minSize = dom.Dimension.lift(minimumSize);\r\n        this._resizableNode.layout(minimumSize.height, minimumSize.width);\r\n        this._resizableNode.enableSashes(true, true, true, true);\r\n        this._register(this._resizableNode.onDidResize(e => {\r\n            this._resize(new dom.Dimension(e.dimension.width, e.dimension.height));\r\n            if (e.done) {\r\n                this._isResizing = false;\r\n            }\r\n        }));\r\n        this._register(this._resizableNode.onDidWillResize(() => {\r\n            this._isResizing = true;\r\n        }));\r\n    }\r\n    get isResizing() {\r\n        return this._isResizing;\r\n    }\r\n    getDomNode() {\r\n        return this._resizableNode.domNode;\r\n    }\r\n    getPosition() {\r\n        return this._contentPosition;\r\n    }\r\n    get position() {\r\n        var _a;\r\n        return ((_a = this._contentPosition) === null || _a === void 0 ? void 0 : _a.position) ? Position.lift(this._contentPosition.position) : undefined;\r\n    }\r\n    _availableVerticalSpaceAbove(position) {\r\n        const editorDomNode = this._editor.getDomNode();\r\n        const mouseBox = this._editor.getScrolledVisiblePosition(position);\r\n        if (!editorDomNode || !mouseBox) {\r\n            return;\r\n        }\r\n        const editorBox = dom.getDomNodePagePosition(editorDomNode);\r\n        return editorBox.top + mouseBox.top - TOP_HEIGHT;\r\n    }\r\n    _availableVerticalSpaceBelow(position) {\r\n        const editorDomNode = this._editor.getDomNode();\r\n        const mouseBox = this._editor.getScrolledVisiblePosition(position);\r\n        if (!editorDomNode || !mouseBox) {\r\n            return;\r\n        }\r\n        const editorBox = dom.getDomNodePagePosition(editorDomNode);\r\n        const bodyBox = dom.getClientArea(editorDomNode.ownerDocument.body);\r\n        const mouseBottom = editorBox.top + mouseBox.top + mouseBox.height;\r\n        return bodyBox.height - mouseBottom - BOTTOM_HEIGHT;\r\n    }\r\n    _findPositionPreference(widgetHeight, showAtPosition) {\r\n        var _a, _b;\r\n        const maxHeightBelow = Math.min((_a = this._availableVerticalSpaceBelow(showAtPosition)) !== null && _a !== void 0 ? _a : Infinity, widgetHeight);\r\n        const maxHeightAbove = Math.min((_b = this._availableVerticalSpaceAbove(showAtPosition)) !== null && _b !== void 0 ? _b : Infinity, widgetHeight);\r\n        const maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow), widgetHeight);\r\n        const height = Math.min(widgetHeight, maxHeight);\r\n        let renderingAbove;\r\n        if (this._editor.getOption(60 /* EditorOption.hover */).above) {\r\n            renderingAbove = height <= maxHeightAbove ? 1 /* ContentWidgetPositionPreference.ABOVE */ : 2 /* ContentWidgetPositionPreference.BELOW */;\r\n        }\r\n        else {\r\n            renderingAbove = height <= maxHeightBelow ? 2 /* ContentWidgetPositionPreference.BELOW */ : 1 /* ContentWidgetPositionPreference.ABOVE */;\r\n        }\r\n        if (renderingAbove === 1 /* ContentWidgetPositionPreference.ABOVE */) {\r\n            this._resizableNode.enableSashes(true, true, false, false);\r\n        }\r\n        else {\r\n            this._resizableNode.enableSashes(false, true, true, false);\r\n        }\r\n        return renderingAbove;\r\n    }\r\n    _resize(dimension) {\r\n        this._resizableNode.layout(dimension.height, dimension.width);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { asArray } from '../../../../base/common/arrays.js';\r\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\r\nconst $ = dom.$;\r\nexport class MarginHoverWidget extends Disposable {\r\n    constructor(editor, languageService, openerService) {\r\n        super();\r\n        this._renderDisposeables = this._register(new DisposableStore());\r\n        this._editor = editor;\r\n        this._isVisible = false;\r\n        this._messages = [];\r\n        this._hover = this._register(new HoverWidget());\r\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\r\n        this._markdownRenderer = this._register(new MarkdownRenderer({ editor: this._editor }, languageService, openerService));\r\n        this._computer = new MarginHoverComputer(this._editor);\r\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\r\n        this._register(this._hoverOperation.onResult((result) => {\r\n            this._withResult(result.value);\r\n        }));\r\n        this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\r\n                this._updateFont();\r\n            }\r\n        }));\r\n        this._editor.addOverlayWidget(this);\r\n    }\r\n    dispose() {\r\n        this._editor.removeOverlayWidget(this);\r\n        super.dispose();\r\n    }\r\n    getId() {\r\n        return MarginHoverWidget.ID;\r\n    }\r\n    getDomNode() {\r\n        return this._hover.containerDomNode;\r\n    }\r\n    getPosition() {\r\n        return null;\r\n    }\r\n    _updateFont() {\r\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\r\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\r\n    }\r\n    _onModelDecorationsChanged() {\r\n        if (this._isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\r\n        }\r\n    }\r\n    startShowingAt(lineNumber) {\r\n        if (this._computer.lineNumber === lineNumber) {\r\n            // We have to show the widget at the exact same line number as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        this.hide();\r\n        this._computer.lineNumber = lineNumber;\r\n        this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\r\n    }\r\n    hide() {\r\n        this._computer.lineNumber = -1;\r\n        this._hoverOperation.cancel();\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = false;\r\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\r\n    }\r\n    _withResult(result) {\r\n        this._messages = result;\r\n        if (this._messages.length > 0) {\r\n            this._renderMessages(this._computer.lineNumber, this._messages);\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    }\r\n    _renderMessages(lineNumber, messages) {\r\n        this._renderDisposeables.clear();\r\n        const fragment = document.createDocumentFragment();\r\n        for (const msg of messages) {\r\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\r\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\r\n            const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\r\n            hoverContentsElement.appendChild(renderedContents.element);\r\n            fragment.appendChild(markdownHoverElement);\r\n        }\r\n        this._updateContents(fragment);\r\n        this._showAt(lineNumber);\r\n    }\r\n    _updateContents(node) {\r\n        this._hover.contentsDomNode.textContent = '';\r\n        this._hover.contentsDomNode.appendChild(node);\r\n        this._updateFont();\r\n    }\r\n    _showAt(lineNumber) {\r\n        if (!this._isVisible) {\r\n            this._isVisible = true;\r\n            this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\r\n        }\r\n        const editorLayout = this._editor.getLayoutInfo();\r\n        const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\r\n        const editorScrollTop = this._editor.getScrollTop();\r\n        const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n        const nodeHeight = this._hover.containerDomNode.clientHeight;\r\n        const top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\r\n        this._hover.containerDomNode.style.left = `${editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth}px`;\r\n        this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\r\n    }\r\n}\r\nMarginHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\r\nclass MarginHoverComputer {\r\n    get lineNumber() {\r\n        return this._lineNumber;\r\n    }\r\n    set lineNumber(value) {\r\n        this._lineNumber = value;\r\n    }\r\n    constructor(_editor) {\r\n        this._editor = _editor;\r\n        this._lineNumber = -1;\r\n    }\r\n    computeSync() {\r\n        const toHoverMessage = (contents) => {\r\n            return {\r\n                value: contents\r\n            };\r\n        };\r\n        const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\r\n        const result = [];\r\n        if (!lineDecorations) {\r\n            return result;\r\n        }\r\n        for (const d of lineDecorations) {\r\n            if (!d.options.glyphMarginClassName) {\r\n                continue;\r\n            }\r\n            const hoverMessage = d.options.glyphMarginHoverMessage;\r\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\r\n                continue;\r\n            }\r\n            result.push(...asArray(hoverMessage).map(toHoverMessage));\r\n        }\r\n        return result;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { asArray } from '../../../../base/common/arrays.js';\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { getHover } from './getHover.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nconst $ = dom.$;\r\nexport class MarkdownHover {\r\n    constructor(owner, range, contents, isBeforeContent, ordinal) {\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.contents = contents;\r\n        this.isBeforeContent = isBeforeContent;\r\n        this.ordinal = ordinal;\r\n    }\r\n    isValidForHoverAnchor(anchor) {\r\n        return (anchor.type === 1 /* HoverAnchorType.Range */\r\n            && this.range.startColumn <= anchor.range.startColumn\r\n            && this.range.endColumn >= anchor.range.endColumn);\r\n    }\r\n}\r\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\r\n    constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService) {\r\n        this._editor = _editor;\r\n        this._languageService = _languageService;\r\n        this._openerService = _openerService;\r\n        this._configurationService = _configurationService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this.hoverOrdinal = 3;\r\n    }\r\n    createLoadingMessage(anchor) {\r\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], false, 2000);\r\n    }\r\n    computeSync(anchor, lineDecorations) {\r\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\r\n            return [];\r\n        }\r\n        const model = this._editor.getModel();\r\n        const lineNumber = anchor.range.startLineNumber;\r\n        const maxColumn = model.getLineMaxColumn(lineNumber);\r\n        const result = [];\r\n        let index = 1000;\r\n        const lineLength = model.getLineLength(lineNumber);\r\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\r\n        const stopRenderingLineAfter = this._editor.getOption(116 /* EditorOption.stopRenderingLineAfter */);\r\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\r\n            overrideIdentifier: languageId\r\n        });\r\n        let stopRenderingMessage = false;\r\n        if (stopRenderingLineAfter >= 0 && lineLength > stopRenderingLineAfter && anchor.range.startColumn >= stopRenderingLineAfter) {\r\n            stopRenderingMessage = true;\r\n            result.push(new MarkdownHover(this, anchor.range, [{\r\n                    value: nls.localize('stopped rendering', \"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.\")\r\n                }], false, index++));\r\n        }\r\n        if (!stopRenderingMessage && typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\r\n            result.push(new MarkdownHover(this, anchor.range, [{\r\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\r\n                }], false, index++));\r\n        }\r\n        let isBeforeContent = false;\r\n        for (const d of lineDecorations) {\r\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            const hoverMessage = d.options.hoverMessage;\r\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\r\n                continue;\r\n            }\r\n            if (d.options.beforeContentClassName) {\r\n                isBeforeContent = true;\r\n            }\r\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\r\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage), isBeforeContent, index++));\r\n        }\r\n        return result;\r\n    }\r\n    computeAsync(anchor, lineDecorations, token) {\r\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\r\n            return AsyncIterableObject.EMPTY;\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (!this._languageFeaturesService.hoverProvider.has(model)) {\r\n            return AsyncIterableObject.EMPTY;\r\n        }\r\n        const position = new Position(anchor.range.startLineNumber, anchor.range.startColumn);\r\n        return getHover(this._languageFeaturesService.hoverProvider, model, position, token)\r\n            .filter(item => !isEmptyMarkdownString(item.hover.contents))\r\n            .map(item => {\r\n            const rng = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\r\n            return new MarkdownHover(this, rng, item.hover.contents, false, item.ordinal);\r\n        });\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\r\n    }\r\n};\r\nMarkdownHoverParticipant = __decorate([\r\n    __param(1, ILanguageService),\r\n    __param(2, IOpenerService),\r\n    __param(3, IConfigurationService),\r\n    __param(4, ILanguageFeaturesService)\r\n], MarkdownHoverParticipant);\r\nexport { MarkdownHoverParticipant };\r\nexport function renderMarkdownHovers(context, hoverParts, editor, languageService, openerService) {\r\n    // Sort hover parts to keep them stable since they might come in async, out-of-order\r\n    hoverParts.sort((a, b) => a.ordinal - b.ordinal);\r\n    const disposables = new DisposableStore();\r\n    for (const hoverPart of hoverParts) {\r\n        for (const contents of hoverPart.contents) {\r\n            if (isEmptyMarkdownString(contents)) {\r\n                continue;\r\n            }\r\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\r\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\r\n            const renderer = disposables.add(new MarkdownRenderer({ editor }, languageService, openerService));\r\n            disposables.add(renderer.onDidRenderAsync(() => {\r\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\r\n                context.onContentsChanged();\r\n            }));\r\n            const renderedContents = disposables.add(renderer.render(contents));\r\n            hoverContentsElement.appendChild(renderedContents.element);\r\n            context.fragment.appendChild(markdownHoverElement);\r\n        }\r\n    }\r\n    return disposables;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nexport class HoverProviderResult {\r\n    constructor(provider, hover, ordinal) {\r\n        this.provider = provider;\r\n        this.hover = hover;\r\n        this.ordinal = ordinal;\r\n    }\r\n}\r\nfunction executeProvider(provider, ordinal, model, position, token) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const result = yield Promise.resolve(provider.provideHover(model, position, token));\r\n            if (result && isValid(result)) {\r\n                return new HoverProviderResult(provider, result, ordinal);\r\n            }\r\n        }\r\n        catch (err) {\r\n            onUnexpectedExternalError(err);\r\n        }\r\n        return undefined;\r\n    });\r\n}\r\nexport function getHover(registry, model, position, token) {\r\n    const providers = registry.ordered(model);\r\n    const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\r\n    return AsyncIterableObject.fromPromises(promises).coalesce();\r\n}\r\nexport function getHoverPromise(registry, model, position, token) {\r\n    return getHover(registry, model, position, token).map(item => item.hover).toPromise();\r\n}\r\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    return getHoverPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\r\n});\r\nfunction isValid(result) {\r\n    const hasRange = (typeof result.range !== 'undefined');\r\n    const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\r\n    return hasRange && hasHtmlContent;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { basename } from '../../../../base/common/resources.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\r\nimport { getCodeActions, quickFixCommandId } from '../../codeAction/browser/codeAction.js';\r\nimport { CodeActionController } from '../../codeAction/browser/codeActionController.js';\r\nimport { CodeActionKind, CodeActionTriggerSource } from '../../codeAction/common/types.js';\r\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { Progress } from '../../../../platform/progress/common/progress.js';\r\nconst $ = dom.$;\r\nexport class MarkerHover {\r\n    constructor(owner, range, marker) {\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.marker = marker;\r\n    }\r\n    isValidForHoverAnchor(anchor) {\r\n        return (anchor.type === 1 /* HoverAnchorType.Range */\r\n            && this.range.startColumn <= anchor.range.startColumn\r\n            && this.range.endColumn >= anchor.range.endColumn);\r\n    }\r\n}\r\nconst markerCodeActionTrigger = {\r\n    type: 1 /* CodeActionTriggerType.Invoke */,\r\n    filter: { include: CodeActionKind.QuickFix },\r\n    triggerAction: CodeActionTriggerSource.QuickFixHover\r\n};\r\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\r\n    constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\r\n        this._editor = _editor;\r\n        this._markerDecorationsService = _markerDecorationsService;\r\n        this._openerService = _openerService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this.hoverOrdinal = 1;\r\n        this.recentMarkerCodeActionsInfo = undefined;\r\n    }\r\n    computeSync(anchor, lineDecorations) {\r\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\r\n            return [];\r\n        }\r\n        const model = this._editor.getModel();\r\n        const lineNumber = anchor.range.startLineNumber;\r\n        const maxColumn = model.getLineMaxColumn(lineNumber);\r\n        const result = [];\r\n        for (const d of lineDecorations) {\r\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\r\n            if (!marker) {\r\n                continue;\r\n            }\r\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\r\n            result.push(new MarkerHover(this, range, marker));\r\n        }\r\n        return result;\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        if (!hoverParts.length) {\r\n            return Disposable.None;\r\n        }\r\n        const disposables = new DisposableStore();\r\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\r\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\r\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\r\n        return disposables;\r\n    }\r\n    renderMarkerHover(markerHover, disposables) {\r\n        const hoverElement = $('div.hover-row');\r\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\r\n        const { source, message, code, relatedInformation } = markerHover.marker;\r\n        this._editor.applyFontInfo(markerElement);\r\n        const messageElement = dom.append(markerElement, $('span'));\r\n        messageElement.style.whiteSpace = 'pre-wrap';\r\n        messageElement.innerText = message;\r\n        if (source || code) {\r\n            // Code has link\r\n            if (code && typeof code !== 'string') {\r\n                const sourceAndCodeElement = $('span');\r\n                if (source) {\r\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\r\n                    sourceElement.innerText = source;\r\n                }\r\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\r\n                codeLink.setAttribute('href', code.target.toString());\r\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\r\n                    this._openerService.open(code.target, { allowCommands: true });\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }));\r\n                const codeElement = dom.append(codeLink, $('span'));\r\n                codeElement.innerText = code.value;\r\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\r\n                detailsElement.style.opacity = '0.6';\r\n                detailsElement.style.paddingLeft = '6px';\r\n            }\r\n            else {\r\n                const detailsElement = dom.append(markerElement, $('span'));\r\n                detailsElement.style.opacity = '0.6';\r\n                detailsElement.style.paddingLeft = '6px';\r\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\r\n            }\r\n        }\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\r\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\r\n                relatedInfoContainer.style.marginTop = '8px';\r\n                const a = dom.append(relatedInfoContainer, $('a'));\r\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\r\n                a.style.cursor = 'pointer';\r\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (this._openerService) {\r\n                        this._openerService.open(resource, {\r\n                            fromUserGesture: true,\r\n                            editorOptions: { selection: { startLineNumber, startColumn } }\r\n                        }).catch(onUnexpectedError);\r\n                    }\r\n                }));\r\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\r\n                messageElement.innerText = message;\r\n                this._editor.applyFontInfo(messageElement);\r\n            }\r\n        }\r\n        return hoverElement;\r\n    }\r\n    renderMarkerStatusbar(context, markerHover, disposables) {\r\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\r\n            context.statusBar.addAction({\r\n                label: nls.localize('view problem', \"View Problem\"),\r\n                commandId: NextMarkerAction.ID,\r\n                run: () => {\r\n                    var _a;\r\n                    context.hide();\r\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\r\n                    this._editor.focus();\r\n                }\r\n            });\r\n        }\r\n        if (!this._editor.getOption(90 /* EditorOption.readOnly */)) {\r\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\r\n            if (this.recentMarkerCodeActionsInfo) {\r\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\r\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\r\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\r\n                    }\r\n                }\r\n                else {\r\n                    this.recentMarkerCodeActionsInfo = undefined;\r\n                }\r\n            }\r\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\r\n            if (!quickfixPlaceholderElement.textContent) {\r\n                // Have some content in here to avoid flickering\r\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\r\n            }\r\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\r\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\r\n            codeActionsPromise.then(actions => {\r\n                updatePlaceholderDisposable.dispose();\r\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\r\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\r\n                    actions.dispose();\r\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\r\n                    return;\r\n                }\r\n                quickfixPlaceholderElement.style.display = 'none';\r\n                let showing = false;\r\n                disposables.add(toDisposable(() => {\r\n                    if (!showing) {\r\n                        actions.dispose();\r\n                    }\r\n                }));\r\n                context.statusBar.addAction({\r\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\r\n                    commandId: quickFixCommandId,\r\n                    run: (target) => {\r\n                        showing = true;\r\n                        const controller = CodeActionController.get(this._editor);\r\n                        const elementPosition = dom.getDomNodePagePosition(target);\r\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\r\n                        // context menu as well when using keyboard navigation\r\n                        context.hide();\r\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\r\n                            x: elementPosition.left,\r\n                            y: elementPosition.top,\r\n                            width: elementPosition.width,\r\n                            height: elementPosition.height\r\n                        });\r\n                    }\r\n                });\r\n            }, onUnexpectedError);\r\n        }\r\n    }\r\n    getCodeActions(marker) {\r\n        return createCancelablePromise(cancellationToken => {\r\n            return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\r\n        });\r\n    }\r\n};\r\nMarkerHoverParticipant = __decorate([\r\n    __param(1, IMarkerDecorationsService),\r\n    __param(2, IOpenerService),\r\n    __param(3, ILanguageFeaturesService)\r\n], MarkerHoverParticipant);\r\nexport { MarkerHoverParticipant };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar MarkerController_1;\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IMarkerNavigationService } from './markerNavigationService.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\r\nlet MarkerController = MarkerController_1 = class MarkerController {\r\n    static get(editor) {\r\n        return editor.getContribution(MarkerController_1.ID);\r\n    }\r\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\r\n        this._markerNavigationService = _markerNavigationService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._editorService = _editorService;\r\n        this._instantiationService = _instantiationService;\r\n        this._sessionDispoables = new DisposableStore();\r\n        this._editor = editor;\r\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\r\n    }\r\n    dispose() {\r\n        this._cleanUp();\r\n        this._sessionDispoables.dispose();\r\n    }\r\n    _cleanUp() {\r\n        this._widgetVisible.reset();\r\n        this._sessionDispoables.clear();\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n    }\r\n    _getOrCreateModel(uri) {\r\n        if (this._model && this._model.matches(uri)) {\r\n            return this._model;\r\n        }\r\n        let reusePosition = false;\r\n        if (this._model) {\r\n            reusePosition = true;\r\n            this._cleanUp();\r\n        }\r\n        this._model = this._markerNavigationService.getMarkerList(uri);\r\n        if (reusePosition) {\r\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\r\n        }\r\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\r\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\r\n        this._widgetVisible.set(true);\r\n        this._sessionDispoables.add(this._model);\r\n        this._sessionDispoables.add(this._widget);\r\n        // follow cursor\r\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\r\n            var _a, _b, _c;\r\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\r\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\r\n            }\r\n        }));\r\n        // update markers\r\n        this._sessionDispoables.add(this._model.onDidChange(() => {\r\n            if (!this._widget || !this._widget.position || !this._model) {\r\n                return;\r\n            }\r\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\r\n            if (info) {\r\n                this._widget.updateMarker(info.marker);\r\n            }\r\n            else {\r\n                this._widget.showStale();\r\n            }\r\n        }));\r\n        // open related\r\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\r\n            this._editorService.openCodeEditor({\r\n                resource: related.resource,\r\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\r\n            }, this._editor);\r\n            this.close(false);\r\n        }));\r\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\r\n        return this._model;\r\n    }\r\n    close(focusEditor = true) {\r\n        this._cleanUp();\r\n        if (focusEditor) {\r\n            this._editor.focus();\r\n        }\r\n    }\r\n    showAtMarker(marker) {\r\n        if (this._editor.hasModel()) {\r\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\r\n            model.resetIndex();\r\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\r\n            if (model.selected) {\r\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\r\n            }\r\n        }\r\n    }\r\n    nagivate(next, multiFile) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._editor.hasModel()) {\r\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\r\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\r\n                if (!model.selected) {\r\n                    return;\r\n                }\r\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\r\n                    // show in different editor\r\n                    this._cleanUp();\r\n                    const otherEditor = yield this._editorService.openCodeEditor({\r\n                        resource: model.selected.marker.resource,\r\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\r\n                    }, this._editor);\r\n                    if (otherEditor) {\r\n                        (_a = MarkerController_1.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\r\n                        (_b = MarkerController_1.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\r\n                    }\r\n                }\r\n                else {\r\n                    // show in this editor\r\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\nMarkerController.ID = 'editor.contrib.markerController';\r\nMarkerController = MarkerController_1 = __decorate([\r\n    __param(1, IMarkerNavigationService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, ICodeEditorService),\r\n    __param(4, IInstantiationService)\r\n], MarkerController);\r\nexport { MarkerController };\r\nclass MarkerNavigationAction extends EditorAction {\r\n    constructor(_next, _multiFile, opts) {\r\n        super(opts);\r\n        this._next = _next;\r\n        this._multiFile = _multiFile;\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (editor.hasModel()) {\r\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class NextMarkerAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(true, false, {\r\n            id: NextMarkerAction.ID,\r\n            label: NextMarkerAction.LABEL,\r\n            alias: 'Go to Next Problem (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MarkerNavigationWidget.TitleMenu,\r\n                title: NextMarkerAction.LABEL,\r\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\r\n                group: 'navigation',\r\n                order: 1\r\n            }\r\n        });\r\n    }\r\n}\r\nNextMarkerAction.ID = 'editor.action.marker.next';\r\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\r\nclass PrevMarkerAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(false, false, {\r\n            id: PrevMarkerAction.ID,\r\n            label: PrevMarkerAction.LABEL,\r\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MarkerNavigationWidget.TitleMenu,\r\n                title: PrevMarkerAction.LABEL,\r\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\r\n                group: 'navigation',\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n}\r\nPrevMarkerAction.ID = 'editor.action.marker.prev';\r\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\r\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(true, true, {\r\n            id: 'editor.action.marker.nextInFiles',\r\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\r\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarGoMenu,\r\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\r\n                group: '6_problem_nav',\r\n                order: 1\r\n            }\r\n        });\r\n    }\r\n}\r\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(false, true, {\r\n            id: 'editor.action.marker.prevInFiles',\r\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\r\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarGoMenu,\r\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\r\n                group: '6_problem_nav',\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n}\r\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(NextMarkerAction);\r\nregisterEditorAction(PrevMarkerAction);\r\nregisterEditorAction(NextMarkerInFilesAction);\r\nregisterEditorAction(PrevMarkerInFilesAction);\r\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\r\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\r\nregisterEditorCommand(new MarkerCommand({\r\n    id: 'closeMarkersNavigation',\r\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\r\n    handler: x => x.close(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { binarySearch } from '../../../../base/common/arrays.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { LinkedList } from '../../../../base/common/linkedList.js';\r\nimport { compare } from '../../../../base/common/strings.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nexport class MarkerCoordinate {\r\n    constructor(marker, index, total) {\r\n        this.marker = marker;\r\n        this.index = index;\r\n        this.total = total;\r\n    }\r\n}\r\nlet MarkerList = class MarkerList {\r\n    constructor(resourceFilter, _markerService, _configService) {\r\n        this._markerService = _markerService;\r\n        this._configService = _configService;\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._dispoables = new DisposableStore();\r\n        this._markers = [];\r\n        this._nextIdx = -1;\r\n        if (URI.isUri(resourceFilter)) {\r\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\r\n        }\r\n        else if (resourceFilter) {\r\n            this._resourceFilter = resourceFilter;\r\n        }\r\n        const compareOrder = this._configService.getValue('problems.sortOrder');\r\n        const compareMarker = (a, b) => {\r\n            let res = compare(a.resource.toString(), b.resource.toString());\r\n            if (res === 0) {\r\n                if (compareOrder === 'position') {\r\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\r\n                }\r\n                else {\r\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        const updateMarker = () => {\r\n            this._markers = this._markerService.read({\r\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\r\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\r\n            });\r\n            if (typeof resourceFilter === 'function') {\r\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\r\n            }\r\n            this._markers.sort(compareMarker);\r\n        };\r\n        updateMarker();\r\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\r\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\r\n                updateMarker();\r\n                this._nextIdx = -1;\r\n                this._onDidChange.fire();\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._dispoables.dispose();\r\n        this._onDidChange.dispose();\r\n    }\r\n    matches(uri) {\r\n        if (!this._resourceFilter && !uri) {\r\n            return true;\r\n        }\r\n        if (!this._resourceFilter || !uri) {\r\n            return false;\r\n        }\r\n        return this._resourceFilter(uri);\r\n    }\r\n    get selected() {\r\n        const marker = this._markers[this._nextIdx];\r\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\r\n    }\r\n    _initIdx(model, position, fwd) {\r\n        let found = false;\r\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\r\n        if (idx < 0) {\r\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\r\n            if (idx < 0) {\r\n                idx = ~idx;\r\n            }\r\n        }\r\n        for (let i = idx; i < this._markers.length; i++) {\r\n            let range = Range.lift(this._markers[i]);\r\n            if (range.isEmpty()) {\r\n                const word = model.getWordAtPosition(range.getStartPosition());\r\n                if (word) {\r\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\r\n                }\r\n            }\r\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\r\n                this._nextIdx = i;\r\n                found = true;\r\n                break;\r\n            }\r\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\r\n                break;\r\n            }\r\n        }\r\n        if (!found) {\r\n            // after the last change\r\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\r\n        }\r\n        if (this._nextIdx < 0) {\r\n            this._nextIdx = this._markers.length - 1;\r\n        }\r\n    }\r\n    resetIndex() {\r\n        this._nextIdx = -1;\r\n    }\r\n    move(fwd, model, position) {\r\n        if (this._markers.length === 0) {\r\n            return false;\r\n        }\r\n        const oldIdx = this._nextIdx;\r\n        if (this._nextIdx === -1) {\r\n            this._initIdx(model, position, fwd);\r\n        }\r\n        else if (fwd) {\r\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\r\n        }\r\n        else if (!fwd) {\r\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\r\n        }\r\n        if (oldIdx !== this._nextIdx) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    find(uri, position) {\r\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\r\n        if (idx < 0) {\r\n            return undefined;\r\n        }\r\n        for (; idx < this._markers.length; idx++) {\r\n            if (Range.containsPosition(this._markers[idx], position)) {\r\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n};\r\nMarkerList = __decorate([\r\n    __param(1, IMarkerService),\r\n    __param(2, IConfigurationService)\r\n], MarkerList);\r\nexport { MarkerList };\r\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\r\nlet MarkerNavigationService = class MarkerNavigationService {\r\n    constructor(_markerService, _configService) {\r\n        this._markerService = _markerService;\r\n        this._configService = _configService;\r\n        this._provider = new LinkedList();\r\n    }\r\n    getMarkerList(resource) {\r\n        for (const provider of this._provider) {\r\n            const result = provider.getMarkerList(resource);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n        // default\r\n        return new MarkerList(resource, this._markerService, this._configService);\r\n    }\r\n};\r\nMarkerNavigationService = __decorate([\r\n    __param(0, IMarkerService),\r\n    __param(1, IConfigurationService)\r\n], MarkerNavigationService);\r\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar MarkerNavigationWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\r\nimport { basename } from '../../../../base/common/resources.js';\r\nimport { splitLines } from '../../../../base/common/strings.js';\r\nimport './media/gotoErrorWidget.css';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\r\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ILabelService } from '../../../../platform/label/common/label.js';\r\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\r\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nclass MessageWidget {\r\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\r\n        this._openerService = _openerService;\r\n        this._labelService = _labelService;\r\n        this._lines = 0;\r\n        this._longestLineLength = 0;\r\n        this._relatedDiagnostics = new WeakMap();\r\n        this._disposables = new DisposableStore();\r\n        this._editor = editor;\r\n        const domNode = document.createElement('div');\r\n        domNode.className = 'descriptioncontainer';\r\n        this._messageBlock = document.createElement('div');\r\n        this._messageBlock.classList.add('message');\r\n        this._messageBlock.setAttribute('aria-live', 'assertive');\r\n        this._messageBlock.setAttribute('role', 'alert');\r\n        domNode.appendChild(this._messageBlock);\r\n        this._relatedBlock = document.createElement('div');\r\n        domNode.appendChild(this._relatedBlock);\r\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\r\n            event.preventDefault();\r\n            const related = this._relatedDiagnostics.get(event.target);\r\n            if (related) {\r\n                onRelatedInformation(related);\r\n            }\r\n        }));\r\n        this._scrollable = new ScrollableElement(domNode, {\r\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\r\n            vertical: 1 /* ScrollbarVisibility.Auto */,\r\n            useShadows: false,\r\n            horizontalScrollbarSize: 6,\r\n            verticalScrollbarSize: 6\r\n        });\r\n        parent.appendChild(this._scrollable.getDomNode());\r\n        this._disposables.add(this._scrollable.onScroll(e => {\r\n            domNode.style.left = `-${e.scrollLeft}px`;\r\n            domNode.style.top = `-${e.scrollTop}px`;\r\n        }));\r\n        this._disposables.add(this._scrollable);\r\n    }\r\n    dispose() {\r\n        dispose(this._disposables);\r\n    }\r\n    update(marker) {\r\n        const { source, message, relatedInformation, code } = marker;\r\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\r\n        if (code) {\r\n            if (typeof code === 'string') {\r\n                sourceAndCodeLength += code.length;\r\n            }\r\n            else {\r\n                sourceAndCodeLength += code.value.length;\r\n            }\r\n        }\r\n        const lines = splitLines(message);\r\n        this._lines = lines.length;\r\n        this._longestLineLength = 0;\r\n        for (const line of lines) {\r\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\r\n        }\r\n        dom.clearNode(this._messageBlock);\r\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\r\n        this._editor.applyFontInfo(this._messageBlock);\r\n        let lastLineElement = this._messageBlock;\r\n        for (const line of lines) {\r\n            lastLineElement = document.createElement('div');\r\n            lastLineElement.innerText = line;\r\n            if (line === '') {\r\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\r\n            }\r\n            this._messageBlock.appendChild(lastLineElement);\r\n        }\r\n        if (source || code) {\r\n            const detailsElement = document.createElement('span');\r\n            detailsElement.classList.add('details');\r\n            lastLineElement.appendChild(detailsElement);\r\n            if (source) {\r\n                const sourceElement = document.createElement('span');\r\n                sourceElement.innerText = source;\r\n                sourceElement.classList.add('source');\r\n                detailsElement.appendChild(sourceElement);\r\n            }\r\n            if (code) {\r\n                if (typeof code === 'string') {\r\n                    const codeElement = document.createElement('span');\r\n                    codeElement.innerText = `(${code})`;\r\n                    codeElement.classList.add('code');\r\n                    detailsElement.appendChild(codeElement);\r\n                }\r\n                else {\r\n                    this._codeLink = dom.$('a.code-link');\r\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\r\n                    this._codeLink.onclick = (e) => {\r\n                        this._openerService.open(code.target, { allowCommands: true });\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    };\r\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\r\n                    codeElement.innerText = code.value;\r\n                    detailsElement.appendChild(this._codeLink);\r\n                }\r\n            }\r\n        }\r\n        dom.clearNode(this._relatedBlock);\r\n        this._editor.applyFontInfo(this._relatedBlock);\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\r\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(66 /* EditorOption.lineHeight */) * 0.66)}px`;\r\n            this._lines += 1;\r\n            for (const related of relatedInformation) {\r\n                const container = document.createElement('div');\r\n                const relatedResource = document.createElement('a');\r\n                relatedResource.classList.add('filename');\r\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\r\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\r\n                this._relatedDiagnostics.set(relatedResource, related);\r\n                const relatedMessage = document.createElement('span');\r\n                relatedMessage.innerText = related.message;\r\n                container.appendChild(relatedResource);\r\n                container.appendChild(relatedMessage);\r\n                this._lines += 1;\r\n                relatedInformationNode.appendChild(container);\r\n            }\r\n        }\r\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\r\n        const scrollHeight = fontInfo.lineHeight * this._lines;\r\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\r\n    }\r\n    layout(height, width) {\r\n        this._scrollable.getDomNode().style.height = `${height}px`;\r\n        this._scrollable.getDomNode().style.width = `${width}px`;\r\n        this._scrollable.setScrollDimensions({ width, height });\r\n    }\r\n    getHeightInLines() {\r\n        return Math.min(17, this._lines);\r\n    }\r\n    getAriaLabel(marker) {\r\n        let severityLabel = '';\r\n        switch (marker.severity) {\r\n            case MarkerSeverity.Error:\r\n                severityLabel = nls.localize('Error', \"Error\");\r\n                break;\r\n            case MarkerSeverity.Warning:\r\n                severityLabel = nls.localize('Warning', \"Warning\");\r\n                break;\r\n            case MarkerSeverity.Info:\r\n                severityLabel = nls.localize('Info', \"Info\");\r\n                break;\r\n            case MarkerSeverity.Hint:\r\n                severityLabel = nls.localize('Hint', \"Hint\");\r\n                break;\r\n        }\r\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\r\n        const model = this._editor.getModel();\r\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\r\n            const lineContent = model.getLineContent(marker.startLineNumber);\r\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\r\n        }\r\n        return ariaLabel;\r\n    }\r\n}\r\nlet MarkerNavigationWidget = MarkerNavigationWidget_1 = class MarkerNavigationWidget extends PeekViewWidget {\r\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\r\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\r\n        this._themeService = _themeService;\r\n        this._openerService = _openerService;\r\n        this._menuService = _menuService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._labelService = _labelService;\r\n        this._callOnDispose = new DisposableStore();\r\n        this._onDidSelectRelatedInformation = new Emitter();\r\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\r\n        this._severity = MarkerSeverity.Warning;\r\n        this._backgroundColor = Color.white;\r\n        this._applyTheme(_themeService.getColorTheme());\r\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\r\n        this.create();\r\n    }\r\n    _applyTheme(theme) {\r\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\r\n        let colorId = editorMarkerNavigationError;\r\n        let headerBackground = editorMarkerNavigationErrorHeader;\r\n        if (this._severity === MarkerSeverity.Warning) {\r\n            colorId = editorMarkerNavigationWarning;\r\n            headerBackground = editorMarkerNavigationWarningHeader;\r\n        }\r\n        else if (this._severity === MarkerSeverity.Info) {\r\n            colorId = editorMarkerNavigationInfo;\r\n            headerBackground = editorMarkerNavigationInfoHeader;\r\n        }\r\n        const frameColor = theme.getColor(colorId);\r\n        const headerBg = theme.getColor(headerBackground);\r\n        this.style({\r\n            arrowColor: frameColor,\r\n            frameColor: frameColor,\r\n            headerBackgroundColor: headerBg,\r\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\r\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\r\n        }); // style() will trigger _applyStyles\r\n    }\r\n    _applyStyles() {\r\n        if (this._parentContainer) {\r\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\r\n        }\r\n        super._applyStyles();\r\n    }\r\n    dispose() {\r\n        this._callOnDispose.dispose();\r\n        super.dispose();\r\n    }\r\n    _fillHead(container) {\r\n        super._fillHead(container);\r\n        this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\r\n        const actions = [];\r\n        const menu = this._menuService.createMenu(MarkerNavigationWidget_1.TitleMenu, this._contextKeyService);\r\n        createAndFillInActionBarActions(menu, undefined, actions);\r\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\r\n        menu.dispose();\r\n    }\r\n    _fillTitleIcon(container) {\r\n        this._icon = dom.append(container, dom.$(''));\r\n    }\r\n    _fillBody(container) {\r\n        this._parentContainer = container;\r\n        container.classList.add('marker-widget');\r\n        this._parentContainer.tabIndex = 0;\r\n        this._parentContainer.setAttribute('role', 'tooltip');\r\n        this._container = document.createElement('div');\r\n        container.appendChild(this._container);\r\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\r\n        this._disposables.add(this._message);\r\n    }\r\n    show() {\r\n        throw new Error('call showAtMarker');\r\n    }\r\n    showAtMarker(marker, markerIdx, markerCount) {\r\n        // update:\r\n        // * title\r\n        // * message\r\n        this._container.classList.remove('stale');\r\n        this._message.update(marker);\r\n        // update frame color (only applied on 'show')\r\n        this._severity = marker.severity;\r\n        this._applyTheme(this._themeService.getColorTheme());\r\n        // show\r\n        const range = Range.lift(marker);\r\n        const editorPosition = this.editor.getPosition();\r\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\r\n        super.show(position, this.computeRequiredHeight());\r\n        const model = this.editor.getModel();\r\n        if (model) {\r\n            const detail = markerCount > 1\r\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\r\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\r\n            this.setTitle(basename(model.uri), detail);\r\n        }\r\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\r\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\r\n        this.editor.focus();\r\n    }\r\n    updateMarker(marker) {\r\n        this._container.classList.remove('stale');\r\n        this._message.update(marker);\r\n    }\r\n    showStale() {\r\n        this._container.classList.add('stale');\r\n        this._relayout();\r\n    }\r\n    _doLayoutBody(heightInPixel, widthInPixel) {\r\n        super._doLayoutBody(heightInPixel, widthInPixel);\r\n        this._heightInPixel = heightInPixel;\r\n        this._message.layout(heightInPixel, widthInPixel);\r\n        this._container.style.height = `${heightInPixel}px`;\r\n    }\r\n    _onWidth(widthInPixel) {\r\n        this._message.layout(this._heightInPixel, widthInPixel);\r\n    }\r\n    _relayout() {\r\n        super._relayout(this.computeRequiredHeight());\r\n    }\r\n    computeRequiredHeight() {\r\n        return 3 + this._message.getHeightInLines();\r\n    }\r\n};\r\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\r\nMarkerNavigationWidget = MarkerNavigationWidget_1 = __decorate([\r\n    __param(1, IThemeService),\r\n    __param(2, IOpenerService),\r\n    __param(3, IMenuService),\r\n    __param(4, IInstantiationService),\r\n    __param(5, IContextKeyService),\r\n    __param(6, ILabelService)\r\n], MarkerNavigationWidget);\r\nexport { MarkerNavigationWidget };\r\n// theming\r\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\r\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\r\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\r\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\r\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\r\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\r\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\r\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\r\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\r\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './media/severityIcon.css';\r\nimport { Codicon } from '../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../base/common/themables.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nexport var SeverityIcon;\r\n(function (SeverityIcon) {\r\n    function className(severity) {\r\n        switch (severity) {\r\n            case Severity.Ignore:\r\n                return 'severity-ignore ' + ThemeIcon.asClassName(Codicon.info);\r\n            case Severity.Info:\r\n                return ThemeIcon.asClassName(Codicon.info);\r\n            case Severity.Warning:\r\n                return ThemeIcon.asClassName(Codicon.warning);\r\n            case Severity.Error:\r\n                return ThemeIcon.asClassName(Codicon.error);\r\n            default:\r\n                return '';\r\n        }\r\n    }\r\n    SeverityIcon.className = className;\r\n})(SeverityIcon || (SeverityIcon = {}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar InlineSuggestionHintsContentWidget_1;\r\nimport { h } from '../../../../base/browser/dom.js';\r\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\r\nimport { KeybindingLabel, unthemedKeybindingLabelOptions } from '../../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\r\nimport { Action, Separator } from '../../../../base/common/actions.js';\r\nimport { equals } from '../../../../base/common/arrays.js';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, autorunWithStore, derived, observableFromEvent } from '../../../../base/common/observable.js';\r\nimport { OS } from '../../../../base/common/platform.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport './inlineCompletionsHintsWidget.css';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\r\nimport { showNextInlineSuggestionActionId, showPreviousInlineSuggestionActionId } from './commandIds.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { MenuEntryActionViewItem, createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\r\nimport { WorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\r\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nlet InlineCompletionsHintsWidget = class InlineCompletionsHintsWidget extends Disposable {\r\n    constructor(editor, model, instantiationService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.model = model;\r\n        this.instantiationService = instantiationService;\r\n        this.alwaysShowToolbar = observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(62 /* EditorOption.inlineSuggest */).showToolbar === 'always');\r\n        this.sessionPosition = undefined;\r\n        this.position = derived(this, reader => {\r\n            var _a, _b, _c;\r\n            const ghostText = (_a = this.model.read(reader)) === null || _a === void 0 ? void 0 : _a.ghostText.read(reader);\r\n            if (!this.alwaysShowToolbar.read(reader) || !ghostText || ghostText.parts.length === 0) {\r\n                this.sessionPosition = undefined;\r\n                return null;\r\n            }\r\n            const firstColumn = ghostText.parts[0].column;\r\n            if (this.sessionPosition && this.sessionPosition.lineNumber !== ghostText.lineNumber) {\r\n                this.sessionPosition = undefined;\r\n            }\r\n            const position = new Position(ghostText.lineNumber, Math.min(firstColumn, (_c = (_b = this.sessionPosition) === null || _b === void 0 ? void 0 : _b.column) !== null && _c !== void 0 ? _c : Number.MAX_SAFE_INTEGER));\r\n            this.sessionPosition = position;\r\n            return position;\r\n        });\r\n        this._register(autorunWithStore((reader, store) => {\r\n            /** @description setup content widget */\r\n            const model = this.model.read(reader);\r\n            if (!model || !this.alwaysShowToolbar.read(reader)) {\r\n                return;\r\n            }\r\n            const contentWidget = store.add(this.instantiationService.createInstance(InlineSuggestionHintsContentWidget, this.editor, true, this.position, model.selectedInlineCompletionIndex, model.inlineCompletionsCount, model.selectedInlineCompletion.map(v => { var _a; return (_a = v === null || v === void 0 ? void 0 : v.inlineCompletion.source.inlineCompletions.commands) !== null && _a !== void 0 ? _a : []; })));\r\n            editor.addContentWidget(contentWidget);\r\n            store.add(toDisposable(() => editor.removeContentWidget(contentWidget)));\r\n            store.add(autorun(reader => {\r\n                /** @description request explicit */\r\n                const position = this.position.read(reader);\r\n                if (!position) {\r\n                    return;\r\n                }\r\n                if (model.lastTriggerKind.read(reader) !== InlineCompletionTriggerKind.Explicit) {\r\n                    model.triggerExplicitly();\r\n                }\r\n            }));\r\n        }));\r\n    }\r\n};\r\nInlineCompletionsHintsWidget = __decorate([\r\n    __param(2, IInstantiationService)\r\n], InlineCompletionsHintsWidget);\r\nexport { InlineCompletionsHintsWidget };\r\nconst inlineSuggestionHintsNextIcon = registerIcon('inline-suggestion-hints-next', Codicon.chevronRight, localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\r\nconst inlineSuggestionHintsPreviousIcon = registerIcon('inline-suggestion-hints-previous', Codicon.chevronLeft, localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\r\nlet InlineSuggestionHintsContentWidget = InlineSuggestionHintsContentWidget_1 = class InlineSuggestionHintsContentWidget extends Disposable {\r\n    static get dropDownVisible() { return this._dropDownVisible; }\r\n    createCommandAction(commandId, label, iconClassName) {\r\n        const action = new Action(commandId, label, iconClassName, true, () => this._commandService.executeCommand(commandId));\r\n        const kb = this.keybindingService.lookupKeybinding(commandId, this._contextKeyService);\r\n        let tooltip = label;\r\n        if (kb) {\r\n            tooltip = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', label, kb.getLabel());\r\n        }\r\n        action.tooltip = tooltip;\r\n        return action;\r\n    }\r\n    constructor(editor, withBorder, _position, _currentSuggestionIdx, _suggestionCount, _extraCommands, _commandService, instantiationService, keybindingService, _contextKeyService, _menuService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.withBorder = withBorder;\r\n        this._position = _position;\r\n        this._currentSuggestionIdx = _currentSuggestionIdx;\r\n        this._suggestionCount = _suggestionCount;\r\n        this._extraCommands = _extraCommands;\r\n        this._commandService = _commandService;\r\n        this.keybindingService = keybindingService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._menuService = _menuService;\r\n        this.id = `InlineSuggestionHintsContentWidget${InlineSuggestionHintsContentWidget_1.id++}`;\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this.nodes = h('div.inlineSuggestionsHints', { className: this.withBorder ? '.withBorder' : '' }, [\r\n            h('div@toolBar'),\r\n        ]);\r\n        this.previousAction = this.createCommandAction(showPreviousInlineSuggestionActionId, localize('previous', 'Previous'), ThemeIcon.asClassName(inlineSuggestionHintsPreviousIcon));\r\n        this.availableSuggestionCountAction = new Action('inlineSuggestionHints.availableSuggestionCount', '', undefined, false);\r\n        this.nextAction = this.createCommandAction(showNextInlineSuggestionActionId, localize('next', 'Next'), ThemeIcon.asClassName(inlineSuggestionHintsNextIcon));\r\n        // TODO@hediet: deprecate MenuId.InlineCompletionsActions\r\n        this.inlineCompletionsActionsMenus = this._register(this._menuService.createMenu(MenuId.InlineCompletionsActions, this._contextKeyService));\r\n        this.clearAvailableSuggestionCountLabelDebounced = this._register(new RunOnceScheduler(() => {\r\n            this.availableSuggestionCountAction.label = '';\r\n        }, 100));\r\n        this.disableButtonsDebounced = this._register(new RunOnceScheduler(() => {\r\n            this.previousAction.enabled = this.nextAction.enabled = false;\r\n        }, 100));\r\n        this.lastCommands = [];\r\n        this.toolBar = this._register(instantiationService.createInstance(CustomizedMenuWorkbenchToolBar, this.nodes.toolBar, MenuId.InlineSuggestionToolbar, {\r\n            menuOptions: { renderShortTitle: true },\r\n            toolbarOptions: { primaryGroup: g => g.startsWith('primary') },\r\n            actionViewItemProvider: (action, options) => {\r\n                if (action instanceof MenuItemAction) {\r\n                    return instantiationService.createInstance(StatusBarViewItem, action, undefined);\r\n                }\r\n                if (action === this.availableSuggestionCountAction) {\r\n                    const a = new ActionViewItemWithClassName(undefined, action, { label: true, icon: false });\r\n                    a.setClass('availableSuggestionCount');\r\n                    return a;\r\n                }\r\n                return undefined;\r\n            },\r\n            telemetrySource: 'InlineSuggestionToolbar',\r\n        }));\r\n        this.toolBar.setPrependedPrimaryActions([\r\n            this.previousAction,\r\n            this.availableSuggestionCountAction,\r\n            this.nextAction,\r\n        ]);\r\n        this._register(this.toolBar.onDidChangeDropdownVisibility(e => {\r\n            InlineSuggestionHintsContentWidget_1._dropDownVisible = e;\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description update position */\r\n            this._position.read(reader);\r\n            this.editor.layoutContentWidget(this);\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description counts */\r\n            const suggestionCount = this._suggestionCount.read(reader);\r\n            const currentSuggestionIdx = this._currentSuggestionIdx.read(reader);\r\n            if (suggestionCount !== undefined) {\r\n                this.clearAvailableSuggestionCountLabelDebounced.cancel();\r\n                this.availableSuggestionCountAction.label = `${currentSuggestionIdx + 1}/${suggestionCount}`;\r\n            }\r\n            else {\r\n                this.clearAvailableSuggestionCountLabelDebounced.schedule();\r\n            }\r\n            if (suggestionCount !== undefined && suggestionCount > 1) {\r\n                this.disableButtonsDebounced.cancel();\r\n                this.previousAction.enabled = this.nextAction.enabled = true;\r\n            }\r\n            else {\r\n                this.disableButtonsDebounced.schedule();\r\n            }\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description extra commands */\r\n            const extraCommands = this._extraCommands.read(reader);\r\n            if (equals(this.lastCommands, extraCommands)) {\r\n                // nothing to update\r\n                return;\r\n            }\r\n            this.lastCommands = extraCommands;\r\n            const extraActions = extraCommands.map(c => ({\r\n                class: undefined,\r\n                id: c.id,\r\n                enabled: true,\r\n                tooltip: c.tooltip || '',\r\n                label: c.title,\r\n                run: (event) => {\r\n                    return this._commandService.executeCommand(c.id);\r\n                },\r\n            }));\r\n            for (const [_, group] of this.inlineCompletionsActionsMenus.getActions()) {\r\n                for (const action of group) {\r\n                    if (action instanceof MenuItemAction) {\r\n                        extraActions.push(action);\r\n                    }\r\n                }\r\n            }\r\n            if (extraActions.length > 0) {\r\n                extraActions.unshift(new Separator());\r\n            }\r\n            this.toolBar.setAdditionalSecondaryActions(extraActions);\r\n        }));\r\n    }\r\n    getId() { return this.id; }\r\n    getDomNode() {\r\n        return this.nodes.root;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            position: this._position.get(),\r\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */],\r\n            positionAffinity: 3 /* PositionAffinity.LeftOfInjectedText */,\r\n        };\r\n    }\r\n};\r\nInlineSuggestionHintsContentWidget._dropDownVisible = false;\r\nInlineSuggestionHintsContentWidget.id = 0;\r\nInlineSuggestionHintsContentWidget = InlineSuggestionHintsContentWidget_1 = __decorate([\r\n    __param(6, ICommandService),\r\n    __param(7, IInstantiationService),\r\n    __param(8, IKeybindingService),\r\n    __param(9, IContextKeyService),\r\n    __param(10, IMenuService)\r\n], InlineSuggestionHintsContentWidget);\r\nexport { InlineSuggestionHintsContentWidget };\r\nclass ActionViewItemWithClassName extends ActionViewItem {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._className = undefined;\r\n    }\r\n    setClass(className) {\r\n        this._className = className;\r\n    }\r\n    render(container) {\r\n        super.render(container);\r\n        if (this._className) {\r\n            container.classList.add(this._className);\r\n        }\r\n    }\r\n}\r\nclass StatusBarViewItem extends MenuEntryActionViewItem {\r\n    updateLabel() {\r\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\r\n        if (!kb) {\r\n            return super.updateLabel();\r\n        }\r\n        if (this.label) {\r\n            const div = h('div.keybinding').root;\r\n            const k = new KeybindingLabel(div, OS, Object.assign({ disableTitle: true }, unthemedKeybindingLabelOptions));\r\n            k.set(kb);\r\n            this.label.textContent = this._action.label;\r\n            this.label.appendChild(div);\r\n            this.label.classList.add('inlineSuggestionStatusBarItemLabel');\r\n        }\r\n    }\r\n}\r\nlet CustomizedMenuWorkbenchToolBar = class CustomizedMenuWorkbenchToolBar extends WorkbenchToolBar {\r\n    constructor(container, menuId, options2, menuService, contextKeyService, contextMenuService, keybindingService, telemetryService) {\r\n        super(container, Object.assign({ resetMenu: menuId }, options2), menuService, contextKeyService, contextMenuService, keybindingService, telemetryService);\r\n        this.menuId = menuId;\r\n        this.options2 = options2;\r\n        this.menuService = menuService;\r\n        this.contextKeyService = contextKeyService;\r\n        this.menu = this._store.add(this.menuService.createMenu(this.menuId, this.contextKeyService, { emitEventsForSubmenuChanges: true }));\r\n        this.additionalActions = [];\r\n        this.prependedPrimaryActions = [];\r\n        this._store.add(this.menu.onDidChange(() => this.updateToolbar()));\r\n        this.updateToolbar();\r\n    }\r\n    updateToolbar() {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        const primary = [];\r\n        const secondary = [];\r\n        createAndFillInActionBarActions(this.menu, (_a = this.options2) === null || _a === void 0 ? void 0 : _a.menuOptions, { primary, secondary }, (_c = (_b = this.options2) === null || _b === void 0 ? void 0 : _b.toolbarOptions) === null || _c === void 0 ? void 0 : _c.primaryGroup, (_e = (_d = this.options2) === null || _d === void 0 ? void 0 : _d.toolbarOptions) === null || _e === void 0 ? void 0 : _e.shouldInlineSubmenu, (_g = (_f = this.options2) === null || _f === void 0 ? void 0 : _f.toolbarOptions) === null || _g === void 0 ? void 0 : _g.useSeparatorsInPrimaryActions);\r\n        secondary.push(...this.additionalActions);\r\n        primary.unshift(...this.prependedPrimaryActions);\r\n        this.setActions(primary, secondary);\r\n    }\r\n    setPrependedPrimaryActions(actions) {\r\n        if (equals(this.prependedPrimaryActions, actions, (a, b) => a === b)) {\r\n            return;\r\n        }\r\n        this.prependedPrimaryActions = actions;\r\n        this.updateToolbar();\r\n    }\r\n    setAdditionalSecondaryActions(actions) {\r\n        if (equals(this.additionalActions, actions, (a, b) => a === b)) {\r\n            return;\r\n        }\r\n        this.additionalActions = actions;\r\n        this.updateToolbar();\r\n    }\r\n};\r\nCustomizedMenuWorkbenchToolBar = __decorate([\r\n    __param(3, IMenuService),\r\n    __param(4, IContextKeyService),\r\n    __param(5, IContextMenuService),\r\n    __param(6, IKeybindingService),\r\n    __param(7, ITelemetryService)\r\n], CustomizedMenuWorkbenchToolBar);\r\nexport { CustomizedMenuWorkbenchToolBar };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport const inlineSuggestCommitId = 'editor.action.inlineSuggest.commit';\r\nexport const showPreviousInlineSuggestionActionId = 'editor.action.inlineSuggest.showPrevious';\r\nexport const showNextInlineSuggestionActionId = 'editor.action.inlineSuggest.showNext';\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { addDisposableListener } from '../../../base/browser/dom.js';\r\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\r\nimport { ToolBar } from '../../../base/browser/ui/toolbar/toolbar.js';\r\nimport { Separator, toAction } from '../../../base/common/actions.js';\r\nimport { coalesceInPlace } from '../../../base/common/arrays.js';\r\nimport { intersection } from '../../../base/common/collections.js';\r\nimport { Iterable } from '../../../base/common/iterator.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { localize } from '../../../nls.js';\r\nimport { IMenuService, MenuItemAction, SubmenuItemAction } from '../common/actions.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nimport { IContextMenuService } from '../../contextview/browser/contextView.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\r\n/**\r\n * The `WorkbenchToolBar` does\r\n * - support hiding of menu items\r\n * - lookup keybindings for each actions automatically\r\n * - send `workbenchActionExecuted`-events for each action\r\n *\r\n * See {@link MenuWorkbenchToolBar} for a toolbar that is backed by a menu.\r\n */\r\nlet WorkbenchToolBar = class WorkbenchToolBar extends ToolBar {\r\n    constructor(container, _options, _menuService, _contextKeyService, _contextMenuService, keybindingService, telemetryService) {\r\n        super(container, _contextMenuService, Object.assign(Object.assign({ \r\n            // defaults\r\n            getKeyBinding: (action) => { var _a; return (_a = keybindingService.lookupKeybinding(action.id)) !== null && _a !== void 0 ? _a : undefined; } }, _options), { \r\n            // mandatory (overide options)\r\n            allowContextMenu: true, skipTelemetry: typeof (_options === null || _options === void 0 ? void 0 : _options.telemetrySource) === 'string' }));\r\n        this._options = _options;\r\n        this._menuService = _menuService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._contextMenuService = _contextMenuService;\r\n        this._sessionDisposables = this._store.add(new DisposableStore());\r\n        // telemetry logic\r\n        const telemetrySource = _options === null || _options === void 0 ? void 0 : _options.telemetrySource;\r\n        if (telemetrySource) {\r\n            this._store.add(this.actionBar.onDidRun(e => telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: telemetrySource })));\r\n        }\r\n    }\r\n    setActions(_primary, _secondary = [], menuIds) {\r\n        var _a, _b, _c;\r\n        this._sessionDisposables.clear();\r\n        const primary = _primary.slice(); // for hiding and overflow we set some items to undefined\r\n        const secondary = _secondary.slice();\r\n        const toggleActions = [];\r\n        let toggleActionsCheckedCount = 0;\r\n        const extraSecondary = [];\r\n        let someAreHidden = false;\r\n        // unless disabled, move all hidden items to secondary group or ignore them\r\n        if (((_a = this._options) === null || _a === void 0 ? void 0 : _a.hiddenItemStrategy) !== -1 /* HiddenItemStrategy.NoHide */) {\r\n            for (let i = 0; i < primary.length; i++) {\r\n                const action = primary[i];\r\n                if (!(action instanceof MenuItemAction) && !(action instanceof SubmenuItemAction)) {\r\n                    // console.warn(`Action ${action.id}/${action.label} is not a MenuItemAction`);\r\n                    continue;\r\n                }\r\n                if (!action.hideActions) {\r\n                    continue;\r\n                }\r\n                // collect all toggle actions\r\n                toggleActions.push(action.hideActions.toggle);\r\n                if (action.hideActions.toggle.checked) {\r\n                    toggleActionsCheckedCount++;\r\n                }\r\n                // hidden items move into overflow or ignore\r\n                if (action.hideActions.isHidden) {\r\n                    someAreHidden = true;\r\n                    primary[i] = undefined;\r\n                    if (((_b = this._options) === null || _b === void 0 ? void 0 : _b.hiddenItemStrategy) !== 0 /* HiddenItemStrategy.Ignore */) {\r\n                        extraSecondary[i] = action;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // count for max\r\n        if (((_c = this._options) === null || _c === void 0 ? void 0 : _c.overflowBehavior) !== undefined) {\r\n            const exemptedIds = intersection(new Set(this._options.overflowBehavior.exempted), Iterable.map(primary, a => a === null || a === void 0 ? void 0 : a.id));\r\n            const maxItems = this._options.overflowBehavior.maxItems - exemptedIds.size;\r\n            let count = 0;\r\n            for (let i = 0; i < primary.length; i++) {\r\n                const action = primary[i];\r\n                if (!action) {\r\n                    continue;\r\n                }\r\n                count++;\r\n                if (exemptedIds.has(action.id)) {\r\n                    continue;\r\n                }\r\n                if (count >= maxItems) {\r\n                    primary[i] = undefined;\r\n                    extraSecondary[i] = action;\r\n                }\r\n            }\r\n        }\r\n        // coalesce turns Array<IAction|undefined> into IAction[]\r\n        coalesceInPlace(primary);\r\n        coalesceInPlace(extraSecondary);\r\n        super.setActions(primary, Separator.join(extraSecondary, secondary));\r\n        // add context menu for toggle actions\r\n        if (toggleActions.length > 0) {\r\n            this._sessionDisposables.add(addDisposableListener(this.getElement(), 'contextmenu', e => {\r\n                var _a, _b, _c, _d, _e;\r\n                const event = new StandardMouseEvent(e);\r\n                const action = this.getItemAction(event.target);\r\n                if (!(action)) {\r\n                    return;\r\n                }\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                let noHide = false;\r\n                // last item cannot be hidden when using ignore strategy\r\n                if (toggleActionsCheckedCount === 1 && ((_a = this._options) === null || _a === void 0 ? void 0 : _a.hiddenItemStrategy) === 0 /* HiddenItemStrategy.Ignore */) {\r\n                    noHide = true;\r\n                    for (let i = 0; i < toggleActions.length; i++) {\r\n                        if (toggleActions[i].checked) {\r\n                            toggleActions[i] = toAction({\r\n                                id: action.id,\r\n                                label: action.label,\r\n                                checked: true,\r\n                                enabled: false,\r\n                                run() { }\r\n                            });\r\n                            break; // there is only one\r\n                        }\r\n                    }\r\n                }\r\n                // add \"hide foo\" actions\r\n                let hideAction;\r\n                if (!noHide && (action instanceof MenuItemAction || action instanceof SubmenuItemAction)) {\r\n                    if (!action.hideActions) {\r\n                        // no context menu for MenuItemAction instances that support no hiding\r\n                        // those are fake actions and need to be cleaned up\r\n                        return;\r\n                    }\r\n                    hideAction = action.hideActions.hide;\r\n                }\r\n                else {\r\n                    hideAction = toAction({\r\n                        id: 'label',\r\n                        label: localize('hide', \"Hide\"),\r\n                        enabled: false,\r\n                        run() { }\r\n                    });\r\n                }\r\n                const actions = Separator.join([hideAction], toggleActions);\r\n                // add \"Reset Menu\" action\r\n                if (((_b = this._options) === null || _b === void 0 ? void 0 : _b.resetMenu) && !menuIds) {\r\n                    menuIds = [this._options.resetMenu];\r\n                }\r\n                if (someAreHidden && menuIds) {\r\n                    actions.push(new Separator());\r\n                    actions.push(toAction({\r\n                        id: 'resetThisMenu',\r\n                        label: localize('resetThisMenu', \"Reset Menu\"),\r\n                        run: () => this._menuService.resetHiddenStates(menuIds)\r\n                    }));\r\n                }\r\n                this._contextMenuService.showContextMenu({\r\n                    getAnchor: () => event,\r\n                    getActions: () => actions,\r\n                    // add context menu actions (iff appicable)\r\n                    menuId: (_c = this._options) === null || _c === void 0 ? void 0 : _c.contextMenu,\r\n                    menuActionOptions: Object.assign({ renderShortTitle: true }, (_d = this._options) === null || _d === void 0 ? void 0 : _d.menuOptions),\r\n                    skipTelemetry: typeof ((_e = this._options) === null || _e === void 0 ? void 0 : _e.telemetrySource) === 'string',\r\n                    contextKeyService: this._contextKeyService,\r\n                });\r\n            }));\r\n        }\r\n    }\r\n};\r\nWorkbenchToolBar = __decorate([\r\n    __param(2, IMenuService),\r\n    __param(3, IContextKeyService),\r\n    __param(4, IContextMenuService),\r\n    __param(5, IKeybindingService),\r\n    __param(6, ITelemetryService)\r\n], WorkbenchToolBar);\r\nexport { WorkbenchToolBar };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ActionBar } from '../actionbar/actionbar.js';\r\nimport { DropdownMenuActionViewItem } from '../dropdown/dropdownActionViewItem.js';\r\nimport { Action, SubmenuAction } from '../../../common/actions.js';\r\nimport { Codicon } from '../../../common/codicons.js';\r\nimport { ThemeIcon } from '../../../common/themables.js';\r\nimport { EventMultiplexer } from '../../../common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\r\nimport './toolbar.css';\r\nimport * as nls from '../../../../nls.js';\r\n/**\r\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\r\n */\r\nexport class ToolBar extends Disposable {\r\n    constructor(container, contextMenuProvider, options = { orientation: 0 /* ActionsOrientation.HORIZONTAL */ }) {\r\n        super();\r\n        this.submenuActionViewItems = [];\r\n        this.hasSecondaryActions = false;\r\n        this._onDidChangeDropdownVisibility = this._register(new EventMultiplexer());\r\n        this.onDidChangeDropdownVisibility = this._onDidChangeDropdownVisibility.event;\r\n        this.disposables = this._register(new DisposableStore());\r\n        this.options = options;\r\n        this.lookupKeybindings = typeof this.options.getKeyBinding === 'function';\r\n        this.toggleMenuAction = this._register(new ToggleMenuAction(() => { var _a; return (_a = this.toggleMenuActionViewItem) === null || _a === void 0 ? void 0 : _a.show(); }, options.toggleMenuTitle));\r\n        this.element = document.createElement('div');\r\n        this.element.className = 'monaco-toolbar';\r\n        container.appendChild(this.element);\r\n        this.actionBar = this._register(new ActionBar(this.element, {\r\n            orientation: options.orientation,\r\n            ariaLabel: options.ariaLabel,\r\n            actionRunner: options.actionRunner,\r\n            allowContextMenu: options.allowContextMenu,\r\n            highlightToggledItems: options.highlightToggledItems,\r\n            actionViewItemProvider: (action, viewItemOptions) => {\r\n                var _a;\r\n                if (action.id === ToggleMenuAction.ID) {\r\n                    this.toggleMenuActionViewItem = new DropdownMenuActionViewItem(action, action.menuActions, contextMenuProvider, {\r\n                        actionViewItemProvider: this.options.actionViewItemProvider,\r\n                        actionRunner: this.actionRunner,\r\n                        keybindingProvider: this.options.getKeyBinding,\r\n                        classNames: ThemeIcon.asClassNameArray((_a = options.moreIcon) !== null && _a !== void 0 ? _a : Codicon.toolBarMore),\r\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\r\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\r\n                        skipTelemetry: this.options.skipTelemetry\r\n                    });\r\n                    this.toggleMenuActionViewItem.setActionContext(this.actionBar.context);\r\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility));\r\n                    return this.toggleMenuActionViewItem;\r\n                }\r\n                if (options.actionViewItemProvider) {\r\n                    const result = options.actionViewItemProvider(action, viewItemOptions);\r\n                    if (result) {\r\n                        return result;\r\n                    }\r\n                }\r\n                if (action instanceof SubmenuAction) {\r\n                    const result = new DropdownMenuActionViewItem(action, action.actions, contextMenuProvider, {\r\n                        actionViewItemProvider: this.options.actionViewItemProvider,\r\n                        actionRunner: this.actionRunner,\r\n                        keybindingProvider: this.options.getKeyBinding,\r\n                        classNames: action.class,\r\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\r\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\r\n                        skipTelemetry: this.options.skipTelemetry\r\n                    });\r\n                    result.setActionContext(this.actionBar.context);\r\n                    this.submenuActionViewItems.push(result);\r\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(result.onDidChangeVisibility));\r\n                    return result;\r\n                }\r\n                return undefined;\r\n            }\r\n        }));\r\n    }\r\n    set actionRunner(actionRunner) {\r\n        this.actionBar.actionRunner = actionRunner;\r\n    }\r\n    get actionRunner() {\r\n        return this.actionBar.actionRunner;\r\n    }\r\n    getElement() {\r\n        return this.element;\r\n    }\r\n    getItemAction(indexOrElement) {\r\n        return this.actionBar.getAction(indexOrElement);\r\n    }\r\n    setActions(primaryActions, secondaryActions) {\r\n        this.clear();\r\n        const primaryActionsToSet = primaryActions ? primaryActions.slice(0) : [];\r\n        // Inject additional action to open secondary actions if present\r\n        this.hasSecondaryActions = !!(secondaryActions && secondaryActions.length > 0);\r\n        if (this.hasSecondaryActions && secondaryActions) {\r\n            this.toggleMenuAction.menuActions = secondaryActions.slice(0);\r\n            primaryActionsToSet.push(this.toggleMenuAction);\r\n        }\r\n        primaryActionsToSet.forEach(action => {\r\n            this.actionBar.push(action, { icon: true, label: false, keybinding: this.getKeybindingLabel(action) });\r\n        });\r\n    }\r\n    getKeybindingLabel(action) {\r\n        var _a, _b, _c;\r\n        const key = this.lookupKeybindings ? (_b = (_a = this.options).getKeyBinding) === null || _b === void 0 ? void 0 : _b.call(_a, action) : undefined;\r\n        return (_c = key === null || key === void 0 ? void 0 : key.getLabel()) !== null && _c !== void 0 ? _c : undefined;\r\n    }\r\n    clear() {\r\n        this.submenuActionViewItems = [];\r\n        this.disposables.clear();\r\n        this.actionBar.clear();\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        this.disposables.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexport class ToggleMenuAction extends Action {\r\n    constructor(toggleDropdownMenu, title) {\r\n        title = title || nls.localize('moreActions', \"More Actions...\");\r\n        super(ToggleMenuAction.ID, title, undefined, true);\r\n        this._menuActions = [];\r\n        this.toggleDropdownMenu = toggleDropdownMenu;\r\n    }\r\n    run() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.toggleDropdownMenu();\r\n        });\r\n    }\r\n    get menuActions() {\r\n        return this._menuActions;\r\n    }\r\n    set menuActions(actions) {\r\n        this._menuActions = actions;\r\n    }\r\n}\r\nToggleMenuAction.ID = 'toolbar.toggle.more';\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, EditorAction2, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { StandaloneColorPickerController } from './standaloneColorPickerWidget.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\r\nimport './colorPicker.css';\r\nexport class ShowOrFocusStandaloneColorPicker extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.showOrFocusStandaloneColorPicker',\r\n            title: {\r\n                value: localize('showOrFocusStandaloneColorPicker', \"Show or Focus Standalone Color Picker\"),\r\n                mnemonicTitle: localize({ key: 'mishowOrFocusStandaloneColorPicker', comment: ['&& denotes a mnemonic'] }, \"&&Show or Focus Standalone Color Picker\"),\r\n                original: 'Show or Focus Standalone Color Picker',\r\n            },\r\n            precondition: undefined,\r\n            menu: [\r\n                { id: MenuId.CommandPalette },\r\n            ]\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor) {\r\n        var _a;\r\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.showOrFocus();\r\n    }\r\n}\r\nclass HideStandaloneColorPicker extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.hideColorPicker',\r\n            label: localize({\r\n                key: 'hideColorPicker',\r\n                comment: [\r\n                    'Action that hides the color picker'\r\n                ]\r\n            }, \"Hide the Color Picker\"),\r\n            alias: 'Hide the Color Picker',\r\n            precondition: EditorContextKeys.standaloneColorPickerVisible.isEqualTo(true),\r\n            kbOpts: {\r\n                primary: 9 /* KeyCode.Escape */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.hide();\r\n    }\r\n}\r\nclass InsertColorWithStandaloneColorPicker extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.insertColorWithStandaloneColorPicker',\r\n            label: localize({\r\n                key: 'insertColorWithStandaloneColorPicker',\r\n                comment: [\r\n                    'Action that inserts color with standalone color picker'\r\n                ]\r\n            }, \"Insert Color with Standalone Color Picker\"),\r\n            alias: 'Insert Color with Standalone Color Picker',\r\n            precondition: EditorContextKeys.standaloneColorPickerFocused.isEqualTo(true),\r\n            kbOpts: {\r\n                primary: 3 /* KeyCode.Enter */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.insertColor();\r\n    }\r\n}\r\nregisterEditorAction(HideStandaloneColorPicker);\r\nregisterEditorAction(InsertColorWithStandaloneColorPicker);\r\nregisterAction2(ShowOrFocusStandaloneColorPicker);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar StandaloneColorPickerController_1, StandaloneColorPickerWidget_1;\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { StandaloneColorPickerParticipant } from './colorHoverParticipant.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { EditorHoverStatusBar } from '../../hover/browser/contentHover.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport './colorPicker.css';\r\nlet StandaloneColorPickerController = StandaloneColorPickerController_1 = class StandaloneColorPickerController extends Disposable {\r\n    constructor(_editor, _contextKeyService, _modelService, _keybindingService, _instantiationService, _languageFeatureService, _languageConfigurationService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._modelService = _modelService;\r\n        this._keybindingService = _keybindingService;\r\n        this._instantiationService = _instantiationService;\r\n        this._languageFeatureService = _languageFeatureService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._standaloneColorPickerWidget = null;\r\n        this._standaloneColorPickerVisible = EditorContextKeys.standaloneColorPickerVisible.bindTo(_contextKeyService);\r\n        this._standaloneColorPickerFocused = EditorContextKeys.standaloneColorPickerFocused.bindTo(_contextKeyService);\r\n    }\r\n    showOrFocus() {\r\n        var _a;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (!this._standaloneColorPickerVisible.get()) {\r\n            this._standaloneColorPickerWidget = new StandaloneColorPickerWidget(this._editor, this._standaloneColorPickerVisible, this._standaloneColorPickerFocused, this._instantiationService, this._modelService, this._keybindingService, this._languageFeatureService, this._languageConfigurationService);\r\n        }\r\n        else if (!this._standaloneColorPickerFocused.get()) {\r\n            (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.focus();\r\n        }\r\n    }\r\n    hide() {\r\n        var _a;\r\n        this._standaloneColorPickerFocused.set(false);\r\n        this._standaloneColorPickerVisible.set(false);\r\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.hide();\r\n        this._editor.focus();\r\n    }\r\n    insertColor() {\r\n        var _a;\r\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.updateEditor();\r\n        this.hide();\r\n    }\r\n    static get(editor) {\r\n        return editor.getContribution(StandaloneColorPickerController_1.ID);\r\n    }\r\n};\r\nStandaloneColorPickerController.ID = 'editor.contrib.standaloneColorPickerController';\r\nStandaloneColorPickerController = StandaloneColorPickerController_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, IModelService),\r\n    __param(3, IKeybindingService),\r\n    __param(4, IInstantiationService),\r\n    __param(5, ILanguageFeaturesService),\r\n    __param(6, ILanguageConfigurationService)\r\n], StandaloneColorPickerController);\r\nexport { StandaloneColorPickerController };\r\nregisterEditorContribution(StandaloneColorPickerController.ID, StandaloneColorPickerController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nconst PADDING = 8;\r\nconst CLOSE_BUTTON_WIDTH = 22;\r\nlet StandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = class StandaloneColorPickerWidget extends Disposable {\r\n    constructor(_editor, _standaloneColorPickerVisible, _standaloneColorPickerFocused, _instantiationService, _modelService, _keybindingService, _languageFeaturesService, _languageConfigurationService) {\r\n        var _a;\r\n        super();\r\n        this._editor = _editor;\r\n        this._standaloneColorPickerVisible = _standaloneColorPickerVisible;\r\n        this._standaloneColorPickerFocused = _standaloneColorPickerFocused;\r\n        this._modelService = _modelService;\r\n        this._keybindingService = _keybindingService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this.allowEditorOverflow = true;\r\n        this._position = undefined;\r\n        this._body = document.createElement('div');\r\n        this._colorHover = null;\r\n        this._selectionSetInEditor = false;\r\n        this._onResult = this._register(new Emitter());\r\n        this.onResult = this._onResult.event;\r\n        this._standaloneColorPickerVisible.set(true);\r\n        this._standaloneColorPickerParticipant = _instantiationService.createInstance(StandaloneColorPickerParticipant, this._editor);\r\n        this._position = (_a = this._editor._getViewModel()) === null || _a === void 0 ? void 0 : _a.getPrimaryCursorState().modelState.position;\r\n        const editorSelection = this._editor.getSelection();\r\n        const selection = editorSelection ?\r\n            {\r\n                startLineNumber: editorSelection.startLineNumber,\r\n                startColumn: editorSelection.startColumn,\r\n                endLineNumber: editorSelection.endLineNumber,\r\n                endColumn: editorSelection.endColumn\r\n            } : { startLineNumber: 0, endLineNumber: 0, endColumn: 0, startColumn: 0 };\r\n        const focusTracker = this._register(dom.trackFocus(this._body));\r\n        this._register(focusTracker.onDidBlur(_ => {\r\n            this.hide();\r\n        }));\r\n        this._register(focusTracker.onDidFocus(_ => {\r\n            this.focus();\r\n        }));\r\n        // When the cursor position changes, hide the color picker\r\n        this._register(this._editor.onDidChangeCursorPosition(() => {\r\n            // Do not hide the color picker when the cursor changes position due to the keybindings\r\n            if (!this._selectionSetInEditor) {\r\n                this.hide();\r\n            }\r\n            else {\r\n                this._selectionSetInEditor = false;\r\n            }\r\n        }));\r\n        this._register(this._editor.onMouseMove((e) => {\r\n            var _a;\r\n            const classList = (_a = e.target.element) === null || _a === void 0 ? void 0 : _a.classList;\r\n            if (classList && classList.contains('colorpicker-color-decoration')) {\r\n                this.hide();\r\n            }\r\n        }));\r\n        this._register(this.onResult((result) => {\r\n            this._render(result.value, result.foundInEditor);\r\n        }));\r\n        this._start(selection);\r\n        this._body.style.zIndex = '50';\r\n        this._editor.addContentWidget(this);\r\n    }\r\n    updateEditor() {\r\n        if (this._colorHover) {\r\n            this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover);\r\n        }\r\n    }\r\n    getId() {\r\n        return StandaloneColorPickerWidget_1.ID;\r\n    }\r\n    getDomNode() {\r\n        return this._body;\r\n    }\r\n    getPosition() {\r\n        if (!this._position) {\r\n            return null;\r\n        }\r\n        const positionPreference = this._editor.getOption(60 /* EditorOption.hover */).above;\r\n        return {\r\n            position: this._position,\r\n            secondaryPosition: this._position,\r\n            preference: positionPreference ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */] : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */],\r\n            positionAffinity: 2 /* PositionAffinity.None */\r\n        };\r\n    }\r\n    hide() {\r\n        this.dispose();\r\n        this._standaloneColorPickerVisible.set(false);\r\n        this._standaloneColorPickerFocused.set(false);\r\n        this._editor.removeContentWidget(this);\r\n        this._editor.focus();\r\n    }\r\n    focus() {\r\n        this._standaloneColorPickerFocused.set(true);\r\n        this._body.focus();\r\n    }\r\n    _start(selection) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const computeAsyncResult = yield this._computeAsync(selection);\r\n            if (!computeAsyncResult) {\r\n                return;\r\n            }\r\n            this._onResult.fire(new StandaloneColorPickerResult(computeAsyncResult.result, computeAsyncResult.foundInEditor));\r\n        });\r\n    }\r\n    _computeAsync(range) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel()) {\r\n                return null;\r\n            }\r\n            const colorInfo = {\r\n                range: range,\r\n                color: { red: 0, green: 0, blue: 0, alpha: 1 }\r\n            };\r\n            const colorHoverResult = yield this._standaloneColorPickerParticipant.createColorHover(colorInfo, new DefaultDocumentColorProvider(this._modelService, this._languageConfigurationService), this._languageFeaturesService.colorProvider);\r\n            if (!colorHoverResult) {\r\n                return null;\r\n            }\r\n            return { result: colorHoverResult.colorHover, foundInEditor: colorHoverResult.foundInEditor };\r\n        });\r\n    }\r\n    _render(colorHover, foundInEditor) {\r\n        const fragment = document.createDocumentFragment();\r\n        const statusBar = this._register(new EditorHoverStatusBar(this._keybindingService));\r\n        let colorPickerWidget;\r\n        const context = {\r\n            fragment,\r\n            statusBar,\r\n            setColorPicker: (widget) => colorPickerWidget = widget,\r\n            onContentsChanged: () => { },\r\n            hide: () => this.hide()\r\n        };\r\n        this._colorHover = colorHover;\r\n        this._register(this._standaloneColorPickerParticipant.renderHoverParts(context, [colorHover]));\r\n        if (colorPickerWidget === undefined) {\r\n            return;\r\n        }\r\n        this._body.classList.add('standalone-colorpicker-body');\r\n        this._body.style.maxHeight = Math.max(this._editor.getLayoutInfo().height / 4, 250) + 'px';\r\n        this._body.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + 'px';\r\n        this._body.tabIndex = 0;\r\n        this._body.appendChild(fragment);\r\n        colorPickerWidget.layout();\r\n        const colorPickerBody = colorPickerWidget.body;\r\n        const saturationBoxWidth = colorPickerBody.saturationBox.domNode.clientWidth;\r\n        const widthOfOriginalColorBox = colorPickerBody.domNode.clientWidth - saturationBoxWidth - CLOSE_BUTTON_WIDTH - PADDING;\r\n        const enterButton = colorPickerWidget.body.enterButton;\r\n        enterButton === null || enterButton === void 0 ? void 0 : enterButton.onClicked(() => {\r\n            this.updateEditor();\r\n            this.hide();\r\n        });\r\n        const colorPickerHeader = colorPickerWidget.header;\r\n        const pickedColorNode = colorPickerHeader.pickedColorNode;\r\n        pickedColorNode.style.width = saturationBoxWidth + PADDING + 'px';\r\n        const originalColorNode = colorPickerHeader.originalColorNode;\r\n        originalColorNode.style.width = widthOfOriginalColorBox + 'px';\r\n        const closeButton = colorPickerWidget.header.closeButton;\r\n        closeButton === null || closeButton === void 0 ? void 0 : closeButton.onClicked(() => {\r\n            this.hide();\r\n        });\r\n        // When found in the editor, highlight the selection in the editor\r\n        if (foundInEditor) {\r\n            if (enterButton) {\r\n                enterButton.button.textContent = 'Replace';\r\n            }\r\n            this._selectionSetInEditor = true;\r\n            this._editor.setSelection(colorHover.range);\r\n        }\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n};\r\nStandaloneColorPickerWidget.ID = 'editor.contrib.standaloneColorPickerWidget';\r\nStandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = __decorate([\r\n    __param(3, IInstantiationService),\r\n    __param(4, IModelService),\r\n    __param(5, IKeybindingService),\r\n    __param(6, ILanguageFeaturesService),\r\n    __param(7, ILanguageConfigurationService)\r\n], StandaloneColorPickerWidget);\r\nexport { StandaloneColorPickerWidget };\r\nclass StandaloneColorPickerResult {\r\n    // The color picker result consists of: an array of color results and a boolean indicating if the color was found in the editor\r\n    constructor(value, foundInEditor) {\r\n        this.value = value;\r\n        this.foundInEditor = foundInEditor;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { BlockCommentCommand } from './blockCommentCommand.js';\r\nimport { LineCommentCommand } from './lineCommentCommand.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nclass CommentLineAction extends EditorAction {\r\n    constructor(type, opts) {\r\n        super(opts);\r\n        this._type = type;\r\n    }\r\n    run(accessor, editor) {\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = editor.getModel();\r\n        const commands = [];\r\n        const modelOptions = model.getOptions();\r\n        const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\r\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\r\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\r\n        // Remove selections that would result in copying the same line\r\n        let prev = selections[0];\r\n        for (let i = 1; i < selections.length; i++) {\r\n            const curr = selections[i];\r\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\r\n                // these two selections would copy the same line\r\n                if (prev.index < curr.index) {\r\n                    // prev wins\r\n                    curr.ignoreFirstLine = true;\r\n                }\r\n                else {\r\n                    // curr wins\r\n                    prev.ignoreFirstLine = true;\r\n                    prev = curr;\r\n                }\r\n            }\r\n        }\r\n        for (const selection of selections) {\r\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nclass ToggleCommentLineAction extends CommentLineAction {\r\n    constructor() {\r\n        super(0 /* Type.Toggle */, {\r\n            id: 'editor.action.commentLine',\r\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\r\n            alias: 'Toggle Line Comment',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarEditMenu,\r\n                group: '5_insert',\r\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\r\n                order: 1\r\n            }\r\n        });\r\n    }\r\n}\r\nclass AddLineCommentAction extends CommentLineAction {\r\n    constructor() {\r\n        super(1 /* Type.ForceAdd */, {\r\n            id: 'editor.action.addCommentLine',\r\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\r\n            alias: 'Add Line Comment',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nclass RemoveLineCommentAction extends CommentLineAction {\r\n    constructor() {\r\n        super(2 /* Type.ForceRemove */, {\r\n            id: 'editor.action.removeCommentLine',\r\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\r\n            alias: 'Remove Line Comment',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nclass BlockCommentAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.blockComment',\r\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\r\n            alias: 'Toggle Block Comment',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\r\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarEditMenu,\r\n                group: '5_insert',\r\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\r\n        const commands = [];\r\n        const selections = editor.getSelections();\r\n        for (const selection of selections) {\r\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nregisterEditorAction(ToggleCommentLineAction);\r\nregisterEditorAction(AddLineCommentAction);\r\nregisterEditorAction(RemoveLineCommentAction);\r\nregisterEditorAction(BlockCommentAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nexport class BlockCommentCommand {\r\n    constructor(selection, insertSpace, languageConfigurationService) {\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this._selection = selection;\r\n        this._insertSpace = insertSpace;\r\n        this._usedEndToken = null;\r\n    }\r\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\r\n        if (offset < 0) {\r\n            return false;\r\n        }\r\n        const needleLength = needle.length;\r\n        const haystackLength = haystack.length;\r\n        if (offset + needleLength > haystackLength) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < needleLength; i++) {\r\n            const codeA = haystack.charCodeAt(offset + i);\r\n            const codeB = needle.charCodeAt(i);\r\n            if (codeA === codeB) {\r\n                continue;\r\n            }\r\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\r\n                // codeA is upper-case variant of codeB\r\n                continue;\r\n            }\r\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\r\n                // codeB is upper-case variant of codeA\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\r\n        const startLineNumber = selection.startLineNumber;\r\n        const startColumn = selection.startColumn;\r\n        const endLineNumber = selection.endLineNumber;\r\n        const endColumn = selection.endColumn;\r\n        const startLineText = model.getLineContent(startLineNumber);\r\n        const endLineText = model.getLineContent(endLineNumber);\r\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\r\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\r\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\r\n            if (startLineNumber === endLineNumber) {\r\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\r\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\r\n                    // force to add a block comment\r\n                    startTokenIndex = -1;\r\n                    endTokenIndex = -1;\r\n                }\r\n            }\r\n            else {\r\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\r\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\r\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\r\n                    // force to add a block comment\r\n                    startTokenIndex = -1;\r\n                    endTokenIndex = -1;\r\n                }\r\n            }\r\n        }\r\n        let ops;\r\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\r\n            // Consider spaces as part of the comment tokens\r\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\r\n                // Pretend the start token contains a trailing space\r\n                startToken = startToken + ' ';\r\n            }\r\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\r\n                // Pretend the end token contains a leading space\r\n                endToken = ' ' + endToken;\r\n                endTokenIndex -= 1;\r\n            }\r\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\r\n        }\r\n        else {\r\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\r\n            this._usedEndToken = ops.length === 1 ? endToken : null;\r\n        }\r\n        for (const op of ops) {\r\n            builder.addTrackedEditOperation(op.range, op.text);\r\n        }\r\n    }\r\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\r\n        const res = [];\r\n        if (!Range.isEmpty(r)) {\r\n            // Remove block comment start\r\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\r\n            // Remove block comment end\r\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\r\n        }\r\n        else {\r\n            // Remove both continuously\r\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\r\n        }\r\n        return res;\r\n    }\r\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\r\n        const res = [];\r\n        if (!Range.isEmpty(r)) {\r\n            // Insert block comment start\r\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\r\n            // Insert block comment end\r\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\r\n        }\r\n        else {\r\n            // Insert both continuously\r\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\r\n        }\r\n        return res;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        const startLineNumber = this._selection.startLineNumber;\r\n        const startColumn = this._selection.startColumn;\r\n        model.tokenization.tokenizeIfCheap(startLineNumber);\r\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\r\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\r\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\r\n            // Mode does not support block comments\r\n            return;\r\n        }\r\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        const inverseEditOperations = helper.getInverseEditOperations();\r\n        if (inverseEditOperations.length === 2) {\r\n            const startTokenEditOperation = inverseEditOperations[0];\r\n            const endTokenEditOperation = inverseEditOperations[1];\r\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\r\n        }\r\n        else {\r\n            const srcRange = inverseEditOperations[0].range;\r\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\r\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { BlockCommentCommand } from './blockCommentCommand.js';\r\nexport class LineCommentCommand {\r\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this._selection = selection;\r\n        this._tabSize = tabSize;\r\n        this._type = type;\r\n        this._insertSpace = insertSpace;\r\n        this._selectionId = null;\r\n        this._deltaColumn = 0;\r\n        this._moveEndPositionDown = false;\r\n        this._ignoreEmptyLines = ignoreEmptyLines;\r\n        this._ignoreFirstLine = ignoreFirstLine || false;\r\n    }\r\n    /**\r\n     * Do an initial pass over the lines and gather info about the line comment string.\r\n     * Returns null if any of the lines doesn't support a line comment string.\r\n     */\r\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\r\n        model.tokenization.tokenizeIfCheap(startLineNumber);\r\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\r\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\r\n        const commentStr = (config ? config.lineCommentToken : null);\r\n        if (!commentStr) {\r\n            // Mode does not support line comments\r\n            return null;\r\n        }\r\n        const lines = [];\r\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\r\n            lines[i] = {\r\n                ignore: false,\r\n                commentStr: commentStr,\r\n                commentStrOffset: 0,\r\n                commentStrLength: commentStr.length\r\n            };\r\n        }\r\n        return lines;\r\n    }\r\n    /**\r\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\r\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\r\n     */\r\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\r\n        let onlyWhitespaceLines = true;\r\n        let shouldRemoveComments;\r\n        if (type === 0 /* Type.Toggle */) {\r\n            shouldRemoveComments = true;\r\n        }\r\n        else if (type === 1 /* Type.ForceAdd */) {\r\n            shouldRemoveComments = false;\r\n        }\r\n        else {\r\n            shouldRemoveComments = true;\r\n        }\r\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\r\n            const lineData = lines[i];\r\n            const lineNumber = startLineNumber + i;\r\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\r\n                // first line ignored\r\n                lineData.ignore = true;\r\n                continue;\r\n            }\r\n            const lineContent = model.getLineContent(lineNumber);\r\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\r\n            if (lineContentStartOffset === -1) {\r\n                // Empty or whitespace only line\r\n                lineData.ignore = ignoreEmptyLines;\r\n                lineData.commentStrOffset = lineContent.length;\r\n                continue;\r\n            }\r\n            onlyWhitespaceLines = false;\r\n            lineData.ignore = false;\r\n            lineData.commentStrOffset = lineContentStartOffset;\r\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\r\n                if (type === 0 /* Type.Toggle */) {\r\n                    // Every line so far has been a line comment, but this one is not\r\n                    shouldRemoveComments = false;\r\n                }\r\n                else if (type === 1 /* Type.ForceAdd */) {\r\n                    // Will not happen\r\n                }\r\n                else {\r\n                    lineData.ignore = true;\r\n                }\r\n            }\r\n            if (shouldRemoveComments && insertSpace) {\r\n                // Remove a following space if present\r\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\r\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\r\n                    lineData.commentStrLength += 1;\r\n                }\r\n            }\r\n        }\r\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\r\n            // For only whitespace lines, we insert comments\r\n            shouldRemoveComments = false;\r\n            // Also, no longer ignore them\r\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\r\n                lines[i].ignore = false;\r\n            }\r\n        }\r\n        return {\r\n            supported: true,\r\n            shouldRemoveComments: shouldRemoveComments,\r\n            lines: lines\r\n        };\r\n    }\r\n    /**\r\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\r\n     */\r\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\r\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\r\n        if (lines === null) {\r\n            return {\r\n                supported: false\r\n            };\r\n        }\r\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\r\n    }\r\n    /**\r\n     * Given a successful analysis, execute either insert line comments, either remove line comments\r\n     */\r\n    _executeLineComments(model, builder, data, s) {\r\n        let ops;\r\n        if (data.shouldRemoveComments) {\r\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\r\n        }\r\n        else {\r\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\r\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\r\n        }\r\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\r\n        for (let i = 0, len = ops.length; i < len; i++) {\r\n            builder.addEditOperation(ops[i].range, ops[i].text);\r\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\r\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\r\n                if (lineContent.length + 1 === cursorPosition.column) {\r\n                    this._deltaColumn = (ops[i].text || '').length;\r\n                }\r\n            }\r\n        }\r\n        this._selectionId = builder.trackSelection(s);\r\n    }\r\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\r\n        let startLineNumber = s.startLineNumber;\r\n        let endLineNumber = s.endLineNumber;\r\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\r\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\r\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\r\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\r\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\r\n            endLineNumber = startLineNumber;\r\n        }\r\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\r\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\r\n            startLineNumber = endLineNumber;\r\n        }\r\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\r\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\r\n            if (startTokenIndex !== -1) {\r\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\r\n            }\r\n        }\r\n        // We have to adjust to possible inner white space.\r\n        // For Space after startToken, add Space to startToken - range math will work out.\r\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\r\n            startToken += ' ';\r\n        }\r\n        // For Space before endToken, add Space before endToken and shift index one left.\r\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\r\n            endToken = ' ' + endToken;\r\n            endTokenIndex -= 1;\r\n        }\r\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\r\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Given an unsuccessful analysis, delegate to the block comment command\r\n     */\r\n    _executeBlockComment(model, builder, s) {\r\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\r\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\r\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\r\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\r\n            // Mode does not support block comments\r\n            return;\r\n        }\r\n        const startToken = config.blockCommentStartToken;\r\n        const endToken = config.blockCommentEndToken;\r\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\r\n        if (!ops) {\r\n            if (s.isEmpty()) {\r\n                const lineContent = model.getLineContent(s.startLineNumber);\r\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\r\n                if (firstNonWhitespaceIndex === -1) {\r\n                    // Line is empty or contains only whitespace\r\n                    firstNonWhitespaceIndex = lineContent.length;\r\n                }\r\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\r\n            }\r\n            else {\r\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\r\n            }\r\n            if (ops.length === 1) {\r\n                // Leave cursor after token and Space\r\n                this._deltaColumn = startToken.length + 1;\r\n            }\r\n        }\r\n        this._selectionId = builder.trackSelection(s);\r\n        for (const op of ops) {\r\n            builder.addEditOperation(op.range, op.text);\r\n        }\r\n    }\r\n    getEditOperations(model, builder) {\r\n        let s = this._selection;\r\n        this._moveEndPositionDown = false;\r\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\r\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\r\n            this._selectionId = builder.trackSelection(s);\r\n            return;\r\n        }\r\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\r\n            this._moveEndPositionDown = true;\r\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\r\n        }\r\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\r\n        if (data.supported) {\r\n            return this._executeLineComments(model, builder, data, s);\r\n        }\r\n        return this._executeBlockComment(model, builder, s);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        let result = helper.getTrackedSelection(this._selectionId);\r\n        if (this._moveEndPositionDown) {\r\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\r\n        }\r\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\r\n    }\r\n    /**\r\n     * Generate edit operations in the remove line comment case\r\n     */\r\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\r\n        const res = [];\r\n        for (let i = 0, len = lines.length; i < len; i++) {\r\n            const lineData = lines[i];\r\n            if (lineData.ignore) {\r\n                continue;\r\n            }\r\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Generate edit operations in the add line comment case\r\n     */\r\n    _createAddLineCommentsOperations(lines, startLineNumber) {\r\n        const res = [];\r\n        const afterCommentStr = this._insertSpace ? ' ' : '';\r\n        for (let i = 0, len = lines.length; i < len; i++) {\r\n            const lineData = lines[i];\r\n            if (lineData.ignore) {\r\n                continue;\r\n            }\r\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\r\n        }\r\n        return res;\r\n    }\r\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\r\n        if (isTab) {\r\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\r\n        }\r\n        return currentVisibleColumn + columnSize;\r\n    }\r\n    /**\r\n     * Adjust insertion points to have them vertically aligned in the add line comment case\r\n     */\r\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\r\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\r\n        let j;\r\n        let lenJ;\r\n        for (let i = 0, len = lines.length; i < len; i++) {\r\n            if (lines[i].ignore) {\r\n                continue;\r\n            }\r\n            const lineContent = model.getLineContent(startLineNumber + i);\r\n            let currentVisibleColumn = 0;\r\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\r\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\r\n            }\r\n            if (currentVisibleColumn < minVisibleColumn) {\r\n                minVisibleColumn = currentVisibleColumn;\r\n            }\r\n        }\r\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\r\n        for (let i = 0, len = lines.length; i < len; i++) {\r\n            if (lines[i].ignore) {\r\n                continue;\r\n            }\r\n            const lineContent = model.getLineContent(startLineNumber + i);\r\n            let currentVisibleColumn = 0;\r\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\r\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\r\n            }\r\n            if (currentVisibleColumn > minVisibleColumn) {\r\n                lines[i].commentStrOffset = j - 1;\r\n            }\r\n            else {\r\n                lines[i].commentStrOffset = j;\r\n            }\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ContextMenuController_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\r\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { isIOS } from '../../../../base/common/platform.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\r\nlet ContextMenuController = ContextMenuController_1 = class ContextMenuController {\r\n    static get(editor) {\r\n        return editor.getContribution(ContextMenuController_1.ID);\r\n    }\r\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\r\n        this._contextMenuService = _contextMenuService;\r\n        this._contextViewService = _contextViewService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._keybindingService = _keybindingService;\r\n        this._menuService = _menuService;\r\n        this._configurationService = _configurationService;\r\n        this._workspaceContextService = _workspaceContextService;\r\n        this._toDispose = new DisposableStore();\r\n        this._contextMenuIsBeingShownCount = 0;\r\n        this._editor = editor;\r\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\r\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\r\n            if (this._contextMenuIsBeingShownCount > 0) {\r\n                const view = this._contextViewService.getContextViewElement();\r\n                const target = e.srcElement;\r\n                // Event triggers on shadow root host first\r\n                // Check if the context view is under this host before hiding it #103169\r\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\r\n                    this._contextViewService.hideContextView();\r\n                }\r\n            }\r\n        }));\r\n        this._toDispose.add(this._editor.onKeyDown((e) => {\r\n            if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\r\n                return; // Context menu is turned off through configuration\r\n            }\r\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\r\n                // Chrome is funny like that\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.showContextMenu();\r\n            }\r\n        }));\r\n    }\r\n    _onContextMenu(e) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\r\n            this._editor.focus();\r\n            // Ensure the cursor is at the position of the mouse click\r\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\r\n                this._editor.setPosition(e.target.position);\r\n            }\r\n            return; // Context menu is turned off through configuration\r\n        }\r\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\r\n            return; // allow native menu on widgets to support right click on input field for example in find\r\n        }\r\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\r\n            return; // allow native menu on injected text\r\n        }\r\n        e.event.preventDefault();\r\n        e.event.stopPropagation();\r\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\r\n            return this._showScrollbarContextMenu(e.event);\r\n        }\r\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\r\n            return; // only support mouse click into text or native context menu key for now\r\n        }\r\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\r\n        this._editor.focus();\r\n        // Ensure the cursor is at the position of the mouse click\r\n        if (e.target.position) {\r\n            let hasSelectionAtPosition = false;\r\n            for (const selection of this._editor.getSelections()) {\r\n                if (selection.containsPosition(e.target.position)) {\r\n                    hasSelectionAtPosition = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!hasSelectionAtPosition) {\r\n                this._editor.setPosition(e.target.position);\r\n            }\r\n        }\r\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\r\n        let anchor = null;\r\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\r\n            anchor = e.event;\r\n        }\r\n        // Show the context menu\r\n        this.showContextMenu(anchor);\r\n    }\r\n    showContextMenu(anchor) {\r\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\r\n            return; // Context menu is turned off through configuration\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        // Find actions available for menu\r\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\r\n        // Show menu if we have actions to show\r\n        if (menuActions.length > 0) {\r\n            this._doShowContextMenu(menuActions, anchor);\r\n        }\r\n    }\r\n    _getMenuActions(model, menuId) {\r\n        const result = [];\r\n        // get menu groups\r\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\r\n        const groups = menu.getActions({ arg: model.uri });\r\n        menu.dispose();\r\n        // translate them into other actions\r\n        for (const group of groups) {\r\n            const [, actions] = group;\r\n            let addedItems = 0;\r\n            for (const action of actions) {\r\n                if (action instanceof SubmenuItemAction) {\r\n                    const subActions = this._getMenuActions(model, action.item.submenu);\r\n                    if (subActions.length > 0) {\r\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\r\n                        addedItems++;\r\n                    }\r\n                }\r\n                else {\r\n                    result.push(action);\r\n                    addedItems++;\r\n                }\r\n            }\r\n            if (addedItems) {\r\n                result.push(new Separator());\r\n            }\r\n        }\r\n        if (result.length) {\r\n            result.pop(); // remove last separator\r\n        }\r\n        return result;\r\n    }\r\n    _doShowContextMenu(actions, event = null) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        // Disable hover\r\n        const oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\r\n        this._editor.updateOptions({\r\n            hover: {\r\n                enabled: false\r\n            }\r\n        });\r\n        let anchor = event;\r\n        if (!anchor) {\r\n            // Ensure selection is visible\r\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\r\n            this._editor.render();\r\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\r\n            // Translate to absolute editor position\r\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\r\n            const posx = editorCoords.left + cursorCoords.left;\r\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n            anchor = { x: posx, y: posy };\r\n        }\r\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\r\n        // Show menu\r\n        this._contextMenuIsBeingShownCount++;\r\n        this._contextMenuService.showContextMenu({\r\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\r\n            getAnchor: () => anchor,\r\n            getActions: () => actions,\r\n            getActionViewItem: (action) => {\r\n                const keybinding = this._keybindingFor(action);\r\n                if (keybinding) {\r\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\r\n                }\r\n                const customActionViewItem = action;\r\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\r\n                    return customActionViewItem.getActionViewItem();\r\n                }\r\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\r\n            },\r\n            getKeyBinding: (action) => {\r\n                return this._keybindingFor(action);\r\n            },\r\n            onHide: (wasCancelled) => {\r\n                this._contextMenuIsBeingShownCount--;\r\n                this._editor.updateOptions({\r\n                    hover: oldHoverSetting\r\n                });\r\n            }\r\n        });\r\n    }\r\n    _showScrollbarContextMenu(anchor) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\r\n            // can't update the configuration properly in the standalone editor\r\n            return;\r\n        }\r\n        const minimapOptions = this._editor.getOption(72 /* EditorOption.minimap */);\r\n        let lastId = 0;\r\n        const createAction = (opts) => {\r\n            return {\r\n                id: `menu-action-${++lastId}`,\r\n                label: opts.label,\r\n                tooltip: '',\r\n                class: undefined,\r\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\r\n                checked: opts.checked,\r\n                run: opts.run\r\n            };\r\n        };\r\n        const createSubmenuAction = (label, actions) => {\r\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\r\n        };\r\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\r\n            if (!enabled) {\r\n                return createAction({ label, enabled, run: () => { } });\r\n            }\r\n            const createRunner = (value) => {\r\n                return () => {\r\n                    this._configurationService.updateValue(configName, value);\r\n                };\r\n            };\r\n            const actions = [];\r\n            for (const option of options) {\r\n                actions.push(createAction({\r\n                    label: option.label,\r\n                    checked: configuredValue === option.value,\r\n                    run: createRunner(option.value)\r\n                }));\r\n            }\r\n            return createSubmenuAction(label, actions);\r\n        };\r\n        const actions = [];\r\n        actions.push(createAction({\r\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\r\n            checked: minimapOptions.enabled,\r\n            run: () => {\r\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\r\n            }\r\n        }));\r\n        actions.push(new Separator());\r\n        actions.push(createAction({\r\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\r\n            enabled: minimapOptions.enabled,\r\n            checked: minimapOptions.renderCharacters,\r\n            run: () => {\r\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\r\n            }\r\n        }));\r\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\r\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\r\n                value: 'proportional'\r\n            }, {\r\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\r\n                value: 'fill'\r\n            }, {\r\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\r\n                value: 'fit'\r\n            }]));\r\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\r\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\r\n                value: 'mouseover'\r\n            }, {\r\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\r\n                value: 'always'\r\n            }]));\r\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\r\n        this._contextMenuIsBeingShownCount++;\r\n        this._contextMenuService.showContextMenu({\r\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\r\n            getAnchor: () => anchor,\r\n            getActions: () => actions,\r\n            onHide: (wasCancelled) => {\r\n                this._contextMenuIsBeingShownCount--;\r\n                this._editor.focus();\r\n            }\r\n        });\r\n    }\r\n    _keybindingFor(action) {\r\n        return this._keybindingService.lookupKeybinding(action.id);\r\n    }\r\n    dispose() {\r\n        if (this._contextMenuIsBeingShownCount > 0) {\r\n            this._contextViewService.hideContextView();\r\n        }\r\n        this._toDispose.dispose();\r\n    }\r\n};\r\nContextMenuController.ID = 'editor.contrib.contextmenu';\r\nContextMenuController = ContextMenuController_1 = __decorate([\r\n    __param(1, IContextMenuService),\r\n    __param(2, IContextViewService),\r\n    __param(3, IContextKeyService),\r\n    __param(4, IKeybindingService),\r\n    __param(5, IMenuService),\r\n    __param(6, IConfigurationService),\r\n    __param(7, IWorkspaceContextService)\r\n], ContextMenuController);\r\nexport { ContextMenuController };\r\nclass ShowContextMenu extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.showContextMenu',\r\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\r\n            alias: 'Show Editor Context Menu',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\r\n    }\r\n}\r\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorAction(ShowContextMenu);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport * as nls from '../../../../nls.js';\r\nclass CursorState {\r\n    constructor(selections) {\r\n        this.selections = selections;\r\n    }\r\n    equals(other) {\r\n        const thisLen = this.selections.length;\r\n        const otherLen = other.selections.length;\r\n        if (thisLen !== otherLen) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < thisLen; i++) {\r\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\nclass StackElement {\r\n    constructor(cursorState, scrollTop, scrollLeft) {\r\n        this.cursorState = cursorState;\r\n        this.scrollTop = scrollTop;\r\n        this.scrollLeft = scrollLeft;\r\n    }\r\n}\r\nexport class CursorUndoRedoController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(CursorUndoRedoController.ID);\r\n    }\r\n    constructor(editor) {\r\n        super();\r\n        this._editor = editor;\r\n        this._isCursorUndoRedo = false;\r\n        this._undoStack = [];\r\n        this._redoStack = [];\r\n        this._register(editor.onDidChangeModel((e) => {\r\n            this._undoStack = [];\r\n            this._redoStack = [];\r\n        }));\r\n        this._register(editor.onDidChangeModelContent((e) => {\r\n            this._undoStack = [];\r\n            this._redoStack = [];\r\n        }));\r\n        this._register(editor.onDidChangeCursorSelection((e) => {\r\n            if (this._isCursorUndoRedo) {\r\n                return;\r\n            }\r\n            if (!e.oldSelections) {\r\n                return;\r\n            }\r\n            if (e.oldModelVersionId !== e.modelVersionId) {\r\n                return;\r\n            }\r\n            const prevState = new CursorState(e.oldSelections);\r\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\r\n            if (!isEqualToLastUndoStack) {\r\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\r\n                this._redoStack = [];\r\n                if (this._undoStack.length > 50) {\r\n                    // keep the cursor undo stack bounded\r\n                    this._undoStack.shift();\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    cursorUndo() {\r\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\r\n            return;\r\n        }\r\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\r\n        this._applyState(this._undoStack.pop());\r\n    }\r\n    cursorRedo() {\r\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\r\n            return;\r\n        }\r\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\r\n        this._applyState(this._redoStack.pop());\r\n    }\r\n    _applyState(stackElement) {\r\n        this._isCursorUndoRedo = true;\r\n        this._editor.setSelections(stackElement.cursorState.selections);\r\n        this._editor.setScrollPosition({\r\n            scrollTop: stackElement.scrollTop,\r\n            scrollLeft: stackElement.scrollLeft\r\n        });\r\n        this._isCursorUndoRedo = false;\r\n    }\r\n}\r\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\r\nexport class CursorUndo extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'cursorUndo',\r\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\r\n            alias: 'Cursor Undo',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        var _a;\r\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\r\n    }\r\n}\r\nexport class CursorRedo extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'cursorRedo',\r\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\r\n            alias: 'Cursor Redo',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        var _a;\r\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\r\n    }\r\n}\r\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to listen to record cursor state ASAP\r\nregisterEditorAction(CursorUndo);\r\nregisterEditorAction(CursorRedo);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { isMacintosh } from '../../../../base/common/platform.js';\r\nimport './dnd.css';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\r\nfunction hasTriggerModifier(e) {\r\n    if (isMacintosh) {\r\n        return e.altKey;\r\n    }\r\n    else {\r\n        return e.ctrlKey;\r\n    }\r\n}\r\nexport class DragAndDropController extends Disposable {\r\n    constructor(editor) {\r\n        super();\r\n        this._editor = editor;\r\n        this._dndDecorationIds = this._editor.createDecorationsCollection();\r\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\r\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\r\n        this._register(this._editor.onMouseDrag((e) => this._onEditorMouseDrag(e)));\r\n        this._register(this._editor.onMouseDrop((e) => this._onEditorMouseDrop(e)));\r\n        this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\r\n        this._register(this._editor.onKeyDown((e) => this.onEditorKeyDown(e)));\r\n        this._register(this._editor.onKeyUp((e) => this.onEditorKeyUp(e)));\r\n        this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\r\n        this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\r\n        this._mouseDown = false;\r\n        this._modifierPressed = false;\r\n        this._dragSelection = null;\r\n    }\r\n    onEditorBlur() {\r\n        this._removeDecoration();\r\n        this._dragSelection = null;\r\n        this._mouseDown = false;\r\n        this._modifierPressed = false;\r\n    }\r\n    onEditorKeyDown(e) {\r\n        if (!this._editor.getOption(35 /* EditorOption.dragAndDrop */) || this._editor.getOption(22 /* EditorOption.columnSelection */)) {\r\n            return;\r\n        }\r\n        if (hasTriggerModifier(e)) {\r\n            this._modifierPressed = true;\r\n        }\r\n        if (this._mouseDown && hasTriggerModifier(e)) {\r\n            this._editor.updateOptions({\r\n                mouseStyle: 'copy'\r\n            });\r\n        }\r\n    }\r\n    onEditorKeyUp(e) {\r\n        if (!this._editor.getOption(35 /* EditorOption.dragAndDrop */) || this._editor.getOption(22 /* EditorOption.columnSelection */)) {\r\n            return;\r\n        }\r\n        if (hasTriggerModifier(e)) {\r\n            this._modifierPressed = false;\r\n        }\r\n        if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\r\n            this._editor.updateOptions({\r\n                mouseStyle: 'default'\r\n            });\r\n        }\r\n    }\r\n    _onEditorMouseDown(mouseEvent) {\r\n        this._mouseDown = true;\r\n    }\r\n    _onEditorMouseUp(mouseEvent) {\r\n        this._mouseDown = false;\r\n        // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\r\n        this._editor.updateOptions({\r\n            mouseStyle: 'text'\r\n        });\r\n    }\r\n    _onEditorMouseDrag(mouseEvent) {\r\n        const target = mouseEvent.target;\r\n        if (this._dragSelection === null) {\r\n            const selections = this._editor.getSelections() || [];\r\n            const possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\r\n            if (possibleSelections.length === 1) {\r\n                this._dragSelection = possibleSelections[0];\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }\r\n        if (hasTriggerModifier(mouseEvent.event)) {\r\n            this._editor.updateOptions({\r\n                mouseStyle: 'copy'\r\n            });\r\n        }\r\n        else {\r\n            this._editor.updateOptions({\r\n                mouseStyle: 'default'\r\n            });\r\n        }\r\n        if (target.position) {\r\n            if (this._dragSelection.containsPosition(target.position)) {\r\n                this._removeDecoration();\r\n            }\r\n            else {\r\n                this.showAt(target.position);\r\n            }\r\n        }\r\n    }\r\n    _onEditorMouseDropCanceled() {\r\n        this._editor.updateOptions({\r\n            mouseStyle: 'text'\r\n        });\r\n        this._removeDecoration();\r\n        this._dragSelection = null;\r\n        this._mouseDown = false;\r\n    }\r\n    _onEditorMouseDrop(mouseEvent) {\r\n        if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\r\n            const newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\r\n            if (this._dragSelection === null) {\r\n                let newSelections = null;\r\n                if (mouseEvent.event.shiftKey) {\r\n                    const primarySelection = this._editor.getSelection();\r\n                    if (primarySelection) {\r\n                        const { selectionStartLineNumber, selectionStartColumn } = primarySelection;\r\n                        newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\r\n                    }\r\n                }\r\n                else {\r\n                    newSelections = (this._editor.getSelections() || []).map(selection => {\r\n                        if (selection.containsPosition(newCursorPosition)) {\r\n                            return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\r\n                        }\r\n                        else {\r\n                            return selection;\r\n                        }\r\n                    });\r\n                }\r\n                // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\r\n                this._editor.setSelections(newSelections || [], 'mouse', 3 /* CursorChangeReason.Explicit */);\r\n            }\r\n            else if (!this._dragSelection.containsPosition(newCursorPosition) ||\r\n                ((hasTriggerModifier(mouseEvent.event) ||\r\n                    this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\r\n                )) {\r\n                this._editor.pushUndoStop();\r\n                this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\r\n                this._editor.pushUndoStop();\r\n            }\r\n        }\r\n        this._editor.updateOptions({\r\n            mouseStyle: 'text'\r\n        });\r\n        this._removeDecoration();\r\n        this._dragSelection = null;\r\n        this._mouseDown = false;\r\n    }\r\n    showAt(position) {\r\n        this._dndDecorationIds.set([{\r\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\r\n                options: DragAndDropController._DECORATION_OPTIONS\r\n            }]);\r\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\r\n    }\r\n    _removeDecoration() {\r\n        this._dndDecorationIds.clear();\r\n    }\r\n    _hitContent(target) {\r\n        return target.type === 6 /* MouseTargetType.CONTENT_TEXT */ ||\r\n            target.type === 7 /* MouseTargetType.CONTENT_EMPTY */;\r\n    }\r\n    _hitMargin(target) {\r\n        return target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ ||\r\n            target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ ||\r\n            target.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */;\r\n    }\r\n    dispose() {\r\n        this._removeDecoration();\r\n        this._dragSelection = null;\r\n        this._mouseDown = false;\r\n        this._modifierPressed = false;\r\n        super.dispose();\r\n    }\r\n}\r\nDragAndDropController.ID = 'editor.contrib.dragAndDrop';\r\nDragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* KeyCode.Alt */ : 5 /* KeyCode.Ctrl */;\r\nDragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\r\n    description: 'dnd-target',\r\n    className: 'dnd-target'\r\n});\r\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nexport class DragAndDropCommand {\r\n    constructor(selection, targetPosition, copy) {\r\n        this.selection = selection;\r\n        this.targetPosition = targetPosition;\r\n        this.copy = copy;\r\n        this.targetSelection = null;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        const text = model.getValueInRange(this.selection);\r\n        if (!this.copy) {\r\n            builder.addEditOperation(this.selection, null);\r\n        }\r\n        builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\r\n        if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\r\n        )) {\r\n            this.targetSelection = this.selection;\r\n            return;\r\n        }\r\n        if (this.copy) {\r\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\r\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\r\n                this.selection.endColumn);\r\n            return;\r\n        }\r\n        if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\r\n            // Drag the selection downwards\r\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\r\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\r\n                this.selection.endColumn);\r\n            return;\r\n        }\r\n        if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\r\n            // Drag the selection upwards\r\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\r\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\r\n                this.selection.endColumn);\r\n            return;\r\n        }\r\n        // The target position is at the same line as the selection's end position.\r\n        if (this.selection.endColumn <= this.targetPosition.column) {\r\n            // The target position is after the selection's end position\r\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\r\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn :\r\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\r\n                this.targetPosition.column :\r\n                this.selection.endColumn);\r\n        }\r\n        else {\r\n            // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\r\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\r\n        }\r\n    }\r\n    computeCursorState(model, helper) {\r\n        return this.targetSelection;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\r\nimport { CopyPasteController, changePasteTypeCommandId, pasteWidgetVisibleCtx } from './copyPasteController.js';\r\nimport { DefaultPasteProvidersFeature } from './defaultProviders.js';\r\nimport * as nls from '../../../../nls.js';\r\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController, 0 /* EditorContributionInstantiation.Eager */); // eager because it listens to events on the container dom node of the editor\r\nregisterEditorFeature(DefaultPasteProvidersFeature);\r\nregisterEditorCommand(new class extends EditorCommand {\r\n    constructor() {\r\n        super({\r\n            id: changePasteTypeCommandId,\r\n            precondition: pasteWidgetVisibleCtx,\r\n            kbOpts: {\r\n                weight: 100 /* KeybindingWeight.EditorContrib */,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor, _args) {\r\n        var _a;\r\n        return (_a = CopyPasteController.get(editor)) === null || _a === void 0 ? void 0 : _a.changePasteType();\r\n    }\r\n});\r\nregisterEditorAction(class extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.pasteAs',\r\n            label: nls.localize('pasteAs', \"Paste As...\"),\r\n            alias: 'Paste As...',\r\n            precondition: undefined,\r\n            description: {\r\n                description: 'Paste as',\r\n                args: [{\r\n                        name: 'args',\r\n                        schema: {\r\n                            type: 'object',\r\n                            properties: {\r\n                                'id': {\r\n                                    type: 'string',\r\n                                    description: nls.localize('pasteAs.id', \"The id of the paste edit to try applying. If not provided, the editor will show a picker.\"),\r\n                                }\r\n                            },\r\n                        }\r\n                    }]\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor, args) {\r\n        var _a;\r\n        const id = typeof (args === null || args === void 0 ? void 0 : args.id) === 'string' ? args.id : undefined;\r\n        return (_a = CopyPasteController.get(editor)) === null || _a === void 0 ? void 0 : _a.pasteAs(id);\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar CopyPasteController_1;\r\nimport { addDisposableListener, getActiveDocument } from '../../../../base/browser/dom.js';\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\r\nimport { UriList, createStringDataTransferItem, matchesMimeType } from '../../../../base/common/dataTransfer.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Mimes } from '../../../../base/common/mime.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport { generateUuid } from '../../../../base/common/uuid.js';\r\nimport { ClipboardEventUtils } from '../../../browser/controller/textAreaInput.js';\r\nimport { toExternalVSDataTransfer, toVSDataTransfer } from '../../../browser/dnd.js';\r\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { createCombinedWorkspaceEdit, sortEditsByYieldTo } from './edit.js';\r\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\r\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\r\nimport { PostEditWidgetManager } from './postEditWidget.js';\r\nexport const changePasteTypeCommandId = 'editor.changePasteType';\r\nexport const pasteWidgetVisibleCtx = new RawContextKey('pasteWidgetVisible', false, localize('pasteWidgetVisible', \"Whether the paste widget is showing\"));\r\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\r\nlet CopyPasteController = CopyPasteController_1 = class CopyPasteController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(CopyPasteController_1.ID);\r\n    }\r\n    constructor(editor, instantiationService, _bulkEditService, _clipboardService, _languageFeaturesService, _quickInputService, _progressService) {\r\n        super();\r\n        this._bulkEditService = _bulkEditService;\r\n        this._clipboardService = _clipboardService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._quickInputService = _quickInputService;\r\n        this._progressService = _progressService;\r\n        this._editor = editor;\r\n        const container = editor.getContainerDomNode();\r\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\r\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\r\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\r\n        this._pasteProgressManager = this._register(new InlineProgressManager('pasteIntoEditor', editor, instantiationService));\r\n        this._postPasteWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'pasteIntoEditor', editor, pasteWidgetVisibleCtx, { id: changePasteTypeCommandId, label: localize('postPasteWidgetTitle', \"Show paste options...\") }));\r\n    }\r\n    changePasteType() {\r\n        this._postPasteWidgetManager.tryShowSelector();\r\n    }\r\n    pasteAs(preferredId) {\r\n        this._editor.focus();\r\n        try {\r\n            this._pasteAsActionContext = { preferredId };\r\n            getActiveDocument().execCommand('paste');\r\n        }\r\n        finally {\r\n            this._pasteAsActionContext = undefined;\r\n        }\r\n    }\r\n    isPasteAsEnabled() {\r\n        return this._editor.getOption(84 /* EditorOption.pasteAs */).enabled\r\n            && !this._editor.getOption(90 /* EditorOption.readOnly */);\r\n    }\r\n    handleCopy(e) {\r\n        var _a, _b;\r\n        if (!this._editor.hasTextFocus()) {\r\n            return;\r\n        }\r\n        if (platform.isWeb) {\r\n            // Explicitly clear the web resources clipboard.\r\n            // This is needed because on web, the browser clipboard is faked out using an in-memory store.\r\n            // This means the resources clipboard is not properly updated when copying from the editor.\r\n            this._clipboardService.writeResources([]);\r\n        }\r\n        if (!e.clipboardData || !this.isPasteAsEnabled()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const selections = this._editor.getSelections();\r\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\r\n            return;\r\n        }\r\n        const enableEmptySelectionClipboard = this._editor.getOption(37 /* EditorOption.emptySelectionClipboard */);\r\n        let ranges = selections;\r\n        const wasFromEmptySelection = selections.length === 1 && selections[0].isEmpty();\r\n        if (wasFromEmptySelection) {\r\n            if (!enableEmptySelectionClipboard) {\r\n                return;\r\n            }\r\n            ranges = [new Range(ranges[0].startLineNumber, 1, ranges[0].startLineNumber, 1 + model.getLineLength(ranges[0].startLineNumber))];\r\n        }\r\n        const toCopy = (_a = this._editor._getViewModel()) === null || _a === void 0 ? void 0 : _a.getPlainTextToCopy(selections, enableEmptySelectionClipboard, platform.isWindows);\r\n        const multicursorText = Array.isArray(toCopy) ? toCopy : null;\r\n        const defaultPastePayload = {\r\n            multicursorText,\r\n            pasteOnNewLine: wasFromEmptySelection,\r\n            mode: null\r\n        };\r\n        const providers = this._languageFeaturesService.documentPasteEditProvider\r\n            .ordered(model)\r\n            .filter(x => !!x.prepareDocumentPaste);\r\n        if (!providers.length) {\r\n            this.setCopyMetadata(e.clipboardData, { defaultPastePayload });\r\n            return;\r\n        }\r\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\r\n        const providerCopyMimeTypes = providers.flatMap(x => { var _a; return (_a = x.copyMimeTypes) !== null && _a !== void 0 ? _a : []; });\r\n        // Save off a handle pointing to data that VS Code maintains.\r\n        const handle = generateUuid();\r\n        this.setCopyMetadata(e.clipboardData, {\r\n            id: handle,\r\n            providerCopyMimeTypes,\r\n            defaultPastePayload\r\n        });\r\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n            const results = coalesce(yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\r\n                try {\r\n                    return yield provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\r\n                }\r\n                catch (err) {\r\n                    console.error(err);\r\n                    return undefined;\r\n                }\r\n            }))));\r\n            // Values from higher priority providers should overwrite values from lower priority ones.\r\n            // Reverse the array to so that the calls to `replace` below will do this\r\n            results.reverse();\r\n            for (const result of results) {\r\n                for (const [mime, value] of result) {\r\n                    dataTransfer.replace(mime, value);\r\n                }\r\n            }\r\n            return dataTransfer;\r\n        }));\r\n        (_b = this._currentCopyOperation) === null || _b === void 0 ? void 0 : _b.dataTransferPromise.cancel();\r\n        this._currentCopyOperation = { handle: handle, dataTransferPromise: promise };\r\n    }\r\n    handlePaste(e) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\r\n                return;\r\n            }\r\n            (_a = this._currentPasteOperation) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            this._currentPasteOperation = undefined;\r\n            const model = this._editor.getModel();\r\n            const selections = this._editor.getSelections();\r\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !model) {\r\n                return;\r\n            }\r\n            if (!this.isPasteAsEnabled()) {\r\n                return;\r\n            }\r\n            const metadata = this.fetchCopyMetadata(e);\r\n            const dataTransfer = toExternalVSDataTransfer(e.clipboardData);\r\n            dataTransfer.delete(vscodeClipboardMime);\r\n            const allPotentialMimeTypes = [\r\n                ...e.clipboardData.types,\r\n                ...(_b = metadata === null || metadata === void 0 ? void 0 : metadata.providerCopyMimeTypes) !== null && _b !== void 0 ? _b : [],\r\n                // TODO: always adds `uri-list` because this get set if there are resources in the system clipboard.\r\n                // However we can only check the system clipboard async. For this early check, just add it in.\r\n                // We filter providers again once we have the final dataTransfer we will use.\r\n                Mimes.uriList,\r\n            ];\r\n            const allProviders = this._languageFeaturesService.documentPasteEditProvider\r\n                .ordered(model)\r\n                .filter(provider => { var _a; return (_a = provider.pasteMimeTypes) === null || _a === void 0 ? void 0 : _a.some(type => matchesMimeType(type, allPotentialMimeTypes)); });\r\n            if (!allProviders.length) {\r\n                return;\r\n            }\r\n            // Prevent the editor's default paste handler from running.\r\n            // Note that after this point, we are fully responsible for handling paste.\r\n            // If we can't provider a paste for any reason, we need to explicitly delegate pasting back to the editor.\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n            if (this._pasteAsActionContext) {\r\n                this.showPasteAsPick(this._pasteAsActionContext.preferredId, allProviders, selections, dataTransfer, metadata);\r\n            }\r\n            else {\r\n                this.doPasteInline(allProviders, selections, dataTransfer, metadata);\r\n            }\r\n        });\r\n    }\r\n    doPasteInline(allProviders, selections, dataTransfer, metadata) {\r\n        const p = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n            const editor = this._editor;\r\n            if (!editor.hasModel()) {\r\n                return;\r\n            }\r\n            const model = editor.getModel();\r\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */, undefined, token);\r\n            try {\r\n                yield this.mergeInDataFromCopy(dataTransfer, metadata, tokenSource.token);\r\n                if (tokenSource.token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                // Filter out any providers the don't match the full data transfer we will send them.\r\n                const supportedProviders = allProviders.filter(provider => isSupportedPasteProvider(provider, dataTransfer));\r\n                if (!supportedProviders.length\r\n                    || (supportedProviders.length === 1 && supportedProviders[0].id === 'text') // Only our default text provider is active\r\n                ) {\r\n                    yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\r\n                    return;\r\n                }\r\n                const providerEdits = yield this.getPasteEdits(supportedProviders, dataTransfer, model, selections, tokenSource.token);\r\n                if (tokenSource.token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                // If the only edit returned is a text edit, use the default paste handler\r\n                if (providerEdits.length === 1 && providerEdits[0].providerId === 'text') {\r\n                    yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\r\n                    return;\r\n                }\r\n                if (providerEdits.length) {\r\n                    const canShowWidget = editor.getOption(84 /* EditorOption.pasteAs */).showPasteSelector === 'afterPaste';\r\n                    return this._postPasteWidgetManager.applyEditAndShowIfNeeded(selections, { activeEditIndex: 0, allEdits: providerEdits }, canShowWidget, tokenSource.token);\r\n                }\r\n                yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\r\n            }\r\n            finally {\r\n                tokenSource.dispose();\r\n                if (this._currentPasteOperation === p) {\r\n                    this._currentPasteOperation = undefined;\r\n                }\r\n            }\r\n        }));\r\n        this._pasteProgressManager.showWhile(selections[0].getEndPosition(), localize('pasteIntoEditorProgress', \"Running paste handlers. Click to cancel\"), p);\r\n        this._currentPasteOperation = p;\r\n    }\r\n    showPasteAsPick(preferredId, allProviders, selections, dataTransfer, metadata) {\r\n        const p = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n            const editor = this._editor;\r\n            if (!editor.hasModel()) {\r\n                return;\r\n            }\r\n            const model = editor.getModel();\r\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */, undefined, token);\r\n            try {\r\n                yield this.mergeInDataFromCopy(dataTransfer, metadata, tokenSource.token);\r\n                if (tokenSource.token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                // Filter out any providers the don't match the full data transfer we will send them.\r\n                let supportedProviders = allProviders.filter(provider => isSupportedPasteProvider(provider, dataTransfer));\r\n                if (preferredId) {\r\n                    // We are looking for a specific edit\r\n                    supportedProviders = supportedProviders.filter(edit => edit.id === preferredId);\r\n                }\r\n                const providerEdits = yield this.getPasteEdits(supportedProviders, dataTransfer, model, selections, tokenSource.token);\r\n                if (tokenSource.token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                if (!providerEdits.length) {\r\n                    return;\r\n                }\r\n                let pickedEdit;\r\n                if (preferredId) {\r\n                    pickedEdit = providerEdits.at(0);\r\n                }\r\n                else {\r\n                    const selected = yield this._quickInputService.pick(providerEdits.map((edit) => ({\r\n                        label: edit.label,\r\n                        description: edit.providerId,\r\n                        detail: edit.detail,\r\n                        edit,\r\n                    })), {\r\n                        placeHolder: localize('pasteAsPickerPlaceholder', \"Select Paste Action\"),\r\n                    });\r\n                    pickedEdit = selected === null || selected === void 0 ? void 0 : selected.edit;\r\n                }\r\n                if (!pickedEdit) {\r\n                    return;\r\n                }\r\n                const combinedWorkspaceEdit = createCombinedWorkspaceEdit(model.uri, selections, pickedEdit);\r\n                yield this._bulkEditService.apply(combinedWorkspaceEdit, { editor: this._editor });\r\n            }\r\n            finally {\r\n                tokenSource.dispose();\r\n                if (this._currentPasteOperation === p) {\r\n                    this._currentPasteOperation = undefined;\r\n                }\r\n            }\r\n        }));\r\n        this._progressService.withProgress({\r\n            location: 10 /* ProgressLocation.Window */,\r\n            title: localize('pasteAsProgress', \"Running paste handlers\"),\r\n        }, () => p);\r\n    }\r\n    setCopyMetadata(dataTransfer, metadata) {\r\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\r\n    }\r\n    fetchCopyMetadata(e) {\r\n        var _a;\r\n        if (!e.clipboardData) {\r\n            return;\r\n        }\r\n        // Prefer using the clipboard data we saved off\r\n        const rawMetadata = e.clipboardData.getData(vscodeClipboardMime);\r\n        if (rawMetadata) {\r\n            try {\r\n                return JSON.parse(rawMetadata);\r\n            }\r\n            catch (_b) {\r\n                return undefined;\r\n            }\r\n        }\r\n        // Otherwise try to extract the generic text editor metadata\r\n        const [_, metadata] = ClipboardEventUtils.getTextData(e.clipboardData);\r\n        if (metadata) {\r\n            return {\r\n                defaultPastePayload: {\r\n                    mode: metadata.mode,\r\n                    multicursorText: (_a = metadata.multicursorText) !== null && _a !== void 0 ? _a : null,\r\n                    pasteOnNewLine: !!metadata.isFromEmptySelection,\r\n                },\r\n            };\r\n        }\r\n        return undefined;\r\n    }\r\n    mergeInDataFromCopy(dataTransfer, metadata, token) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_a = this._currentCopyOperation) === null || _a === void 0 ? void 0 : _a.handle) === metadata.id) {\r\n                const toMergeDataTransfer = yield this._currentCopyOperation.dataTransferPromise;\r\n                if (token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                for (const [key, value] of toMergeDataTransfer) {\r\n                    dataTransfer.replace(key, value);\r\n                }\r\n            }\r\n            if (!dataTransfer.has(Mimes.uriList)) {\r\n                const resources = yield this._clipboardService.readResources();\r\n                if (token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                if (resources.length) {\r\n                    dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getPasteEdits(providers, dataTransfer, model, selections, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const results = yield raceCancellation(Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a;\r\n                try {\r\n                    const edit = yield ((_a = provider.provideDocumentPasteEdits) === null || _a === void 0 ? void 0 : _a.call(provider, model, selections, dataTransfer, token));\r\n                    if (edit) {\r\n                        return Object.assign(Object.assign({}, edit), { providerId: provider.id });\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error(err);\r\n                }\r\n                return undefined;\r\n            }))), token);\r\n            const edits = coalesce(results !== null && results !== void 0 ? results : []);\r\n            return sortEditsByYieldTo(edits);\r\n        });\r\n    }\r\n    applyDefaultPasteHandler(dataTransfer, metadata, token) {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const textDataTransfer = (_a = dataTransfer.get(Mimes.text)) !== null && _a !== void 0 ? _a : dataTransfer.get('text');\r\n            if (!textDataTransfer) {\r\n                return;\r\n            }\r\n            const text = yield textDataTransfer.asString();\r\n            if (token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            const payload = {\r\n                text,\r\n                pasteOnNewLine: (_b = metadata === null || metadata === void 0 ? void 0 : metadata.defaultPastePayload.pasteOnNewLine) !== null && _b !== void 0 ? _b : false,\r\n                multicursorText: (_c = metadata === null || metadata === void 0 ? void 0 : metadata.defaultPastePayload.multicursorText) !== null && _c !== void 0 ? _c : null,\r\n                mode: null,\r\n            };\r\n            this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, payload);\r\n        });\r\n    }\r\n};\r\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\r\nCopyPasteController = CopyPasteController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IBulkEditService),\r\n    __param(3, IClipboardService),\r\n    __param(4, ILanguageFeaturesService),\r\n    __param(5, IQuickInputService),\r\n    __param(6, IProgressService)\r\n], CopyPasteController);\r\nexport { CopyPasteController };\r\nfunction isSupportedPasteProvider(provider, dataTransfer) {\r\n    var _a;\r\n    return Boolean((_a = provider.pasteMimeTypes) === null || _a === void 0 ? void 0 : _a.some(type => dataTransfer.matches(type)));\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { distinct } from './arrays.js';\r\nimport { Iterable } from './iterator.js';\r\nimport { generateUuid } from './uuid.js';\r\nexport function createStringDataTransferItem(stringOrPromise) {\r\n    return {\r\n        asString: () => __awaiter(this, void 0, void 0, function* () { return stringOrPromise; }),\r\n        asFile: () => undefined,\r\n        value: typeof stringOrPromise === 'string' ? stringOrPromise : undefined,\r\n    };\r\n}\r\nexport function createFileDataTransferItem(fileName, uri, data) {\r\n    const file = { id: generateUuid(), name: fileName, uri, data };\r\n    return {\r\n        asString: () => __awaiter(this, void 0, void 0, function* () { return ''; }),\r\n        asFile: () => file,\r\n        value: undefined,\r\n    };\r\n}\r\nexport class VSDataTransfer {\r\n    constructor() {\r\n        this._entries = new Map();\r\n    }\r\n    get size() {\r\n        let size = 0;\r\n        for (const _ of this._entries) {\r\n            size++;\r\n        }\r\n        return size;\r\n    }\r\n    has(mimeType) {\r\n        return this._entries.has(this.toKey(mimeType));\r\n    }\r\n    matches(pattern) {\r\n        const mimes = [...this._entries.keys()];\r\n        if (Iterable.some(this, ([_, item]) => item.asFile())) {\r\n            mimes.push('files');\r\n        }\r\n        return matchesMimeType_normalized(normalizeMimeType(pattern), mimes);\r\n    }\r\n    get(mimeType) {\r\n        var _a;\r\n        return (_a = this._entries.get(this.toKey(mimeType))) === null || _a === void 0 ? void 0 : _a[0];\r\n    }\r\n    /**\r\n     * Add a new entry to this data transfer.\r\n     *\r\n     * This does not replace existing entries for `mimeType`.\r\n     */\r\n    append(mimeType, value) {\r\n        const existing = this._entries.get(mimeType);\r\n        if (existing) {\r\n            existing.push(value);\r\n        }\r\n        else {\r\n            this._entries.set(this.toKey(mimeType), [value]);\r\n        }\r\n    }\r\n    /**\r\n     * Set the entry for a given mime type.\r\n     *\r\n     * This replaces all existing entries for `mimeType`.\r\n     */\r\n    replace(mimeType, value) {\r\n        this._entries.set(this.toKey(mimeType), [value]);\r\n    }\r\n    /**\r\n     * Remove all entries for `mimeType`.\r\n     */\r\n    delete(mimeType) {\r\n        this._entries.delete(this.toKey(mimeType));\r\n    }\r\n    /**\r\n     * Iterate over all `[mime, item]` pairs in this data transfer.\r\n     *\r\n     * There may be multiple entries for each mime type.\r\n     */\r\n    *[Symbol.iterator]() {\r\n        for (const [mine, items] of this._entries) {\r\n            for (const item of items) {\r\n                yield [mine, item];\r\n            }\r\n        }\r\n    }\r\n    toKey(mimeType) {\r\n        return normalizeMimeType(mimeType);\r\n    }\r\n}\r\nfunction normalizeMimeType(mimeType) {\r\n    return mimeType.toLowerCase();\r\n}\r\nexport function matchesMimeType(pattern, mimeTypes) {\r\n    return matchesMimeType_normalized(normalizeMimeType(pattern), mimeTypes.map(normalizeMimeType));\r\n}\r\nfunction matchesMimeType_normalized(normalizedPattern, normalizedMimeTypes) {\r\n    // Anything wildcard\r\n    if (normalizedPattern === '*/*') {\r\n        return normalizedMimeTypes.length > 0;\r\n    }\r\n    // Exact match\r\n    if (normalizedMimeTypes.includes(normalizedPattern)) {\r\n        return true;\r\n    }\r\n    // Wildcard, such as `image/*`\r\n    const wildcard = normalizedPattern.match(/^([a-z]+)\\/([a-z]+|\\*)$/i);\r\n    if (!wildcard) {\r\n        return false;\r\n    }\r\n    const [_, type, subtype] = wildcard;\r\n    if (subtype === '*') {\r\n        return normalizedMimeTypes.some(mime => mime.startsWith(type + '/'));\r\n    }\r\n    return false;\r\n}\r\nexport const UriList = Object.freeze({\r\n    // http://amundsen.com/hypermedia/urilist/\r\n    create: (entries) => {\r\n        return distinct(entries.map(x => x.toString())).join('\\r\\n');\r\n    },\r\n    split: (str) => {\r\n        return str.split('\\r\\n');\r\n    },\r\n    parse: (str) => {\r\n        return UriList.split(str).filter(value => !value.startsWith('#'));\r\n    }\r\n});\r\n", "export const generateUuid = (function () {\r\n    // use `randomUUID` if possible\r\n    if (typeof crypto === 'object' && typeof crypto.randomUUID === 'function') {\r\n        return crypto.randomUUID.bind(crypto);\r\n    }\r\n    // use `randomValues` if possible\r\n    let getRandomValues;\r\n    if (typeof crypto === 'object' && typeof crypto.getRandomValues === 'function') {\r\n        getRandomValues = crypto.getRandomValues.bind(crypto);\r\n    }\r\n    else {\r\n        getRandomValues = function (bucket) {\r\n            for (let i = 0; i < bucket.length; i++) {\r\n                bucket[i] = Math.floor(Math.random() * 256);\r\n            }\r\n            return bucket;\r\n        };\r\n    }\r\n    // prep-work\r\n    const _data = new Uint8Array(16);\r\n    const _hex = [];\r\n    for (let i = 0; i < 256; i++) {\r\n        _hex.push(i.toString(16).padStart(2, '0'));\r\n    }\r\n    return function generateUuid() {\r\n        // get data\r\n        getRandomValues(_data);\r\n        // set version bits\r\n        _data[6] = (_data[6] & 0x0f) | 0x40;\r\n        _data[8] = (_data[8] & 0x3f) | 0x80;\r\n        // print as string\r\n        let i = 0;\r\n        let result = '';\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += '-';\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += '-';\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += '-';\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += '-';\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        result += _hex[_data[i++]];\r\n        return result;\r\n    };\r\n})();\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { DataTransfers } from '../../base/browser/dnd.js';\r\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\r\nimport { Mimes } from '../../base/common/mime.js';\r\nimport { URI } from '../../base/common/uri.js';\r\nimport { CodeDataTransfers } from '../../platform/dnd/browser/dnd.js';\r\nexport function toVSDataTransfer(dataTransfer) {\r\n    const vsDataTransfer = new VSDataTransfer();\r\n    for (const item of dataTransfer.items) {\r\n        const type = item.type;\r\n        if (item.kind === 'string') {\r\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\r\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\r\n        }\r\n        else if (item.kind === 'file') {\r\n            const file = item.getAsFile();\r\n            if (file) {\r\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\r\n            }\r\n        }\r\n    }\r\n    return vsDataTransfer;\r\n}\r\nfunction createFileDataTransferItemFromFile(file) {\r\n    const uri = file.path ? URI.parse(file.path) : undefined;\r\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\r\n        return new Uint8Array(yield file.arrayBuffer());\r\n    }));\r\n}\r\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\r\n    CodeDataTransfers.EDITORS,\r\n    CodeDataTransfers.FILES,\r\n    DataTransfers.RESOURCES,\r\n    DataTransfers.INTERNAL_URI_LIST,\r\n]);\r\nexport function toExternalVSDataTransfer(sourceDataTransfer, overwriteUriList = false) {\r\n    const vsDataTransfer = toVSDataTransfer(sourceDataTransfer);\r\n    // Try to expose the internal uri-list type as the standard type\r\n    const uriList = vsDataTransfer.get(DataTransfers.INTERNAL_URI_LIST);\r\n    if (uriList) {\r\n        vsDataTransfer.replace(Mimes.uriList, uriList);\r\n    }\r\n    else {\r\n        if (overwriteUriList || !vsDataTransfer.has(Mimes.uriList)) {\r\n            // Otherwise, fallback to adding dragged resources to the uri list\r\n            const editorData = [];\r\n            for (const item of sourceDataTransfer.items) {\r\n                const file = item.getAsFile();\r\n                if (file) {\r\n                    const path = file.path;\r\n                    try {\r\n                        if (path) {\r\n                            editorData.push(URI.file(path).toString());\r\n                        }\r\n                        else {\r\n                            editorData.push(URI.parse(file.name, true).toString());\r\n                        }\r\n                    }\r\n                    catch (_a) {\r\n                        // Parsing failed. Leave out from list\r\n                    }\r\n                }\r\n            }\r\n            if (editorData.length) {\r\n                vsDataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\r\n            }\r\n        }\r\n    }\r\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\r\n        vsDataTransfer.delete(internal);\r\n    }\r\n    return vsDataTransfer;\r\n}\r\n", "import { Registry } from '../../registry/common/platform.js';\r\n//#region Editor / Resources DND\r\nexport const CodeDataTransfers = {\r\n    EDITORS: 'CodeEditors',\r\n    FILES: 'CodeFiles'\r\n};\r\nclass DragAndDropContributionRegistry {\r\n}\r\nexport const Extensions = {\r\n    DragAndDropContribution: 'workbench.contributions.dragAndDrop'\r\n};\r\nRegistry.add(Extensions.DragAndDropContribution, new DragAndDropContributionRegistry());\r\n//#endregion\r\n//#region DND Utilities\r\n/**\r\n * A singleton to store transfer data during drag & drop operations that are only valid within the application.\r\n */\r\nexport class LocalSelectionTransfer {\r\n    constructor() {\r\n        // protect against external instantiation\r\n    }\r\n    static getInstance() {\r\n        return LocalSelectionTransfer.INSTANCE;\r\n    }\r\n    hasData(proto) {\r\n        return proto && proto === this.proto;\r\n    }\r\n    getData(proto) {\r\n        if (this.hasData(proto)) {\r\n            return this.data;\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nLocalSelectionTransfer.INSTANCE = new LocalSelectionTransfer();\r\n//#endregion\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\r\nexport function createCombinedWorkspaceEdit(uri, ranges, edit) {\r\n    var _a, _b;\r\n    return {\r\n        edits: [\r\n            ...ranges.map(range => new ResourceTextEdit(uri, typeof edit.insertText === 'string'\r\n                ? { range, text: edit.insertText, insertAsSnippet: false }\r\n                : { range, text: edit.insertText.snippet, insertAsSnippet: true })),\r\n            ...((_b = (_a = edit.additionalEdit) === null || _a === void 0 ? void 0 : _a.edits) !== null && _b !== void 0 ? _b : [])\r\n        ]\r\n    };\r\n}\r\nexport function sortEditsByYieldTo(edits) {\r\n    var _a;\r\n    function yieldsTo(yTo, other) {\r\n        return ('providerId' in yTo && yTo.providerId === other.providerId)\r\n            || ('mimeType' in yTo && yTo.mimeType === other.handledMimeType);\r\n    }\r\n    // Build list of nodes each node yields to\r\n    const yieldsToMap = new Map();\r\n    for (const edit of edits) {\r\n        for (const yTo of (_a = edit.yieldTo) !== null && _a !== void 0 ? _a : []) {\r\n            for (const other of edits) {\r\n                if (other === edit) {\r\n                    continue;\r\n                }\r\n                if (yieldsTo(yTo, other)) {\r\n                    let arr = yieldsToMap.get(edit);\r\n                    if (!arr) {\r\n                        arr = [];\r\n                        yieldsToMap.set(edit, arr);\r\n                    }\r\n                    arr.push(other);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (!yieldsToMap.size) {\r\n        return Array.from(edits);\r\n    }\r\n    // Topological sort\r\n    const visited = new Set();\r\n    const tempStack = [];\r\n    function visit(nodes) {\r\n        if (!nodes.length) {\r\n            return [];\r\n        }\r\n        const node = nodes[0];\r\n        if (tempStack.includes(node)) {\r\n            console.warn(`Yield to cycle detected for ${node.providerId}`);\r\n            return nodes;\r\n        }\r\n        if (visited.has(node)) {\r\n            return visit(nodes.slice(1));\r\n        }\r\n        let pre = [];\r\n        const yTo = yieldsToMap.get(node);\r\n        if (yTo) {\r\n            tempStack.push(node);\r\n            pre = visit(yTo);\r\n            tempStack.pop();\r\n        }\r\n        visited.add(node);\r\n        return [...pre, node, ...visit(nodes.slice(1))];\r\n    }\r\n    return visit(Array.from(edits));\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { disposableTimeout } from '../../../../base/common/async.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport './inlineProgressWidget.css';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nconst inlineProgressDecoration = ModelDecorationOptions.register({\r\n    description: 'inline-progress-widget',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    showIfCollapsed: true,\r\n    after: {\r\n        content: noBreakWhitespace,\r\n        inlineClassName: 'inline-editor-progress-decoration',\r\n        inlineClassNameAffectsLetterSpacing: true,\r\n    }\r\n});\r\nclass InlineProgressWidget extends Disposable {\r\n    constructor(typeId, editor, range, title, delegate) {\r\n        super();\r\n        this.typeId = typeId;\r\n        this.editor = editor;\r\n        this.range = range;\r\n        this.delegate = delegate;\r\n        this.allowEditorOverflow = false;\r\n        this.suppressMouseDown = true;\r\n        this.create(title);\r\n        this.editor.addContentWidget(this);\r\n        this.editor.layoutContentWidget(this);\r\n    }\r\n    create(title) {\r\n        this.domNode = dom.$('.inline-progress-widget');\r\n        this.domNode.role = 'button';\r\n        this.domNode.title = title;\r\n        const iconElement = dom.$('span.icon');\r\n        this.domNode.append(iconElement);\r\n        iconElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.loading), 'codicon-modifier-spin');\r\n        const updateSize = () => {\r\n            const lineHeight = this.editor.getOption(66 /* EditorOption.lineHeight */);\r\n            this.domNode.style.height = `${lineHeight}px`;\r\n            this.domNode.style.width = `${Math.ceil(0.8 * lineHeight)}px`;\r\n        };\r\n        updateSize();\r\n        this._register(this.editor.onDidChangeConfiguration(c => {\r\n            if (c.hasChanged(52 /* EditorOption.fontSize */) || c.hasChanged(66 /* EditorOption.lineHeight */)) {\r\n                updateSize();\r\n            }\r\n        }));\r\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.CLICK, e => {\r\n            this.delegate.cancel();\r\n        }));\r\n    }\r\n    getId() {\r\n        return InlineProgressWidget.baseId + '.' + this.typeId;\r\n    }\r\n    getDomNode() {\r\n        return this.domNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            position: { lineNumber: this.range.startLineNumber, column: this.range.startColumn },\r\n            preference: [0 /* ContentWidgetPositionPreference.EXACT */]\r\n        };\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.editor.removeContentWidget(this);\r\n    }\r\n}\r\nInlineProgressWidget.baseId = 'editor.widget.inlineProgressWidget';\r\nlet InlineProgressManager = class InlineProgressManager extends Disposable {\r\n    constructor(id, _editor, _instantiationService) {\r\n        super();\r\n        this.id = id;\r\n        this._editor = _editor;\r\n        this._instantiationService = _instantiationService;\r\n        /** Delay before showing the progress widget */\r\n        this._showDelay = 500; // ms\r\n        this._showPromise = this._register(new MutableDisposable());\r\n        this._currentWidget = new MutableDisposable();\r\n        this._operationIdPool = 0;\r\n        this._currentDecorations = _editor.createDecorationsCollection();\r\n    }\r\n    showWhile(position, title, promise) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const operationId = this._operationIdPool++;\r\n            this._currentOperation = operationId;\r\n            this.clear();\r\n            this._showPromise.value = disposableTimeout(() => {\r\n                const range = Range.fromPositions(position);\r\n                const decorationIds = this._currentDecorations.set([{\r\n                        range: range,\r\n                        options: inlineProgressDecoration,\r\n                    }]);\r\n                if (decorationIds.length > 0) {\r\n                    this._currentWidget.value = this._instantiationService.createInstance(InlineProgressWidget, this.id, this._editor, range, title, promise);\r\n                }\r\n            }, this._showDelay);\r\n            try {\r\n                return yield promise;\r\n            }\r\n            finally {\r\n                if (this._currentOperation === operationId) {\r\n                    this.clear();\r\n                    this._currentOperation = undefined;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    clear() {\r\n        this._showPromise.clear();\r\n        this._currentDecorations.clear();\r\n        this._currentWidget.clear();\r\n    }\r\n};\r\nInlineProgressManager = __decorate([\r\n    __param(2, IInstantiationService)\r\n], InlineProgressManager);\r\nexport { InlineProgressManager };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar PostEditWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Button } from '../../../../base/browser/ui/button/button.js';\r\nimport { toAction } from '../../../../base/common/actions.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport './postEditWidget.css';\r\nimport { IBulkEditService, ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nlet PostEditWidget = PostEditWidget_1 = class PostEditWidget extends Disposable {\r\n    constructor(typeId, editor, visibleContext, showCommand, range, edits, onSelectNewEdit, _contextMenuService, contextKeyService, _keybindingService) {\r\n        super();\r\n        this.typeId = typeId;\r\n        this.editor = editor;\r\n        this.showCommand = showCommand;\r\n        this.range = range;\r\n        this.edits = edits;\r\n        this.onSelectNewEdit = onSelectNewEdit;\r\n        this._contextMenuService = _contextMenuService;\r\n        this._keybindingService = _keybindingService;\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = true;\r\n        this.create();\r\n        this.visibleContext = visibleContext.bindTo(contextKeyService);\r\n        this.visibleContext.set(true);\r\n        this._register(toDisposable(() => this.visibleContext.reset()));\r\n        this.editor.addContentWidget(this);\r\n        this.editor.layoutContentWidget(this);\r\n        this._register(toDisposable((() => this.editor.removeContentWidget(this))));\r\n        this._register(this.editor.onDidChangeCursorPosition(e => {\r\n            if (!range.containsPosition(e.position)) {\r\n                this.dispose();\r\n            }\r\n        }));\r\n        this._register(Event.runAndSubscribe(_keybindingService.onDidUpdateKeybindings, () => {\r\n            this._updateButtonTitle();\r\n        }));\r\n    }\r\n    _updateButtonTitle() {\r\n        var _a;\r\n        const binding = (_a = this._keybindingService.lookupKeybinding(this.showCommand.id)) === null || _a === void 0 ? void 0 : _a.getLabel();\r\n        this.button.element.title = this.showCommand.label + (binding ? ` (${binding})` : '');\r\n    }\r\n    create() {\r\n        this.domNode = dom.$('.post-edit-widget');\r\n        this.button = this._register(new Button(this.domNode, {\r\n            supportIcons: true,\r\n        }));\r\n        this.button.label = '$(insert)';\r\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.CLICK, () => this.showSelector()));\r\n    }\r\n    getId() {\r\n        return PostEditWidget_1.baseId + '.' + this.typeId;\r\n    }\r\n    getDomNode() {\r\n        return this.domNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            position: this.range.getEndPosition(),\r\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */]\r\n        };\r\n    }\r\n    showSelector() {\r\n        this._contextMenuService.showContextMenu({\r\n            getAnchor: () => {\r\n                const pos = dom.getDomNodePagePosition(this.button.element);\r\n                return { x: pos.left + pos.width, y: pos.top + pos.height };\r\n            },\r\n            getActions: () => {\r\n                return this.edits.allEdits.map((edit, i) => toAction({\r\n                    id: '',\r\n                    label: edit.label,\r\n                    checked: i === this.edits.activeEditIndex,\r\n                    run: () => {\r\n                        if (i !== this.edits.activeEditIndex) {\r\n                            return this.onSelectNewEdit(i);\r\n                        }\r\n                    },\r\n                }));\r\n            }\r\n        });\r\n    }\r\n};\r\nPostEditWidget.baseId = 'editor.widget.postEditWidget';\r\nPostEditWidget = PostEditWidget_1 = __decorate([\r\n    __param(7, IContextMenuService),\r\n    __param(8, IContextKeyService),\r\n    __param(9, IKeybindingService)\r\n], PostEditWidget);\r\nlet PostEditWidgetManager = class PostEditWidgetManager extends Disposable {\r\n    constructor(_id, _editor, _visibleContext, _showCommand, _instantiationService, _bulkEditService) {\r\n        super();\r\n        this._id = _id;\r\n        this._editor = _editor;\r\n        this._visibleContext = _visibleContext;\r\n        this._showCommand = _showCommand;\r\n        this._instantiationService = _instantiationService;\r\n        this._bulkEditService = _bulkEditService;\r\n        this._currentWidget = this._register(new MutableDisposable());\r\n        this._register(Event.any(_editor.onDidChangeModel, _editor.onDidChangeModelContent)(() => this.clear()));\r\n    }\r\n    applyEditAndShowIfNeeded(ranges, edits, canShowWidget, token) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const model = this._editor.getModel();\r\n            if (!model || !ranges.length) {\r\n                return;\r\n            }\r\n            const edit = edits.allEdits[edits.activeEditIndex];\r\n            if (!edit) {\r\n                return;\r\n            }\r\n            let insertTextEdit = [];\r\n            if (typeof edit.insertText === 'string' ? edit.insertText === '' : edit.insertText.snippet === '') {\r\n                insertTextEdit = [];\r\n            }\r\n            else {\r\n                insertTextEdit = ranges.map(range => new ResourceTextEdit(model.uri, typeof edit.insertText === 'string'\r\n                    ? { range, text: edit.insertText, insertAsSnippet: false }\r\n                    : { range, text: edit.insertText.snippet, insertAsSnippet: true }));\r\n            }\r\n            const allEdits = [\r\n                ...insertTextEdit,\r\n                ...((_b = (_a = edit.additionalEdit) === null || _a === void 0 ? void 0 : _a.edits) !== null && _b !== void 0 ? _b : [])\r\n            ];\r\n            const combinedWorkspaceEdit = {\r\n                edits: allEdits\r\n            };\r\n            // Use a decoration to track edits around the trigger range\r\n            const primaryRange = ranges[0];\r\n            const editTrackingDecoration = model.deltaDecorations([], [{\r\n                    range: primaryRange,\r\n                    options: { description: 'paste-line-suffix', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */ }\r\n                }]);\r\n            let editResult;\r\n            let editRange;\r\n            try {\r\n                editResult = yield this._bulkEditService.apply(combinedWorkspaceEdit, { editor: this._editor, token });\r\n                editRange = model.getDecorationRange(editTrackingDecoration[0]);\r\n            }\r\n            finally {\r\n                model.deltaDecorations(editTrackingDecoration, []);\r\n            }\r\n            if (canShowWidget && editResult.isApplied && edits.allEdits.length > 1) {\r\n                this.show(editRange !== null && editRange !== void 0 ? editRange : primaryRange, edits, (newEditIndex) => __awaiter(this, void 0, void 0, function* () {\r\n                    const model = this._editor.getModel();\r\n                    if (!model) {\r\n                        return;\r\n                    }\r\n                    yield model.undo();\r\n                    this.applyEditAndShowIfNeeded(ranges, { activeEditIndex: newEditIndex, allEdits: edits.allEdits }, canShowWidget, token);\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    show(range, edits, onDidSelectEdit) {\r\n        this.clear();\r\n        if (this._editor.hasModel()) {\r\n            this._currentWidget.value = this._instantiationService.createInstance(PostEditWidget, this._id, this._editor, this._visibleContext, this._showCommand, range, edits, onDidSelectEdit);\r\n        }\r\n    }\r\n    clear() {\r\n        this._currentWidget.clear();\r\n    }\r\n    tryShowSelector() {\r\n        var _a;\r\n        (_a = this._currentWidget.value) === null || _a === void 0 ? void 0 : _a.showSelector();\r\n    }\r\n};\r\nPostEditWidgetManager = __decorate([\r\n    __param(4, IInstantiationService),\r\n    __param(5, IBulkEditService)\r\n], PostEditWidgetManager);\r\nexport { PostEditWidgetManager };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { UriList } from '../../../../base/common/dataTransfer.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Mimes } from '../../../../base/common/mime.js';\r\nimport { Schemas } from '../../../../base/common/network.js';\r\nimport { relativePath } from '../../../../base/common/resources.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\r\nconst builtInLabel = localize('builtIn', 'Built-in');\r\nclass SimplePasteAndDropProvider {\r\n    provideDocumentPasteEdits(_model, _ranges, dataTransfer, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const edit = yield this.getEdit(dataTransfer, token);\r\n            return edit ? { insertText: edit.insertText, label: edit.label, detail: edit.detail, handledMimeType: edit.handledMimeType, yieldTo: edit.yieldTo } : undefined;\r\n        });\r\n    }\r\n    provideDocumentOnDropEdits(_model, _position, dataTransfer, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const edit = yield this.getEdit(dataTransfer, token);\r\n            return edit ? { insertText: edit.insertText, label: edit.label, handledMimeType: edit.handledMimeType, yieldTo: edit.yieldTo } : undefined;\r\n        });\r\n    }\r\n}\r\nclass DefaultTextProvider extends SimplePasteAndDropProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.id = 'text';\r\n        this.dropMimeTypes = [Mimes.text];\r\n        this.pasteMimeTypes = [Mimes.text];\r\n    }\r\n    getEdit(dataTransfer, _token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const textEntry = dataTransfer.get(Mimes.text);\r\n            if (!textEntry) {\r\n                return;\r\n            }\r\n            // Suppress if there's also a uriList entry.\r\n            // Typically the uri-list contains the same text as the text entry so showing both is confusing.\r\n            if (dataTransfer.has(Mimes.uriList)) {\r\n                return;\r\n            }\r\n            const insertText = yield textEntry.asString();\r\n            return {\r\n                handledMimeType: Mimes.text,\r\n                label: localize('text.label', \"Insert Plain Text\"),\r\n                detail: builtInLabel,\r\n                insertText\r\n            };\r\n        });\r\n    }\r\n}\r\nclass PathProvider extends SimplePasteAndDropProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.id = 'uri';\r\n        this.dropMimeTypes = [Mimes.uriList];\r\n        this.pasteMimeTypes = [Mimes.uriList];\r\n    }\r\n    getEdit(dataTransfer, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const entries = yield extractUriList(dataTransfer);\r\n            if (!entries.length || token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            let uriCount = 0;\r\n            const insertText = entries\r\n                .map(({ uri, originalText }) => {\r\n                if (uri.scheme === Schemas.file) {\r\n                    return uri.fsPath;\r\n                }\r\n                else {\r\n                    uriCount++;\r\n                    return originalText;\r\n                }\r\n            })\r\n                .join(' ');\r\n            let label;\r\n            if (uriCount > 0) {\r\n                // Dropping at least one generic uri (such as https) so use most generic label\r\n                label = entries.length > 1\r\n                    ? localize('defaultDropProvider.uriList.uris', \"Insert Uris\")\r\n                    : localize('defaultDropProvider.uriList.uri', \"Insert Uri\");\r\n            }\r\n            else {\r\n                // All the paths are file paths\r\n                label = entries.length > 1\r\n                    ? localize('defaultDropProvider.uriList.paths', \"Insert Paths\")\r\n                    : localize('defaultDropProvider.uriList.path', \"Insert Path\");\r\n            }\r\n            return {\r\n                handledMimeType: Mimes.uriList,\r\n                insertText,\r\n                label,\r\n                detail: builtInLabel,\r\n            };\r\n        });\r\n    }\r\n}\r\nlet RelativePathProvider = class RelativePathProvider extends SimplePasteAndDropProvider {\r\n    constructor(_workspaceContextService) {\r\n        super();\r\n        this._workspaceContextService = _workspaceContextService;\r\n        this.id = 'relativePath';\r\n        this.dropMimeTypes = [Mimes.uriList];\r\n        this.pasteMimeTypes = [Mimes.uriList];\r\n    }\r\n    getEdit(dataTransfer, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const entries = yield extractUriList(dataTransfer);\r\n            if (!entries.length || token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            const relativeUris = coalesce(entries.map(({ uri }) => {\r\n                const root = this._workspaceContextService.getWorkspaceFolder(uri);\r\n                return root ? relativePath(root.uri, uri) : undefined;\r\n            }));\r\n            if (!relativeUris.length) {\r\n                return;\r\n            }\r\n            return {\r\n                handledMimeType: Mimes.uriList,\r\n                insertText: relativeUris.join(' '),\r\n                label: entries.length > 1\r\n                    ? localize('defaultDropProvider.uriList.relativePaths', \"Insert Relative Paths\")\r\n                    : localize('defaultDropProvider.uriList.relativePath', \"Insert Relative Path\"),\r\n                detail: builtInLabel,\r\n            };\r\n        });\r\n    }\r\n};\r\nRelativePathProvider = __decorate([\r\n    __param(0, IWorkspaceContextService)\r\n], RelativePathProvider);\r\nfunction extractUriList(dataTransfer) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const urlListEntry = dataTransfer.get(Mimes.uriList);\r\n        if (!urlListEntry) {\r\n            return [];\r\n        }\r\n        const strUriList = yield urlListEntry.asString();\r\n        const entries = [];\r\n        for (const entry of UriList.parse(strUriList)) {\r\n            try {\r\n                entries.push({ uri: URI.parse(entry), originalText: entry });\r\n            }\r\n            catch (_a) {\r\n                // noop\r\n            }\r\n        }\r\n        return entries;\r\n    });\r\n}\r\nlet DefaultDropProvidersFeature = class DefaultDropProvidersFeature extends Disposable {\r\n    constructor(languageFeaturesService, workspaceContextService) {\r\n        super();\r\n        this._register(languageFeaturesService.documentOnDropEditProvider.register('*', new DefaultTextProvider()));\r\n        this._register(languageFeaturesService.documentOnDropEditProvider.register('*', new PathProvider()));\r\n        this._register(languageFeaturesService.documentOnDropEditProvider.register('*', new RelativePathProvider(workspaceContextService)));\r\n    }\r\n};\r\nDefaultDropProvidersFeature = __decorate([\r\n    __param(0, ILanguageFeaturesService),\r\n    __param(1, IWorkspaceContextService)\r\n], DefaultDropProvidersFeature);\r\nexport { DefaultDropProvidersFeature };\r\nlet DefaultPasteProvidersFeature = class DefaultPasteProvidersFeature extends Disposable {\r\n    constructor(languageFeaturesService, workspaceContextService) {\r\n        super();\r\n        this._register(languageFeaturesService.documentPasteEditProvider.register('*', new DefaultTextProvider()));\r\n        this._register(languageFeaturesService.documentPasteEditProvider.register('*', new PathProvider()));\r\n        this._register(languageFeaturesService.documentPasteEditProvider.register('*', new RelativePathProvider(workspaceContextService)));\r\n    }\r\n};\r\nDefaultPasteProvidersFeature = __decorate([\r\n    __param(0, ILanguageFeaturesService),\r\n    __param(1, IWorkspaceContextService)\r\n], DefaultPasteProvidersFeature);\r\nexport { DefaultPasteProvidersFeature };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\r\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\r\nimport { DefaultDropProvidersFeature } from './defaultProviders.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { Extensions as ConfigurationExtensions } from '../../../../platform/configuration/common/configurationRegistry.js';\r\nimport { Registry } from '../../../../platform/registry/common/platform.js';\r\nimport { DropIntoEditorController, changeDropTypeCommandId, defaultProviderConfig, dropWidgetVisibleCtx } from './dropIntoEditorController.js';\r\nregisterEditorContribution(DropIntoEditorController.ID, DropIntoEditorController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorCommand(new class extends EditorCommand {\r\n    constructor() {\r\n        super({\r\n            id: changeDropTypeCommandId,\r\n            precondition: dropWidgetVisibleCtx,\r\n            kbOpts: {\r\n                weight: 100 /* KeybindingWeight.EditorContrib */,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor, _args) {\r\n        var _a;\r\n        (_a = DropIntoEditorController.get(editor)) === null || _a === void 0 ? void 0 : _a.changeDropType();\r\n    }\r\n});\r\nregisterEditorFeature(DefaultDropProvidersFeature);\r\nRegistry.as(ConfigurationExtensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\r\n        [defaultProviderConfig]: {\r\n            type: 'object',\r\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\r\n            description: nls.localize('defaultProviderDescription', \"Configures the default drop provider to use for content of a given mime type.\"),\r\n            default: {},\r\n            additionalProperties: {\r\n                type: 'string',\r\n            },\r\n        },\r\n    } }));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar DropIntoEditorController_1;\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\r\nimport { VSDataTransfer, matchesMimeType } from '../../../../base/common/dataTransfer.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { toExternalVSDataTransfer } from '../../../browser/dnd.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { DraggedTreeItemsIdentifier } from '../../../common/services/treeViewsDnd.js';\r\nimport { ITreeViewsDnDService } from '../../../common/services/treeViewsDndService.js';\r\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { sortEditsByYieldTo } from './edit.js';\r\nimport { PostEditWidgetManager } from './postEditWidget.js';\r\nexport const defaultProviderConfig = 'editor.experimental.dropIntoEditor.defaultProvider';\r\nexport const changeDropTypeCommandId = 'editor.changeDropType';\r\nexport const dropWidgetVisibleCtx = new RawContextKey('dropWidgetVisible', false, localize('dropWidgetVisible', \"Whether the drop widget is showing\"));\r\nlet DropIntoEditorController = DropIntoEditorController_1 = class DropIntoEditorController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(DropIntoEditorController_1.ID);\r\n    }\r\n    constructor(editor, instantiationService, _configService, _languageFeaturesService, _treeViewsDragAndDropService) {\r\n        super();\r\n        this._configService = _configService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._treeViewsDragAndDropService = _treeViewsDragAndDropService;\r\n        this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\r\n        this._dropProgressManager = this._register(instantiationService.createInstance(InlineProgressManager, 'dropIntoEditor', editor));\r\n        this._postDropWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'dropIntoEditor', editor, dropWidgetVisibleCtx, { id: changeDropTypeCommandId, label: localize('postDropWidgetTitle', \"Show drop options...\") }));\r\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\r\n    }\r\n    changeDropType() {\r\n        this._postDropWidgetManager.tryShowSelector();\r\n    }\r\n    onDropIntoEditor(editor, position, dragEvent) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!dragEvent.dataTransfer || !editor.hasModel()) {\r\n                return;\r\n            }\r\n            (_a = this._currentOperation) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            editor.focus();\r\n            editor.setPosition(position);\r\n            const p = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n                const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */, undefined, token);\r\n                try {\r\n                    const ourDataTransfer = yield this.extractDataTransferData(dragEvent);\r\n                    if (ourDataTransfer.size === 0 || tokenSource.token.isCancellationRequested) {\r\n                        return;\r\n                    }\r\n                    const model = editor.getModel();\r\n                    if (!model) {\r\n                        return;\r\n                    }\r\n                    const providers = this._languageFeaturesService.documentOnDropEditProvider\r\n                        .ordered(model)\r\n                        .filter(provider => {\r\n                        if (!provider.dropMimeTypes) {\r\n                            // Keep all providers that don't specify mime types\r\n                            return true;\r\n                        }\r\n                        return provider.dropMimeTypes.some(mime => ourDataTransfer.matches(mime));\r\n                    });\r\n                    const edits = yield this.getDropEdits(providers, model, position, ourDataTransfer, tokenSource);\r\n                    if (tokenSource.token.isCancellationRequested) {\r\n                        return;\r\n                    }\r\n                    if (edits.length) {\r\n                        const activeEditIndex = this.getInitialActiveEditIndex(model, edits);\r\n                        const canShowWidget = editor.getOption(36 /* EditorOption.dropIntoEditor */).showDropSelector === 'afterDrop';\r\n                        // Pass in the parent token here as it tracks cancelling the entire drop operation\r\n                        yield this._postDropWidgetManager.applyEditAndShowIfNeeded([Range.fromPositions(position)], { activeEditIndex, allEdits: edits }, canShowWidget, token);\r\n                    }\r\n                }\r\n                finally {\r\n                    tokenSource.dispose();\r\n                    if (this._currentOperation === p) {\r\n                        this._currentOperation = undefined;\r\n                    }\r\n                }\r\n            }));\r\n            this._dropProgressManager.showWhile(position, localize('dropIntoEditorProgress', \"Running drop handlers. Click to cancel\"), p);\r\n            this._currentOperation = p;\r\n        });\r\n    }\r\n    getDropEdits(providers, model, position, dataTransfer, tokenSource) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const results = yield raceCancellation(Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\r\n                try {\r\n                    const edit = yield provider.provideDocumentOnDropEdits(model, position, dataTransfer, tokenSource.token);\r\n                    if (edit) {\r\n                        return Object.assign(Object.assign({}, edit), { providerId: provider.id });\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error(err);\r\n                }\r\n                return undefined;\r\n            }))), tokenSource.token);\r\n            const edits = coalesce(results !== null && results !== void 0 ? results : []);\r\n            return sortEditsByYieldTo(edits);\r\n        });\r\n    }\r\n    getInitialActiveEditIndex(model, edits) {\r\n        const preferredProviders = this._configService.getValue(defaultProviderConfig, { resource: model.uri });\r\n        for (const [configMime, desiredId] of Object.entries(preferredProviders)) {\r\n            const editIndex = edits.findIndex(edit => desiredId === edit.providerId\r\n                && edit.handledMimeType && matchesMimeType(configMime, [edit.handledMimeType]));\r\n            if (editIndex >= 0) {\r\n                return editIndex;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    extractDataTransferData(dragEvent) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!dragEvent.dataTransfer) {\r\n                return new VSDataTransfer();\r\n            }\r\n            const dataTransfer = toExternalVSDataTransfer(dragEvent.dataTransfer);\r\n            if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\r\n                const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\r\n                if (Array.isArray(data)) {\r\n                    for (const id of data) {\r\n                        const treeDataTransfer = yield this._treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\r\n                        if (treeDataTransfer) {\r\n                            for (const [type, value] of treeDataTransfer) {\r\n                                dataTransfer.replace(type, value);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return dataTransfer;\r\n        });\r\n    }\r\n};\r\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\r\nDropIntoEditorController = DropIntoEditorController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IConfigurationService),\r\n    __param(3, ILanguageFeaturesService),\r\n    __param(4, ITreeViewsDnDService)\r\n], DropIntoEditorController);\r\nexport { DropIntoEditorController };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class TreeViewsDnDService {\r\n    constructor() {\r\n        this._dragOperations = new Map();\r\n    }\r\n    removeDragOperationTransfer(uuid) {\r\n        if ((uuid && this._dragOperations.has(uuid))) {\r\n            const operation = this._dragOperations.get(uuid);\r\n            this._dragOperations.delete(uuid);\r\n            return operation;\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexport class DraggedTreeItemsIdentifier {\r\n    constructor(identifier) {\r\n        this.identifier = identifier;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { TreeViewsDnDService } from './treeViewsDnd.js';\r\nexport const ITreeViewsDnDService = createDecorator('treeViewsDndService');\r\nregisterSingleton(ITreeViewsDnDService, TreeViewsDnDService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar CommonFindController_1;\r\nimport { Delayer } from '../../../../base/common/async.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { OverviewRulerLane } from '../../../common/model.js';\r\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\r\nimport { FindOptionsWidget } from './findOptionsWidget.js';\r\nimport { FindReplaceState } from './findState.js';\r\nimport { FindWidget } from './findWidget.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\r\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\r\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\r\nimport { IThemeService, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\r\nconst SEARCH_STRING_MAX_LENGTH = 524288;\r\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\r\n    if (!editor.hasModel()) {\r\n        return null;\r\n    }\r\n    const selection = editor.getSelection();\r\n    // if selection spans multiple lines, default search string to empty\r\n    if ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\r\n        || seedSearchStringFromSelection === 'multiple') {\r\n        if (selection.isEmpty()) {\r\n            const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\r\n            if (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\r\n                return wordAtPosition.word;\r\n            }\r\n        }\r\n        else {\r\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\r\n                return editor.getModel().getValueInRange(selection);\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nlet CommonFindController = CommonFindController_1 = class CommonFindController extends Disposable {\r\n    get editor() {\r\n        return this._editor;\r\n    }\r\n    static get(editor) {\r\n        return editor.getContribution(CommonFindController_1.ID);\r\n    }\r\n    constructor(editor, contextKeyService, storageService, clipboardService, notificationService) {\r\n        super();\r\n        this._editor = editor;\r\n        this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\r\n        this._contextKeyService = contextKeyService;\r\n        this._storageService = storageService;\r\n        this._clipboardService = clipboardService;\r\n        this._notificationService = notificationService;\r\n        this._updateHistoryDelayer = new Delayer(500);\r\n        this._state = this._register(new FindReplaceState());\r\n        this.loadQueryState();\r\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\r\n        this._model = null;\r\n        this._register(this._editor.onDidChangeModel(() => {\r\n            const shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\r\n            this.disposeModel();\r\n            this._state.change({\r\n                searchScope: null,\r\n                matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, false),\r\n                wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, false),\r\n                isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, false),\r\n                preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, false)\r\n            }, false);\r\n            if (shouldRestartFind) {\r\n                this._start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: 'none',\r\n                    seedSearchStringFromNonEmptySelection: false,\r\n                    seedSearchStringFromGlobalClipboard: false,\r\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\r\n                    shouldAnimate: false,\r\n                    updateSearchScope: false,\r\n                    loop: this._editor.getOption(41 /* EditorOption.find */).loop\r\n                });\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        this.disposeModel();\r\n        super.dispose();\r\n    }\r\n    disposeModel() {\r\n        if (this._model) {\r\n            this._model.dispose();\r\n            this._model = null;\r\n        }\r\n    }\r\n    _onStateChanged(e) {\r\n        this.saveQueryState(e);\r\n        if (e.isRevealed) {\r\n            if (this._state.isRevealed) {\r\n                this._findWidgetVisible.set(true);\r\n            }\r\n            else {\r\n                this._findWidgetVisible.reset();\r\n                this.disposeModel();\r\n            }\r\n        }\r\n        if (e.searchString) {\r\n            this.setGlobalBufferTerm(this._state.searchString);\r\n        }\r\n    }\r\n    saveQueryState(e) {\r\n        if (e.isRegex) {\r\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\r\n        }\r\n        if (e.wholeWord) {\r\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\r\n        }\r\n        if (e.matchCase) {\r\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\r\n        }\r\n        if (e.preserveCase) {\r\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\r\n        }\r\n    }\r\n    loadQueryState() {\r\n        this._state.change({\r\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, this._state.matchCase),\r\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, this._state.wholeWord),\r\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, this._state.isRegex),\r\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, this._state.preserveCase)\r\n        }, false);\r\n    }\r\n    isFindInputFocused() {\r\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\r\n    }\r\n    getState() {\r\n        return this._state;\r\n    }\r\n    closeFindWidget() {\r\n        this._state.change({\r\n            isRevealed: false,\r\n            searchScope: null\r\n        }, false);\r\n        this._editor.focus();\r\n    }\r\n    toggleCaseSensitive() {\r\n        this._state.change({ matchCase: !this._state.matchCase }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    }\r\n    toggleWholeWords() {\r\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    }\r\n    toggleRegex() {\r\n        this._state.change({ isRegex: !this._state.isRegex }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    }\r\n    togglePreserveCase() {\r\n        this._state.change({ preserveCase: !this._state.preserveCase }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    }\r\n    toggleSearchScope() {\r\n        if (this._state.searchScope) {\r\n            this._state.change({ searchScope: null }, true);\r\n        }\r\n        else {\r\n            if (this._editor.hasModel()) {\r\n                const selections = this._editor.getSelections();\r\n                selections.map(selection => {\r\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                    }\r\n                    if (!selection.isEmpty()) {\r\n                        return selection;\r\n                    }\r\n                    return null;\r\n                }).filter(element => !!element);\r\n                if (selections.length) {\r\n                    this._state.change({ searchScope: selections }, true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setSearchString(searchString) {\r\n        if (this._state.isRegex) {\r\n            searchString = strings.escapeRegExpCharacters(searchString);\r\n        }\r\n        this._state.change({ searchString: searchString }, false);\r\n    }\r\n    highlightFindOptions(ignoreWhenVisible = false) {\r\n        // overwritten in subclass\r\n    }\r\n    _start(opts, newState) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.disposeModel();\r\n            if (!this._editor.hasModel()) {\r\n                // cannot do anything with an editor that doesn't have a model...\r\n                return;\r\n            }\r\n            const stateChanges = Object.assign(Object.assign({}, newState), { isRevealed: true });\r\n            if (opts.seedSearchStringFromSelection === 'single') {\r\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\r\n                if (selectionSearchString) {\r\n                    if (this._state.isRegex) {\r\n                        stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\r\n                    }\r\n                    else {\r\n                        stateChanges.searchString = selectionSearchString;\r\n                    }\r\n                }\r\n            }\r\n            else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\r\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\r\n                if (selectionSearchString) {\r\n                    stateChanges.searchString = selectionSearchString;\r\n                }\r\n            }\r\n            if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\r\n                const selectionSearchString = yield this.getGlobalBufferTerm();\r\n                if (!this._editor.hasModel()) {\r\n                    // the editor has lost its model in the meantime\r\n                    return;\r\n                }\r\n                if (selectionSearchString) {\r\n                    stateChanges.searchString = selectionSearchString;\r\n                }\r\n            }\r\n            // Overwrite isReplaceRevealed\r\n            if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\r\n                stateChanges.isReplaceRevealed = true;\r\n            }\r\n            else if (!this._findWidgetVisible.get()) {\r\n                stateChanges.isReplaceRevealed = false;\r\n            }\r\n            if (opts.updateSearchScope) {\r\n                const currentSelections = this._editor.getSelections();\r\n                if (currentSelections.some(selection => !selection.isEmpty())) {\r\n                    stateChanges.searchScope = currentSelections;\r\n                }\r\n            }\r\n            stateChanges.loop = opts.loop;\r\n            this._state.change(stateChanges, false);\r\n            if (!this._model) {\r\n                this._model = new FindModelBoundToEditorModel(this._editor, this._state);\r\n            }\r\n        });\r\n    }\r\n    start(opts, newState) {\r\n        return this._start(opts, newState);\r\n    }\r\n    moveToNextMatch() {\r\n        if (this._model) {\r\n            this._model.moveToNextMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    moveToPrevMatch() {\r\n        if (this._model) {\r\n            this._model.moveToPrevMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    goToMatch(index) {\r\n        if (this._model) {\r\n            this._model.moveToMatch(index);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    replace() {\r\n        if (this._model) {\r\n            this._model.replace();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    replaceAll() {\r\n        var _a;\r\n        if (this._model) {\r\n            if ((_a = this._editor.getModel()) === null || _a === void 0 ? void 0 : _a.isTooLargeForHeapOperation()) {\r\n                this._notificationService.warn(nls.localize('too.large.for.replaceall', \"The file is too large to perform a replace all operation.\"));\r\n                return false;\r\n            }\r\n            this._model.replaceAll();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    selectAllMatches() {\r\n        if (this._model) {\r\n            this._model.selectAllMatches();\r\n            this._editor.focus();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getGlobalBufferTerm() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._editor.getOption(41 /* EditorOption.find */).globalFindClipboard\r\n                && this._editor.hasModel()\r\n                && !this._editor.getModel().isTooLargeForSyncing()) {\r\n                return this._clipboardService.readFindText();\r\n            }\r\n            return '';\r\n        });\r\n    }\r\n    setGlobalBufferTerm(text) {\r\n        if (this._editor.getOption(41 /* EditorOption.find */).globalFindClipboard\r\n            && this._editor.hasModel()\r\n            && !this._editor.getModel().isTooLargeForSyncing()) {\r\n            // intentionally not awaited\r\n            this._clipboardService.writeFindText(text);\r\n        }\r\n    }\r\n};\r\nCommonFindController.ID = 'editor.contrib.findController';\r\nCommonFindController = CommonFindController_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, IStorageService),\r\n    __param(3, IClipboardService),\r\n    __param(4, INotificationService)\r\n], CommonFindController);\r\nexport { CommonFindController };\r\nlet FindController = class FindController extends CommonFindController {\r\n    constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, notificationService, _storageService, clipboardService) {\r\n        super(editor, _contextKeyService, _storageService, clipboardService, notificationService);\r\n        this._contextViewService = _contextViewService;\r\n        this._keybindingService = _keybindingService;\r\n        this._themeService = _themeService;\r\n        this._widget = null;\r\n        this._findOptionsWidget = null;\r\n    }\r\n    _start(opts, newState) {\r\n        const _super = Object.create(null, {\r\n            _start: { get: () => super._start }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._widget) {\r\n                this._createFindWidget();\r\n            }\r\n            const selection = this._editor.getSelection();\r\n            let updateSearchScope = false;\r\n            switch (this._editor.getOption(41 /* EditorOption.find */).autoFindInSelection) {\r\n                case 'always':\r\n                    updateSearchScope = true;\r\n                    break;\r\n                case 'never':\r\n                    updateSearchScope = false;\r\n                    break;\r\n                case 'multiline': {\r\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\r\n                    updateSearchScope = isSelectionMultipleLine;\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n            opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\r\n            yield _super._start.call(this, opts, newState);\r\n            if (this._widget) {\r\n                if (opts.shouldFocus === 2 /* FindStartFocusAction.FocusReplaceInput */) {\r\n                    this._widget.focusReplaceInput();\r\n                }\r\n                else if (opts.shouldFocus === 1 /* FindStartFocusAction.FocusFindInput */) {\r\n                    this._widget.focusFindInput();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    highlightFindOptions(ignoreWhenVisible = false) {\r\n        if (!this._widget) {\r\n            this._createFindWidget();\r\n        }\r\n        if (this._state.isRevealed && !ignoreWhenVisible) {\r\n            this._widget.highlightFindOptions();\r\n        }\r\n        else {\r\n            this._findOptionsWidget.highlightFindOptions();\r\n        }\r\n    }\r\n    _createFindWidget() {\r\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\r\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService));\r\n    }\r\n};\r\nFindController = __decorate([\r\n    __param(1, IContextViewService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, IKeybindingService),\r\n    __param(4, IThemeService),\r\n    __param(5, INotificationService),\r\n    __param(6, IStorageService),\r\n    __param(7, IClipboardService)\r\n], FindController);\r\nexport { FindController };\r\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\r\n    id: FIND_IDS.StartFindAction,\r\n    label: nls.localize('startFindAction', \"Find\"),\r\n    alias: 'Find',\r\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\r\n    kbOpts: {\r\n        kbExpr: null,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */,\r\n        weight: 100 /* KeybindingWeight.EditorContrib */\r\n    },\r\n    menuOpts: {\r\n        menuId: MenuId.MenubarEditMenu,\r\n        group: '3_find',\r\n        title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\r\n        order: 1\r\n    }\r\n}));\r\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\r\n    const controller = CommonFindController.get(editor);\r\n    if (!controller) {\r\n        return false;\r\n    }\r\n    return controller.start({\r\n        forceRevealReplace: false,\r\n        seedSearchStringFromSelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\r\n        seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\r\n        seedSearchStringFromGlobalClipboard: editor.getOption(41 /* EditorOption.find */).globalFindClipboard,\r\n        shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\r\n        shouldAnimate: true,\r\n        updateSearchScope: false,\r\n        loop: editor.getOption(41 /* EditorOption.find */).loop\r\n    });\r\n});\r\nconst findArgDescription = {\r\n    description: 'Open a new In-Editor Find Widget.',\r\n    args: [{\r\n            name: 'Open a new In-Editor Find Widget args',\r\n            schema: {\r\n                properties: {\r\n                    searchString: { type: 'string' },\r\n                    replaceString: { type: 'string' },\r\n                    regex: { type: 'boolean' },\r\n                    regexOverride: {\r\n                        type: 'number',\r\n                        description: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\r\n                    },\r\n                    wholeWord: { type: 'boolean' },\r\n                    wholeWordOverride: {\r\n                        type: 'number',\r\n                        description: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\r\n                    },\r\n                    matchCase: { type: 'boolean' },\r\n                    matchCaseOverride: {\r\n                        type: 'number',\r\n                        description: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\r\n                    },\r\n                    preserveCase: { type: 'boolean' },\r\n                    preserveCaseOverride: {\r\n                        type: 'number',\r\n                        description: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\r\n                    },\r\n                    findInSelection: { type: 'boolean' },\r\n                }\r\n            }\r\n        }]\r\n};\r\nexport class StartFindWithArgsAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: FIND_IDS.StartFindWithArgs,\r\n            label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\r\n            alias: 'Find With Arguments',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 0,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            description: findArgDescription\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = CommonFindController.get(editor);\r\n            if (controller) {\r\n                const newState = args ? {\r\n                    searchString: args.searchString,\r\n                    replaceString: args.replaceString,\r\n                    isReplaceRevealed: args.replaceString !== undefined,\r\n                    isRegex: args.isRegex,\r\n                    // isRegexOverride: args.regexOverride,\r\n                    wholeWord: args.matchWholeWord,\r\n                    // wholeWordOverride: args.wholeWordOverride,\r\n                    matchCase: args.isCaseSensitive,\r\n                    // matchCaseOverride: args.matchCaseOverride,\r\n                    preserveCase: args.preserveCase,\r\n                    // preserveCaseOverride: args.preserveCaseOverride,\r\n                } : {};\r\n                yield controller.start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\r\n                    seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\r\n                    seedSearchStringFromGlobalClipboard: true,\r\n                    shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\r\n                    shouldAnimate: true,\r\n                    updateSearchScope: (args === null || args === void 0 ? void 0 : args.findInSelection) || false,\r\n                    loop: editor.getOption(41 /* EditorOption.find */).loop\r\n                }, newState);\r\n                controller.setGlobalBufferTerm(controller.getState().searchString);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class StartFindWithSelectionAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: FIND_IDS.StartFindWithSelection,\r\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\r\n            alias: 'Find With Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 0,\r\n                mac: {\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */,\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = CommonFindController.get(editor);\r\n            if (controller) {\r\n                yield controller.start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: 'multiple',\r\n                    seedSearchStringFromNonEmptySelection: false,\r\n                    seedSearchStringFromGlobalClipboard: false,\r\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\r\n                    shouldAnimate: true,\r\n                    updateSearchScope: false,\r\n                    loop: editor.getOption(41 /* EditorOption.find */).loop\r\n                });\r\n                controller.setGlobalBufferTerm(controller.getState().searchString);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class MatchFindAction extends EditorAction {\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = CommonFindController.get(editor);\r\n            if (controller && !this._run(controller)) {\r\n                yield controller.start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\r\n                    seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\r\n                    seedSearchStringFromGlobalClipboard: true,\r\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\r\n                    shouldAnimate: true,\r\n                    updateSearchScope: false,\r\n                    loop: editor.getOption(41 /* EditorOption.find */).loop\r\n                });\r\n                this._run(controller);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class NextMatchFindAction extends MatchFindAction {\r\n    constructor() {\r\n        super({\r\n            id: FIND_IDS.NextMatchFindAction,\r\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\r\n            alias: 'Find Next',\r\n            precondition: undefined,\r\n            kbOpts: [{\r\n                    kbExpr: EditorContextKeys.focus,\r\n                    primary: 61 /* KeyCode.F3 */,\r\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */, secondary: [61 /* KeyCode.F3 */] },\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                }, {\r\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                    primary: 3 /* KeyCode.Enter */,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                }]\r\n        });\r\n    }\r\n    _run(controller) {\r\n        const result = controller.moveToNextMatch();\r\n        if (result) {\r\n            controller.editor.pushUndoStop();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport class PreviousMatchFindAction extends MatchFindAction {\r\n    constructor() {\r\n        super({\r\n            id: FIND_IDS.PreviousMatchFindAction,\r\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\r\n            alias: 'Find Previous',\r\n            precondition: undefined,\r\n            kbOpts: [{\r\n                    kbExpr: EditorContextKeys.focus,\r\n                    primary: 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\r\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 37 /* KeyCode.KeyG */, secondary: [1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */] },\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                }, {\r\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                    primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                }\r\n            ]\r\n        });\r\n    }\r\n    _run(controller) {\r\n        return controller.moveToPrevMatch();\r\n    }\r\n}\r\nexport class MoveToMatchFindAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: FIND_IDS.GoToMatchFindAction,\r\n            label: nls.localize('findMatchAction.goToMatch', \"Go to Match...\"),\r\n            alias: 'Go to Match...',\r\n            precondition: CONTEXT_FIND_WIDGET_VISIBLE\r\n        });\r\n        this._highlightDecorations = [];\r\n    }\r\n    run(accessor, editor, args) {\r\n        const controller = CommonFindController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        const matchesCount = controller.getState().matchesCount;\r\n        if (matchesCount < 1) {\r\n            const notificationService = accessor.get(INotificationService);\r\n            notificationService.notify({\r\n                severity: Severity.Warning,\r\n                message: nls.localize('findMatchAction.noResults', \"No matches. Try searching for something else.\")\r\n            });\r\n            return;\r\n        }\r\n        const quickInputService = accessor.get(IQuickInputService);\r\n        const inputBox = quickInputService.createInputBox();\r\n        inputBox.placeholder = nls.localize('findMatchAction.inputPlaceHolder', \"Type a number to go to a specific match (between 1 and {0})\", matchesCount);\r\n        const toFindMatchIndex = (value) => {\r\n            const index = parseInt(value);\r\n            if (isNaN(index)) {\r\n                return undefined;\r\n            }\r\n            const matchCount = controller.getState().matchesCount;\r\n            if (index > 0 && index <= matchCount) {\r\n                return index - 1; // zero based\r\n            }\r\n            else if (index < 0 && index >= -matchCount) {\r\n                return matchCount + index;\r\n            }\r\n            return undefined;\r\n        };\r\n        const updatePickerAndEditor = (value) => {\r\n            const index = toFindMatchIndex(value);\r\n            if (typeof index === 'number') {\r\n                // valid\r\n                inputBox.validationMessage = undefined;\r\n                controller.goToMatch(index);\r\n                const currentMatch = controller.getState().currentMatch;\r\n                if (currentMatch) {\r\n                    this.addDecorations(editor, currentMatch);\r\n                }\r\n            }\r\n            else {\r\n                inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\r\n                this.clearDecorations(editor);\r\n            }\r\n        };\r\n        inputBox.onDidChangeValue(value => {\r\n            updatePickerAndEditor(value);\r\n        });\r\n        inputBox.onDidAccept(() => {\r\n            const index = toFindMatchIndex(inputBox.value);\r\n            if (typeof index === 'number') {\r\n                controller.goToMatch(index);\r\n                inputBox.hide();\r\n            }\r\n            else {\r\n                inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\r\n            }\r\n        });\r\n        inputBox.onDidHide(() => {\r\n            this.clearDecorations(editor);\r\n            inputBox.dispose();\r\n        });\r\n        inputBox.show();\r\n    }\r\n    clearDecorations(editor) {\r\n        editor.changeDecorations(changeAccessor => {\r\n            this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, []);\r\n        });\r\n    }\r\n    addDecorations(editor, range) {\r\n        editor.changeDecorations(changeAccessor => {\r\n            this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, [\r\n                {\r\n                    range,\r\n                    options: {\r\n                        description: 'find-match-quick-access-range-highlight',\r\n                        className: 'rangeHighlight',\r\n                        isWholeLine: true\r\n                    }\r\n                },\r\n                {\r\n                    range,\r\n                    options: {\r\n                        description: 'find-match-quick-access-range-highlight-overview',\r\n                        overviewRuler: {\r\n                            color: themeColorFromId(overviewRulerRangeHighlight),\r\n                            position: OverviewRulerLane.Full\r\n                        }\r\n                    }\r\n                }\r\n            ]);\r\n        });\r\n    }\r\n}\r\nexport class SelectionMatchFindAction extends EditorAction {\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = CommonFindController.get(editor);\r\n            if (!controller) {\r\n                return;\r\n            }\r\n            const selectionSearchString = getSelectionSearchString(editor, 'single', false);\r\n            if (selectionSearchString) {\r\n                controller.setSearchString(selectionSearchString);\r\n            }\r\n            if (!this._run(controller)) {\r\n                yield controller.start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: 'none',\r\n                    seedSearchStringFromNonEmptySelection: false,\r\n                    seedSearchStringFromGlobalClipboard: false,\r\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\r\n                    shouldAnimate: true,\r\n                    updateSearchScope: false,\r\n                    loop: editor.getOption(41 /* EditorOption.find */).loop\r\n                });\r\n                this._run(controller);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\r\n    constructor() {\r\n        super({\r\n            id: FIND_IDS.NextSelectionMatchFindAction,\r\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\r\n            alias: 'Find Next Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 61 /* KeyCode.F3 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    _run(controller) {\r\n        return controller.moveToNextMatch();\r\n    }\r\n}\r\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\r\n    constructor() {\r\n        super({\r\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\r\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\r\n            alias: 'Find Previous Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    _run(controller) {\r\n        return controller.moveToPrevMatch();\r\n    }\r\n}\r\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\r\n    id: FIND_IDS.StartFindReplaceAction,\r\n    label: nls.localize('startReplace', \"Replace\"),\r\n    alias: 'Replace',\r\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\r\n    kbOpts: {\r\n        kbExpr: null,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */,\r\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */ },\r\n        weight: 100 /* KeybindingWeight.EditorContrib */\r\n    },\r\n    menuOpts: {\r\n        menuId: MenuId.MenubarEditMenu,\r\n        group: '3_find',\r\n        title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\r\n        order: 2\r\n    }\r\n}));\r\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\r\n    if (!editor.hasModel() || editor.getOption(90 /* EditorOption.readOnly */)) {\r\n        return false;\r\n    }\r\n    const controller = CommonFindController.get(editor);\r\n    if (!controller) {\r\n        return false;\r\n    }\r\n    const currentSelection = editor.getSelection();\r\n    const findInputFocused = controller.isFindInputFocused();\r\n    // we only seed search string from selection when the current selection is single line and not empty,\r\n    // + the find input is not focused\r\n    const seedSearchStringFromSelection = !currentSelection.isEmpty()\r\n        && currentSelection.startLineNumber === currentSelection.endLineNumber\r\n        && (editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never')\r\n        && !findInputFocused;\r\n    /*\r\n    * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\r\n\r\n    * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\r\n    * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\r\n    * findInputFocused false seedSearchStringFromSelection false FocusFindInput\r\n    */\r\n    const shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\r\n        2 /* FindStartFocusAction.FocusReplaceInput */ : 1 /* FindStartFocusAction.FocusFindInput */;\r\n    return controller.start({\r\n        forceRevealReplace: true,\r\n        seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\r\n        seedSearchStringFromNonEmptySelection: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\r\n        seedSearchStringFromGlobalClipboard: editor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection !== 'never',\r\n        shouldFocus: shouldFocus,\r\n        shouldAnimate: true,\r\n        updateSearchScope: false,\r\n        loop: editor.getOption(41 /* EditorOption.find */).loop\r\n    });\r\n});\r\nregisterEditorContribution(CommonFindController.ID, FindController, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\r\nregisterEditorAction(StartFindWithArgsAction);\r\nregisterEditorAction(StartFindWithSelectionAction);\r\nregisterEditorAction(NextMatchFindAction);\r\nregisterEditorAction(PreviousMatchFindAction);\r\nregisterEditorAction(MoveToMatchFindAction);\r\nregisterEditorAction(NextSelectionMatchFindAction);\r\nregisterEditorAction(PreviousSelectionMatchFindAction);\r\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.CloseFindWidgetCommand,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: x => x.closeFindWidget(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\r\n    precondition: undefined,\r\n    handler: x => x.toggleCaseSensitive(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleCaseSensitiveKeybinding.primary,\r\n        mac: ToggleCaseSensitiveKeybinding.mac,\r\n        win: ToggleCaseSensitiveKeybinding.win,\r\n        linux: ToggleCaseSensitiveKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleWholeWordCommand,\r\n    precondition: undefined,\r\n    handler: x => x.toggleWholeWords(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleWholeWordKeybinding.primary,\r\n        mac: ToggleWholeWordKeybinding.mac,\r\n        win: ToggleWholeWordKeybinding.win,\r\n        linux: ToggleWholeWordKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleRegexCommand,\r\n    precondition: undefined,\r\n    handler: x => x.toggleRegex(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleRegexKeybinding.primary,\r\n        mac: ToggleRegexKeybinding.mac,\r\n        win: ToggleRegexKeybinding.win,\r\n        linux: ToggleRegexKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleSearchScopeCommand,\r\n    precondition: undefined,\r\n    handler: x => x.toggleSearchScope(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleSearchScopeKeybinding.primary,\r\n        mac: ToggleSearchScopeKeybinding.mac,\r\n        win: ToggleSearchScopeKeybinding.win,\r\n        linux: ToggleSearchScopeKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.TogglePreserveCaseCommand,\r\n    precondition: undefined,\r\n    handler: x => x.togglePreserveCase(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: TogglePreserveCaseKeybinding.primary,\r\n        mac: TogglePreserveCaseKeybinding.mac,\r\n        win: TogglePreserveCaseKeybinding.win,\r\n        linux: TogglePreserveCaseKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: x => x.replace(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 22 /* KeyCode.Digit1 */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: x => x.replace(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: 3 /* KeyCode.Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: x => x.replaceAll(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: x => x.replaceAll(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: undefined,\r\n        mac: {\r\n            primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\r\n        }\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.SelectAllMatchesAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: x => x.selectAllMatches(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\r\n    }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { findFirstIdxMonotonousOrArrLen } from '../../../../base/common/arraysFind.js';\r\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\r\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\r\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\r\nimport { FindDecorations } from './findDecorations.js';\r\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\r\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\r\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\r\n// Keep ContextKey use of 'Focussed' to not break when clauses\r\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\r\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\r\nexport const ToggleCaseSensitiveKeybinding = {\r\n    primary: 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */,\r\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */ }\r\n};\r\nexport const ToggleWholeWordKeybinding = {\r\n    primary: 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */,\r\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */ }\r\n};\r\nexport const ToggleRegexKeybinding = {\r\n    primary: 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */,\r\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */ }\r\n};\r\nexport const ToggleSearchScopeKeybinding = {\r\n    primary: 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */,\r\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */ }\r\n};\r\nexport const TogglePreserveCaseKeybinding = {\r\n    primary: 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */,\r\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */ }\r\n};\r\nexport const FIND_IDS = {\r\n    StartFindAction: 'actions.find',\r\n    StartFindWithSelection: 'actions.findWithSelection',\r\n    StartFindWithArgs: 'editor.actions.findWithArgs',\r\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\r\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\r\n    GoToMatchFindAction: 'editor.action.goToMatchFindAction',\r\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\r\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\r\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\r\n    CloseFindWidgetCommand: 'closeFindWidget',\r\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\r\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\r\n    ToggleRegexCommand: 'toggleFindRegex',\r\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\r\n    TogglePreserveCaseCommand: 'togglePreserveCase',\r\n    ReplaceOneAction: 'editor.action.replaceOne',\r\n    ReplaceAllAction: 'editor.action.replaceAll',\r\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\r\n};\r\nexport const MATCHES_LIMIT = 19999;\r\nconst RESEARCH_DELAY = 240;\r\nexport class FindModelBoundToEditorModel {\r\n    constructor(editor, state) {\r\n        this._toDispose = new DisposableStore();\r\n        this._editor = editor;\r\n        this._state = state;\r\n        this._isDisposed = false;\r\n        this._startSearchingTimer = new TimeoutTimer();\r\n        this._decorations = new FindDecorations(editor);\r\n        this._toDispose.add(this._decorations);\r\n        this._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\r\n        this._toDispose.add(this._updateDecorationsScheduler);\r\n        this._toDispose.add(this._editor.onDidChangeCursorPosition((e) => {\r\n            if (e.reason === 3 /* CursorChangeReason.Explicit */\r\n                || e.reason === 5 /* CursorChangeReason.Undo */\r\n                || e.reason === 6 /* CursorChangeReason.Redo */) {\r\n                this._decorations.setStartPosition(this._editor.getPosition());\r\n            }\r\n        }));\r\n        this._ignoreModelContentChanged = false;\r\n        this._toDispose.add(this._editor.onDidChangeModelContent((e) => {\r\n            if (this._ignoreModelContentChanged) {\r\n                return;\r\n            }\r\n            if (e.isFlush) {\r\n                // a model.setValue() was called\r\n                this._decorations.reset();\r\n            }\r\n            this._decorations.setStartPosition(this._editor.getPosition());\r\n            this._updateDecorationsScheduler.schedule();\r\n        }));\r\n        this._toDispose.add(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\r\n        this.research(false, this._state.searchScope);\r\n    }\r\n    dispose() {\r\n        this._isDisposed = true;\r\n        dispose(this._startSearchingTimer);\r\n        this._toDispose.dispose();\r\n    }\r\n    _onStateChanged(e) {\r\n        if (this._isDisposed) {\r\n            // The find model is disposed during a find state changed event\r\n            return;\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            // The find model will be disposed momentarily\r\n            return;\r\n        }\r\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\r\n            const model = this._editor.getModel();\r\n            if (model.isTooLargeForSyncing()) {\r\n                this._startSearchingTimer.cancel();\r\n                this._startSearchingTimer.setIfNotSet(() => {\r\n                    if (e.searchScope) {\r\n                        this.research(e.moveCursor, this._state.searchScope);\r\n                    }\r\n                    else {\r\n                        this.research(e.moveCursor);\r\n                    }\r\n                }, RESEARCH_DELAY);\r\n            }\r\n            else {\r\n                if (e.searchScope) {\r\n                    this.research(e.moveCursor, this._state.searchScope);\r\n                }\r\n                else {\r\n                    this.research(e.moveCursor);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static _getSearchRange(model, findScope) {\r\n        // If we have set now or before a find scope, use it for computing the search range\r\n        if (findScope) {\r\n            return findScope;\r\n        }\r\n        return model.getFullModelRange();\r\n    }\r\n    research(moveCursor, newFindScope) {\r\n        let findScopes = null;\r\n        if (typeof newFindScope !== 'undefined') {\r\n            if (newFindScope !== null) {\r\n                if (!Array.isArray(newFindScope)) {\r\n                    findScopes = [newFindScope];\r\n                }\r\n                else {\r\n                    findScopes = newFindScope;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            findScopes = this._decorations.getFindScopes();\r\n        }\r\n        if (findScopes !== null) {\r\n            findScopes = findScopes.map(findScope => {\r\n                if (findScope.startLineNumber !== findScope.endLineNumber) {\r\n                    let endLineNumber = findScope.endLineNumber;\r\n                    if (findScope.endColumn === 1) {\r\n                        endLineNumber = endLineNumber - 1;\r\n                    }\r\n                    return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\r\n                }\r\n                return findScope;\r\n            });\r\n        }\r\n        const findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\r\n        this._decorations.set(findMatches, findScopes);\r\n        const editorSelection = this._editor.getSelection();\r\n        let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\r\n        if (currentMatchesPosition === 0 && findMatches.length > 0) {\r\n            // current selection is not on top of a match\r\n            // try to find its nearest result from the top of the document\r\n            const matchAfterSelection = findFirstIdxMonotonousOrArrLen(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\r\n            currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\r\n        }\r\n        this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\r\n        if (moveCursor && this._editor.getOption(41 /* EditorOption.find */).cursorMoveOnType) {\r\n            this._moveToNextMatch(this._decorations.getStartPosition());\r\n        }\r\n    }\r\n    _hasMatches() {\r\n        return (this._state.matchesCount > 0);\r\n    }\r\n    _cannotFind() {\r\n        if (!this._hasMatches()) {\r\n            const findScope = this._decorations.getFindScope();\r\n            if (findScope) {\r\n                // Reveal the selection so user is reminded that 'selection find' is on.\r\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* ScrollType.Smooth */);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _setCurrentFindMatch(match) {\r\n        const matchesPosition = this._decorations.setCurrentFindMatch(match);\r\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\r\n        this._editor.setSelection(match);\r\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* ScrollType.Smooth */);\r\n    }\r\n    _prevSearchPosition(before) {\r\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        let { lineNumber, column } = before;\r\n        const model = this._editor.getModel();\r\n        if (isUsingLineStops || column === 1) {\r\n            if (lineNumber === 1) {\r\n                lineNumber = model.getLineCount();\r\n            }\r\n            else {\r\n                lineNumber--;\r\n            }\r\n            column = model.getLineMaxColumn(lineNumber);\r\n        }\r\n        else {\r\n            column--;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    }\r\n    _moveToPrevMatch(before, isRecursed = false) {\r\n        if (!this._state.canNavigateBack()) {\r\n            // we are beyond the first matched find result\r\n            // instead of doing nothing, we should refocus the first item\r\n            const nextMatchRange = this._decorations.matchAfterPosition(before);\r\n            if (nextMatchRange) {\r\n                this._setCurrentFindMatch(nextMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            let prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\r\n                before = this._prevSearchPosition(before);\r\n                prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            }\r\n            if (prevMatchRange) {\r\n                this._setCurrentFindMatch(prevMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        if (this._cannotFind()) {\r\n            return;\r\n        }\r\n        const findScope = this._decorations.getFindScope();\r\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(before)) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (before.isBefore(searchRange.getStartPosition())) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        const { lineNumber, column } = before;\r\n        const model = this._editor.getModel();\r\n        let position = new Position(lineNumber, column);\r\n        let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false);\r\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._prevSearchPosition(position);\r\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false);\r\n        }\r\n        if (!prevMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\r\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\r\n        }\r\n        this._setCurrentFindMatch(prevMatch.range);\r\n    }\r\n    moveToPrevMatch() {\r\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\r\n    }\r\n    _nextSearchPosition(after) {\r\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        let { lineNumber, column } = after;\r\n        const model = this._editor.getModel();\r\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\r\n            if (lineNumber === model.getLineCount()) {\r\n                lineNumber = 1;\r\n            }\r\n            else {\r\n                lineNumber++;\r\n            }\r\n            column = 1;\r\n        }\r\n        else {\r\n            column++;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    }\r\n    _moveToNextMatch(after) {\r\n        if (!this._state.canNavigateForward()) {\r\n            // we are beyond the last matched find result\r\n            // instead of doing nothing, we should refocus the last item\r\n            const prevMatchRange = this._decorations.matchBeforePosition(after);\r\n            if (prevMatchRange) {\r\n                this._setCurrentFindMatch(prevMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            let nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\r\n                // Looks like we're stuck at this position, unacceptable!\r\n                after = this._nextSearchPosition(after);\r\n                nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            }\r\n            if (nextMatchRange) {\r\n                this._setCurrentFindMatch(nextMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        const nextMatch = this._getNextMatch(after, false, true);\r\n        if (nextMatch) {\r\n            this._setCurrentFindMatch(nextMatch.range);\r\n        }\r\n    }\r\n    _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\r\n        if (this._cannotFind()) {\r\n            return null;\r\n        }\r\n        const findScope = this._decorations.getFindScope();\r\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(after)) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (after.isBefore(searchRange.getStartPosition())) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        const { lineNumber, column } = after;\r\n        const model = this._editor.getModel();\r\n        let position = new Position(lineNumber, column);\r\n        let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, captureMatches);\r\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._nextSearchPosition(position);\r\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, captureMatches);\r\n        }\r\n        if (!nextMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return null;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\r\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\r\n        }\r\n        return nextMatch;\r\n    }\r\n    moveToNextMatch() {\r\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\r\n    }\r\n    _moveToMatch(index) {\r\n        const decorationRange = this._decorations.getDecorationRangeAt(index);\r\n        if (decorationRange) {\r\n            this._setCurrentFindMatch(decorationRange);\r\n        }\r\n    }\r\n    moveToMatch(index) {\r\n        this._moveToMatch(index);\r\n    }\r\n    _getReplacePattern() {\r\n        if (this._state.isRegex) {\r\n            return parseReplaceString(this._state.replaceString);\r\n        }\r\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\r\n    }\r\n    replace() {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        const replacePattern = this._getReplacePattern();\r\n        const selection = this._editor.getSelection();\r\n        const nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\r\n        if (nextMatch) {\r\n            if (selection.equalsRange(nextMatch.range)) {\r\n                // selection sits on a find match => replace it!\r\n                const replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\r\n                const command = new ReplaceCommand(selection, replaceString);\r\n                this._executeEditorCommand('replace', command);\r\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\r\n                this.research(true);\r\n            }\r\n            else {\r\n                this._decorations.setStartPosition(this._editor.getPosition());\r\n                this._setCurrentFindMatch(nextMatch.range);\r\n            }\r\n        }\r\n    }\r\n    _findMatches(findScopes, captureMatches, limitResultCount) {\r\n        const searchRanges = (findScopes || [null]).map((scope) => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\r\n        return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, captureMatches, limitResultCount);\r\n    }\r\n    replaceAll() {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        const findScopes = this._decorations.getFindScopes();\r\n        if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\r\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\r\n            this._largeReplaceAll();\r\n        }\r\n        else {\r\n            this._regularReplaceAll(findScopes);\r\n        }\r\n        this.research(false);\r\n    }\r\n    _largeReplaceAll() {\r\n        const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null);\r\n        const searchData = searchParams.parseSearchRequest();\r\n        if (!searchData) {\r\n            return;\r\n        }\r\n        let searchRegex = searchData.regex;\r\n        if (!searchRegex.multiline) {\r\n            let mod = 'mu';\r\n            if (searchRegex.ignoreCase) {\r\n                mod += 'i';\r\n            }\r\n            if (searchRegex.global) {\r\n                mod += 'g';\r\n            }\r\n            searchRegex = new RegExp(searchRegex.source, mod);\r\n        }\r\n        const model = this._editor.getModel();\r\n        const modelText = model.getValue(1 /* EndOfLinePreference.LF */);\r\n        const fullModelRange = model.getFullModelRange();\r\n        const replacePattern = this._getReplacePattern();\r\n        let resultText;\r\n        const preserveCase = this._state.preserveCase;\r\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\r\n            resultText = modelText.replace(searchRegex, function () {\r\n                return replacePattern.buildReplaceString(arguments, preserveCase);\r\n            });\r\n        }\r\n        else {\r\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\r\n        }\r\n        const command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\r\n        this._executeEditorCommand('replaceAll', command);\r\n    }\r\n    _regularReplaceAll(findScopes) {\r\n        const replacePattern = this._getReplacePattern();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        const matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n        const replaceStrings = [];\r\n        for (let i = 0, len = matches.length; i < len; i++) {\r\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\r\n        }\r\n        const command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\r\n        this._executeEditorCommand('replaceAll', command);\r\n    }\r\n    selectAllMatches() {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        const findScopes = this._decorations.getFindScopes();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        const matches = this._findMatches(findScopes, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n        let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\r\n        // If one of the ranges is the editor selection, then maintain it as primary\r\n        const editorSelection = this._editor.getSelection();\r\n        for (let i = 0, len = selections.length; i < len; i++) {\r\n            const sel = selections[i];\r\n            if (sel.equalsRange(editorSelection)) {\r\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\r\n                break;\r\n            }\r\n        }\r\n        this._editor.setSelections(selections);\r\n    }\r\n    _executeEditorCommand(source, command) {\r\n        try {\r\n            this._ignoreModelContentChanged = true;\r\n            this._editor.pushUndoStop();\r\n            this._editor.executeCommand(source, command);\r\n            this._editor.pushUndoStop();\r\n        }\r\n        finally {\r\n            this._ignoreModelContentChanged = false;\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\r\nexport class FindDecorations {\r\n    constructor(editor) {\r\n        this._editor = editor;\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationIds = [];\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n        this._startPosition = this._editor.getPosition();\r\n    }\r\n    dispose() {\r\n        this._editor.removeDecorations(this._allDecorations());\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationIds = [];\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    }\r\n    reset() {\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationIds = [];\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    }\r\n    getCount() {\r\n        return this._decorations.length;\r\n    }\r\n    /** @deprecated use getFindScopes to support multiple selections */\r\n    getFindScope() {\r\n        if (this._findScopeDecorationIds[0]) {\r\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\r\n        }\r\n        return null;\r\n    }\r\n    getFindScopes() {\r\n        if (this._findScopeDecorationIds.length) {\r\n            const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\r\n            if (scopes.length) {\r\n                return scopes;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getStartPosition() {\r\n        return this._startPosition;\r\n    }\r\n    setStartPosition(newStartPosition) {\r\n        this._startPosition = newStartPosition;\r\n        this.setCurrentFindMatch(null);\r\n    }\r\n    _getDecorationIndex(decorationId) {\r\n        const index = this._decorations.indexOf(decorationId);\r\n        if (index >= 0) {\r\n            return index + 1;\r\n        }\r\n        return 1;\r\n    }\r\n    getDecorationRangeAt(index) {\r\n        const decorationId = index < this._decorations.length ? this._decorations[index] : null;\r\n        if (decorationId) {\r\n            return this._editor.getModel().getDecorationRange(decorationId);\r\n        }\r\n        return null;\r\n    }\r\n    getCurrentMatchesPosition(desiredRange) {\r\n        const candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\r\n        for (const candidate of candidates) {\r\n            const candidateOpts = candidate.options;\r\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\r\n                return this._getDecorationIndex(candidate.id);\r\n            }\r\n        }\r\n        // We don't know the current match position, so returns zero to show '?' in find widget\r\n        return 0;\r\n    }\r\n    setCurrentFindMatch(nextMatch) {\r\n        let newCurrentDecorationId = null;\r\n        let matchPosition = 0;\r\n        if (nextMatch) {\r\n            for (let i = 0, len = this._decorations.length; i < len; i++) {\r\n                const range = this._editor.getModel().getDecorationRange(this._decorations[i]);\r\n                if (nextMatch.equalsRange(range)) {\r\n                    newCurrentDecorationId = this._decorations[i];\r\n                    matchPosition = (i + 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\r\n            this._editor.changeDecorations((changeAccessor) => {\r\n                if (this._highlightedDecorationId !== null) {\r\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\r\n                    this._highlightedDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    this._highlightedDecorationId = newCurrentDecorationId;\r\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\r\n                }\r\n                if (this._rangeHighlightDecorationId !== null) {\r\n                    changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\r\n                    this._rangeHighlightDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\r\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\r\n                        const lineBeforeEnd = rng.endLineNumber - 1;\r\n                        const lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\r\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\r\n                    }\r\n                    this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\r\n                }\r\n            });\r\n        }\r\n        return matchPosition;\r\n    }\r\n    set(findMatches, findScopes) {\r\n        this._editor.changeDecorations((accessor) => {\r\n            let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\r\n            const newOverviewRulerApproximateDecorations = [];\r\n            if (findMatches.length > 1000) {\r\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\r\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\r\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\r\n                // approximate a distance in lines where matches should be merged\r\n                const lineCount = this._editor.getModel().getLineCount();\r\n                const height = this._editor.getLayoutInfo().height;\r\n                const approxPixelsPerLine = height / lineCount;\r\n                const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\r\n                // merge decorations as much as possible\r\n                let prevStartLineNumber = findMatches[0].range.startLineNumber;\r\n                let prevEndLineNumber = findMatches[0].range.endLineNumber;\r\n                for (let i = 1, len = findMatches.length; i < len; i++) {\r\n                    const range = findMatches[i].range;\r\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\r\n                        if (range.endLineNumber > prevEndLineNumber) {\r\n                            prevEndLineNumber = range.endLineNumber;\r\n                        }\r\n                    }\r\n                    else {\r\n                        newOverviewRulerApproximateDecorations.push({\r\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                        });\r\n                        prevStartLineNumber = range.startLineNumber;\r\n                        prevEndLineNumber = range.endLineNumber;\r\n                    }\r\n                }\r\n                newOverviewRulerApproximateDecorations.push({\r\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                });\r\n            }\r\n            // Find matches\r\n            const newFindMatchesDecorations = new Array(findMatches.length);\r\n            for (let i = 0, len = findMatches.length; i < len; i++) {\r\n                newFindMatchesDecorations[i] = {\r\n                    range: findMatches[i].range,\r\n                    options: findMatchesOptions\r\n                };\r\n            }\r\n            this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\r\n            // Overview ruler approximate decorations\r\n            this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\r\n            // Range highlight\r\n            if (this._rangeHighlightDecorationId) {\r\n                accessor.removeDecoration(this._rangeHighlightDecorationId);\r\n                this._rangeHighlightDecorationId = null;\r\n            }\r\n            // Find scope\r\n            if (this._findScopeDecorationIds.length) {\r\n                this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\r\n                this._findScopeDecorationIds = [];\r\n            }\r\n            if (findScopes === null || findScopes === void 0 ? void 0 : findScopes.length) {\r\n                this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\r\n            }\r\n        });\r\n    }\r\n    matchBeforePosition(position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (let i = this._decorations.length - 1; i >= 0; i--) {\r\n            const decorationId = this._decorations[i];\r\n            const r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.endLineNumber > position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.endLineNumber < position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.endColumn > position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\r\n    }\r\n    matchAfterPosition(position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (let i = 0, len = this._decorations.length; i < len; i++) {\r\n            const decorationId = this._decorations[i];\r\n            const r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.startLineNumber < position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.startLineNumber > position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.startColumn < position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\r\n    }\r\n    _allDecorations() {\r\n        let result = [];\r\n        result = result.concat(this._decorations);\r\n        result = result.concat(this._overviewRulerApproximateDecorations);\r\n        if (this._findScopeDecorationIds.length) {\r\n            result.push(...this._findScopeDecorationIds);\r\n        }\r\n        if (this._rangeHighlightDecorationId) {\r\n            result.push(this._rangeHighlightDecorationId);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nFindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n    description: 'current-find-match',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    zIndex: 13,\r\n    className: 'currentFindMatch',\r\n    showIfCollapsed: true,\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerFindMatchForeground),\r\n        position: OverviewRulerLane.Center\r\n    },\r\n    minimap: {\r\n        color: themeColorFromId(minimapFindMatch),\r\n        position: MinimapPosition.Inline\r\n    }\r\n});\r\nFindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n    description: 'find-match',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    zIndex: 10,\r\n    className: 'findMatch',\r\n    showIfCollapsed: true,\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerFindMatchForeground),\r\n        position: OverviewRulerLane.Center\r\n    },\r\n    minimap: {\r\n        color: themeColorFromId(minimapFindMatch),\r\n        position: MinimapPosition.Inline\r\n    }\r\n});\r\nFindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n    description: 'find-match-no-overview',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'findMatch',\r\n    showIfCollapsed: true\r\n});\r\nFindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n    description: 'find-match-only-overview',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerFindMatchForeground),\r\n        position: OverviewRulerLane.Center\r\n    }\r\n});\r\nFindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\r\n    description: 'find-range-highlight',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'rangeHighlight',\r\n    isWholeLine: true\r\n});\r\nFindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\r\n    description: 'find-scope',\r\n    className: 'findScope',\r\n    isWholeLine: true\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../../common/core/range.js';\r\nexport class ReplaceAllCommand {\r\n    constructor(editorSelection, ranges, replaceStrings) {\r\n        this._editorSelection = editorSelection;\r\n        this._ranges = ranges;\r\n        this._replaceStrings = replaceStrings;\r\n        this._trackedEditorSelectionId = null;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        if (this._ranges.length > 0) {\r\n            // Collect all edit operations\r\n            const ops = [];\r\n            for (let i = 0; i < this._ranges.length; i++) {\r\n                ops.push({\r\n                    range: this._ranges[i],\r\n                    text: this._replaceStrings[i]\r\n                });\r\n            }\r\n            // Sort them in ascending order by range starts\r\n            ops.sort((o1, o2) => {\r\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\r\n            });\r\n            // Merge operations that touch each other\r\n            const resultOps = [];\r\n            let previousOp = ops[0];\r\n            for (let i = 1; i < ops.length; i++) {\r\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\r\n                    // These operations are one after another and can be merged\r\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\r\n                    previousOp.text = previousOp.text + ops[i].text;\r\n                }\r\n                else {\r\n                    resultOps.push(previousOp);\r\n                    previousOp = ops[i];\r\n                }\r\n            }\r\n            resultOps.push(previousOp);\r\n            for (const op of resultOps) {\r\n                builder.addEditOperation(op.range, op.text);\r\n            }\r\n        }\r\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as strings from './strings.js';\r\nexport function buildReplaceStringWithCasePreserved(matches, pattern) {\r\n    if (matches && (matches[0] !== '')) {\r\n        const containsHyphens = validateSpecificSpecialCharacter(matches, pattern, '-');\r\n        const containsUnderscores = validateSpecificSpecialCharacter(matches, pattern, '_');\r\n        if (containsHyphens && !containsUnderscores) {\r\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '-');\r\n        }\r\n        else if (!containsHyphens && containsUnderscores) {\r\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '_');\r\n        }\r\n        if (matches[0].toUpperCase() === matches[0]) {\r\n            return pattern.toUpperCase();\r\n        }\r\n        else if (matches[0].toLowerCase() === matches[0]) {\r\n            return pattern.toLowerCase();\r\n        }\r\n        else if (strings.containsUppercaseCharacter(matches[0][0]) && pattern.length > 0) {\r\n            return pattern[0].toUpperCase() + pattern.substr(1);\r\n        }\r\n        else if (matches[0][0].toUpperCase() !== matches[0][0] && pattern.length > 0) {\r\n            return pattern[0].toLowerCase() + pattern.substr(1);\r\n        }\r\n        else {\r\n            // we don't understand its pattern yet.\r\n            return pattern;\r\n        }\r\n    }\r\n    else {\r\n        return pattern;\r\n    }\r\n}\r\nfunction validateSpecificSpecialCharacter(matches, pattern, specialCharacter) {\r\n    const doesContainSpecialCharacter = matches[0].indexOf(specialCharacter) !== -1 && pattern.indexOf(specialCharacter) !== -1;\r\n    return doesContainSpecialCharacter && matches[0].split(specialCharacter).length === pattern.split(specialCharacter).length;\r\n}\r\nfunction buildReplaceStringForSpecificSpecialCharacter(matches, pattern, specialCharacter) {\r\n    const splitPatternAtSpecialCharacter = pattern.split(specialCharacter);\r\n    const splitMatchAtSpecialCharacter = matches[0].split(specialCharacter);\r\n    let replaceString = '';\r\n    splitPatternAtSpecialCharacter.forEach((splitValue, index) => {\r\n        replaceString += buildReplaceStringWithCasePreserved([splitMatchAtSpecialCharacter[index]], splitValue) + specialCharacter;\r\n    });\r\n    return replaceString.slice(0, -1);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\r\n/**\r\n * Assigned when the replace pattern is entirely static.\r\n */\r\nclass StaticValueReplacePattern {\r\n    constructor(staticValue) {\r\n        this.staticValue = staticValue;\r\n        this.kind = 0 /* ReplacePatternKind.StaticValue */;\r\n    }\r\n}\r\n/**\r\n * Assigned when the replace pattern has replacement patterns.\r\n */\r\nclass DynamicPiecesReplacePattern {\r\n    constructor(pieces) {\r\n        this.pieces = pieces;\r\n        this.kind = 1 /* ReplacePatternKind.DynamicPieces */;\r\n    }\r\n}\r\nexport class ReplacePattern {\r\n    static fromStaticValue(value) {\r\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\r\n    }\r\n    get hasReplacementPatterns() {\r\n        return (this._state.kind === 1 /* ReplacePatternKind.DynamicPieces */);\r\n    }\r\n    constructor(pieces) {\r\n        if (!pieces || pieces.length === 0) {\r\n            this._state = new StaticValueReplacePattern('');\r\n        }\r\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\r\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\r\n        }\r\n        else {\r\n            this._state = new DynamicPiecesReplacePattern(pieces);\r\n        }\r\n    }\r\n    buildReplaceString(matches, preserveCase) {\r\n        if (this._state.kind === 0 /* ReplacePatternKind.StaticValue */) {\r\n            if (preserveCase) {\r\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\r\n            }\r\n            else {\r\n                return this._state.staticValue;\r\n            }\r\n        }\r\n        let result = '';\r\n        for (let i = 0, len = this._state.pieces.length; i < len; i++) {\r\n            const piece = this._state.pieces[i];\r\n            if (piece.staticValue !== null) {\r\n                // static value ReplacePiece\r\n                result += piece.staticValue;\r\n                continue;\r\n            }\r\n            // match index ReplacePiece\r\n            let match = ReplacePattern._substitute(piece.matchIndex, matches);\r\n            if (piece.caseOps !== null && piece.caseOps.length > 0) {\r\n                const repl = [];\r\n                const lenOps = piece.caseOps.length;\r\n                let opIdx = 0;\r\n                for (let idx = 0, len = match.length; idx < len; idx++) {\r\n                    if (opIdx >= lenOps) {\r\n                        repl.push(match.slice(idx));\r\n                        break;\r\n                    }\r\n                    switch (piece.caseOps[opIdx]) {\r\n                        case 'U':\r\n                            repl.push(match[idx].toUpperCase());\r\n                            break;\r\n                        case 'u':\r\n                            repl.push(match[idx].toUpperCase());\r\n                            opIdx++;\r\n                            break;\r\n                        case 'L':\r\n                            repl.push(match[idx].toLowerCase());\r\n                            break;\r\n                        case 'l':\r\n                            repl.push(match[idx].toLowerCase());\r\n                            opIdx++;\r\n                            break;\r\n                        default:\r\n                            repl.push(match[idx]);\r\n                    }\r\n                }\r\n                match = repl.join('');\r\n            }\r\n            result += match;\r\n        }\r\n        return result;\r\n    }\r\n    static _substitute(matchIndex, matches) {\r\n        if (matches === null) {\r\n            return '';\r\n        }\r\n        if (matchIndex === 0) {\r\n            return matches[0];\r\n        }\r\n        let remainder = '';\r\n        while (matchIndex > 0) {\r\n            if (matchIndex < matches.length) {\r\n                // A match can be undefined\r\n                const match = (matches[matchIndex] || '');\r\n                return match + remainder;\r\n            }\r\n            remainder = String(matchIndex % 10) + remainder;\r\n            matchIndex = Math.floor(matchIndex / 10);\r\n        }\r\n        return '$' + remainder;\r\n    }\r\n}\r\n/**\r\n * A replace piece can either be a static string or an index to a specific match.\r\n */\r\nexport class ReplacePiece {\r\n    static staticValue(value) {\r\n        return new ReplacePiece(value, -1, null);\r\n    }\r\n    static caseOps(index, caseOps) {\r\n        return new ReplacePiece(null, index, caseOps);\r\n    }\r\n    constructor(staticValue, matchIndex, caseOps) {\r\n        this.staticValue = staticValue;\r\n        this.matchIndex = matchIndex;\r\n        if (!caseOps || caseOps.length === 0) {\r\n            this.caseOps = null;\r\n        }\r\n        else {\r\n            this.caseOps = caseOps.slice(0);\r\n        }\r\n    }\r\n}\r\nclass ReplacePieceBuilder {\r\n    constructor(source) {\r\n        this._source = source;\r\n        this._lastCharIndex = 0;\r\n        this._result = [];\r\n        this._resultLen = 0;\r\n        this._currentStaticPiece = '';\r\n    }\r\n    emitUnchanged(toCharIndex) {\r\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\r\n        this._lastCharIndex = toCharIndex;\r\n    }\r\n    emitStatic(value, toCharIndex) {\r\n        this._emitStatic(value);\r\n        this._lastCharIndex = toCharIndex;\r\n    }\r\n    _emitStatic(value) {\r\n        if (value.length === 0) {\r\n            return;\r\n        }\r\n        this._currentStaticPiece += value;\r\n    }\r\n    emitMatchIndex(index, toCharIndex, caseOps) {\r\n        if (this._currentStaticPiece.length !== 0) {\r\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\r\n            this._currentStaticPiece = '';\r\n        }\r\n        this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\r\n        this._lastCharIndex = toCharIndex;\r\n    }\r\n    finalize() {\r\n        this.emitUnchanged(this._source.length);\r\n        if (this._currentStaticPiece.length !== 0) {\r\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\r\n            this._currentStaticPiece = '';\r\n        }\r\n        return new ReplacePattern(this._result);\r\n    }\r\n}\r\n/**\r\n * \\n\t\t\t=> inserts a LF\r\n * \\t\t\t\t=> inserts a TAB\r\n * \\\\\t\t\t=> inserts a \"\\\".\r\n * \\u\t\t\t=> upper-cases one character in a match.\r\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\r\n * \\l\t\t\t=> lower-cases one character in a match.\r\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\r\n * $$\t\t\t=> inserts a \"$\".\r\n * $& and $0\t=> inserts the matched substring.\r\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\r\n * everything else stays untouched\r\n *\r\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\r\n */\r\nexport function parseReplaceString(replaceString) {\r\n    if (!replaceString || replaceString.length === 0) {\r\n        return new ReplacePattern(null);\r\n    }\r\n    const caseOps = [];\r\n    const result = new ReplacePieceBuilder(replaceString);\r\n    for (let i = 0, len = replaceString.length; i < len; i++) {\r\n        const chCode = replaceString.charCodeAt(i);\r\n        if (chCode === 92 /* CharCode.Backslash */) {\r\n            // move to next char\r\n            i++;\r\n            if (i >= len) {\r\n                // string ends with a \\\r\n                break;\r\n            }\r\n            const nextChCode = replaceString.charCodeAt(i);\r\n            // let replaceWithCharacter: string | null = null;\r\n            switch (nextChCode) {\r\n                case 92 /* CharCode.Backslash */:\r\n                    // \\\\ => inserts a \"\\\"\r\n                    result.emitUnchanged(i - 1);\r\n                    result.emitStatic('\\\\', i + 1);\r\n                    break;\r\n                case 110 /* CharCode.n */:\r\n                    // \\n => inserts a LF\r\n                    result.emitUnchanged(i - 1);\r\n                    result.emitStatic('\\n', i + 1);\r\n                    break;\r\n                case 116 /* CharCode.t */:\r\n                    // \\t => inserts a TAB\r\n                    result.emitUnchanged(i - 1);\r\n                    result.emitStatic('\\t', i + 1);\r\n                    break;\r\n                // Case modification of string replacements, patterned after Boost, but only applied\r\n                // to the replacement text, not subsequent content.\r\n                case 117 /* CharCode.u */:\r\n                // \\u => upper-cases one character.\r\n                case 85 /* CharCode.U */:\r\n                // \\U => upper-cases ALL following characters.\r\n                case 108 /* CharCode.l */:\r\n                // \\l => lower-cases one character.\r\n                case 76 /* CharCode.L */:\r\n                    // \\L => lower-cases ALL following characters.\r\n                    result.emitUnchanged(i - 1);\r\n                    result.emitStatic('', i + 1);\r\n                    caseOps.push(String.fromCharCode(nextChCode));\r\n                    break;\r\n            }\r\n            continue;\r\n        }\r\n        if (chCode === 36 /* CharCode.DollarSign */) {\r\n            // move to next char\r\n            i++;\r\n            if (i >= len) {\r\n                // string ends with a $\r\n                break;\r\n            }\r\n            const nextChCode = replaceString.charCodeAt(i);\r\n            if (nextChCode === 36 /* CharCode.DollarSign */) {\r\n                // $$ => inserts a \"$\"\r\n                result.emitUnchanged(i - 1);\r\n                result.emitStatic('$', i + 1);\r\n                continue;\r\n            }\r\n            if (nextChCode === 48 /* CharCode.Digit0 */ || nextChCode === 38 /* CharCode.Ampersand */) {\r\n                // $& and $0 => inserts the matched substring.\r\n                result.emitUnchanged(i - 1);\r\n                result.emitMatchIndex(0, i + 1, caseOps);\r\n                caseOps.length = 0;\r\n                continue;\r\n            }\r\n            if (49 /* CharCode.Digit1 */ <= nextChCode && nextChCode <= 57 /* CharCode.Digit9 */) {\r\n                // $n\r\n                let matchIndex = nextChCode - 48 /* CharCode.Digit0 */;\r\n                // peek next char to probe for $nn\r\n                if (i + 1 < len) {\r\n                    const nextNextChCode = replaceString.charCodeAt(i + 1);\r\n                    if (48 /* CharCode.Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* CharCode.Digit9 */) {\r\n                        // $nn\r\n                        // move to next char\r\n                        i++;\r\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* CharCode.Digit0 */);\r\n                        result.emitUnchanged(i - 2);\r\n                        result.emitMatchIndex(matchIndex, i + 1, caseOps);\r\n                        caseOps.length = 0;\r\n                        continue;\r\n                    }\r\n                }\r\n                result.emitUnchanged(i - 1);\r\n                result.emitMatchIndex(matchIndex, i + 1, caseOps);\r\n                caseOps.length = 0;\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n    return result.finalize();\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport './findOptionsWidget.css';\r\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\r\nimport { Widget } from '../../../../base/browser/ui/widget.js';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { FIND_IDS } from './findModel.js';\r\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\r\nexport class FindOptionsWidget extends Widget {\r\n    constructor(editor, state, keybindingService) {\r\n        super();\r\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\r\n        this._isVisible = false;\r\n        this._editor = editor;\r\n        this._state = state;\r\n        this._keybindingService = keybindingService;\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.className = 'findOptionsWidget';\r\n        this._domNode.style.display = 'none';\r\n        this._domNode.style.top = '10px';\r\n        this._domNode.style.zIndex = '12';\r\n        this._domNode.setAttribute('role', 'presentation');\r\n        this._domNode.setAttribute('aria-hidden', 'true');\r\n        const toggleStyles = {\r\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\r\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\r\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\r\n        };\r\n        this.caseSensitive = this._register(new CaseSensitiveToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand), isChecked: this._state.matchCase }, toggleStyles)));\r\n        this._domNode.appendChild(this.caseSensitive.domNode);\r\n        this._register(this.caseSensitive.onChange(() => {\r\n            this._state.change({\r\n                matchCase: this.caseSensitive.checked\r\n            }, false);\r\n        }));\r\n        this.wholeWords = this._register(new WholeWordsToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand), isChecked: this._state.wholeWord }, toggleStyles)));\r\n        this._domNode.appendChild(this.wholeWords.domNode);\r\n        this._register(this.wholeWords.onChange(() => {\r\n            this._state.change({\r\n                wholeWord: this.wholeWords.checked\r\n            }, false);\r\n        }));\r\n        this.regex = this._register(new RegexToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand), isChecked: this._state.isRegex }, toggleStyles)));\r\n        this._domNode.appendChild(this.regex.domNode);\r\n        this._register(this.regex.onChange(() => {\r\n            this._state.change({\r\n                isRegex: this.regex.checked\r\n            }, false);\r\n        }));\r\n        this._editor.addOverlayWidget(this);\r\n        this._register(this._state.onFindReplaceStateChange((e) => {\r\n            let somethingChanged = false;\r\n            if (e.isRegex) {\r\n                this.regex.checked = this._state.isRegex;\r\n                somethingChanged = true;\r\n            }\r\n            if (e.wholeWord) {\r\n                this.wholeWords.checked = this._state.wholeWord;\r\n                somethingChanged = true;\r\n            }\r\n            if (e.matchCase) {\r\n                this.caseSensitive.checked = this._state.matchCase;\r\n                somethingChanged = true;\r\n            }\r\n            if (!this._state.isRevealed && somethingChanged) {\r\n                this._revealTemporarily();\r\n            }\r\n        }));\r\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, (e) => this._onMouseLeave()));\r\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\r\n    }\r\n    _keybindingLabelFor(actionId) {\r\n        const kb = this._keybindingService.lookupKeybinding(actionId);\r\n        if (!kb) {\r\n            return '';\r\n        }\r\n        return ` (${kb.getLabel()})`;\r\n    }\r\n    dispose() {\r\n        this._editor.removeOverlayWidget(this);\r\n        super.dispose();\r\n    }\r\n    // ----- IOverlayWidget API\r\n    getId() {\r\n        return FindOptionsWidget.ID;\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\r\n        };\r\n    }\r\n    highlightFindOptions() {\r\n        this._revealTemporarily();\r\n    }\r\n    _revealTemporarily() {\r\n        this._show();\r\n        this._hideSoon.schedule();\r\n    }\r\n    _onMouseLeave() {\r\n        this._hideSoon.schedule();\r\n    }\r\n    _onMouseOver() {\r\n        this._hideSoon.cancel();\r\n    }\r\n    _show() {\r\n        if (this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = true;\r\n        this._domNode.style.display = 'block';\r\n    }\r\n    _hide() {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = false;\r\n        this._domNode.style.display = 'none';\r\n    }\r\n}\r\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { MATCHES_LIMIT } from './findModel.js';\r\nfunction effectiveOptionValue(override, value) {\r\n    if (override === 1 /* FindOptionOverride.True */) {\r\n        return true;\r\n    }\r\n    if (override === 2 /* FindOptionOverride.False */) {\r\n        return false;\r\n    }\r\n    return value;\r\n}\r\nexport class FindReplaceState extends Disposable {\r\n    get searchString() { return this._searchString; }\r\n    get replaceString() { return this._replaceString; }\r\n    get isRevealed() { return this._isRevealed; }\r\n    get isReplaceRevealed() { return this._isReplaceRevealed; }\r\n    get isRegex() { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\r\n    get wholeWord() { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\r\n    get matchCase() { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\r\n    get preserveCase() { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\r\n    get actualIsRegex() { return this._isRegex; }\r\n    get actualWholeWord() { return this._wholeWord; }\r\n    get actualMatchCase() { return this._matchCase; }\r\n    get actualPreserveCase() { return this._preserveCase; }\r\n    get searchScope() { return this._searchScope; }\r\n    get matchesPosition() { return this._matchesPosition; }\r\n    get matchesCount() { return this._matchesCount; }\r\n    get currentMatch() { return this._currentMatch; }\r\n    constructor() {\r\n        super();\r\n        this._onFindReplaceStateChange = this._register(new Emitter());\r\n        this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\r\n        this._searchString = '';\r\n        this._replaceString = '';\r\n        this._isRevealed = false;\r\n        this._isReplaceRevealed = false;\r\n        this._isRegex = false;\r\n        this._isRegexOverride = 0 /* FindOptionOverride.NotSet */;\r\n        this._wholeWord = false;\r\n        this._wholeWordOverride = 0 /* FindOptionOverride.NotSet */;\r\n        this._matchCase = false;\r\n        this._matchCaseOverride = 0 /* FindOptionOverride.NotSet */;\r\n        this._preserveCase = false;\r\n        this._preserveCaseOverride = 0 /* FindOptionOverride.NotSet */;\r\n        this._searchScope = null;\r\n        this._matchesPosition = 0;\r\n        this._matchesCount = 0;\r\n        this._currentMatch = null;\r\n        this._loop = true;\r\n        this._isSearching = false;\r\n        this._filters = null;\r\n    }\r\n    changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\r\n        const changeEvent = {\r\n            moveCursor: false,\r\n            updateHistory: false,\r\n            searchString: false,\r\n            replaceString: false,\r\n            isRevealed: false,\r\n            isReplaceRevealed: false,\r\n            isRegex: false,\r\n            wholeWord: false,\r\n            matchCase: false,\r\n            preserveCase: false,\r\n            searchScope: false,\r\n            matchesPosition: false,\r\n            matchesCount: false,\r\n            currentMatch: false,\r\n            loop: false,\r\n            isSearching: false,\r\n            filters: false\r\n        };\r\n        let somethingChanged = false;\r\n        if (matchesCount === 0) {\r\n            matchesPosition = 0;\r\n        }\r\n        if (matchesPosition > matchesCount) {\r\n            matchesPosition = matchesCount;\r\n        }\r\n        if (this._matchesPosition !== matchesPosition) {\r\n            this._matchesPosition = matchesPosition;\r\n            changeEvent.matchesPosition = true;\r\n            somethingChanged = true;\r\n        }\r\n        if (this._matchesCount !== matchesCount) {\r\n            this._matchesCount = matchesCount;\r\n            changeEvent.matchesCount = true;\r\n            somethingChanged = true;\r\n        }\r\n        if (typeof currentMatch !== 'undefined') {\r\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\r\n                this._currentMatch = currentMatch;\r\n                changeEvent.currentMatch = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (somethingChanged) {\r\n            this._onFindReplaceStateChange.fire(changeEvent);\r\n        }\r\n    }\r\n    change(newState, moveCursor, updateHistory = true) {\r\n        var _a;\r\n        const changeEvent = {\r\n            moveCursor: moveCursor,\r\n            updateHistory: updateHistory,\r\n            searchString: false,\r\n            replaceString: false,\r\n            isRevealed: false,\r\n            isReplaceRevealed: false,\r\n            isRegex: false,\r\n            wholeWord: false,\r\n            matchCase: false,\r\n            preserveCase: false,\r\n            searchScope: false,\r\n            matchesPosition: false,\r\n            matchesCount: false,\r\n            currentMatch: false,\r\n            loop: false,\r\n            isSearching: false,\r\n            filters: false\r\n        };\r\n        let somethingChanged = false;\r\n        const oldEffectiveIsRegex = this.isRegex;\r\n        const oldEffectiveWholeWords = this.wholeWord;\r\n        const oldEffectiveMatchCase = this.matchCase;\r\n        const oldEffectivePreserveCase = this.preserveCase;\r\n        if (typeof newState.searchString !== 'undefined') {\r\n            if (this._searchString !== newState.searchString) {\r\n                this._searchString = newState.searchString;\r\n                changeEvent.searchString = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.replaceString !== 'undefined') {\r\n            if (this._replaceString !== newState.replaceString) {\r\n                this._replaceString = newState.replaceString;\r\n                changeEvent.replaceString = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.isRevealed !== 'undefined') {\r\n            if (this._isRevealed !== newState.isRevealed) {\r\n                this._isRevealed = newState.isRevealed;\r\n                changeEvent.isRevealed = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\r\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\r\n                this._isReplaceRevealed = newState.isReplaceRevealed;\r\n                changeEvent.isReplaceRevealed = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.isRegex !== 'undefined') {\r\n            this._isRegex = newState.isRegex;\r\n        }\r\n        if (typeof newState.wholeWord !== 'undefined') {\r\n            this._wholeWord = newState.wholeWord;\r\n        }\r\n        if (typeof newState.matchCase !== 'undefined') {\r\n            this._matchCase = newState.matchCase;\r\n        }\r\n        if (typeof newState.preserveCase !== 'undefined') {\r\n            this._preserveCase = newState.preserveCase;\r\n        }\r\n        if (typeof newState.searchScope !== 'undefined') {\r\n            if (!((_a = newState.searchScope) === null || _a === void 0 ? void 0 : _a.every((newSearchScope) => {\r\n                var _a;\r\n                return (_a = this._searchScope) === null || _a === void 0 ? void 0 : _a.some(existingSearchScope => {\r\n                    return !Range.equalsRange(existingSearchScope, newSearchScope);\r\n                });\r\n            }))) {\r\n                this._searchScope = newState.searchScope;\r\n                changeEvent.searchScope = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.loop !== 'undefined') {\r\n            if (this._loop !== newState.loop) {\r\n                this._loop = newState.loop;\r\n                changeEvent.loop = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.isSearching !== 'undefined') {\r\n            if (this._isSearching !== newState.isSearching) {\r\n                this._isSearching = newState.isSearching;\r\n                changeEvent.isSearching = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.filters !== 'undefined') {\r\n            if (this._filters) {\r\n                this._filters.update(newState.filters);\r\n            }\r\n            else {\r\n                this._filters = newState.filters;\r\n            }\r\n            changeEvent.filters = true;\r\n            somethingChanged = true;\r\n        }\r\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\r\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* FindOptionOverride.NotSet */);\r\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* FindOptionOverride.NotSet */);\r\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* FindOptionOverride.NotSet */);\r\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* FindOptionOverride.NotSet */);\r\n        if (oldEffectiveIsRegex !== this.isRegex) {\r\n            somethingChanged = true;\r\n            changeEvent.isRegex = true;\r\n        }\r\n        if (oldEffectiveWholeWords !== this.wholeWord) {\r\n            somethingChanged = true;\r\n            changeEvent.wholeWord = true;\r\n        }\r\n        if (oldEffectiveMatchCase !== this.matchCase) {\r\n            somethingChanged = true;\r\n            changeEvent.matchCase = true;\r\n        }\r\n        if (oldEffectivePreserveCase !== this.preserveCase) {\r\n            somethingChanged = true;\r\n            changeEvent.preserveCase = true;\r\n        }\r\n        if (somethingChanged) {\r\n            this._onFindReplaceStateChange.fire(changeEvent);\r\n        }\r\n    }\r\n    canNavigateBack() {\r\n        return this.canNavigateInLoop() || (this.matchesPosition !== 1);\r\n    }\r\n    canNavigateForward() {\r\n        return this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\r\n    }\r\n    canNavigateInLoop() {\r\n        return this._loop || (this.matchesCount >= MATCHES_LIMIT);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\r\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\r\nimport { Widget } from '../../../../base/browser/ui/widget.js';\r\nimport { Delayer } from '../../../../base/common/async.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport './findWidget.css';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\r\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\r\nimport { asCssVariable, contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetForeground, editorWidgetResizeBorder, errorForeground, focusBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, toolbarHoverBackground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\r\nimport { assertIsDefined } from '../../../../base/common/types.js';\r\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\r\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\r\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\r\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\r\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\r\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\r\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\r\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\r\nconst NLS_FIND_DIALOG_LABEL = nls.localize('label.findDialog', \"Find / Replace\");\r\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\r\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\r\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\r\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\r\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\r\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\r\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\r\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\r\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\r\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\r\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\r\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\r\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\r\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\r\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\r\nconst PART_WIDTH = 275;\r\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\r\nlet MAX_MATCHES_COUNT_WIDTH = 69;\r\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\r\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\r\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\r\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\r\nexport class FindWidgetViewZone {\r\n    constructor(afterLineNumber) {\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\r\n        this.suppressMouseDown = false;\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.className = 'dock-find-viewzone';\r\n    }\r\n}\r\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\r\n    const isMultiline = !!value.match(/\\n/);\r\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\r\n        event.stopPropagation();\r\n        return;\r\n    }\r\n}\r\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\r\n    const isMultiline = !!value.match(/\\n/);\r\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\r\n        event.stopPropagation();\r\n        return;\r\n    }\r\n}\r\nexport class FindWidget extends Widget {\r\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\r\n        super();\r\n        this._cachedHeight = null;\r\n        this._revealTimeouts = [];\r\n        this._codeEditor = codeEditor;\r\n        this._controller = controller;\r\n        this._state = state;\r\n        this._contextViewProvider = contextViewProvider;\r\n        this._keybindingService = keybindingService;\r\n        this._contextKeyService = contextKeyService;\r\n        this._storageService = storageService;\r\n        this._notificationService = notificationService;\r\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\r\n        this._isVisible = false;\r\n        this._isReplaceVisible = false;\r\n        this._ignoreChangeEvent = false;\r\n        this._updateHistoryDelayer = new Delayer(500);\r\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\r\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\r\n        this._buildDomNode();\r\n        this._updateButtons();\r\n        this._tryUpdateWidgetWidth();\r\n        this._findInput.inputBox.layout();\r\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(90 /* EditorOption.readOnly */)) {\r\n                if (this._codeEditor.getOption(90 /* EditorOption.readOnly */)) {\r\n                    // Hide replace part if editor becomes read only\r\n                    this._state.change({ isReplaceRevealed: false }, false);\r\n                }\r\n                this._updateButtons();\r\n            }\r\n            if (e.hasChanged(143 /* EditorOption.layoutInfo */)) {\r\n                this._tryUpdateWidgetWidth();\r\n            }\r\n            if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\r\n                this.updateAccessibilitySupport();\r\n            }\r\n            if (e.hasChanged(41 /* EditorOption.find */)) {\r\n                const supportLoop = this._codeEditor.getOption(41 /* EditorOption.find */).loop;\r\n                this._state.change({ loop: supportLoop }, false);\r\n                const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\r\n                if (addExtraSpaceOnTop && !this._viewZone) {\r\n                    this._viewZone = new FindWidgetViewZone(0);\r\n                    this._showViewZone();\r\n                }\r\n                if (!addExtraSpaceOnTop && this._viewZone) {\r\n                    this._removeViewZone();\r\n                }\r\n            }\r\n        }));\r\n        this.updateAccessibilitySupport();\r\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\r\n            if (this._isVisible) {\r\n                this._updateToggleSelectionFindButton();\r\n            }\r\n        }));\r\n        this._register(this._codeEditor.onDidFocusEditorWidget(() => __awaiter(this, void 0, void 0, function* () {\r\n            if (this._isVisible) {\r\n                const globalBufferTerm = yield this._controller.getGlobalBufferTerm();\r\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\r\n                    this._state.change({ searchString: globalBufferTerm }, false);\r\n                    this._findInput.select();\r\n                }\r\n            }\r\n        })));\r\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\r\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\r\n        this._register(this._findFocusTracker.onDidFocus(() => {\r\n            this._findInputFocused.set(true);\r\n            this._updateSearchScope();\r\n        }));\r\n        this._register(this._findFocusTracker.onDidBlur(() => {\r\n            this._findInputFocused.set(false);\r\n        }));\r\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\r\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\r\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\r\n            this._replaceInputFocused.set(true);\r\n            this._updateSearchScope();\r\n        }));\r\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\r\n            this._replaceInputFocused.set(false);\r\n        }));\r\n        this._codeEditor.addOverlayWidget(this);\r\n        if (this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop) {\r\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\r\n        }\r\n        this._register(this._codeEditor.onDidChangeModel(() => {\r\n            if (!this._isVisible) {\r\n                return;\r\n            }\r\n            this._viewZoneId = undefined;\r\n        }));\r\n        this._register(this._codeEditor.onDidScrollChange((e) => {\r\n            if (e.scrollTopChanged) {\r\n                this._layoutViewZone();\r\n                return;\r\n            }\r\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\r\n            setTimeout(() => {\r\n                this._layoutViewZone();\r\n            }, 0);\r\n        }));\r\n    }\r\n    // ----- IOverlayWidget API\r\n    getId() {\r\n        return FindWidget.ID;\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        if (this._isVisible) {\r\n            return {\r\n                preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    // ----- React to state changes\r\n    _onStateChanged(e) {\r\n        if (e.searchString) {\r\n            try {\r\n                this._ignoreChangeEvent = true;\r\n                this._findInput.setValue(this._state.searchString);\r\n            }\r\n            finally {\r\n                this._ignoreChangeEvent = false;\r\n            }\r\n            this._updateButtons();\r\n        }\r\n        if (e.replaceString) {\r\n            this._replaceInput.inputBox.value = this._state.replaceString;\r\n        }\r\n        if (e.isRevealed) {\r\n            if (this._state.isRevealed) {\r\n                this._reveal();\r\n            }\r\n            else {\r\n                this._hide(true);\r\n            }\r\n        }\r\n        if (e.isReplaceRevealed) {\r\n            if (this._state.isReplaceRevealed) {\r\n                if (!this._codeEditor.getOption(90 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\r\n                    this._isReplaceVisible = true;\r\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n                    this._updateButtons();\r\n                    this._replaceInput.inputBox.layout();\r\n                }\r\n            }\r\n            else {\r\n                if (this._isReplaceVisible) {\r\n                    this._isReplaceVisible = false;\r\n                    this._updateButtons();\r\n                }\r\n            }\r\n        }\r\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\r\n            if (this._tryUpdateHeight()) {\r\n                this._showViewZone();\r\n            }\r\n        }\r\n        if (e.isRegex) {\r\n            this._findInput.setRegex(this._state.isRegex);\r\n        }\r\n        if (e.wholeWord) {\r\n            this._findInput.setWholeWords(this._state.wholeWord);\r\n        }\r\n        if (e.matchCase) {\r\n            this._findInput.setCaseSensitive(this._state.matchCase);\r\n        }\r\n        if (e.preserveCase) {\r\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\r\n        }\r\n        if (e.searchScope) {\r\n            if (this._state.searchScope) {\r\n                this._toggleSelectionFind.checked = true;\r\n            }\r\n            else {\r\n                this._toggleSelectionFind.checked = false;\r\n            }\r\n            this._updateToggleSelectionFindButton();\r\n        }\r\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\r\n            const showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\r\n            this._domNode.classList.toggle('no-results', showRedOutline);\r\n            this._updateMatchesCount();\r\n            this._updateButtons();\r\n        }\r\n        if (e.searchString || e.currentMatch) {\r\n            this._layoutViewZone();\r\n        }\r\n        if (e.updateHistory) {\r\n            this._delayedUpdateHistory();\r\n        }\r\n        if (e.loop) {\r\n            this._updateButtons();\r\n        }\r\n    }\r\n    _delayedUpdateHistory() {\r\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\r\n    }\r\n    _updateHistory() {\r\n        if (this._state.searchString) {\r\n            this._findInput.inputBox.addToHistory();\r\n        }\r\n        if (this._state.replaceString) {\r\n            this._replaceInput.inputBox.addToHistory();\r\n        }\r\n    }\r\n    _updateMatchesCount() {\r\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\r\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\r\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\r\n        }\r\n        else {\r\n            this._matchesCount.title = '';\r\n        }\r\n        // remove previous content\r\n        if (this._matchesCount.firstChild) {\r\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\r\n        }\r\n        let label;\r\n        if (this._state.matchesCount > 0) {\r\n            let matchesCount = String(this._state.matchesCount);\r\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\r\n                matchesCount += '+';\r\n            }\r\n            let matchesPosition = String(this._state.matchesPosition);\r\n            if (matchesPosition === '0') {\r\n                matchesPosition = '?';\r\n            }\r\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\r\n        }\r\n        else {\r\n            label = NLS_NO_RESULTS;\r\n        }\r\n        this._matchesCount.appendChild(document.createTextNode(label));\r\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\r\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\r\n    }\r\n    // ----- actions\r\n    _getAriaLabel(label, currentMatch, searchString) {\r\n        if (label === NLS_NO_RESULTS) {\r\n            return searchString === ''\r\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\r\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\r\n        }\r\n        if (currentMatch) {\r\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\r\n            const model = this._codeEditor.getModel();\r\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\r\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\r\n                return `${lineContent}, ${ariaLabel}`;\r\n            }\r\n            return ariaLabel;\r\n        }\r\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\r\n    }\r\n    /**\r\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\r\n     * If 'selection find' is OFF we enable the button only if there is a selection.\r\n     */\r\n    _updateToggleSelectionFindButton() {\r\n        const selection = this._codeEditor.getSelection();\r\n        const isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\r\n        const isChecked = this._toggleSelectionFind.checked;\r\n        if (this._isVisible && (isChecked || isSelection)) {\r\n            this._toggleSelectionFind.enable();\r\n        }\r\n        else {\r\n            this._toggleSelectionFind.disable();\r\n        }\r\n    }\r\n    _updateButtons() {\r\n        this._findInput.setEnabled(this._isVisible);\r\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\r\n        this._updateToggleSelectionFindButton();\r\n        this._closeBtn.setEnabled(this._isVisible);\r\n        const findInputIsNonEmpty = (this._state.searchString.length > 0);\r\n        const matchesCount = this._state.matchesCount ? true : false;\r\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\r\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\r\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\r\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\r\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\r\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\r\n        const canReplace = !this._codeEditor.getOption(90 /* EditorOption.readOnly */);\r\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\r\n    }\r\n    _reveal() {\r\n        this._revealTimeouts.forEach(e => {\r\n            clearTimeout(e);\r\n        });\r\n        this._revealTimeouts = [];\r\n        if (!this._isVisible) {\r\n            this._isVisible = true;\r\n            const selection = this._codeEditor.getSelection();\r\n            switch (this._codeEditor.getOption(41 /* EditorOption.find */).autoFindInSelection) {\r\n                case 'always':\r\n                    this._toggleSelectionFind.checked = true;\r\n                    break;\r\n                case 'never':\r\n                    this._toggleSelectionFind.checked = false;\r\n                    break;\r\n                case 'multiline': {\r\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\r\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n            this._tryUpdateWidgetWidth();\r\n            this._updateButtons();\r\n            this._revealTimeouts.push(setTimeout(() => {\r\n                this._domNode.classList.add('visible');\r\n                this._domNode.setAttribute('aria-hidden', 'false');\r\n            }, 0));\r\n            // validate query again as it's being dismissed when we hide the find widget.\r\n            this._revealTimeouts.push(setTimeout(() => {\r\n                this._findInput.validate();\r\n            }, 200));\r\n            this._codeEditor.layoutOverlayWidget(this);\r\n            let adjustEditorScrollTop = true;\r\n            if (this._codeEditor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\r\n                const domNode = this._codeEditor.getDomNode();\r\n                if (domNode) {\r\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\r\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\r\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\r\n                    const startTop = startCoords ? startCoords.top : 0;\r\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\r\n                        if (selection.endLineNumber > selection.startLineNumber) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\r\n                        if (startLeft > leftOfFindWidget) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\r\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\r\n                        if (endLeft > leftOfFindWidget) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._showViewZone(adjustEditorScrollTop);\r\n        }\r\n    }\r\n    _hide(focusTheEditor) {\r\n        this._revealTimeouts.forEach(e => {\r\n            clearTimeout(e);\r\n        });\r\n        this._revealTimeouts = [];\r\n        if (this._isVisible) {\r\n            this._isVisible = false;\r\n            this._updateButtons();\r\n            this._domNode.classList.remove('visible');\r\n            this._domNode.setAttribute('aria-hidden', 'true');\r\n            this._findInput.clearMessage();\r\n            if (focusTheEditor) {\r\n                this._codeEditor.focus();\r\n            }\r\n            this._codeEditor.layoutOverlayWidget(this);\r\n            this._removeViewZone();\r\n        }\r\n    }\r\n    _layoutViewZone(targetScrollTop) {\r\n        const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\r\n        if (!addExtraSpaceOnTop) {\r\n            this._removeViewZone();\r\n            return;\r\n        }\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        const viewZone = this._viewZone;\r\n        if (this._viewZoneId !== undefined || !viewZone) {\r\n            return;\r\n        }\r\n        this._codeEditor.changeViewZones((accessor) => {\r\n            viewZone.heightInPx = this._getHeight();\r\n            this._viewZoneId = accessor.addZone(viewZone);\r\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\r\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\r\n        });\r\n    }\r\n    _showViewZone(adjustScroll = true) {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\r\n        if (!addExtraSpaceOnTop) {\r\n            return;\r\n        }\r\n        if (this._viewZone === undefined) {\r\n            this._viewZone = new FindWidgetViewZone(0);\r\n        }\r\n        const viewZone = this._viewZone;\r\n        this._codeEditor.changeViewZones((accessor) => {\r\n            if (this._viewZoneId !== undefined) {\r\n                // the view zone already exists, we need to update the height\r\n                const newHeight = this._getHeight();\r\n                if (newHeight === viewZone.heightInPx) {\r\n                    return;\r\n                }\r\n                const scrollAdjustment = newHeight - viewZone.heightInPx;\r\n                viewZone.heightInPx = newHeight;\r\n                accessor.layoutZone(this._viewZoneId);\r\n                if (adjustScroll) {\r\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\r\n                }\r\n                return;\r\n            }\r\n            else {\r\n                let scrollAdjustment = this._getHeight();\r\n                // if the editor has top padding, factor that into the zone height\r\n                scrollAdjustment -= this._codeEditor.getOption(83 /* EditorOption.padding */).top;\r\n                if (scrollAdjustment <= 0) {\r\n                    return;\r\n                }\r\n                viewZone.heightInPx = scrollAdjustment;\r\n                this._viewZoneId = accessor.addZone(viewZone);\r\n                if (adjustScroll) {\r\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _removeViewZone() {\r\n        this._codeEditor.changeViewZones((accessor) => {\r\n            if (this._viewZoneId !== undefined) {\r\n                accessor.removeZone(this._viewZoneId);\r\n                this._viewZoneId = undefined;\r\n                if (this._viewZone) {\r\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\r\n                    this._viewZone = undefined;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _tryUpdateWidgetWidth() {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        if (!dom.isInDOM(this._domNode)) {\r\n            // the widget is not in the DOM\r\n            return;\r\n        }\r\n        const layoutInfo = this._codeEditor.getLayoutInfo();\r\n        const editorContentWidth = layoutInfo.contentWidth;\r\n        if (editorContentWidth <= 0) {\r\n            // for example, diff view original editor\r\n            this._domNode.classList.add('hiddenEditor');\r\n            return;\r\n        }\r\n        else if (this._domNode.classList.contains('hiddenEditor')) {\r\n            this._domNode.classList.remove('hiddenEditor');\r\n        }\r\n        const editorWidth = layoutInfo.width;\r\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\r\n        let collapsedFindWidget = false;\r\n        let reducedFindWidget = false;\r\n        let narrowFindWidget = false;\r\n        if (this._resized) {\r\n            const widgetWidth = dom.getTotalWidth(this._domNode);\r\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\r\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\r\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\r\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n                return;\r\n            }\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\r\n            reducedFindWidget = true;\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\r\n            narrowFindWidget = true;\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\r\n            collapsedFindWidget = true;\r\n        }\r\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\r\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\r\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\r\n        if (!narrowFindWidget && !collapsedFindWidget) {\r\n            // the minimal left offset of findwidget is 15px.\r\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\r\n        }\r\n        this._findInput.layout({ collapsedFindWidget, narrowFindWidget, reducedFindWidget });\r\n        if (this._resized) {\r\n            const findInputWidth = this._findInput.inputBox.element.clientWidth;\r\n            if (findInputWidth > 0) {\r\n                this._replaceInput.width = findInputWidth;\r\n            }\r\n        }\r\n        else if (this._isReplaceVisible) {\r\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n        }\r\n    }\r\n    _getHeight() {\r\n        let totalheight = 0;\r\n        // find input margin top\r\n        totalheight += 4;\r\n        // find input height\r\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\r\n        if (this._isReplaceVisible) {\r\n            // replace input margin\r\n            totalheight += 4;\r\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\r\n        }\r\n        // margin bottom\r\n        totalheight += 4;\r\n        return totalheight;\r\n    }\r\n    _tryUpdateHeight() {\r\n        const totalHeight = this._getHeight();\r\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\r\n            return false;\r\n        }\r\n        this._cachedHeight = totalHeight;\r\n        this._domNode.style.height = `${totalHeight}px`;\r\n        return true;\r\n    }\r\n    // ----- Public\r\n    focusFindInput() {\r\n        this._findInput.select();\r\n        // Edge browser requires focus() in addition to select()\r\n        this._findInput.focus();\r\n    }\r\n    focusReplaceInput() {\r\n        this._replaceInput.select();\r\n        // Edge browser requires focus() in addition to select()\r\n        this._replaceInput.focus();\r\n    }\r\n    highlightFindOptions() {\r\n        this._findInput.highlightFindOptions();\r\n    }\r\n    _updateSearchScope() {\r\n        if (!this._codeEditor.hasModel()) {\r\n            return;\r\n        }\r\n        if (this._toggleSelectionFind.checked) {\r\n            const selections = this._codeEditor.getSelections();\r\n            selections.map(selection => {\r\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                }\r\n                const currentMatch = this._state.currentMatch;\r\n                if (selection.startLineNumber !== selection.endLineNumber) {\r\n                    if (!Range.equalsRange(selection, currentMatch)) {\r\n                        return selection;\r\n                    }\r\n                }\r\n                return null;\r\n            }).filter(element => !!element);\r\n            if (selections.length) {\r\n                this._state.change({ searchScope: selections }, true);\r\n            }\r\n        }\r\n    }\r\n    _onFindInputMouseDown(e) {\r\n        // on linux, middle key does pasting.\r\n        if (e.middleButton) {\r\n            e.stopPropagation();\r\n        }\r\n    }\r\n    _onFindInputKeyDown(e) {\r\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\r\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            else {\r\n                this._findInput.inputBox.insertAtCursor('\\n');\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n        }\r\n        if (e.equals(2 /* KeyCode.Tab */)) {\r\n            if (this._isReplaceVisible) {\r\n                this._replaceInput.focus();\r\n            }\r\n            else {\r\n                this._findInput.focusOnCaseSensitive();\r\n            }\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\r\n            this._codeEditor.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\r\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\r\n        }\r\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\r\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\r\n        }\r\n    }\r\n    _onReplaceInputKeyDown(e) {\r\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\r\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            else {\r\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\r\n                    // this is the first time when users press Ctrl + Enter to replace all\r\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\r\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\r\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\r\n                }\r\n                this._replaceInput.inputBox.insertAtCursor('\\n');\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n        }\r\n        if (e.equals(2 /* KeyCode.Tab */)) {\r\n            this._findInput.focusOnCaseSensitive();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\r\n            this._findInput.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\r\n            this._codeEditor.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\r\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\r\n        }\r\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\r\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\r\n        }\r\n    }\r\n    // ----- sash\r\n    getVerticalSashLeft(_sash) {\r\n        return 0;\r\n    }\r\n    // ----- initialization\r\n    _keybindingLabelFor(actionId) {\r\n        const kb = this._keybindingService.lookupKeybinding(actionId);\r\n        if (!kb) {\r\n            return '';\r\n        }\r\n        return ` (${kb.getLabel()})`;\r\n    }\r\n    _buildDomNode() {\r\n        const flexibleHeight = true;\r\n        const flexibleWidth = true;\r\n        // Find input\r\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\r\n            width: FIND_INPUT_AREA_WIDTH,\r\n            label: NLS_FIND_INPUT_LABEL,\r\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\r\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\r\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\r\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\r\n            validation: (value) => {\r\n                if (value.length === 0 || !this._findInput.getRegex()) {\r\n                    return null;\r\n                }\r\n                try {\r\n                    // use `g` and `u` which are also used by the TextModel search\r\n                    new RegExp(value, 'gu');\r\n                    return null;\r\n                }\r\n                catch (e) {\r\n                    return { content: e.message };\r\n                }\r\n            },\r\n            flexibleHeight,\r\n            flexibleWidth,\r\n            flexibleMaxHeight: 118,\r\n            showCommonFindToggles: true,\r\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\r\n            inputBoxStyles: defaultInputBoxStyles,\r\n            toggleStyles: defaultToggleStyles\r\n        }, this._contextKeyService));\r\n        this._findInput.setRegex(!!this._state.isRegex);\r\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\r\n        this._findInput.setWholeWords(!!this._state.wholeWord);\r\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\r\n        this._register(this._findInput.inputBox.onDidChange(() => {\r\n            if (this._ignoreChangeEvent) {\r\n                return;\r\n            }\r\n            this._state.change({ searchString: this._findInput.getValue() }, true);\r\n        }));\r\n        this._register(this._findInput.onDidOptionChange(() => {\r\n            this._state.change({\r\n                isRegex: this._findInput.getRegex(),\r\n                wholeWord: this._findInput.getWholeWords(),\r\n                matchCase: this._findInput.getCaseSensitive()\r\n            }, true);\r\n        }));\r\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\r\n            if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\r\n                if (this._isReplaceVisible) {\r\n                    this._replaceInput.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        this._register(this._findInput.onRegexKeyDown((e) => {\r\n            if (e.equals(2 /* KeyCode.Tab */)) {\r\n                if (this._isReplaceVisible) {\r\n                    this._replaceInput.focusOnPreserve();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\r\n            if (this._tryUpdateHeight()) {\r\n                this._showViewZone();\r\n            }\r\n        }));\r\n        if (platform.isLinux) {\r\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\r\n        }\r\n        this._matchesCount = document.createElement('div');\r\n        this._matchesCount.className = 'matchesCount';\r\n        this._updateMatchesCount();\r\n        // Previous button\r\n        this._prevBtn = this._register(new SimpleButton({\r\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\r\n            icon: findPreviousMatchIcon,\r\n            onTrigger: () => {\r\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction)).run().then(undefined, onUnexpectedError);\r\n            }\r\n        }));\r\n        // Next button\r\n        this._nextBtn = this._register(new SimpleButton({\r\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\r\n            icon: findNextMatchIcon,\r\n            onTrigger: () => {\r\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.NextMatchFindAction)).run().then(undefined, onUnexpectedError);\r\n            }\r\n        }));\r\n        const findPart = document.createElement('div');\r\n        findPart.className = 'find-part';\r\n        findPart.appendChild(this._findInput.domNode);\r\n        const actionsContainer = document.createElement('div');\r\n        actionsContainer.className = 'find-actions';\r\n        findPart.appendChild(actionsContainer);\r\n        actionsContainer.appendChild(this._matchesCount);\r\n        actionsContainer.appendChild(this._prevBtn.domNode);\r\n        actionsContainer.appendChild(this._nextBtn.domNode);\r\n        // Toggle selection button\r\n        this._toggleSelectionFind = this._register(new Toggle({\r\n            icon: findSelectionIcon,\r\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\r\n            isChecked: false,\r\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\r\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\r\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\r\n        }));\r\n        this._register(this._toggleSelectionFind.onChange(() => {\r\n            if (this._toggleSelectionFind.checked) {\r\n                if (this._codeEditor.hasModel()) {\r\n                    const selections = this._codeEditor.getSelections();\r\n                    selections.map(selection => {\r\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                        }\r\n                        if (!selection.isEmpty()) {\r\n                            return selection;\r\n                        }\r\n                        return null;\r\n                    }).filter(element => !!element);\r\n                    if (selections.length) {\r\n                        this._state.change({ searchScope: selections }, true);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this._state.change({ searchScope: null }, true);\r\n            }\r\n        }));\r\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\r\n        // Close button\r\n        this._closeBtn = this._register(new SimpleButton({\r\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\r\n            icon: widgetClose,\r\n            onTrigger: () => {\r\n                this._state.change({ isRevealed: false, searchScope: null }, false);\r\n            },\r\n            onKeyDown: (e) => {\r\n                if (e.equals(2 /* KeyCode.Tab */)) {\r\n                    if (this._isReplaceVisible) {\r\n                        if (this._replaceBtn.isEnabled()) {\r\n                            this._replaceBtn.focus();\r\n                        }\r\n                        else {\r\n                            this._codeEditor.focus();\r\n                        }\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n            }\r\n        }));\r\n        // Replace input\r\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\r\n            label: NLS_REPLACE_INPUT_LABEL,\r\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\r\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\r\n            history: [],\r\n            flexibleHeight,\r\n            flexibleWidth,\r\n            flexibleMaxHeight: 118,\r\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\r\n            inputBoxStyles: defaultInputBoxStyles,\r\n            toggleStyles: defaultToggleStyles\r\n        }, this._contextKeyService, true));\r\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\r\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\r\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\r\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\r\n        }));\r\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\r\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\r\n                this._showViewZone();\r\n            }\r\n        }));\r\n        this._register(this._replaceInput.onDidOptionChange(() => {\r\n            this._state.change({\r\n                preserveCase: this._replaceInput.getPreserveCase()\r\n            }, true);\r\n        }));\r\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\r\n            if (e.equals(2 /* KeyCode.Tab */)) {\r\n                if (this._prevBtn.isEnabled()) {\r\n                    this._prevBtn.focus();\r\n                }\r\n                else if (this._nextBtn.isEnabled()) {\r\n                    this._nextBtn.focus();\r\n                }\r\n                else if (this._toggleSelectionFind.enabled) {\r\n                    this._toggleSelectionFind.focus();\r\n                }\r\n                else if (this._closeBtn.isEnabled()) {\r\n                    this._closeBtn.focus();\r\n                }\r\n                e.preventDefault();\r\n            }\r\n        }));\r\n        // Replace one button\r\n        this._replaceBtn = this._register(new SimpleButton({\r\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\r\n            icon: findReplaceIcon,\r\n            onTrigger: () => {\r\n                this._controller.replace();\r\n            },\r\n            onKeyDown: (e) => {\r\n                if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\r\n                    this._closeBtn.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        // Replace all button\r\n        this._replaceAllBtn = this._register(new SimpleButton({\r\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\r\n            icon: findReplaceAllIcon,\r\n            onTrigger: () => {\r\n                this._controller.replaceAll();\r\n            }\r\n        }));\r\n        const replacePart = document.createElement('div');\r\n        replacePart.className = 'replace-part';\r\n        replacePart.appendChild(this._replaceInput.domNode);\r\n        const replaceActionsContainer = document.createElement('div');\r\n        replaceActionsContainer.className = 'replace-actions';\r\n        replacePart.appendChild(replaceActionsContainer);\r\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\r\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\r\n        // Toggle replace button\r\n        this._toggleReplaceBtn = this._register(new SimpleButton({\r\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\r\n            className: 'codicon toggle left',\r\n            onTrigger: () => {\r\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\r\n                if (this._isReplaceVisible) {\r\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n                    this._replaceInput.inputBox.layout();\r\n                }\r\n                this._showViewZone();\r\n            }\r\n        }));\r\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\r\n        // Widget\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.className = 'editor-widget find-widget';\r\n        this._domNode.setAttribute('aria-hidden', 'true');\r\n        this._domNode.ariaLabel = NLS_FIND_DIALOG_LABEL;\r\n        this._domNode.role = 'dialog';\r\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\r\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\r\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\r\n        this._domNode.appendChild(findPart);\r\n        this._domNode.appendChild(this._closeBtn.domNode);\r\n        this._domNode.appendChild(replacePart);\r\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* Orientation.VERTICAL */, size: 2 });\r\n        this._resized = false;\r\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\r\n        this._register(this._resizeSash.onDidStart(() => {\r\n            originalWidth = dom.getTotalWidth(this._domNode);\r\n        }));\r\n        this._register(this._resizeSash.onDidChange((evt) => {\r\n            this._resized = true;\r\n            const width = originalWidth + evt.startX - evt.currentX;\r\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\r\n                // narrow down the find widget should be handled by CSS.\r\n                return;\r\n            }\r\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\r\n            if (width > maxWidth) {\r\n                return;\r\n            }\r\n            this._domNode.style.width = `${width}px`;\r\n            if (this._isReplaceVisible) {\r\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n            }\r\n            this._findInput.inputBox.layout();\r\n            this._tryUpdateHeight();\r\n        }));\r\n        this._register(this._resizeSash.onDidReset(() => {\r\n            // users double click on the sash\r\n            const currentWidth = dom.getTotalWidth(this._domNode);\r\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\r\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\r\n                return;\r\n            }\r\n            let width = FIND_WIDGET_INITIAL_WIDTH;\r\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\r\n                // 1. never resized before, double click should maximizes it\r\n                // 2. users resized it already but its width is the same as default\r\n                const layoutInfo = this._codeEditor.getLayoutInfo();\r\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\r\n                this._resized = true;\r\n            }\r\n            else {\r\n                /**\r\n                 * no op, the find widget should be shrinked to its default size.\r\n                 */\r\n            }\r\n            this._domNode.style.width = `${width}px`;\r\n            if (this._isReplaceVisible) {\r\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n            }\r\n            this._findInput.inputBox.layout();\r\n        }));\r\n    }\r\n    updateAccessibilitySupport() {\r\n        const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\r\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\r\n    }\r\n}\r\nFindWidget.ID = 'editor.contrib.findWidget';\r\nexport class SimpleButton extends Widget {\r\n    constructor(opts) {\r\n        super();\r\n        this._opts = opts;\r\n        let className = 'button';\r\n        if (this._opts.className) {\r\n            className = className + ' ' + this._opts.className;\r\n        }\r\n        if (this._opts.icon) {\r\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\r\n        }\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.title = this._opts.label;\r\n        this._domNode.tabIndex = 0;\r\n        this._domNode.className = className;\r\n        this._domNode.setAttribute('role', 'button');\r\n        this._domNode.setAttribute('aria-label', this._opts.label);\r\n        this.onclick(this._domNode, (e) => {\r\n            this._opts.onTrigger();\r\n            e.preventDefault();\r\n        });\r\n        this.onkeydown(this._domNode, (e) => {\r\n            var _a, _b;\r\n            if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\r\n                this._opts.onTrigger();\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            (_b = (_a = this._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\r\n        });\r\n    }\r\n    get domNode() {\r\n        return this._domNode;\r\n    }\r\n    isEnabled() {\r\n        return (this._domNode.tabIndex >= 0);\r\n    }\r\n    focus() {\r\n        this._domNode.focus();\r\n    }\r\n    setEnabled(enabled) {\r\n        this._domNode.classList.toggle('disabled', !enabled);\r\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\r\n        this._domNode.tabIndex = enabled ? 0 : -1;\r\n    }\r\n    setExpanded(expanded) {\r\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\r\n        if (expanded) {\r\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\r\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\r\n        }\r\n        else {\r\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\r\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\r\n        }\r\n    }\r\n}\r\n// theming\r\nregisterThemingParticipant((theme, collector) => {\r\n    const addBackgroundColorRule = (selector, color) => {\r\n        if (color) {\r\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\r\n        }\r\n    };\r\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\r\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\r\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\r\n    const widgetBackground = theme.getColor(editorWidgetBackground);\r\n    addBackgroundColorRule('.find-widget', widgetBackground);\r\n    const widgetShadowColor = theme.getColor(widgetShadow);\r\n    if (widgetShadowColor) {\r\n        collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\r\n    }\r\n    const widgetBorderColor = theme.getColor(widgetBorder);\r\n    if (widgetBorderColor) {\r\n        collector.addRule(`.monaco-editor .find-widget { border-left: 1px solid ${widgetBorderColor}; border-right: 1px solid ${widgetBorderColor}; border-bottom: 1px solid ${widgetBorderColor}; }`);\r\n    }\r\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\r\n    if (findMatchHighlightBorder) {\r\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\r\n    }\r\n    const findMatchBorder = theme.getColor(editorFindMatchBorder);\r\n    if (findMatchBorder) {\r\n        collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\r\n    }\r\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\r\n    if (findRangeHighlightBorder) {\r\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\r\n    }\r\n    const hcBorder = theme.getColor(contrastBorder);\r\n    if (hcBorder) {\r\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\r\n    }\r\n    const foreground = theme.getColor(editorWidgetForeground);\r\n    if (foreground) {\r\n        collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\r\n    }\r\n    const error = theme.getColor(errorForeground);\r\n    if (error) {\r\n        collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\r\n    }\r\n    const resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\r\n    if (resizeBorderBackground) {\r\n        collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\r\n    }\r\n    else {\r\n        const border = theme.getColor(editorWidgetBorder);\r\n        if (border) {\r\n            collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\r\n        }\r\n    }\r\n    // Action bars\r\n    const toolbarHoverBackgroundColor = theme.getColor(toolbarHoverBackground);\r\n    if (toolbarHoverBackgroundColor) {\r\n        collector.addRule(`\r\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\r\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\r\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\r\n\t\t}\r\n\t`);\r\n    }\r\n    // This rule is used to override the outline color for synthetic-focus find input.\r\n    const focusOutline = theme.getColor(focusBorder);\r\n    if (focusOutline) {\r\n        collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../dom.js';\r\nimport { Toggle } from '../toggle/toggle.js';\r\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\r\nimport { Widget } from '../widget.js';\r\nimport { Codicon } from '../../../common/codicons.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport './findInput.css';\r\nimport * as nls from '../../../../nls.js';\r\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\r\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\r\nclass PreserveCaseToggle extends Toggle {\r\n    constructor(opts) {\r\n        super({\r\n            // TODO: does this need its own icon?\r\n            icon: Codicon.preserveCase,\r\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\r\n            isChecked: opts.isChecked,\r\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\r\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\r\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\r\n        });\r\n    }\r\n}\r\nexport class ReplaceInput extends Widget {\r\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\r\n        super();\r\n        this._showOptionButtons = _showOptionButtons;\r\n        this.fixFocusOnOptionClickEnabled = true;\r\n        this.cachedOptionsWidth = 0;\r\n        this._onDidOptionChange = this._register(new Emitter());\r\n        this.onDidOptionChange = this._onDidOptionChange.event;\r\n        this._onKeyDown = this._register(new Emitter());\r\n        this.onKeyDown = this._onKeyDown.event;\r\n        this._onMouseDown = this._register(new Emitter());\r\n        this._onInput = this._register(new Emitter());\r\n        this._onKeyUp = this._register(new Emitter());\r\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\r\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\r\n        this.contextViewProvider = contextViewProvider;\r\n        this.placeholder = options.placeholder || '';\r\n        this.validation = options.validation;\r\n        this.label = options.label || NLS_DEFAULT_LABEL;\r\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\r\n        const history = options.history || [];\r\n        const flexibleHeight = !!options.flexibleHeight;\r\n        const flexibleWidth = !!options.flexibleWidth;\r\n        const flexibleMaxHeight = options.flexibleMaxHeight;\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.classList.add('monaco-findInput');\r\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\r\n            ariaLabel: this.label || '',\r\n            placeholder: this.placeholder || '',\r\n            validationOptions: {\r\n                validation: this.validation\r\n            },\r\n            history,\r\n            showHistoryHint: options.showHistoryHint,\r\n            flexibleHeight,\r\n            flexibleWidth,\r\n            flexibleMaxHeight,\r\n            inputBoxStyles: options.inputBoxStyles\r\n        }));\r\n        this.preserveCase = this._register(new PreserveCaseToggle(Object.assign({ appendTitle: appendPreserveCaseLabel, isChecked: false }, options.toggleStyles)));\r\n        this._register(this.preserveCase.onChange(viaKeyboard => {\r\n            this._onDidOptionChange.fire(viaKeyboard);\r\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\r\n                this.inputBox.focus();\r\n            }\r\n            this.validate();\r\n        }));\r\n        this._register(this.preserveCase.onKeyDown(e => {\r\n            this._onPreserveCaseKeyDown.fire(e);\r\n        }));\r\n        if (this._showOptionButtons) {\r\n            this.cachedOptionsWidth = this.preserveCase.width();\r\n        }\r\n        else {\r\n            this.cachedOptionsWidth = 0;\r\n        }\r\n        // Arrow-Key support to navigate between options\r\n        const indexes = [this.preserveCase.domNode];\r\n        this.onkeydown(this.domNode, (event) => {\r\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\r\n                const index = indexes.indexOf(document.activeElement);\r\n                if (index >= 0) {\r\n                    let newIndex = -1;\r\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\r\n                        newIndex = (index + 1) % indexes.length;\r\n                    }\r\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\r\n                        if (index === 0) {\r\n                            newIndex = indexes.length - 1;\r\n                        }\r\n                        else {\r\n                            newIndex = index - 1;\r\n                        }\r\n                    }\r\n                    if (event.equals(9 /* KeyCode.Escape */)) {\r\n                        indexes[index].blur();\r\n                        this.inputBox.focus();\r\n                    }\r\n                    else if (newIndex >= 0) {\r\n                        indexes[newIndex].focus();\r\n                    }\r\n                    dom.EventHelper.stop(event, true);\r\n                }\r\n            }\r\n        });\r\n        const controls = document.createElement('div');\r\n        controls.className = 'controls';\r\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\r\n        controls.appendChild(this.preserveCase.domNode);\r\n        this.domNode.appendChild(controls);\r\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\r\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\r\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\r\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\r\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\r\n    }\r\n    enable() {\r\n        this.domNode.classList.remove('disabled');\r\n        this.inputBox.enable();\r\n        this.preserveCase.enable();\r\n    }\r\n    disable() {\r\n        this.domNode.classList.add('disabled');\r\n        this.inputBox.disable();\r\n        this.preserveCase.disable();\r\n    }\r\n    setEnabled(enabled) {\r\n        if (enabled) {\r\n            this.enable();\r\n        }\r\n        else {\r\n            this.disable();\r\n        }\r\n    }\r\n    select() {\r\n        this.inputBox.select();\r\n    }\r\n    focus() {\r\n        this.inputBox.focus();\r\n    }\r\n    getPreserveCase() {\r\n        return this.preserveCase.checked;\r\n    }\r\n    setPreserveCase(value) {\r\n        this.preserveCase.checked = value;\r\n    }\r\n    focusOnPreserve() {\r\n        this.preserveCase.focus();\r\n    }\r\n    validate() {\r\n        var _a;\r\n        (_a = this.inputBox) === null || _a === void 0 ? void 0 : _a.validate();\r\n    }\r\n    set width(newWidth) {\r\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\r\n        this.domNode.style.width = newWidth + 'px';\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\r\nimport { ReplaceInput } from '../../../base/browser/ui/findinput/replaceInput.js';\r\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\r\nimport { KeybindingsRegistry } from '../../keybinding/common/keybindingsRegistry.js';\r\nimport { localize } from '../../../nls.js';\r\nimport { DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\r\nexport const historyNavigationVisible = new RawContextKey('suggestWidgetVisible', false, localize('suggestWidgetVisible', \"Whether suggestion are visible\"));\r\nconst HistoryNavigationWidgetFocusContext = 'historyNavigationWidgetFocus';\r\nconst HistoryNavigationForwardsEnablementContext = 'historyNavigationForwardsEnabled';\r\nconst HistoryNavigationBackwardsEnablementContext = 'historyNavigationBackwardsEnabled';\r\nlet lastFocusedWidget = undefined;\r\nconst widgets = [];\r\nexport function registerAndCreateHistoryNavigationContext(scopedContextKeyService, widget) {\r\n    if (widgets.includes(widget)) {\r\n        throw new Error('Cannot register the same widget multiple times');\r\n    }\r\n    widgets.push(widget);\r\n    const disposableStore = new DisposableStore();\r\n    const historyNavigationWidgetFocus = new RawContextKey(HistoryNavigationWidgetFocusContext, false).bindTo(scopedContextKeyService);\r\n    const historyNavigationForwardsEnablement = new RawContextKey(HistoryNavigationForwardsEnablementContext, true).bindTo(scopedContextKeyService);\r\n    const historyNavigationBackwardsEnablement = new RawContextKey(HistoryNavigationBackwardsEnablementContext, true).bindTo(scopedContextKeyService);\r\n    const onDidFocus = () => {\r\n        historyNavigationWidgetFocus.set(true);\r\n        lastFocusedWidget = widget;\r\n    };\r\n    const onDidBlur = () => {\r\n        historyNavigationWidgetFocus.set(false);\r\n        if (lastFocusedWidget === widget) {\r\n            lastFocusedWidget = undefined;\r\n        }\r\n    };\r\n    // Check for currently being focused\r\n    if (widget.element === document.activeElement) {\r\n        onDidFocus();\r\n    }\r\n    disposableStore.add(widget.onDidFocus(() => onDidFocus()));\r\n    disposableStore.add(widget.onDidBlur(() => onDidBlur()));\r\n    disposableStore.add(toDisposable(() => {\r\n        widgets.splice(widgets.indexOf(widget), 1);\r\n        onDidBlur();\r\n    }));\r\n    return {\r\n        historyNavigationForwardsEnablement,\r\n        historyNavigationBackwardsEnablement,\r\n        dispose() {\r\n            disposableStore.dispose();\r\n        }\r\n    };\r\n}\r\nlet ContextScopedFindInput = class ContextScopedFindInput extends FindInput {\r\n    constructor(container, contextViewProvider, options, contextKeyService) {\r\n        super(container, contextViewProvider, options);\r\n        const scopedContextKeyService = this._register(contextKeyService.createScoped(this.inputBox.element));\r\n        this._register(registerAndCreateHistoryNavigationContext(scopedContextKeyService, this.inputBox));\r\n    }\r\n};\r\nContextScopedFindInput = __decorate([\r\n    __param(3, IContextKeyService)\r\n], ContextScopedFindInput);\r\nexport { ContextScopedFindInput };\r\nlet ContextScopedReplaceInput = class ContextScopedReplaceInput extends ReplaceInput {\r\n    constructor(container, contextViewProvider, options, contextKeyService, showReplaceOptions = false) {\r\n        super(container, contextViewProvider, showReplaceOptions, options);\r\n        const scopedContextKeyService = this._register(contextKeyService.createScoped(this.inputBox.element));\r\n        this._register(registerAndCreateHistoryNavigationContext(scopedContextKeyService, this.inputBox));\r\n    }\r\n};\r\nContextScopedReplaceInput = __decorate([\r\n    __param(3, IContextKeyService)\r\n], ContextScopedReplaceInput);\r\nexport { ContextScopedReplaceInput };\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'history.showPrevious',\r\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\r\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationBackwardsEnablementContext, true), ContextKeyExpr.not('isComposing'), historyNavigationVisible.isEqualTo(false)),\r\n    primary: 16 /* KeyCode.UpArrow */,\r\n    secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\r\n    handler: (accessor) => {\r\n        lastFocusedWidget === null || lastFocusedWidget === void 0 ? void 0 : lastFocusedWidget.showPreviousValue();\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'history.showNext',\r\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\r\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationForwardsEnablementContext, true), ContextKeyExpr.not('isComposing'), historyNavigationVisible.isEqualTo(false)),\r\n    primary: 18 /* KeyCode.DownArrow */,\r\n    secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\r\n    handler: (accessor) => {\r\n        lastFocusedWidget === null || lastFocusedWidget === void 0 ? void 0 : lastFocusedWidget.showNextValue();\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function showHistoryKeybindingHint(keybindingService) {\r\n    var _a, _b;\r\n    return ((_a = keybindingService.lookupKeybinding('history.showPrevious')) === null || _a === void 0 ? void 0 : _a.getElectronAccelerator()) === 'Up' && ((_b = keybindingService.lookupKeybinding('history.showNext')) === null || _b === void 0 ? void 0 : _b.getElectronAccelerator()) === 'Down';\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar FoldingController_1;\r\nimport { createCancelablePromise, Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { illegalArgument, onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\r\nimport * as types from '../../../../base/common/types.js';\r\nimport './folding.css';\r\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { FoldingRangeKind } from '../../../common/languages.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { FoldingModel, getNextFoldLine, getParentFoldLine as getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateForType, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp, toggleCollapseState } from './foldingModel.js';\r\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\r\nimport { IndentRangeProvider } from './indentRangeProvider.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { FoldingDecorationProvider } from './foldingDecorations.js';\r\nimport { FoldingRegions } from './foldingRanges.js';\r\nimport { SyntaxRangeProvider } from './syntaxRangeProvider.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nconst CONTEXT_FOLDING_ENABLED = new RawContextKey('foldingEnabled', false);\r\nlet FoldingController = FoldingController_1 = class FoldingController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(FoldingController_1.ID);\r\n    }\r\n    static getFoldingRangeProviders(languageFeaturesService, model) {\r\n        var _a, _b;\r\n        const foldingRangeProviders = languageFeaturesService.foldingRangeProvider.ordered(model);\r\n        return (_b = ((_a = FoldingController_1._foldingRangeSelector) === null || _a === void 0 ? void 0 : _a.call(FoldingController_1, foldingRangeProviders, model))) !== null && _b !== void 0 ? _b : foldingRangeProviders;\r\n    }\r\n    constructor(editor, contextKeyService, languageConfigurationService, notificationService, languageFeatureDebounceService, languageFeaturesService) {\r\n        super();\r\n        this.contextKeyService = contextKeyService;\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this.languageFeaturesService = languageFeaturesService;\r\n        this.localToDispose = this._register(new DisposableStore());\r\n        this.editor = editor;\r\n        this._foldingLimitReporter = new RangesLimitReporter(editor);\r\n        const options = this.editor.getOptions();\r\n        this._isEnabled = options.get(43 /* EditorOption.folding */);\r\n        this._useFoldingProviders = options.get(44 /* EditorOption.foldingStrategy */) !== 'indentation';\r\n        this._unfoldOnClickAfterEndOfLine = options.get(48 /* EditorOption.unfoldOnClickAfterEndOfLine */);\r\n        this._restoringViewState = false;\r\n        this._currentModelHasFoldedImports = false;\r\n        this._foldingImportsByDefault = options.get(46 /* EditorOption.foldingImportsByDefault */);\r\n        this.updateDebounceInfo = languageFeatureDebounceService.for(languageFeaturesService.foldingRangeProvider, 'Folding', { min: 200 });\r\n        this.foldingModel = null;\r\n        this.hiddenRangeModel = null;\r\n        this.rangeProvider = null;\r\n        this.foldingRegionPromise = null;\r\n        this.foldingModelPromise = null;\r\n        this.updateScheduler = null;\r\n        this.cursorChangedScheduler = null;\r\n        this.mouseDownInfo = null;\r\n        this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\r\n        this.foldingDecorationProvider.showFoldingControls = options.get(109 /* EditorOption.showFoldingControls */);\r\n        this.foldingDecorationProvider.showFoldingHighlights = options.get(45 /* EditorOption.foldingHighlight */);\r\n        this.foldingEnabled = CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService);\r\n        this.foldingEnabled.set(this._isEnabled);\r\n        this._register(this.editor.onDidChangeModel(() => this.onModelChanged()));\r\n        this._register(this.editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(43 /* EditorOption.folding */)) {\r\n                this._isEnabled = this.editor.getOptions().get(43 /* EditorOption.folding */);\r\n                this.foldingEnabled.set(this._isEnabled);\r\n                this.onModelChanged();\r\n            }\r\n            if (e.hasChanged(47 /* EditorOption.foldingMaximumRegions */)) {\r\n                this.onModelChanged();\r\n            }\r\n            if (e.hasChanged(109 /* EditorOption.showFoldingControls */) || e.hasChanged(45 /* EditorOption.foldingHighlight */)) {\r\n                const options = this.editor.getOptions();\r\n                this.foldingDecorationProvider.showFoldingControls = options.get(109 /* EditorOption.showFoldingControls */);\r\n                this.foldingDecorationProvider.showFoldingHighlights = options.get(45 /* EditorOption.foldingHighlight */);\r\n                this.triggerFoldingModelChanged();\r\n            }\r\n            if (e.hasChanged(44 /* EditorOption.foldingStrategy */)) {\r\n                this._useFoldingProviders = this.editor.getOptions().get(44 /* EditorOption.foldingStrategy */) !== 'indentation';\r\n                this.onFoldingStrategyChanged();\r\n            }\r\n            if (e.hasChanged(48 /* EditorOption.unfoldOnClickAfterEndOfLine */)) {\r\n                this._unfoldOnClickAfterEndOfLine = this.editor.getOptions().get(48 /* EditorOption.unfoldOnClickAfterEndOfLine */);\r\n            }\r\n            if (e.hasChanged(46 /* EditorOption.foldingImportsByDefault */)) {\r\n                this._foldingImportsByDefault = this.editor.getOptions().get(46 /* EditorOption.foldingImportsByDefault */);\r\n            }\r\n        }));\r\n        this.onModelChanged();\r\n    }\r\n    /**\r\n     * Store view state.\r\n     */\r\n    saveViewState() {\r\n        const model = this.editor.getModel();\r\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\r\n            return {};\r\n        }\r\n        if (this.foldingModel) { // disposed ?\r\n            const collapsedRegions = this.foldingModel.getMemento();\r\n            const provider = this.rangeProvider ? this.rangeProvider.id : undefined;\r\n            return { collapsedRegions, lineCount: model.getLineCount(), provider, foldedImports: this._currentModelHasFoldedImports };\r\n        }\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Restore view state.\r\n     */\r\n    restoreViewState(state) {\r\n        const model = this.editor.getModel();\r\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\r\n            return;\r\n        }\r\n        if (!state) {\r\n            return;\r\n        }\r\n        this._currentModelHasFoldedImports = !!state.foldedImports;\r\n        if (state.collapsedRegions && state.collapsedRegions.length > 0 && this.foldingModel) {\r\n            this._restoringViewState = true;\r\n            try {\r\n                this.foldingModel.applyMemento(state.collapsedRegions);\r\n            }\r\n            finally {\r\n                this._restoringViewState = false;\r\n            }\r\n        }\r\n    }\r\n    onModelChanged() {\r\n        this.localToDispose.clear();\r\n        const model = this.editor.getModel();\r\n        if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\r\n            // huge files get no view model, so they cannot support hidden areas\r\n            return;\r\n        }\r\n        this._currentModelHasFoldedImports = false;\r\n        this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\r\n        this.localToDispose.add(this.foldingModel);\r\n        this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\r\n        this.localToDispose.add(this.hiddenRangeModel);\r\n        this.localToDispose.add(this.hiddenRangeModel.onDidChange(hr => this.onHiddenRangesChanges(hr)));\r\n        this.updateScheduler = new Delayer(this.updateDebounceInfo.get(model));\r\n        this.cursorChangedScheduler = new RunOnceScheduler(() => this.revealCursor(), 200);\r\n        this.localToDispose.add(this.cursorChangedScheduler);\r\n        this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(() => this.onFoldingStrategyChanged()));\r\n        this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(() => this.onFoldingStrategyChanged())); // covers model language changes as well\r\n        this.localToDispose.add(this.editor.onDidChangeModelContent(e => this.onDidChangeModelContent(e)));\r\n        this.localToDispose.add(this.editor.onDidChangeCursorPosition(() => this.onCursorPositionChanged()));\r\n        this.localToDispose.add(this.editor.onMouseDown(e => this.onEditorMouseDown(e)));\r\n        this.localToDispose.add(this.editor.onMouseUp(e => this.onEditorMouseUp(e)));\r\n        this.localToDispose.add({\r\n            dispose: () => {\r\n                var _a, _b;\r\n                if (this.foldingRegionPromise) {\r\n                    this.foldingRegionPromise.cancel();\r\n                    this.foldingRegionPromise = null;\r\n                }\r\n                (_a = this.updateScheduler) === null || _a === void 0 ? void 0 : _a.cancel();\r\n                this.updateScheduler = null;\r\n                this.foldingModel = null;\r\n                this.foldingModelPromise = null;\r\n                this.hiddenRangeModel = null;\r\n                this.cursorChangedScheduler = null;\r\n                (_b = this.rangeProvider) === null || _b === void 0 ? void 0 : _b.dispose();\r\n                this.rangeProvider = null;\r\n            }\r\n        });\r\n        this.triggerFoldingModelChanged();\r\n    }\r\n    onFoldingStrategyChanged() {\r\n        var _a;\r\n        (_a = this.rangeProvider) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this.rangeProvider = null;\r\n        this.triggerFoldingModelChanged();\r\n    }\r\n    getRangeProvider(editorModel) {\r\n        if (this.rangeProvider) {\r\n            return this.rangeProvider;\r\n        }\r\n        const indentRangeProvider = new IndentRangeProvider(editorModel, this.languageConfigurationService, this._foldingLimitReporter);\r\n        this.rangeProvider = indentRangeProvider; // fallback\r\n        if (this._useFoldingProviders && this.foldingModel) {\r\n            const selectedProviders = FoldingController_1.getFoldingRangeProviders(this.languageFeaturesService, editorModel);\r\n            if (selectedProviders.length > 0) {\r\n                this.rangeProvider = new SyntaxRangeProvider(editorModel, selectedProviders, () => this.triggerFoldingModelChanged(), this._foldingLimitReporter, indentRangeProvider);\r\n            }\r\n        }\r\n        return this.rangeProvider;\r\n    }\r\n    getFoldingModel() {\r\n        return this.foldingModelPromise;\r\n    }\r\n    onDidChangeModelContent(e) {\r\n        var _a;\r\n        (_a = this.hiddenRangeModel) === null || _a === void 0 ? void 0 : _a.notifyChangeModelContent(e);\r\n        this.triggerFoldingModelChanged();\r\n    }\r\n    triggerFoldingModelChanged() {\r\n        if (this.updateScheduler) {\r\n            if (this.foldingRegionPromise) {\r\n                this.foldingRegionPromise.cancel();\r\n                this.foldingRegionPromise = null;\r\n            }\r\n            this.foldingModelPromise = this.updateScheduler.trigger(() => {\r\n                const foldingModel = this.foldingModel;\r\n                if (!foldingModel) { // null if editor has been disposed, or folding turned off\r\n                    return null;\r\n                }\r\n                const sw = new StopWatch();\r\n                const provider = this.getRangeProvider(foldingModel.textModel);\r\n                const foldingRegionPromise = this.foldingRegionPromise = createCancelablePromise(token => provider.compute(token));\r\n                return foldingRegionPromise.then(foldingRanges => {\r\n                    if (foldingRanges && foldingRegionPromise === this.foldingRegionPromise) { // new request or cancelled in the meantime?\r\n                        let scrollState;\r\n                        if (this._foldingImportsByDefault && !this._currentModelHasFoldedImports) {\r\n                            const hasChanges = foldingRanges.setCollapsedAllOfType(FoldingRangeKind.Imports.value, true);\r\n                            if (hasChanges) {\r\n                                scrollState = StableEditorScrollState.capture(this.editor);\r\n                                this._currentModelHasFoldedImports = hasChanges;\r\n                            }\r\n                        }\r\n                        // some cursors might have moved into hidden regions, make sure they are in expanded regions\r\n                        const selections = this.editor.getSelections();\r\n                        const selectionLineNumbers = selections ? selections.map(s => s.startLineNumber) : [];\r\n                        foldingModel.update(foldingRanges, selectionLineNumbers);\r\n                        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this.editor);\r\n                        // update debounce info\r\n                        const newValue = this.updateDebounceInfo.update(foldingModel.textModel, sw.elapsed());\r\n                        if (this.updateScheduler) {\r\n                            this.updateScheduler.defaultDelay = newValue;\r\n                        }\r\n                    }\r\n                    return foldingModel;\r\n                });\r\n            }).then(undefined, (err) => {\r\n                onUnexpectedError(err);\r\n                return null;\r\n            });\r\n        }\r\n    }\r\n    onHiddenRangesChanges(hiddenRanges) {\r\n        if (this.hiddenRangeModel && hiddenRanges.length && !this._restoringViewState) {\r\n            const selections = this.editor.getSelections();\r\n            if (selections) {\r\n                if (this.hiddenRangeModel.adjustSelections(selections)) {\r\n                    this.editor.setSelections(selections);\r\n                }\r\n            }\r\n        }\r\n        this.editor.setHiddenAreas(hiddenRanges, this);\r\n    }\r\n    onCursorPositionChanged() {\r\n        if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\r\n            this.cursorChangedScheduler.schedule();\r\n        }\r\n    }\r\n    revealCursor() {\r\n        const foldingModel = this.getFoldingModel();\r\n        if (!foldingModel) {\r\n            return;\r\n        }\r\n        foldingModel.then(foldingModel => {\r\n            if (foldingModel) {\r\n                const selections = this.editor.getSelections();\r\n                if (selections && selections.length > 0) {\r\n                    const toToggle = [];\r\n                    for (const selection of selections) {\r\n                        const lineNumber = selection.selectionStartLineNumber;\r\n                        if (this.hiddenRangeModel && this.hiddenRangeModel.isHidden(lineNumber)) {\r\n                            toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber, r => r.isCollapsed && lineNumber > r.startLineNumber));\r\n                        }\r\n                    }\r\n                    if (toToggle.length) {\r\n                        foldingModel.toggleCollapseState(toToggle);\r\n                        this.reveal(selections[0].getPosition());\r\n                    }\r\n                }\r\n            }\r\n        }).then(undefined, onUnexpectedError);\r\n    }\r\n    onEditorMouseDown(e) {\r\n        this.mouseDownInfo = null;\r\n        if (!this.hiddenRangeModel || !e.target || !e.target.range) {\r\n            return;\r\n        }\r\n        if (!e.event.leftButton && !e.event.middleButton) {\r\n            return;\r\n        }\r\n        const range = e.target.range;\r\n        let iconClicked = false;\r\n        switch (e.target.type) {\r\n            case 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */: {\r\n                const data = e.target.detail;\r\n                const offsetLeftInGutter = e.target.element.offsetLeft;\r\n                const gutterOffsetX = data.offsetX - offsetLeftInGutter;\r\n                // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\r\n                // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\r\n                if (gutterOffsetX < 4) { // the whitespace between the border and the real folding icon border is 4px\r\n                    return;\r\n                }\r\n                iconClicked = true;\r\n                break;\r\n            }\r\n            case 7 /* MouseTargetType.CONTENT_EMPTY */: {\r\n                if (this._unfoldOnClickAfterEndOfLine && this.hiddenRangeModel.hasRanges()) {\r\n                    const data = e.target.detail;\r\n                    if (!data.isAfterLines) {\r\n                        break;\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            case 6 /* MouseTargetType.CONTENT_TEXT */: {\r\n                if (this.hiddenRangeModel.hasRanges()) {\r\n                    const model = this.editor.getModel();\r\n                    if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\r\n                        break;\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n        this.mouseDownInfo = { lineNumber: range.startLineNumber, iconClicked };\r\n    }\r\n    onEditorMouseUp(e) {\r\n        const foldingModel = this.foldingModel;\r\n        if (!foldingModel || !this.mouseDownInfo || !e.target) {\r\n            return;\r\n        }\r\n        const lineNumber = this.mouseDownInfo.lineNumber;\r\n        const iconClicked = this.mouseDownInfo.iconClicked;\r\n        const range = e.target.range;\r\n        if (!range || range.startLineNumber !== lineNumber) {\r\n            return;\r\n        }\r\n        if (iconClicked) {\r\n            if (e.target.type !== 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            const model = this.editor.getModel();\r\n            if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\r\n                return;\r\n            }\r\n        }\r\n        const region = foldingModel.getRegionAtLine(lineNumber);\r\n        if (region && region.startLineNumber === lineNumber) {\r\n            const isCollapsed = region.isCollapsed;\r\n            if (iconClicked || isCollapsed) {\r\n                const surrounding = e.event.altKey;\r\n                let toToggle = [];\r\n                if (surrounding) {\r\n                    const filter = (otherRegion) => !otherRegion.containedBy(region) && !region.containedBy(otherRegion);\r\n                    const toMaybeToggle = foldingModel.getRegionsInside(null, filter);\r\n                    for (const r of toMaybeToggle) {\r\n                        if (r.isCollapsed) {\r\n                            toToggle.push(r);\r\n                        }\r\n                    }\r\n                    // if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding\r\n                    if (toToggle.length === 0) {\r\n                        toToggle = toMaybeToggle;\r\n                    }\r\n                }\r\n                else {\r\n                    const recursive = e.event.middleButton || e.event.shiftKey;\r\n                    if (recursive) {\r\n                        for (const r of foldingModel.getRegionsInside(region)) {\r\n                            if (r.isCollapsed === isCollapsed) {\r\n                                toToggle.push(r);\r\n                            }\r\n                        }\r\n                    }\r\n                    // when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.\r\n                    if (isCollapsed || !recursive || toToggle.length === 0) {\r\n                        toToggle.push(region);\r\n                    }\r\n                }\r\n                foldingModel.toggleCollapseState(toToggle);\r\n                this.reveal({ lineNumber, column: 1 });\r\n            }\r\n        }\r\n    }\r\n    reveal(position) {\r\n        this.editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\r\n    }\r\n};\r\nFoldingController.ID = 'editor.contrib.folding';\r\nFoldingController = FoldingController_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, ILanguageConfigurationService),\r\n    __param(3, INotificationService),\r\n    __param(4, ILanguageFeatureDebounceService),\r\n    __param(5, ILanguageFeaturesService)\r\n], FoldingController);\r\nexport { FoldingController };\r\nexport class RangesLimitReporter {\r\n    constructor(editor) {\r\n        this.editor = editor;\r\n        this._onDidChange = new Emitter();\r\n        this._computed = 0;\r\n        this._limited = false;\r\n    }\r\n    get limit() {\r\n        return this.editor.getOptions().get(47 /* EditorOption.foldingMaximumRegions */);\r\n    }\r\n    update(computed, limited) {\r\n        if (computed !== this._computed || limited !== this._limited) {\r\n            this._computed = computed;\r\n            this._limited = limited;\r\n            this._onDidChange.fire();\r\n        }\r\n    }\r\n}\r\nclass FoldingAction extends EditorAction {\r\n    runEditorCommand(accessor, editor, args) {\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        const foldingController = FoldingController.get(editor);\r\n        if (!foldingController) {\r\n            return;\r\n        }\r\n        const foldingModelPromise = foldingController.getFoldingModel();\r\n        if (foldingModelPromise) {\r\n            this.reportTelemetry(accessor, editor);\r\n            return foldingModelPromise.then(foldingModel => {\r\n                if (foldingModel) {\r\n                    this.invoke(foldingController, foldingModel, editor, args, languageConfigurationService);\r\n                    const selection = editor.getSelection();\r\n                    if (selection) {\r\n                        foldingController.reveal(selection.getStartPosition());\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    getSelectedLines(editor) {\r\n        const selections = editor.getSelections();\r\n        return selections ? selections.map(s => s.startLineNumber) : [];\r\n    }\r\n    getLineNumbers(args, editor) {\r\n        if (args && args.selectionLines) {\r\n            return args.selectionLines.map(l => l + 1); // to 0-bases line numbers\r\n        }\r\n        return this.getSelectedLines(editor);\r\n    }\r\n    run(_accessor, _editor) {\r\n    }\r\n}\r\nfunction foldingArgumentsConstraint(args) {\r\n    if (!types.isUndefined(args)) {\r\n        if (!types.isObject(args)) {\r\n            return false;\r\n        }\r\n        const foldingArgs = args;\r\n        if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\r\n            return false;\r\n        }\r\n        if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\r\n            return false;\r\n        }\r\n        if (!types.isUndefined(foldingArgs.selectionLines) && (!Array.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nclass UnfoldAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.unfold',\r\n            label: nls.localize('unfoldAction.label', \"Unfold\"),\r\n            alias: 'Unfold',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 94 /* KeyCode.BracketRight */,\r\n                mac: {\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 94 /* KeyCode.BracketRight */\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            description: {\r\n                description: 'Unfold the content in the editor',\r\n                args: [\r\n                    {\r\n                        name: 'Unfold editor argument',\r\n                        description: `Property-value pairs that can be passed through this argument:\r\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\r\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\r\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\r\n\t\t\t\t\t\t`,\r\n                        constraint: foldingArgumentsConstraint,\r\n                        schema: {\r\n                            'type': 'object',\r\n                            'properties': {\r\n                                'levels': {\r\n                                    'type': 'number',\r\n                                    'default': 1\r\n                                },\r\n                                'direction': {\r\n                                    'type': 'string',\r\n                                    'enum': ['up', 'down'],\r\n                                    'default': 'down'\r\n                                },\r\n                                'selectionLines': {\r\n                                    'type': 'array',\r\n                                    'items': {\r\n                                        'type': 'number'\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor, args) {\r\n        const levels = args && args.levels || 1;\r\n        const lineNumbers = this.getLineNumbers(args, editor);\r\n        if (args && args.direction === 'up') {\r\n            setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\r\n        }\r\n        else {\r\n            setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\r\n        }\r\n    }\r\n}\r\nclass UnFoldRecursivelyAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.unfoldRecursively',\r\n            label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\r\n            alias: 'Unfold Recursively',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor, _args) {\r\n        setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\r\n    }\r\n}\r\nclass FoldAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.fold',\r\n            label: nls.localize('foldAction.label', \"Fold\"),\r\n            alias: 'Fold',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 92 /* KeyCode.BracketLeft */,\r\n                mac: {\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 92 /* KeyCode.BracketLeft */\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            description: {\r\n                description: 'Fold the content in the editor',\r\n                args: [\r\n                    {\r\n                        name: 'Fold editor argument',\r\n                        description: `Property-value pairs that can be passed through this argument:\r\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\r\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\r\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\r\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\r\n\t\t\t\t\t\t`,\r\n                        constraint: foldingArgumentsConstraint,\r\n                        schema: {\r\n                            'type': 'object',\r\n                            'properties': {\r\n                                'levels': {\r\n                                    'type': 'number',\r\n                                },\r\n                                'direction': {\r\n                                    'type': 'string',\r\n                                    'enum': ['up', 'down'],\r\n                                },\r\n                                'selectionLines': {\r\n                                    'type': 'array',\r\n                                    'items': {\r\n                                        'type': 'number'\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor, args) {\r\n        const lineNumbers = this.getLineNumbers(args, editor);\r\n        const levels = args && args.levels;\r\n        const direction = args && args.direction;\r\n        if (typeof levels !== 'number' && typeof direction !== 'string') {\r\n            // fold the region at the location or if already collapsed, the first uncollapsed parent instead.\r\n            setCollapseStateUp(foldingModel, true, lineNumbers);\r\n        }\r\n        else {\r\n            if (direction === 'up') {\r\n                setCollapseStateLevelsUp(foldingModel, true, levels || 1, lineNumbers);\r\n            }\r\n            else {\r\n                setCollapseStateLevelsDown(foldingModel, true, levels || 1, lineNumbers);\r\n            }\r\n        }\r\n    }\r\n}\r\nclass ToggleFoldAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.toggleFold',\r\n            label: nls.localize('toggleFoldAction.label', \"Toggle Fold\"),\r\n            alias: 'Toggle Fold',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        const selectedLines = this.getSelectedLines(editor);\r\n        toggleCollapseState(foldingModel, 1, selectedLines);\r\n    }\r\n}\r\nclass FoldRecursivelyAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.foldRecursively',\r\n            label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\r\n            alias: 'Fold Recursively',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        const selectedLines = this.getSelectedLines(editor);\r\n        setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\r\n    }\r\n}\r\nclass FoldAllBlockCommentsAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.foldAllBlockComments',\r\n            label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\r\n            alias: 'Fold All Block Comments',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\r\n        if (foldingModel.regions.hasTypes()) {\r\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\r\n        }\r\n        else {\r\n            const editorModel = editor.getModel();\r\n            if (!editorModel) {\r\n                return;\r\n            }\r\n            const comments = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).comments;\r\n            if (comments && comments.blockCommentStartToken) {\r\n                const regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\r\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\r\n            }\r\n        }\r\n    }\r\n}\r\nclass FoldAllRegionsAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.foldAllMarkerRegions',\r\n            label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\r\n            alias: 'Fold All Regions',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 29 /* KeyCode.Digit8 */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\r\n        if (foldingModel.regions.hasTypes()) {\r\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\r\n        }\r\n        else {\r\n            const editorModel = editor.getModel();\r\n            if (!editorModel) {\r\n                return;\r\n            }\r\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\r\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\r\n                const regExp = new RegExp(foldingRules.markers.start);\r\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\r\n            }\r\n        }\r\n    }\r\n}\r\nclass UnfoldAllRegionsAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.unfoldAllMarkerRegions',\r\n            label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\r\n            alias: 'Unfold All Regions',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 30 /* KeyCode.Digit9 */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\r\n        if (foldingModel.regions.hasTypes()) {\r\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\r\n        }\r\n        else {\r\n            const editorModel = editor.getModel();\r\n            if (!editorModel) {\r\n                return;\r\n            }\r\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\r\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\r\n                const regExp = new RegExp(foldingRules.markers.start);\r\n                setCollapseStateForMatchingLines(foldingModel, regExp, false);\r\n            }\r\n        }\r\n    }\r\n}\r\nclass FoldAllExceptAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.foldAllExcept',\r\n            label: nls.localize('foldAllExcept.label', \"Fold All Except Selected\"),\r\n            alias: 'Fold All Except Selected',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 88 /* KeyCode.Minus */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        const selectedLines = this.getSelectedLines(editor);\r\n        setCollapseStateForRest(foldingModel, true, selectedLines);\r\n    }\r\n}\r\nclass UnfoldAllExceptAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.unfoldAllExcept',\r\n            label: nls.localize('unfoldAllExcept.label', \"Unfold All Except Selected\"),\r\n            alias: 'Unfold All Except Selected',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 86 /* KeyCode.Equal */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        const selectedLines = this.getSelectedLines(editor);\r\n        setCollapseStateForRest(foldingModel, false, selectedLines);\r\n    }\r\n}\r\nclass FoldAllAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.foldAll',\r\n            label: nls.localize('foldAllAction.label', \"Fold All\"),\r\n            alias: 'Fold All',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 21 /* KeyCode.Digit0 */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, _editor) {\r\n        setCollapseStateLevelsDown(foldingModel, true);\r\n    }\r\n}\r\nclass UnfoldAllAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.unfoldAll',\r\n            label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\r\n            alias: 'Unfold All',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 40 /* KeyCode.KeyJ */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, _editor) {\r\n        setCollapseStateLevelsDown(foldingModel, false);\r\n    }\r\n}\r\nclass FoldLevelAction extends FoldingAction {\r\n    getFoldingLevel() {\r\n        return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\r\n    }\r\n}\r\nFoldLevelAction.ID_PREFIX = 'editor.foldLevel';\r\nFoldLevelAction.ID = (level) => FoldLevelAction.ID_PREFIX + level;\r\n/** Action to go to the parent fold of current line */\r\nclass GotoParentFoldAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.gotoParentFold',\r\n            label: nls.localize('gotoParentFold.label', \"Go to Parent Fold\"),\r\n            alias: 'Go to Parent Fold',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        const selectedLines = this.getSelectedLines(editor);\r\n        if (selectedLines.length > 0) {\r\n            const startLineNumber = getParentFoldLine(selectedLines[0], foldingModel);\r\n            if (startLineNumber !== null) {\r\n                editor.setSelection({\r\n                    startLineNumber: startLineNumber,\r\n                    startColumn: 1,\r\n                    endLineNumber: startLineNumber,\r\n                    endColumn: 1\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n/** Action to go to the previous fold of current line */\r\nclass GotoPreviousFoldAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.gotoPreviousFold',\r\n            label: nls.localize('gotoPreviousFold.label', \"Go to Previous Folding Range\"),\r\n            alias: 'Go to Previous Folding Range',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        const selectedLines = this.getSelectedLines(editor);\r\n        if (selectedLines.length > 0) {\r\n            const startLineNumber = getPreviousFoldLine(selectedLines[0], foldingModel);\r\n            if (startLineNumber !== null) {\r\n                editor.setSelection({\r\n                    startLineNumber: startLineNumber,\r\n                    startColumn: 1,\r\n                    endLineNumber: startLineNumber,\r\n                    endColumn: 1\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n/** Action to go to the next fold of current line */\r\nclass GotoNextFoldAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.gotoNextFold',\r\n            label: nls.localize('gotoNextFold.label', \"Go to Next Folding Range\"),\r\n            alias: 'Go to Next Folding Range',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        const selectedLines = this.getSelectedLines(editor);\r\n        if (selectedLines.length > 0) {\r\n            const startLineNumber = getNextFoldLine(selectedLines[0], foldingModel);\r\n            if (startLineNumber !== null) {\r\n                editor.setSelection({\r\n                    startLineNumber: startLineNumber,\r\n                    startColumn: 1,\r\n                    endLineNumber: startLineNumber,\r\n                    endColumn: 1\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\nclass FoldRangeFromSelectionAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.createFoldingRangeFromSelection',\r\n            label: nls.localize('createManualFoldRange.label', \"Create Folding Range from Selection\"),\r\n            alias: 'Create Folding Range from Selection',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.Comma */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(_foldingController, foldingModel, editor) {\r\n        var _a;\r\n        const collapseRanges = [];\r\n        const selections = editor.getSelections();\r\n        if (selections) {\r\n            for (const selection of selections) {\r\n                let endLineNumber = selection.endLineNumber;\r\n                if (selection.endColumn === 1) {\r\n                    --endLineNumber;\r\n                }\r\n                if (endLineNumber > selection.startLineNumber) {\r\n                    collapseRanges.push({\r\n                        startLineNumber: selection.startLineNumber,\r\n                        endLineNumber: endLineNumber,\r\n                        type: undefined,\r\n                        isCollapsed: true,\r\n                        source: 1 /* FoldSource.userDefined */\r\n                    });\r\n                    editor.setSelection({\r\n                        startLineNumber: selection.startLineNumber,\r\n                        startColumn: 1,\r\n                        endLineNumber: selection.startLineNumber,\r\n                        endColumn: 1\r\n                    });\r\n                }\r\n            }\r\n            if (collapseRanges.length > 0) {\r\n                collapseRanges.sort((a, b) => {\r\n                    return a.startLineNumber - b.startLineNumber;\r\n                });\r\n                const newRanges = FoldingRegions.sanitizeAndMerge(foldingModel.regions, collapseRanges, (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLineCount());\r\n                foldingModel.updatePost(FoldingRegions.fromFoldRanges(newRanges));\r\n            }\r\n        }\r\n    }\r\n}\r\nclass RemoveFoldRangeFromSelectionAction extends FoldingAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.removeManualFoldingRanges',\r\n            label: nls.localize('removeManualFoldingRanges.label', \"Remove Manual Folding Ranges\"),\r\n            alias: 'Remove Manual Folding Ranges',\r\n            precondition: CONTEXT_FOLDING_ENABLED,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    invoke(foldingController, foldingModel, editor) {\r\n        const selections = editor.getSelections();\r\n        if (selections) {\r\n            const ranges = [];\r\n            for (const selection of selections) {\r\n                const { startLineNumber, endLineNumber } = selection;\r\n                ranges.push(endLineNumber >= startLineNumber ? { startLineNumber, endLineNumber } : { endLineNumber, startLineNumber });\r\n            }\r\n            foldingModel.removeManualRanges(ranges);\r\n            foldingController.triggerFoldingModelChanged();\r\n        }\r\n    }\r\n}\r\nregisterEditorContribution(FoldingController.ID, FoldingController, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\r\nregisterEditorAction(UnfoldAction);\r\nregisterEditorAction(UnFoldRecursivelyAction);\r\nregisterEditorAction(FoldAction);\r\nregisterEditorAction(FoldRecursivelyAction);\r\nregisterEditorAction(FoldAllAction);\r\nregisterEditorAction(UnfoldAllAction);\r\nregisterEditorAction(FoldAllBlockCommentsAction);\r\nregisterEditorAction(FoldAllRegionsAction);\r\nregisterEditorAction(UnfoldAllRegionsAction);\r\nregisterEditorAction(FoldAllExceptAction);\r\nregisterEditorAction(UnfoldAllExceptAction);\r\nregisterEditorAction(ToggleFoldAction);\r\nregisterEditorAction(GotoParentFoldAction);\r\nregisterEditorAction(GotoPreviousFoldAction);\r\nregisterEditorAction(GotoNextFoldAction);\r\nregisterEditorAction(FoldRangeFromSelectionAction);\r\nregisterEditorAction(RemoveFoldRangeFromSelectionAction);\r\nfor (let i = 1; i <= 7; i++) {\r\n    registerInstantiatedEditorAction(new FoldLevelAction({\r\n        id: FoldLevelAction.ID(i),\r\n        label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\r\n        alias: `Fold Level ${i}`,\r\n        precondition: CONTEXT_FOLDING_ENABLED,\r\n        kbOpts: {\r\n            kbExpr: EditorContextKeys.editorTextFocus,\r\n            primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | (21 /* KeyCode.Digit0 */ + i)),\r\n            weight: 100 /* KeybindingWeight.EditorContrib */\r\n        }\r\n    }));\r\n}\r\nCommandsRegistry.registerCommand('_executeFoldingRangeProvider', function (accessor, ...args) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const [resource] = args;\r\n        if (!(resource instanceof URI)) {\r\n            throw illegalArgument();\r\n        }\r\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n        const model = accessor.get(IModelService).getModel(resource);\r\n        if (!model) {\r\n            throw illegalArgument();\r\n        }\r\n        const configurationService = accessor.get(IConfigurationService);\r\n        if (!configurationService.getValue('editor.folding', { resource })) {\r\n            return [];\r\n        }\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        const strategy = configurationService.getValue('editor.foldingStrategy', { resource });\r\n        const foldingLimitReporter = {\r\n            get limit() {\r\n                return configurationService.getValue('editor.foldingMaximumRegions', { resource });\r\n            },\r\n            update: (computed, limited) => { }\r\n        };\r\n        const indentRangeProvider = new IndentRangeProvider(model, languageConfigurationService, foldingLimitReporter);\r\n        let rangeProvider = indentRangeProvider;\r\n        if (strategy !== 'indentation') {\r\n            const providers = FoldingController.getFoldingRangeProviders(languageFeaturesService, model);\r\n            if (providers.length) {\r\n                rangeProvider = new SyntaxRangeProvider(model, providers, () => { }, foldingLimitReporter, indentRangeProvider);\r\n            }\r\n        }\r\n        const ranges = yield rangeProvider.compute(CancellationToken.None);\r\n        const result = [];\r\n        try {\r\n            if (ranges) {\r\n                for (let i = 0; i < ranges.length; i++) {\r\n                    const type = ranges.getType(i);\r\n                    result.push({ start: ranges.getStartLineNumber(i), end: ranges.getEndLineNumber(i), kind: type ? FoldingRangeKind.fromValue(type) : undefined });\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        finally {\r\n            rangeProvider.dispose();\r\n        }\r\n    });\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { FoldingRegions } from './foldingRanges.js';\r\nimport { hash } from '../../../../base/common/hash.js';\r\nexport class FoldingModel {\r\n    get regions() { return this._regions; }\r\n    get textModel() { return this._textModel; }\r\n    constructor(textModel, decorationProvider) {\r\n        this._updateEventEmitter = new Emitter();\r\n        this.onDidChange = this._updateEventEmitter.event;\r\n        this._textModel = textModel;\r\n        this._decorationProvider = decorationProvider;\r\n        this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\r\n        this._editorDecorationIds = [];\r\n    }\r\n    toggleCollapseState(toggledRegions) {\r\n        if (!toggledRegions.length) {\r\n            return;\r\n        }\r\n        toggledRegions = toggledRegions.sort((r1, r2) => r1.regionIndex - r2.regionIndex);\r\n        const processed = {};\r\n        this._decorationProvider.changeDecorations(accessor => {\r\n            let k = 0; // index from [0 ... this.regions.length]\r\n            let dirtyRegionEndLine = -1; // end of the range where decorations need to be updated\r\n            let lastHiddenLine = -1; // the end of the last hidden lines\r\n            const updateDecorationsUntil = (index) => {\r\n                while (k < index) {\r\n                    const endLineNumber = this._regions.getEndLineNumber(k);\r\n                    const isCollapsed = this._regions.isCollapsed(k);\r\n                    if (endLineNumber <= dirtyRegionEndLine) {\r\n                        const isManual = this.regions.getSource(k) !== 0 /* FoldSource.provider */;\r\n                        accessor.changeDecorationOptions(this._editorDecorationIds[k], this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual));\r\n                    }\r\n                    if (isCollapsed && endLineNumber > lastHiddenLine) {\r\n                        lastHiddenLine = endLineNumber;\r\n                    }\r\n                    k++;\r\n                }\r\n            };\r\n            for (const region of toggledRegions) {\r\n                const index = region.regionIndex;\r\n                const editorDecorationId = this._editorDecorationIds[index];\r\n                if (editorDecorationId && !processed[editorDecorationId]) {\r\n                    processed[editorDecorationId] = true;\r\n                    updateDecorationsUntil(index); // update all decorations up to current index using the old dirtyRegionEndLine\r\n                    const newCollapseState = !this._regions.isCollapsed(index);\r\n                    this._regions.setCollapsed(index, newCollapseState);\r\n                    dirtyRegionEndLine = Math.max(dirtyRegionEndLine, this._regions.getEndLineNumber(index));\r\n                }\r\n            }\r\n            updateDecorationsUntil(this._regions.length);\r\n        });\r\n        this._updateEventEmitter.fire({ model: this, collapseStateChanged: toggledRegions });\r\n    }\r\n    removeManualRanges(ranges) {\r\n        const newFoldingRanges = new Array();\r\n        const intersects = (foldRange) => {\r\n            for (const range of ranges) {\r\n                if (!(range.startLineNumber > foldRange.endLineNumber || foldRange.startLineNumber > range.endLineNumber)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        for (let i = 0; i < this._regions.length; i++) {\r\n            const foldRange = this._regions.toFoldRange(i);\r\n            if (foldRange.source === 0 /* FoldSource.provider */ || !intersects(foldRange)) {\r\n                newFoldingRanges.push(foldRange);\r\n            }\r\n        }\r\n        this.updatePost(FoldingRegions.fromFoldRanges(newFoldingRanges));\r\n    }\r\n    update(newRegions, blockedLineNumers = []) {\r\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges(blockedLineNumers);\r\n        const newRanges = FoldingRegions.sanitizeAndMerge(newRegions, foldedOrManualRanges, this._textModel.getLineCount());\r\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\r\n    }\r\n    updatePost(newRegions) {\r\n        const newEditorDecorations = [];\r\n        let lastHiddenLine = -1;\r\n        for (let index = 0, limit = newRegions.length; index < limit; index++) {\r\n            const startLineNumber = newRegions.getStartLineNumber(index);\r\n            const endLineNumber = newRegions.getEndLineNumber(index);\r\n            const isCollapsed = newRegions.isCollapsed(index);\r\n            const isManual = newRegions.getSource(index) !== 0 /* FoldSource.provider */;\r\n            const decorationRange = {\r\n                startLineNumber: startLineNumber,\r\n                startColumn: this._textModel.getLineMaxColumn(startLineNumber),\r\n                endLineNumber: endLineNumber,\r\n                endColumn: this._textModel.getLineMaxColumn(endLineNumber) + 1\r\n            };\r\n            newEditorDecorations.push({ range: decorationRange, options: this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual) });\r\n            if (isCollapsed && endLineNumber > lastHiddenLine) {\r\n                lastHiddenLine = endLineNumber;\r\n            }\r\n        }\r\n        this._decorationProvider.changeDecorations(accessor => this._editorDecorationIds = accessor.deltaDecorations(this._editorDecorationIds, newEditorDecorations));\r\n        this._regions = newRegions;\r\n        this._updateEventEmitter.fire({ model: this });\r\n    }\r\n    _currentFoldedOrManualRanges(blockedLineNumers = []) {\r\n        const isBlocked = (startLineNumber, endLineNumber) => {\r\n            for (const blockedLineNumber of blockedLineNumers) {\r\n                if (startLineNumber < blockedLineNumber && blockedLineNumber <= endLineNumber) { // first line is visible\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        const foldedRanges = [];\r\n        for (let i = 0, limit = this._regions.length; i < limit; i++) {\r\n            let isCollapsed = this.regions.isCollapsed(i);\r\n            const source = this.regions.getSource(i);\r\n            if (isCollapsed || source !== 0 /* FoldSource.provider */) {\r\n                const foldRange = this._regions.toFoldRange(i);\r\n                const decRange = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\r\n                if (decRange) {\r\n                    if (isCollapsed && isBlocked(decRange.startLineNumber, decRange.endLineNumber)) {\r\n                        isCollapsed = false; // uncollapse is the range is blocked\r\n                    }\r\n                    foldedRanges.push({\r\n                        startLineNumber: decRange.startLineNumber,\r\n                        endLineNumber: decRange.endLineNumber,\r\n                        type: foldRange.type,\r\n                        isCollapsed,\r\n                        source\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return foldedRanges;\r\n    }\r\n    /**\r\n     * Collapse state memento, for persistence only\r\n     */\r\n    getMemento() {\r\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges();\r\n        const result = [];\r\n        const maxLineNumber = this._textModel.getLineCount();\r\n        for (let i = 0, limit = foldedOrManualRanges.length; i < limit; i++) {\r\n            const range = foldedOrManualRanges[i];\r\n            if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\r\n                continue;\r\n            }\r\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\r\n            result.push({\r\n                startLineNumber: range.startLineNumber,\r\n                endLineNumber: range.endLineNumber,\r\n                isCollapsed: range.isCollapsed,\r\n                source: range.source,\r\n                checksum: checksum\r\n            });\r\n        }\r\n        return (result.length > 0) ? result : undefined;\r\n    }\r\n    /**\r\n     * Apply persisted state, for persistence only\r\n     */\r\n    applyMemento(state) {\r\n        var _a, _b;\r\n        if (!Array.isArray(state)) {\r\n            return;\r\n        }\r\n        const rangesToRestore = [];\r\n        const maxLineNumber = this._textModel.getLineCount();\r\n        for (const range of state) {\r\n            if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\r\n                continue;\r\n            }\r\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\r\n            if (!range.checksum || checksum === range.checksum) {\r\n                rangesToRestore.push({\r\n                    startLineNumber: range.startLineNumber,\r\n                    endLineNumber: range.endLineNumber,\r\n                    type: undefined,\r\n                    isCollapsed: (_a = range.isCollapsed) !== null && _a !== void 0 ? _a : true,\r\n                    source: (_b = range.source) !== null && _b !== void 0 ? _b : 0 /* FoldSource.provider */\r\n                });\r\n            }\r\n        }\r\n        const newRanges = FoldingRegions.sanitizeAndMerge(this._regions, rangesToRestore, maxLineNumber);\r\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\r\n    }\r\n    _getLinesChecksum(lineNumber1, lineNumber2) {\r\n        const h = hash(this._textModel.getLineContent(lineNumber1)\r\n            + this._textModel.getLineContent(lineNumber2));\r\n        return h % 1000000; // 6 digits is plenty\r\n    }\r\n    dispose() {\r\n        this._decorationProvider.removeDecorations(this._editorDecorationIds);\r\n    }\r\n    getAllRegionsAtLine(lineNumber, filter) {\r\n        const result = [];\r\n        if (this._regions) {\r\n            let index = this._regions.findRange(lineNumber);\r\n            let level = 1;\r\n            while (index >= 0) {\r\n                const current = this._regions.toRegion(index);\r\n                if (!filter || filter(current, level)) {\r\n                    result.push(current);\r\n                }\r\n                level++;\r\n                index = current.parentIndex;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getRegionAtLine(lineNumber) {\r\n        if (this._regions) {\r\n            const index = this._regions.findRange(lineNumber);\r\n            if (index >= 0) {\r\n                return this._regions.toRegion(index);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getRegionsInside(region, filter) {\r\n        const result = [];\r\n        const index = region ? region.regionIndex + 1 : 0;\r\n        const endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\r\n        if (filter && filter.length === 2) {\r\n            const levelStack = [];\r\n            for (let i = index, len = this._regions.length; i < len; i++) {\r\n                const current = this._regions.toRegion(i);\r\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\r\n                    while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\r\n                        levelStack.pop();\r\n                    }\r\n                    levelStack.push(current);\r\n                    if (filter(current, levelStack.length)) {\r\n                        result.push(current);\r\n                    }\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = index, len = this._regions.length; i < len; i++) {\r\n                const current = this._regions.toRegion(i);\r\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\r\n                    if (!filter || filter(current)) {\r\n                        result.push(current);\r\n                    }\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\n/**\r\n * Collapse or expand the regions at the given locations\r\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\r\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\r\n */\r\nexport function toggleCollapseState(foldingModel, levels, lineNumbers) {\r\n    const toToggle = [];\r\n    for (const lineNumber of lineNumbers) {\r\n        const region = foldingModel.getRegionAtLine(lineNumber);\r\n        if (region) {\r\n            const doCollapse = !region.isCollapsed;\r\n            toToggle.push(region);\r\n            if (levels > 1) {\r\n                const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\r\n                toToggle.push(...regionsInside);\r\n            }\r\n        }\r\n    }\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Collapse or expand the regions at the given locations including all children.\r\n * @param doCollapse Whether to collapse or expand\r\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\r\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\r\n */\r\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels = Number.MAX_VALUE, lineNumbers) {\r\n    const toToggle = [];\r\n    if (lineNumbers && lineNumbers.length > 0) {\r\n        for (const lineNumber of lineNumbers) {\r\n            const region = foldingModel.getRegionAtLine(lineNumber);\r\n            if (region) {\r\n                if (region.isCollapsed !== doCollapse) {\r\n                    toToggle.push(region);\r\n                }\r\n                if (levels > 1) {\r\n                    const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\r\n                    toToggle.push(...regionsInside);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        const regionsInside = foldingModel.getRegionsInside(null, (r, level) => r.isCollapsed !== doCollapse && level < levels);\r\n        toToggle.push(...regionsInside);\r\n    }\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Collapse or expand the regions at the given locations including all parents.\r\n * @param doCollapse Whether to collapse or expand\r\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\r\n * @param lineNumbers the location of the regions to collapse or expand.\r\n */\r\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\r\n    const toToggle = [];\r\n    for (const lineNumber of lineNumbers) {\r\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region, level) => region.isCollapsed !== doCollapse && level <= levels);\r\n        toToggle.push(...regions);\r\n    }\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.\r\n * @param doCollapse Whether to collapse or expand\r\n * @param lineNumbers the location of the regions to collapse or expand.\r\n */\r\nexport function setCollapseStateUp(foldingModel, doCollapse, lineNumbers) {\r\n    const toToggle = [];\r\n    for (const lineNumber of lineNumbers) {\r\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region) => region.isCollapsed !== doCollapse);\r\n        if (regions.length > 0) {\r\n            toToggle.push(regions[0]);\r\n        }\r\n    }\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\r\n * @param foldLevel level. Level == 1 is the top level\r\n * @param doCollapse Whether to collapse or expand\r\n*/\r\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\r\n    const filter = (region, level) => level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(line => region.containsLine(line));\r\n    const toToggle = foldingModel.getRegionsInside(null, filter);\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.\r\n * @param doCollapse Whether to collapse or expand\r\n * @param blockedLineNumbers the location of regions to not collapse or expand\r\n */\r\nexport function setCollapseStateForRest(foldingModel, doCollapse, blockedLineNumbers) {\r\n    const filteredRegions = [];\r\n    for (const lineNumber of blockedLineNumbers) {\r\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, undefined);\r\n        if (regions.length > 0) {\r\n            filteredRegions.push(regions[0]);\r\n        }\r\n    }\r\n    const filter = (region) => filteredRegions.every((filteredRegion) => !filteredRegion.containedBy(region) && !region.containedBy(filteredRegion)) && region.isCollapsed !== doCollapse;\r\n    const toToggle = foldingModel.getRegionsInside(null, filter);\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Folds all regions for which the lines start with a given regex\r\n * @param foldingModel the folding model\r\n */\r\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\r\n    const editorModel = foldingModel.textModel;\r\n    const regions = foldingModel.regions;\r\n    const toToggle = [];\r\n    for (let i = regions.length - 1; i >= 0; i--) {\r\n        if (doCollapse !== regions.isCollapsed(i)) {\r\n            const startLineNumber = regions.getStartLineNumber(i);\r\n            if (regExp.test(editorModel.getLineContent(startLineNumber))) {\r\n                toToggle.push(regions.toRegion(i));\r\n            }\r\n        }\r\n    }\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Folds all regions of the given type\r\n * @param foldingModel the folding model\r\n */\r\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\r\n    const regions = foldingModel.regions;\r\n    const toToggle = [];\r\n    for (let i = regions.length - 1; i >= 0; i--) {\r\n        if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\r\n            toToggle.push(regions.toRegion(i));\r\n        }\r\n    }\r\n    foldingModel.toggleCollapseState(toToggle);\r\n}\r\n/**\r\n * Get line to go to for parent fold of current line\r\n * @param lineNumber the current line number\r\n * @param foldingModel the folding model\r\n *\r\n * @return Parent fold start line\r\n */\r\nexport function getParentFoldLine(lineNumber, foldingModel) {\r\n    let startLineNumber = null;\r\n    const foldingRegion = foldingModel.getRegionAtLine(lineNumber);\r\n    if (foldingRegion !== null) {\r\n        startLineNumber = foldingRegion.startLineNumber;\r\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to parent fold\r\n        if (lineNumber === startLineNumber) {\r\n            const parentFoldingIdx = foldingRegion.parentIndex;\r\n            if (parentFoldingIdx !== -1) {\r\n                startLineNumber = foldingModel.regions.getStartLineNumber(parentFoldingIdx);\r\n            }\r\n            else {\r\n                startLineNumber = null;\r\n            }\r\n        }\r\n    }\r\n    return startLineNumber;\r\n}\r\n/**\r\n * Get line to go to for previous fold at the same level of current line\r\n * @param lineNumber the current line number\r\n * @param foldingModel the folding model\r\n *\r\n * @return Previous fold start line\r\n */\r\nexport function getPreviousFoldLine(lineNumber, foldingModel) {\r\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\r\n    // If on the folding range start line, go to previous sibling.\r\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\r\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.\r\n        if (lineNumber !== foldingRegion.startLineNumber) {\r\n            return foldingRegion.startLineNumber;\r\n        }\r\n        else {\r\n            // Find min line number to stay within parent.\r\n            const expectedParentIndex = foldingRegion.parentIndex;\r\n            let minLineNumber = 0;\r\n            if (expectedParentIndex !== -1) {\r\n                minLineNumber = foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex);\r\n            }\r\n            // Find fold at same level.\r\n            while (foldingRegion !== null) {\r\n                if (foldingRegion.regionIndex > 0) {\r\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\r\n                    // Keep at same level.\r\n                    if (foldingRegion.startLineNumber <= minLineNumber) {\r\n                        return null;\r\n                    }\r\n                    else if (foldingRegion.parentIndex === expectedParentIndex) {\r\n                        return foldingRegion.startLineNumber;\r\n                    }\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // Go to last fold that's before the current line.\r\n        if (foldingModel.regions.length > 0) {\r\n            foldingRegion = foldingModel.regions.toRegion(foldingModel.regions.length - 1);\r\n            while (foldingRegion !== null) {\r\n                // Found fold before current line.\r\n                if (foldingRegion.startLineNumber < lineNumber) {\r\n                    return foldingRegion.startLineNumber;\r\n                }\r\n                if (foldingRegion.regionIndex > 0) {\r\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\r\n                }\r\n                else {\r\n                    foldingRegion = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Get line to go to next fold at the same level of current line\r\n * @param lineNumber the current line number\r\n * @param foldingModel the folding model\r\n *\r\n * @return Next fold start line\r\n */\r\nexport function getNextFoldLine(lineNumber, foldingModel) {\r\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\r\n    // If on the folding range start line, go to next sibling.\r\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\r\n        // Find max line number to stay within parent.\r\n        const expectedParentIndex = foldingRegion.parentIndex;\r\n        let maxLineNumber = 0;\r\n        if (expectedParentIndex !== -1) {\r\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);\r\n        }\r\n        else if (foldingModel.regions.length === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingModel.regions.length - 1);\r\n        }\r\n        // Find fold at same level.\r\n        while (foldingRegion !== null) {\r\n            if (foldingRegion.regionIndex < foldingModel.regions.length) {\r\n                foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\r\n                // Keep at same level.\r\n                if (foldingRegion.startLineNumber >= maxLineNumber) {\r\n                    return null;\r\n                }\r\n                else if (foldingRegion.parentIndex === expectedParentIndex) {\r\n                    return foldingRegion.startLineNumber;\r\n                }\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // Go to first fold that's after the current line.\r\n        if (foldingModel.regions.length > 0) {\r\n            foldingRegion = foldingModel.regions.toRegion(0);\r\n            while (foldingRegion !== null) {\r\n                // Found fold after current line.\r\n                if (foldingRegion.startLineNumber > lineNumber) {\r\n                    return foldingRegion.startLineNumber;\r\n                }\r\n                if (foldingRegion.regionIndex < foldingModel.regions.length) {\r\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\r\n                }\r\n                else {\r\n                    foldingRegion = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport const foldSourceAbbr = {\r\n    [0 /* FoldSource.provider */]: ' ',\r\n    [1 /* FoldSource.userDefined */]: 'u',\r\n    [2 /* FoldSource.recovered */]: 'r',\r\n};\r\nexport const MAX_FOLDING_REGIONS = 0xFFFF;\r\nexport const MAX_LINE_NUMBER = 0xFFFFFF;\r\nconst MASK_INDENT = 0xFF000000;\r\nclass BitField {\r\n    constructor(size) {\r\n        const numWords = Math.ceil(size / 32);\r\n        this._states = new Uint32Array(numWords);\r\n    }\r\n    get(index) {\r\n        const arrayIndex = (index / 32) | 0;\r\n        const bit = index % 32;\r\n        return (this._states[arrayIndex] & (1 << bit)) !== 0;\r\n    }\r\n    set(index, newState) {\r\n        const arrayIndex = (index / 32) | 0;\r\n        const bit = index % 32;\r\n        const value = this._states[arrayIndex];\r\n        if (newState) {\r\n            this._states[arrayIndex] = value | (1 << bit);\r\n        }\r\n        else {\r\n            this._states[arrayIndex] = value & ~(1 << bit);\r\n        }\r\n    }\r\n}\r\nexport class FoldingRegions {\r\n    constructor(startIndexes, endIndexes, types) {\r\n        if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\r\n            throw new Error('invalid startIndexes or endIndexes size');\r\n        }\r\n        this._startIndexes = startIndexes;\r\n        this._endIndexes = endIndexes;\r\n        this._collapseStates = new BitField(startIndexes.length);\r\n        this._userDefinedStates = new BitField(startIndexes.length);\r\n        this._recoveredStates = new BitField(startIndexes.length);\r\n        this._types = types;\r\n        this._parentsComputed = false;\r\n    }\r\n    ensureParentIndices() {\r\n        if (!this._parentsComputed) {\r\n            this._parentsComputed = true;\r\n            const parentIndexes = [];\r\n            const isInsideLast = (startLineNumber, endLineNumber) => {\r\n                const index = parentIndexes[parentIndexes.length - 1];\r\n                return this.getStartLineNumber(index) <= startLineNumber && this.getEndLineNumber(index) >= endLineNumber;\r\n            };\r\n            for (let i = 0, len = this._startIndexes.length; i < len; i++) {\r\n                const startLineNumber = this._startIndexes[i];\r\n                const endLineNumber = this._endIndexes[i];\r\n                if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\r\n                    throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\r\n                }\r\n                while (parentIndexes.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\r\n                    parentIndexes.pop();\r\n                }\r\n                const parentIndex = parentIndexes.length > 0 ? parentIndexes[parentIndexes.length - 1] : -1;\r\n                parentIndexes.push(i);\r\n                this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\r\n                this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\r\n            }\r\n        }\r\n    }\r\n    get length() {\r\n        return this._startIndexes.length;\r\n    }\r\n    getStartLineNumber(index) {\r\n        return this._startIndexes[index] & MAX_LINE_NUMBER;\r\n    }\r\n    getEndLineNumber(index) {\r\n        return this._endIndexes[index] & MAX_LINE_NUMBER;\r\n    }\r\n    getType(index) {\r\n        return this._types ? this._types[index] : undefined;\r\n    }\r\n    hasTypes() {\r\n        return !!this._types;\r\n    }\r\n    isCollapsed(index) {\r\n        return this._collapseStates.get(index);\r\n    }\r\n    setCollapsed(index, newState) {\r\n        this._collapseStates.set(index, newState);\r\n    }\r\n    isUserDefined(index) {\r\n        return this._userDefinedStates.get(index);\r\n    }\r\n    setUserDefined(index, newState) {\r\n        return this._userDefinedStates.set(index, newState);\r\n    }\r\n    isRecovered(index) {\r\n        return this._recoveredStates.get(index);\r\n    }\r\n    setRecovered(index, newState) {\r\n        return this._recoveredStates.set(index, newState);\r\n    }\r\n    getSource(index) {\r\n        if (this.isUserDefined(index)) {\r\n            return 1 /* FoldSource.userDefined */;\r\n        }\r\n        else if (this.isRecovered(index)) {\r\n            return 2 /* FoldSource.recovered */;\r\n        }\r\n        return 0 /* FoldSource.provider */;\r\n    }\r\n    setSource(index, source) {\r\n        if (source === 1 /* FoldSource.userDefined */) {\r\n            this.setUserDefined(index, true);\r\n            this.setRecovered(index, false);\r\n        }\r\n        else if (source === 2 /* FoldSource.recovered */) {\r\n            this.setUserDefined(index, false);\r\n            this.setRecovered(index, true);\r\n        }\r\n        else {\r\n            this.setUserDefined(index, false);\r\n            this.setRecovered(index, false);\r\n        }\r\n    }\r\n    setCollapsedAllOfType(type, newState) {\r\n        let hasChanged = false;\r\n        if (this._types) {\r\n            for (let i = 0; i < this._types.length; i++) {\r\n                if (this._types[i] === type) {\r\n                    this.setCollapsed(i, newState);\r\n                    hasChanged = true;\r\n                }\r\n            }\r\n        }\r\n        return hasChanged;\r\n    }\r\n    toRegion(index) {\r\n        return new FoldingRegion(this, index);\r\n    }\r\n    getParentIndex(index) {\r\n        this.ensureParentIndices();\r\n        const parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\r\n        if (parent === MAX_FOLDING_REGIONS) {\r\n            return -1;\r\n        }\r\n        return parent;\r\n    }\r\n    contains(index, line) {\r\n        return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\r\n    }\r\n    findIndex(line) {\r\n        let low = 0, high = this._startIndexes.length;\r\n        if (high === 0) {\r\n            return -1; // no children\r\n        }\r\n        while (low < high) {\r\n            const mid = Math.floor((low + high) / 2);\r\n            if (line < this.getStartLineNumber(mid)) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        return low - 1;\r\n    }\r\n    findRange(line) {\r\n        let index = this.findIndex(line);\r\n        if (index >= 0) {\r\n            const endLineNumber = this.getEndLineNumber(index);\r\n            if (endLineNumber >= line) {\r\n                return index;\r\n            }\r\n            index = this.getParentIndex(index);\r\n            while (index !== -1) {\r\n                if (this.contains(index, line)) {\r\n                    return index;\r\n                }\r\n                index = this.getParentIndex(index);\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    toString() {\r\n        const res = [];\r\n        for (let i = 0; i < this.length; i++) {\r\n            res[i] = `[${foldSourceAbbr[this.getSource(i)]}${this.isCollapsed(i) ? '+' : '-'}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;\r\n        }\r\n        return res.join(', ');\r\n    }\r\n    toFoldRange(index) {\r\n        return {\r\n            startLineNumber: this._startIndexes[index] & MAX_LINE_NUMBER,\r\n            endLineNumber: this._endIndexes[index] & MAX_LINE_NUMBER,\r\n            type: this._types ? this._types[index] : undefined,\r\n            isCollapsed: this.isCollapsed(index),\r\n            source: this.getSource(index)\r\n        };\r\n    }\r\n    static fromFoldRanges(ranges) {\r\n        const rangesLength = ranges.length;\r\n        const startIndexes = new Uint32Array(rangesLength);\r\n        const endIndexes = new Uint32Array(rangesLength);\r\n        let types = [];\r\n        let gotTypes = false;\r\n        for (let i = 0; i < rangesLength; i++) {\r\n            const range = ranges[i];\r\n            startIndexes[i] = range.startLineNumber;\r\n            endIndexes[i] = range.endLineNumber;\r\n            types.push(range.type);\r\n            if (range.type) {\r\n                gotTypes = true;\r\n            }\r\n        }\r\n        if (!gotTypes) {\r\n            types = undefined;\r\n        }\r\n        const regions = new FoldingRegions(startIndexes, endIndexes, types);\r\n        for (let i = 0; i < rangesLength; i++) {\r\n            if (ranges[i].isCollapsed) {\r\n                regions.setCollapsed(i, true);\r\n            }\r\n            regions.setSource(i, ranges[i].source);\r\n        }\r\n        return regions;\r\n    }\r\n    /**\r\n     * Two inputs, each a FoldingRegions or a FoldRange[], are merged.\r\n     * Each input must be pre-sorted on startLineNumber.\r\n     * The first list is assumed to always include all regions currently defined by range providers.\r\n     * The second list only contains the previously collapsed and all manual ranges.\r\n     * If the line position matches, the range of the new range is taken, and the range is no longer manual\r\n     * When an entry in one list overlaps an entry in the other, the second list's entry \"wins\" and\r\n     * overlapping entries in the first list are discarded.\r\n     * Invalid entries are discarded. An entry is invalid if:\r\n     * \t\tthe start and end line numbers aren't a valid range of line numbers,\r\n     * \t\tit is out of sequence or has the same start line as a preceding entry,\r\n     * \t\tit overlaps a preceding entry and is not fully contained by that entry.\r\n     */\r\n    static sanitizeAndMerge(rangesA, rangesB, maxLineNumber) {\r\n        maxLineNumber = maxLineNumber !== null && maxLineNumber !== void 0 ? maxLineNumber : Number.MAX_VALUE;\r\n        const getIndexedFunction = (r, limit) => {\r\n            return Array.isArray(r)\r\n                ? ((i) => { return (i < limit) ? r[i] : undefined; })\r\n                : ((i) => { return (i < limit) ? r.toFoldRange(i) : undefined; });\r\n        };\r\n        const getA = getIndexedFunction(rangesA, rangesA.length);\r\n        const getB = getIndexedFunction(rangesB, rangesB.length);\r\n        let indexA = 0;\r\n        let indexB = 0;\r\n        let nextA = getA(0);\r\n        let nextB = getB(0);\r\n        const stackedRanges = [];\r\n        let topStackedRange;\r\n        let prevLineNumber = 0;\r\n        const resultRanges = [];\r\n        while (nextA || nextB) {\r\n            let useRange = undefined;\r\n            if (nextB && (!nextA || nextA.startLineNumber >= nextB.startLineNumber)) {\r\n                if (nextA && nextA.startLineNumber === nextB.startLineNumber) {\r\n                    if (nextB.source === 1 /* FoldSource.userDefined */) {\r\n                        // a user defined range (possibly unfolded)\r\n                        useRange = nextB;\r\n                    }\r\n                    else {\r\n                        // a previously folded range or a (possibly unfolded) recovered range\r\n                        useRange = nextA;\r\n                        useRange.isCollapsed = nextB.isCollapsed && nextA.endLineNumber === nextB.endLineNumber;\r\n                        useRange.source = 0 /* FoldSource.provider */;\r\n                    }\r\n                    nextA = getA(++indexA); // not necessary, just for speed\r\n                }\r\n                else {\r\n                    useRange = nextB;\r\n                    if (nextB.isCollapsed && nextB.source === 0 /* FoldSource.provider */) {\r\n                        // a previously collapsed range\r\n                        useRange.source = 2 /* FoldSource.recovered */;\r\n                    }\r\n                }\r\n                nextB = getB(++indexB);\r\n            }\r\n            else {\r\n                // nextA is next. The user folded B set takes precedence and we sometimes need to look\r\n                // ahead in it to check for an upcoming conflict.\r\n                let scanIndex = indexB;\r\n                let prescanB = nextB;\r\n                while (true) {\r\n                    if (!prescanB || prescanB.startLineNumber > nextA.endLineNumber) {\r\n                        useRange = nextA;\r\n                        break; // no conflict, use this nextA\r\n                    }\r\n                    if (prescanB.source === 1 /* FoldSource.userDefined */ && prescanB.endLineNumber > nextA.endLineNumber) {\r\n                        // we found a user folded range, it wins\r\n                        break; // without setting nextResult, so this nextA gets skipped\r\n                    }\r\n                    prescanB = getB(++scanIndex);\r\n                }\r\n                nextA = getA(++indexA);\r\n            }\r\n            if (useRange) {\r\n                while (topStackedRange\r\n                    && topStackedRange.endLineNumber < useRange.startLineNumber) {\r\n                    topStackedRange = stackedRanges.pop();\r\n                }\r\n                if (useRange.endLineNumber > useRange.startLineNumber\r\n                    && useRange.startLineNumber > prevLineNumber\r\n                    && useRange.endLineNumber <= maxLineNumber\r\n                    && (!topStackedRange\r\n                        || topStackedRange.endLineNumber >= useRange.endLineNumber)) {\r\n                    resultRanges.push(useRange);\r\n                    prevLineNumber = useRange.startLineNumber;\r\n                    if (topStackedRange) {\r\n                        stackedRanges.push(topStackedRange);\r\n                    }\r\n                    topStackedRange = useRange;\r\n                }\r\n            }\r\n        }\r\n        return resultRanges;\r\n    }\r\n}\r\nexport class FoldingRegion {\r\n    constructor(ranges, index) {\r\n        this.ranges = ranges;\r\n        this.index = index;\r\n    }\r\n    get startLineNumber() {\r\n        return this.ranges.getStartLineNumber(this.index);\r\n    }\r\n    get endLineNumber() {\r\n        return this.ranges.getEndLineNumber(this.index);\r\n    }\r\n    get regionIndex() {\r\n        return this.index;\r\n    }\r\n    get parentIndex() {\r\n        return this.ranges.getParentIndex(this.index);\r\n    }\r\n    get isCollapsed() {\r\n        return this.ranges.isCollapsed(this.index);\r\n    }\r\n    containedBy(range) {\r\n        return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\r\n    }\r\n    containsLine(lineNumber) {\r\n        return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { findFirstIdxMonotonousOrArrLen } from '../../../../base/common/arraysFind.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { countEOL } from '../../../common/core/eolCounter.js';\r\nexport class HiddenRangeModel {\r\n    get onDidChange() { return this._updateEventEmitter.event; }\r\n    get hiddenRanges() { return this._hiddenRanges; }\r\n    constructor(model) {\r\n        this._updateEventEmitter = new Emitter();\r\n        this._hasLineChanges = false;\r\n        this._foldingModel = model;\r\n        this._foldingModelListener = model.onDidChange(_ => this.updateHiddenRanges());\r\n        this._hiddenRanges = [];\r\n        if (model.regions.length) {\r\n            this.updateHiddenRanges();\r\n        }\r\n    }\r\n    notifyChangeModelContent(e) {\r\n        if (this._hiddenRanges.length && !this._hasLineChanges) {\r\n            this._hasLineChanges = e.changes.some(change => {\r\n                return change.range.endLineNumber !== change.range.startLineNumber || countEOL(change.text)[0] !== 0;\r\n            });\r\n        }\r\n    }\r\n    updateHiddenRanges() {\r\n        let updateHiddenAreas = false;\r\n        const newHiddenAreas = [];\r\n        let i = 0; // index into hidden\r\n        let k = 0;\r\n        let lastCollapsedStart = Number.MAX_VALUE;\r\n        let lastCollapsedEnd = -1;\r\n        const ranges = this._foldingModel.regions;\r\n        for (; i < ranges.length; i++) {\r\n            if (!ranges.isCollapsed(i)) {\r\n                continue;\r\n            }\r\n            const startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\r\n            const endLineNumber = ranges.getEndLineNumber(i);\r\n            if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\r\n                // ignore ranges contained in collapsed regions\r\n                continue;\r\n            }\r\n            if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\r\n                // reuse the old ranges\r\n                newHiddenAreas.push(this._hiddenRanges[k]);\r\n                k++;\r\n            }\r\n            else {\r\n                updateHiddenAreas = true;\r\n                newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\r\n            }\r\n            lastCollapsedStart = startLineNumber;\r\n            lastCollapsedEnd = endLineNumber;\r\n        }\r\n        if (this._hasLineChanges || updateHiddenAreas || k < this._hiddenRanges.length) {\r\n            this.applyHiddenRanges(newHiddenAreas);\r\n        }\r\n    }\r\n    applyHiddenRanges(newHiddenAreas) {\r\n        this._hiddenRanges = newHiddenAreas;\r\n        this._hasLineChanges = false;\r\n        this._updateEventEmitter.fire(newHiddenAreas);\r\n    }\r\n    hasRanges() {\r\n        return this._hiddenRanges.length > 0;\r\n    }\r\n    isHidden(line) {\r\n        return findRange(this._hiddenRanges, line) !== null;\r\n    }\r\n    adjustSelections(selections) {\r\n        let hasChanges = false;\r\n        const editorModel = this._foldingModel.textModel;\r\n        let lastRange = null;\r\n        const adjustLine = (line) => {\r\n            if (!lastRange || !isInside(line, lastRange)) {\r\n                lastRange = findRange(this._hiddenRanges, line);\r\n            }\r\n            if (lastRange) {\r\n                return lastRange.startLineNumber - 1;\r\n            }\r\n            return null;\r\n        };\r\n        for (let i = 0, len = selections.length; i < len; i++) {\r\n            let selection = selections[i];\r\n            const adjustedStartLine = adjustLine(selection.startLineNumber);\r\n            if (adjustedStartLine) {\r\n                selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\r\n                hasChanges = true;\r\n            }\r\n            const adjustedEndLine = adjustLine(selection.endLineNumber);\r\n            if (adjustedEndLine) {\r\n                selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\r\n                hasChanges = true;\r\n            }\r\n            selections[i] = selection;\r\n        }\r\n        return hasChanges;\r\n    }\r\n    dispose() {\r\n        if (this.hiddenRanges.length > 0) {\r\n            this._hiddenRanges = [];\r\n            this._updateEventEmitter.fire(this._hiddenRanges);\r\n        }\r\n        if (this._foldingModelListener) {\r\n            this._foldingModelListener.dispose();\r\n            this._foldingModelListener = null;\r\n        }\r\n    }\r\n}\r\nfunction isInside(line, range) {\r\n    return line >= range.startLineNumber && line <= range.endLineNumber;\r\n}\r\nfunction findRange(ranges, line) {\r\n    const i = findFirstIdxMonotonousOrArrLen(ranges, r => line < r.startLineNumber) - 1;\r\n    if (i >= 0 && ranges[i].endLineNumber >= line) {\r\n        return ranges[i];\r\n    }\r\n    return null;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { computeIndentLevel } from '../../../common/model/utils.js';\r\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\r\nconst MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT = 5000;\r\nconst ID_INDENT_PROVIDER = 'indent';\r\nexport class IndentRangeProvider {\r\n    constructor(editorModel, languageConfigurationService, foldingRangesLimit) {\r\n        this.editorModel = editorModel;\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this.foldingRangesLimit = foldingRangesLimit;\r\n        this.id = ID_INDENT_PROVIDER;\r\n    }\r\n    dispose() { }\r\n    compute(cancelationToken) {\r\n        const foldingRules = this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules;\r\n        const offSide = foldingRules && !!foldingRules.offSide;\r\n        const markers = foldingRules && foldingRules.markers;\r\n        return Promise.resolve(computeRanges(this.editorModel, offSide, markers, this.foldingRangesLimit));\r\n    }\r\n}\r\n// public only for testing\r\nexport class RangesCollector {\r\n    constructor(foldingRangesLimit) {\r\n        this._startIndexes = [];\r\n        this._endIndexes = [];\r\n        this._indentOccurrences = [];\r\n        this._length = 0;\r\n        this._foldingRangesLimit = foldingRangesLimit;\r\n    }\r\n    insertFirst(startLineNumber, endLineNumber, indent) {\r\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\r\n            return;\r\n        }\r\n        const index = this._length;\r\n        this._startIndexes[index] = startLineNumber;\r\n        this._endIndexes[index] = endLineNumber;\r\n        this._length++;\r\n        if (indent < 1000) {\r\n            this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\r\n        }\r\n    }\r\n    toIndentRanges(model) {\r\n        const limit = this._foldingRangesLimit.limit;\r\n        if (this._length <= limit) {\r\n            this._foldingRangesLimit.update(this._length, false);\r\n            // reverse and create arrays of the exact length\r\n            const startIndexes = new Uint32Array(this._length);\r\n            const endIndexes = new Uint32Array(this._length);\r\n            for (let i = this._length - 1, k = 0; i >= 0; i--, k++) {\r\n                startIndexes[k] = this._startIndexes[i];\r\n                endIndexes[k] = this._endIndexes[i];\r\n            }\r\n            return new FoldingRegions(startIndexes, endIndexes);\r\n        }\r\n        else {\r\n            this._foldingRangesLimit.update(this._length, limit);\r\n            let entries = 0;\r\n            let maxIndent = this._indentOccurrences.length;\r\n            for (let i = 0; i < this._indentOccurrences.length; i++) {\r\n                const n = this._indentOccurrences[i];\r\n                if (n) {\r\n                    if (n + entries > limit) {\r\n                        maxIndent = i;\r\n                        break;\r\n                    }\r\n                    entries += n;\r\n                }\r\n            }\r\n            const tabSize = model.getOptions().tabSize;\r\n            // reverse and create arrays of the exact length\r\n            const startIndexes = new Uint32Array(limit);\r\n            const endIndexes = new Uint32Array(limit);\r\n            for (let i = this._length - 1, k = 0; i >= 0; i--) {\r\n                const startIndex = this._startIndexes[i];\r\n                const lineContent = model.getLineContent(startIndex);\r\n                const indent = computeIndentLevel(lineContent, tabSize);\r\n                if (indent < maxIndent || (indent === maxIndent && entries++ < limit)) {\r\n                    startIndexes[k] = startIndex;\r\n                    endIndexes[k] = this._endIndexes[i];\r\n                    k++;\r\n                }\r\n            }\r\n            return new FoldingRegions(startIndexes, endIndexes);\r\n        }\r\n    }\r\n}\r\nconst foldingRangesLimitDefault = {\r\n    limit: MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT,\r\n    update: () => { }\r\n};\r\nexport function computeRanges(model, offSide, markers, foldingRangesLimit = foldingRangesLimitDefault) {\r\n    const tabSize = model.getOptions().tabSize;\r\n    const result = new RangesCollector(foldingRangesLimit);\r\n    let pattern = undefined;\r\n    if (markers) {\r\n        pattern = new RegExp(`(${markers.start.source})|(?:${markers.end.source})`);\r\n    }\r\n    const previousRegions = [];\r\n    const line = model.getLineCount() + 1;\r\n    previousRegions.push({ indent: -1, endAbove: line, line }); // sentinel, to make sure there's at least one entry\r\n    for (let line = model.getLineCount(); line > 0; line--) {\r\n        const lineContent = model.getLineContent(line);\r\n        const indent = computeIndentLevel(lineContent, tabSize);\r\n        let previous = previousRegions[previousRegions.length - 1];\r\n        if (indent === -1) {\r\n            if (offSide) {\r\n                // for offSide languages, empty lines are associated to the previous block\r\n                // note: the next block is already written to the results, so this only\r\n                // impacts the end position of the block before\r\n                previous.endAbove = line;\r\n            }\r\n            continue; // only whitespace\r\n        }\r\n        let m;\r\n        if (pattern && (m = lineContent.match(pattern))) {\r\n            // folding pattern match\r\n            if (m[1]) { // start pattern match\r\n                // discard all regions until the folding pattern\r\n                let i = previousRegions.length - 1;\r\n                while (i > 0 && previousRegions[i].indent !== -2) {\r\n                    i--;\r\n                }\r\n                if (i > 0) {\r\n                    previousRegions.length = i + 1;\r\n                    previous = previousRegions[i];\r\n                    // new folding range from pattern, includes the end line\r\n                    result.insertFirst(line, previous.line, indent);\r\n                    previous.line = line;\r\n                    previous.indent = indent;\r\n                    previous.endAbove = line;\r\n                    continue;\r\n                }\r\n                else {\r\n                    // no end marker found, treat line as a regular line\r\n                }\r\n            }\r\n            else { // end pattern match\r\n                previousRegions.push({ indent: -2, endAbove: line, line });\r\n                continue;\r\n            }\r\n        }\r\n        if (previous.indent > indent) {\r\n            // discard all regions with larger indent\r\n            do {\r\n                previousRegions.pop();\r\n                previous = previousRegions[previousRegions.length - 1];\r\n            } while (previous.indent > indent);\r\n            // new folding range\r\n            const endLineNumber = previous.endAbove - 1;\r\n            if (endLineNumber - line >= 1) { // needs at east size 1\r\n                result.insertFirst(line, endLineNumber, indent);\r\n            }\r\n        }\r\n        if (previous.indent === indent) {\r\n            previous.endAbove = line;\r\n        }\r\n        else { // previous.indent < indent\r\n            // new region with a bigger indent\r\n            previousRegions.push({ indent, endAbove: line, line });\r\n        }\r\n    }\r\n    return result.toIndentRanges(model);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { MinimapPosition } from '../../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nconst foldBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hcDark: null, hcLight: null }, localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\r\nregisterColor('editorGutter.foldingControlForeground', { dark: iconForeground, light: iconForeground, hcDark: iconForeground, hcLight: iconForeground }, localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\r\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\r\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\r\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\r\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\r\nconst foldedBackgroundMinimap = { color: themeColorFromId(foldBackground), position: MinimapPosition.Inline };\r\nexport class FoldingDecorationProvider {\r\n    constructor(editor) {\r\n        this.editor = editor;\r\n        this.showFoldingControls = 'mouseover';\r\n        this.showFoldingHighlights = true;\r\n    }\r\n    getDecorationOption(isCollapsed, isHidden, isManual) {\r\n        if (isHidden) { // is inside another collapsed region\r\n            return FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\r\n        }\r\n        if (this.showFoldingControls === 'never') {\r\n            if (isCollapsed) {\r\n                return this.showFoldingHighlights ? FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION : FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION;\r\n            }\r\n            return FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION;\r\n        }\r\n        if (isCollapsed) {\r\n            return isManual ?\r\n                (this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION)\r\n                : (this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION);\r\n        }\r\n        else if (this.showFoldingControls === 'mouseover') {\r\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\r\n        }\r\n        else {\r\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\r\n        }\r\n    }\r\n    changeDecorations(callback) {\r\n        return this.editor.changeDecorations(callback);\r\n    }\r\n    removeDecorations(decorationIds) {\r\n        this.editor.removeDecorations(decorationIds);\r\n    }\r\n}\r\nFoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-collapsed-visual-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    afterContentClassName: 'inline-folded',\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon),\r\n});\r\nFoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-collapsed-highlighted-visual-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    afterContentClassName: 'inline-folded',\r\n    className: 'folded-background',\r\n    minimap: foldedBackgroundMinimap,\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\r\n});\r\nFoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-manually-collapsed-visual-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    afterContentClassName: 'inline-folded',\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\r\n});\r\nFoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-manually-collapsed-highlighted-visual-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    afterContentClassName: 'inline-folded',\r\n    className: 'folded-background',\r\n    minimap: foldedBackgroundMinimap,\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\r\n});\r\nFoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-no-controls-range-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    afterContentClassName: 'inline-folded',\r\n    isWholeLine: true\r\n});\r\nFoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-no-controls-range-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    afterContentClassName: 'inline-folded',\r\n    className: 'folded-background',\r\n    minimap: foldedBackgroundMinimap,\r\n    isWholeLine: true\r\n});\r\nFoldingDecorationProvider.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-expanded-visual-decoration',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\r\n});\r\nFoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-expanded-auto-hide-visual-decoration',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon)\r\n});\r\nFoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-manually-expanded-visual-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon)\r\n});\r\nFoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-manually-expanded-auto-hide-visual-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    isWholeLine: true,\r\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon)\r\n});\r\nFoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-no-controls-range-decoration',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    isWholeLine: true\r\n});\r\nFoldingDecorationProvider.HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\r\n    description: 'folding-hidden-range-decoration',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\r\nconst foldingContext = {};\r\nconst ID_SYNTAX_PROVIDER = 'syntax';\r\nexport class SyntaxRangeProvider {\r\n    constructor(editorModel, providers, handleFoldingRangesChange, foldingRangesLimit, fallbackRangeProvider // used when all providers return null\r\n    ) {\r\n        this.editorModel = editorModel;\r\n        this.providers = providers;\r\n        this.handleFoldingRangesChange = handleFoldingRangesChange;\r\n        this.foldingRangesLimit = foldingRangesLimit;\r\n        this.fallbackRangeProvider = fallbackRangeProvider;\r\n        this.id = ID_SYNTAX_PROVIDER;\r\n        this.disposables = new DisposableStore();\r\n        if (fallbackRangeProvider) {\r\n            this.disposables.add(fallbackRangeProvider);\r\n        }\r\n        for (const provider of providers) {\r\n            if (typeof provider.onDidChange === 'function') {\r\n                this.disposables.add(provider.onDidChange(handleFoldingRangesChange));\r\n            }\r\n        }\r\n    }\r\n    compute(cancellationToken) {\r\n        return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(ranges => {\r\n            var _a, _b;\r\n            if (ranges) {\r\n                const res = sanitizeRanges(ranges, this.foldingRangesLimit);\r\n                return res;\r\n            }\r\n            return (_b = (_a = this.fallbackRangeProvider) === null || _a === void 0 ? void 0 : _a.compute(cancellationToken)) !== null && _b !== void 0 ? _b : null;\r\n        });\r\n    }\r\n    dispose() {\r\n        this.disposables.dispose();\r\n    }\r\n}\r\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\r\n    let rangeData = null;\r\n    const promises = providers.map((provider, i) => {\r\n        return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(ranges => {\r\n            if (cancellationToken.isCancellationRequested) {\r\n                return;\r\n            }\r\n            if (Array.isArray(ranges)) {\r\n                if (!Array.isArray(rangeData)) {\r\n                    rangeData = [];\r\n                }\r\n                const nLines = model.getLineCount();\r\n                for (const r of ranges) {\r\n                    if (r.start > 0 && r.end > r.start && r.end <= nLines) {\r\n                        rangeData.push({ start: r.start, end: r.end, rank: i, kind: r.kind });\r\n                    }\r\n                }\r\n            }\r\n        }, onUnexpectedExternalError);\r\n    });\r\n    return Promise.all(promises).then(_ => {\r\n        return rangeData;\r\n    });\r\n}\r\nclass RangesCollector {\r\n    constructor(foldingRangesLimit) {\r\n        this._startIndexes = [];\r\n        this._endIndexes = [];\r\n        this._nestingLevels = [];\r\n        this._nestingLevelCounts = [];\r\n        this._types = [];\r\n        this._length = 0;\r\n        this._foldingRangesLimit = foldingRangesLimit;\r\n    }\r\n    add(startLineNumber, endLineNumber, type, nestingLevel) {\r\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\r\n            return;\r\n        }\r\n        const index = this._length;\r\n        this._startIndexes[index] = startLineNumber;\r\n        this._endIndexes[index] = endLineNumber;\r\n        this._nestingLevels[index] = nestingLevel;\r\n        this._types[index] = type;\r\n        this._length++;\r\n        if (nestingLevel < 30) {\r\n            this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\r\n        }\r\n    }\r\n    toIndentRanges() {\r\n        const limit = this._foldingRangesLimit.limit;\r\n        if (this._length <= limit) {\r\n            this._foldingRangesLimit.update(this._length, false);\r\n            const startIndexes = new Uint32Array(this._length);\r\n            const endIndexes = new Uint32Array(this._length);\r\n            for (let i = 0; i < this._length; i++) {\r\n                startIndexes[i] = this._startIndexes[i];\r\n                endIndexes[i] = this._endIndexes[i];\r\n            }\r\n            return new FoldingRegions(startIndexes, endIndexes, this._types);\r\n        }\r\n        else {\r\n            this._foldingRangesLimit.update(this._length, limit);\r\n            let entries = 0;\r\n            let maxLevel = this._nestingLevelCounts.length;\r\n            for (let i = 0; i < this._nestingLevelCounts.length; i++) {\r\n                const n = this._nestingLevelCounts[i];\r\n                if (n) {\r\n                    if (n + entries > limit) {\r\n                        maxLevel = i;\r\n                        break;\r\n                    }\r\n                    entries += n;\r\n                }\r\n            }\r\n            const startIndexes = new Uint32Array(limit);\r\n            const endIndexes = new Uint32Array(limit);\r\n            const types = [];\r\n            for (let i = 0, k = 0; i < this._length; i++) {\r\n                const level = this._nestingLevels[i];\r\n                if (level < maxLevel || (level === maxLevel && entries++ < limit)) {\r\n                    startIndexes[k] = this._startIndexes[i];\r\n                    endIndexes[k] = this._endIndexes[i];\r\n                    types[k] = this._types[i];\r\n                    k++;\r\n                }\r\n            }\r\n            return new FoldingRegions(startIndexes, endIndexes, types);\r\n        }\r\n    }\r\n}\r\nexport function sanitizeRanges(rangeData, foldingRangesLimit) {\r\n    const sorted = rangeData.sort((d1, d2) => {\r\n        let diff = d1.start - d2.start;\r\n        if (diff === 0) {\r\n            diff = d1.rank - d2.rank;\r\n        }\r\n        return diff;\r\n    });\r\n    const collector = new RangesCollector(foldingRangesLimit);\r\n    let top = undefined;\r\n    const previous = [];\r\n    for (const entry of sorted) {\r\n        if (!top) {\r\n            top = entry;\r\n            collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\r\n        }\r\n        else {\r\n            if (entry.start > top.start) {\r\n                if (entry.end <= top.end) {\r\n                    previous.push(top);\r\n                    top = entry;\r\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\r\n                }\r\n                else {\r\n                    if (entry.start > top.end) {\r\n                        do {\r\n                            top = previous.pop();\r\n                        } while (top && entry.start > top.end);\r\n                        if (top) {\r\n                            previous.push(top);\r\n                        }\r\n                        top = entry;\r\n                    }\r\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return collector.toIndentRanges();\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\r\nimport * as nls from '../../../../nls.js';\r\nclass EditorFontZoomIn extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.fontZoomIn',\r\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\r\n            alias: 'Editor Font Zoom In',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\r\n    }\r\n}\r\nclass EditorFontZoomOut extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.fontZoomOut',\r\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\r\n            alias: 'Editor Font Zoom Out',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\r\n    }\r\n}\r\nclass EditorFontZoomReset extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.fontZoomReset',\r\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\r\n            alias: 'Editor Font Zoom Reset',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        EditorZoom.setZoomLevel(0);\r\n    }\r\n}\r\nregisterEditorAction(EditorFontZoomIn);\r\nregisterEditorAction(EditorFontZoomOut);\r\nregisterEditorAction(EditorFontZoomReset);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\r\nimport { FormattingEdit } from './formattingEdit.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\r\nlet FormatOnType = class FormatOnType {\r\n    constructor(_editor, _languageFeaturesService, _workerService) {\r\n        this._editor = _editor;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._workerService = _workerService;\r\n        this._disposables = new DisposableStore();\r\n        this._sessionDisposables = new DisposableStore();\r\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\r\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\r\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\r\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(56 /* EditorOption.formatOnType */)) {\r\n                this._update();\r\n            }\r\n        }));\r\n        this._update();\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this._sessionDisposables.dispose();\r\n    }\r\n    _update() {\r\n        // clean up\r\n        this._sessionDisposables.clear();\r\n        // we are disabled\r\n        if (!this._editor.getOption(56 /* EditorOption.formatOnType */)) {\r\n            return;\r\n        }\r\n        // no model\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        // no support\r\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\r\n        if (!support || !support.autoFormatTriggerCharacters) {\r\n            return;\r\n        }\r\n        // register typing listeners that will trigger the format\r\n        const triggerChars = new CharacterSet();\r\n        for (const ch of support.autoFormatTriggerCharacters) {\r\n            triggerChars.add(ch.charCodeAt(0));\r\n        }\r\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\r\n            const lastCharCode = text.charCodeAt(text.length - 1);\r\n            if (triggerChars.has(lastCharCode)) {\r\n                this._trigger(String.fromCharCode(lastCharCode));\r\n            }\r\n        }));\r\n    }\r\n    _trigger(ch) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const position = this._editor.getPosition();\r\n        const cts = new CancellationTokenSource();\r\n        // install a listener that checks if edits happens before the\r\n        // position on which we format right now. If so, we won't\r\n        // apply the format edits\r\n        const unbind = this._editor.onDidChangeModelContent((e) => {\r\n            if (e.isFlush) {\r\n                // a model.setValue() was called\r\n                // cancel only once\r\n                cts.cancel();\r\n                unbind.dispose();\r\n                return;\r\n            }\r\n            for (let i = 0, len = e.changes.length; i < len; i++) {\r\n                const change = e.changes[i];\r\n                if (change.range.endLineNumber <= position.lineNumber) {\r\n                    // cancel only once\r\n                    cts.cancel();\r\n                    unbind.dispose();\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\r\n            if (cts.token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            if (isNonEmptyArray(edits)) {\r\n                FormattingEdit.execute(this._editor, edits, true);\r\n                alertFormattingEdits(edits);\r\n            }\r\n        }).finally(() => {\r\n            unbind.dispose();\r\n        });\r\n    }\r\n};\r\nFormatOnType.ID = 'editor.contrib.autoFormat';\r\nFormatOnType = __decorate([\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, IEditorWorkerService)\r\n], FormatOnType);\r\nexport { FormatOnType };\r\nlet FormatOnPaste = class FormatOnPaste {\r\n    constructor(editor, _languageFeaturesService, _instantiationService) {\r\n        this.editor = editor;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._instantiationService = _instantiationService;\r\n        this._callOnDispose = new DisposableStore();\r\n        this._callOnModel = new DisposableStore();\r\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\r\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\r\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\r\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\r\n    }\r\n    dispose() {\r\n        this._callOnDispose.dispose();\r\n        this._callOnModel.dispose();\r\n    }\r\n    _update() {\r\n        // clean up\r\n        this._callOnModel.clear();\r\n        // we are disabled\r\n        if (!this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\r\n            return;\r\n        }\r\n        // no model\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        // no formatter\r\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\r\n            return;\r\n        }\r\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\r\n    }\r\n    _trigger(range) {\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (this.editor.getSelections().length > 1) {\r\n            return;\r\n        }\r\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\r\n    }\r\n};\r\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\r\nFormatOnPaste = __decorate([\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, IInstantiationService)\r\n], FormatOnPaste);\r\nclass FormatDocumentAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.formatDocument',\r\n            label: nls.localize('formatDocument.label', \"Format Document\"),\r\n            alias: 'Format Document',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\r\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 1.3\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (editor.hasModel()) {\r\n                const instaService = accessor.get(IInstantiationService);\r\n                const progressService = accessor.get(IEditorProgressService);\r\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass FormatSelectionAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.formatSelection',\r\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\r\n            alias: 'Format Selection',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                when: EditorContextKeys.hasNonEmptySelection,\r\n                group: '1_modification',\r\n                order: 1.31\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!editor.hasModel()) {\r\n                return;\r\n            }\r\n            const instaService = accessor.get(IInstantiationService);\r\n            const model = editor.getModel();\r\n            const ranges = editor.getSelections().map(range => {\r\n                return range.isEmpty()\r\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\r\n                    : range;\r\n            });\r\n            const progressService = accessor.get(IEditorProgressService);\r\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\r\n        });\r\n    }\r\n}\r\nregisterEditorContribution(FormatOnType.ID, FormatOnType, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorAction(FormatDocumentAction);\r\nregisterEditorAction(FormatSelectionAction);\r\n// this is the old format action that does both (format document OR format selection)\r\n// and we keep it here such that existing keybinding configurations etc will still work\r\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\r\n    if (!editor || !editor.hasModel()) {\r\n        return;\r\n    }\r\n    const commandService = accessor.get(ICommandService);\r\n    if (editor.getSelection().isEmpty()) {\r\n        yield commandService.executeCommand('editor.action.formatDocument');\r\n    }\r\n    else {\r\n        yield commandService.executeCommand('editor.action.formatSelection');\r\n    }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './browser/coreCommands.js';\r\nimport './browser/widget/codeEditorWidget.js';\r\nimport './browser/widget/diffEditor/diffEditor.contribution.js';\r\nimport './contrib/anchorSelect/browser/anchorSelect.js';\r\nimport './contrib/bracketMatching/browser/bracketMatching.js';\r\nimport './contrib/caretOperations/browser/caretOperations.js';\r\nimport './contrib/caretOperations/browser/transpose.js';\r\nimport './contrib/clipboard/browser/clipboard.js';\r\nimport './contrib/codeAction/browser/codeActionContributions.js';\r\nimport './contrib/codelens/browser/codelensController.js';\r\nimport './contrib/colorPicker/browser/colorContributions.js';\r\nimport './contrib/colorPicker/browser/standaloneColorPickerActions.js';\r\nimport './contrib/comment/browser/comment.js';\r\nimport './contrib/contextmenu/browser/contextmenu.js';\r\nimport './contrib/cursorUndo/browser/cursorUndo.js';\r\nimport './contrib/dnd/browser/dnd.js';\r\nimport './contrib/dropOrPasteInto/browser/copyPasteContribution.js';\r\nimport './contrib/dropOrPasteInto/browser/dropIntoEditorContribution.js';\r\nimport './contrib/find/browser/findController.js';\r\nimport './contrib/folding/browser/folding.js';\r\nimport './contrib/fontZoom/browser/fontZoom.js';\r\nimport './contrib/format/browser/formatActions.js';\r\nimport './contrib/documentSymbols/browser/documentSymbols.js';\r\nimport './contrib/inlineCompletions/browser/inlineCompletions.contribution.js';\r\nimport './contrib/inlineProgress/browser/inlineProgress.js';\r\nimport './contrib/gotoSymbol/browser/goToCommands.js';\r\nimport './contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js';\r\nimport './contrib/gotoError/browser/gotoError.js';\r\nimport './contrib/hover/browser/hover.js';\r\nimport './contrib/indentation/browser/indentation.js';\r\nimport './contrib/inlayHints/browser/inlayHintsContribution.js';\r\nimport './contrib/inPlaceReplace/browser/inPlaceReplace.js';\r\nimport './contrib/lineSelection/browser/lineSelection.js';\r\nimport './contrib/linesOperations/browser/linesOperations.js';\r\nimport './contrib/linkedEditing/browser/linkedEditing.js';\r\nimport './contrib/links/browser/links.js';\r\nimport './contrib/longLinesHelper/browser/longLinesHelper.js';\r\nimport './contrib/multicursor/browser/multicursor.js';\r\nimport './contrib/parameterHints/browser/parameterHints.js';\r\nimport './contrib/rename/browser/rename.js';\r\nimport './contrib/semanticTokens/browser/documentSemanticTokens.js';\r\nimport './contrib/semanticTokens/browser/viewportSemanticTokens.js';\r\nimport './contrib/smartSelect/browser/smartSelect.js';\r\nimport './contrib/snippet/browser/snippetController2.js';\r\nimport './contrib/stickyScroll/browser/stickyScrollContribution.js';\r\nimport './contrib/suggest/browser/suggestController.js';\r\nimport './contrib/suggest/browser/suggestInlineCompletions.js';\r\nimport './contrib/tokenization/browser/tokenization.js';\r\nimport './contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\r\nimport './contrib/unicodeHighlighter/browser/unicodeHighlighter.js';\r\nimport './contrib/unusualLineTerminators/browser/unusualLineTerminators.js';\r\nimport './contrib/wordHighlighter/browser/wordHighlighter.js';\r\nimport './contrib/wordOperations/browser/wordOperations.js';\r\nimport './contrib/wordPartOperations/browser/wordPartOperations.js';\r\nimport './contrib/readOnlyMessage/browser/contribution.js';\r\n// Load up these strings even in VSCode, even if they are not used\r\n// in order to get them translated\r\nimport './common/standaloneStrings.js';\r\nimport '../base/browser/ui/codicons/codiconStyles.js'; // The codicons are defined here and must be loaded\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\r\nimport { TriggerInlineSuggestionAction, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, AcceptNextWordOfInlineCompletion, AcceptInlineCompletion, HideInlineCompletion, ToggleAlwaysShowInlineSuggestionToolbar, AcceptNextLineOfInlineCompletion } from './commands.js';\r\nimport { InlineCompletionsHoverParticipant } from './hoverParticipant.js';\r\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\r\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\r\nregisterEditorContribution(InlineCompletionsController.ID, InlineCompletionsController, 3 /* EditorContributionInstantiation.Eventually */);\r\nregisterEditorAction(TriggerInlineSuggestionAction);\r\nregisterEditorAction(ShowNextInlineSuggestionAction);\r\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\r\nregisterEditorAction(AcceptNextWordOfInlineCompletion);\r\nregisterEditorAction(AcceptNextLineOfInlineCompletion);\r\nregisterEditorAction(AcceptInlineCompletion);\r\nregisterEditorAction(HideInlineCompletion);\r\nregisterAction2(ToggleAlwaysShowInlineSuggestionToolbar);\r\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { transaction } from '../../../../base/common/observable.js';\r\nimport { EditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { showNextInlineSuggestionActionId, showPreviousInlineSuggestionActionId, inlineSuggestCommitId } from './commandIds.js';\r\nimport { InlineCompletionContextKeys } from './inlineCompletionContextKeys.js';\r\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\r\nimport { Context as SuggestContext } from '../../suggest/browser/suggest.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId, Action2 } from '../../../../platform/actions/common/actions.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nexport class ShowNextInlineSuggestionAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: ShowNextInlineSuggestionAction.ID,\r\n            label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\r\n            alias: 'Show Next Inline Suggestion',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\r\n            kbOpts: {\r\n                weight: 100,\r\n                primary: 512 /* KeyMod.Alt */ | 94 /* KeyCode.BracketRight */,\r\n            },\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = InlineCompletionsController.get(editor);\r\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.next();\r\n        });\r\n    }\r\n}\r\nShowNextInlineSuggestionAction.ID = showNextInlineSuggestionActionId;\r\nexport class ShowPreviousInlineSuggestionAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: ShowPreviousInlineSuggestionAction.ID,\r\n            label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\r\n            alias: 'Show Previous Inline Suggestion',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\r\n            kbOpts: {\r\n                weight: 100,\r\n                primary: 512 /* KeyMod.Alt */ | 92 /* KeyCode.BracketLeft */,\r\n            },\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = InlineCompletionsController.get(editor);\r\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.previous();\r\n        });\r\n    }\r\n}\r\nShowPreviousInlineSuggestionAction.ID = showPreviousInlineSuggestionActionId;\r\nexport class TriggerInlineSuggestionAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.inlineSuggest.trigger',\r\n            label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\r\n            alias: 'Trigger Inline Suggestion',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = InlineCompletionsController.get(editor);\r\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.triggerExplicitly();\r\n        });\r\n    }\r\n}\r\nexport class AcceptNextWordOfInlineCompletion extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.inlineSuggest.acceptNextWord',\r\n            label: nls.localize('action.inlineSuggest.acceptNextWord', \"Accept Next Word Of Inline Suggestion\"),\r\n            alias: 'Accept Next Word Of Inline Suggestion',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\r\n            kbOpts: {\r\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\r\n            },\r\n            menuOpts: [{\r\n                    menuId: MenuId.InlineSuggestionToolbar,\r\n                    title: nls.localize('acceptWord', 'Accept Word'),\r\n                    group: 'primary',\r\n                    order: 2,\r\n                }],\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = InlineCompletionsController.get(editor);\r\n            yield ((_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.acceptNextWord(controller.editor));\r\n        });\r\n    }\r\n}\r\nexport class AcceptNextLineOfInlineCompletion extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.inlineSuggest.acceptNextLine',\r\n            label: nls.localize('action.inlineSuggest.acceptNextLine', \"Accept Next Line Of Inline Suggestion\"),\r\n            alias: 'Accept Next Line Of Inline Suggestion',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\r\n            kbOpts: {\r\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\r\n            },\r\n            menuOpts: [{\r\n                    menuId: MenuId.InlineSuggestionToolbar,\r\n                    title: nls.localize('acceptLine', 'Accept Line'),\r\n                    group: 'secondary',\r\n                    order: 2,\r\n                }],\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = InlineCompletionsController.get(editor);\r\n            yield ((_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.acceptNextLine(controller.editor));\r\n        });\r\n    }\r\n}\r\nexport class AcceptInlineCompletion extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: inlineSuggestCommitId,\r\n            label: nls.localize('action.inlineSuggest.accept', \"Accept Inline Suggestion\"),\r\n            alias: 'Accept Inline Suggestion',\r\n            precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\r\n            menuOpts: [{\r\n                    menuId: MenuId.InlineSuggestionToolbar,\r\n                    title: nls.localize('accept', \"Accept\"),\r\n                    group: 'primary',\r\n                    order: 1,\r\n                }],\r\n            kbOpts: {\r\n                primary: 2 /* KeyCode.Tab */,\r\n                weight: 200,\r\n                kbExpr: ContextKeyExpr.and(InlineCompletionContextKeys.inlineSuggestionVisible, EditorContextKeys.tabMovesFocus.toNegated(), InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize, SuggestContext.Visible.toNegated(), EditorContextKeys.hoverFocused.toNegated()),\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = InlineCompletionsController.get(editor);\r\n            if (controller) {\r\n                (_a = controller.model.get()) === null || _a === void 0 ? void 0 : _a.accept(controller.editor);\r\n                controller.editor.focus();\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class HideInlineCompletion extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: HideInlineCompletion.ID,\r\n            label: nls.localize('action.inlineSuggest.hide', \"Hide Inline Suggestion\"),\r\n            alias: 'Hide Inline Suggestion',\r\n            precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\r\n            kbOpts: {\r\n                weight: 100,\r\n                primary: 9 /* KeyCode.Escape */,\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = InlineCompletionsController.get(editor);\r\n            transaction(tx => {\r\n                var _a;\r\n                (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.stop(tx);\r\n            });\r\n        });\r\n    }\r\n}\r\nHideInlineCompletion.ID = 'editor.action.inlineSuggest.hide';\r\nexport class ToggleAlwaysShowInlineSuggestionToolbar extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: ToggleAlwaysShowInlineSuggestionToolbar.ID,\r\n            title: nls.localize('action.inlineSuggest.alwaysShowToolbar', \"Always Show Toolbar\"),\r\n            f1: false,\r\n            precondition: undefined,\r\n            menu: [{\r\n                    id: MenuId.InlineSuggestionToolbar,\r\n                    group: 'secondary',\r\n                    order: 10,\r\n                }],\r\n            toggled: ContextKeyExpr.equals('config.editor.inlineSuggest.showToolbar', 'always')\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const configService = accessor.get(IConfigurationService);\r\n            const currentValue = configService.getValue('editor.inlineSuggest.showToolbar');\r\n            const newValue = currentValue === 'always' ? 'onHover' : 'always';\r\n            configService.updateValue('editor.inlineSuggest.showToolbar', newValue);\r\n        });\r\n    }\r\n}\r\nToggleAlwaysShowInlineSuggestionToolbar.ID = 'editor.action.inlineSuggest.toggleAlwaysShowToolbar';\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { autorun } from '../../../../base/common/observable.js';\r\nimport { firstNonWhitespaceIndex } from '../../../../base/common/strings.js';\r\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { localize } from '../../../../nls.js';\r\nexport class InlineCompletionContextKeys extends Disposable {\r\n    constructor(contextKeyService, model) {\r\n        super();\r\n        this.contextKeyService = contextKeyService;\r\n        this.model = model;\r\n        this.inlineCompletionVisible = InlineCompletionContextKeys.inlineSuggestionVisible.bindTo(this.contextKeyService);\r\n        this.inlineCompletionSuggestsIndentation = InlineCompletionContextKeys.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);\r\n        this.inlineCompletionSuggestsIndentationLessThanTabSize = InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);\r\n        this.suppressSuggestions = InlineCompletionContextKeys.suppressSuggestions.bindTo(this.contextKeyService);\r\n        this._register(autorun(reader => {\r\n            /** @description update context key: inlineCompletionVisible, suppressSuggestions */\r\n            const model = this.model.read(reader);\r\n            const state = model === null || model === void 0 ? void 0 : model.state.read(reader);\r\n            const isInlineCompletionVisible = !!(state === null || state === void 0 ? void 0 : state.inlineCompletion) && (state === null || state === void 0 ? void 0 : state.ghostText) !== undefined && !(state === null || state === void 0 ? void 0 : state.ghostText.isEmpty());\r\n            this.inlineCompletionVisible.set(isInlineCompletionVisible);\r\n            if ((state === null || state === void 0 ? void 0 : state.ghostText) && (state === null || state === void 0 ? void 0 : state.inlineCompletion)) {\r\n                this.suppressSuggestions.set(state.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions);\r\n            }\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description update context key: inlineCompletionSuggestsIndentation, inlineCompletionSuggestsIndentationLessThanTabSize */\r\n            const model = this.model.read(reader);\r\n            let startsWithIndentation = false;\r\n            let startsWithIndentationLessThanTabSize = true;\r\n            const ghostText = model === null || model === void 0 ? void 0 : model.ghostText.read(reader);\r\n            if (!!(model === null || model === void 0 ? void 0 : model.selectedSuggestItem) && ghostText && ghostText.parts.length > 0) {\r\n                const { column, lines } = ghostText.parts[0];\r\n                const firstLine = lines[0];\r\n                const indentationEndColumn = model.textModel.getLineIndentColumn(ghostText.lineNumber);\r\n                const inIndentation = column <= indentationEndColumn;\r\n                if (inIndentation) {\r\n                    let firstNonWsIdx = firstNonWhitespaceIndex(firstLine);\r\n                    if (firstNonWsIdx === -1) {\r\n                        firstNonWsIdx = firstLine.length - 1;\r\n                    }\r\n                    startsWithIndentation = firstNonWsIdx > 0;\r\n                    const tabSize = model.textModel.getOptions().tabSize;\r\n                    const visibleColumnIndentation = CursorColumns.visibleColumnFromColumn(firstLine, firstNonWsIdx + 1, tabSize);\r\n                    startsWithIndentationLessThanTabSize = visibleColumnIndentation < tabSize;\r\n                }\r\n            }\r\n            this.inlineCompletionSuggestsIndentation.set(startsWithIndentation);\r\n            this.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize);\r\n        }));\r\n    }\r\n}\r\nInlineCompletionContextKeys.inlineSuggestionVisible = new RawContextKey('inlineSuggestionVisible', false, localize('inlineSuggestionVisible', \"Whether an inline suggestion is visible\"));\r\nInlineCompletionContextKeys.inlineSuggestionHasIndentation = new RawContextKey('inlineSuggestionHasIndentation', false, localize('inlineSuggestionHasIndentation', \"Whether the inline suggestion starts with whitespace\"));\r\nInlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize = new RawContextKey('inlineSuggestionHasIndentationLessThanTabSize', true, localize('inlineSuggestionHasIndentationLessThanTabSize', \"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab\"));\r\nInlineCompletionContextKeys.suppressSuggestions = new RawContextKey('inlineSuggestionSuppressSuggestions', undefined, localize('suppressSuggestions', \"Whether suggestions should be suppressed for the current suggestion\"));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar InlineCompletionsController_1;\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, constObservable, disposableObservableValue, observableFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\r\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { inlineSuggestCommitId } from './commandIds.js';\r\nimport { GhostTextWidget } from './ghostTextWidget.js';\r\nimport { InlineCompletionContextKeys } from './inlineCompletionContextKeys.js';\r\nimport { InlineCompletionsHintsWidget, InlineSuggestionHintsContentWidget } from './inlineCompletionsHintsWidget.js';\r\nimport { InlineCompletionsModel, VersionIdChangeReason } from './inlineCompletionsModel.js';\r\nimport { SuggestWidgetAdaptor } from './suggestWidgetInlineCompletionProvider.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nlet InlineCompletionsController = InlineCompletionsController_1 = class InlineCompletionsController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(InlineCompletionsController_1.ID);\r\n    }\r\n    constructor(editor, instantiationService, contextKeyService, configurationService, commandService, debounceService, languageFeaturesService, audioCueService, _keybindingService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.instantiationService = instantiationService;\r\n        this.contextKeyService = contextKeyService;\r\n        this.configurationService = configurationService;\r\n        this.commandService = commandService;\r\n        this.debounceService = debounceService;\r\n        this.languageFeaturesService = languageFeaturesService;\r\n        this.audioCueService = audioCueService;\r\n        this._keybindingService = _keybindingService;\r\n        this.model = disposableObservableValue('inlineCompletionModel', undefined);\r\n        this.textModelVersionId = observableValue(this, -1);\r\n        this.cursorPosition = observableValue(this, new Position(1, 1));\r\n        this.suggestWidgetAdaptor = this._register(new SuggestWidgetAdaptor(this.editor, () => { var _a, _b; return (_b = (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.selectedInlineCompletion.get()) === null || _b === void 0 ? void 0 : _b.toSingleTextEdit(undefined); }, (tx) => this.updateObservables(tx, VersionIdChangeReason.Other), (item) => {\r\n            transaction(tx => {\r\n                var _a;\r\n                /** @description handleSuggestAccepted */\r\n                this.updateObservables(tx, VersionIdChangeReason.Other);\r\n                (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.handleSuggestAccepted(item);\r\n            });\r\n        }));\r\n        this._enabled = observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(62 /* EditorOption.inlineSuggest */).enabled);\r\n        this.ghostTextWidget = this._register(this.instantiationService.createInstance(GhostTextWidget, this.editor, {\r\n            ghostText: this.model.map((v, reader) => v === null || v === void 0 ? void 0 : v.ghostText.read(reader)),\r\n            minReservedLineCount: constObservable(0),\r\n            targetTextModel: this.model.map(v => v === null || v === void 0 ? void 0 : v.textModel),\r\n        }));\r\n        this._debounceValue = this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider, 'InlineCompletionsDebounce', { min: 50, max: 50 });\r\n        this._register(new InlineCompletionContextKeys(this.contextKeyService, this.model));\r\n        this._register(Event.runAndSubscribe(editor.onDidChangeModel, () => transaction(tx => {\r\n            /** @description onDidChangeModel */\r\n            this.model.set(undefined, tx);\r\n            this.updateObservables(tx, VersionIdChangeReason.Other);\r\n            const textModel = editor.getModel();\r\n            if (textModel) {\r\n                const model = instantiationService.createInstance(InlineCompletionsModel, textModel, this.suggestWidgetAdaptor.selectedItem, this.cursorPosition, this.textModelVersionId, this._debounceValue, observableFromEvent(editor.onDidChangeConfiguration, () => editor.getOption(117 /* EditorOption.suggest */).preview), observableFromEvent(editor.onDidChangeConfiguration, () => editor.getOption(117 /* EditorOption.suggest */).previewMode), observableFromEvent(editor.onDidChangeConfiguration, () => editor.getOption(62 /* EditorOption.inlineSuggest */).mode), this._enabled);\r\n                this.model.set(model, tx);\r\n            }\r\n        })));\r\n        const getReason = (e) => {\r\n            var _a;\r\n            if (e.isUndoing) {\r\n                return VersionIdChangeReason.Undo;\r\n            }\r\n            if (e.isRedoing) {\r\n                return VersionIdChangeReason.Redo;\r\n            }\r\n            if ((_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.isAcceptingPartially) {\r\n                return VersionIdChangeReason.AcceptWord;\r\n            }\r\n            return VersionIdChangeReason.Other;\r\n        };\r\n        this._register(editor.onDidChangeModelContent((e) => transaction(tx => \r\n        /** @description onDidChangeModelContent */\r\n        this.updateObservables(tx, getReason(e)))));\r\n        this._register(editor.onDidChangeCursorPosition(e => transaction(tx => {\r\n            var _a;\r\n            /** @description onDidChangeCursorPosition */\r\n            this.updateObservables(tx, VersionIdChangeReason.Other);\r\n            if (e.reason === 3 /* CursorChangeReason.Explicit */ || e.source === 'api') {\r\n                (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.stop(tx);\r\n            }\r\n        })));\r\n        this._register(editor.onDidType(() => transaction(tx => {\r\n            var _a;\r\n            /** @description onDidType */\r\n            this.updateObservables(tx, VersionIdChangeReason.Other);\r\n            if (this._enabled.get()) {\r\n                (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.trigger(tx);\r\n            }\r\n        })));\r\n        this._register(this.commandService.onDidExecuteCommand((e) => {\r\n            // These commands don't trigger onDidType.\r\n            const commands = new Set([\r\n                CoreEditingCommands.Tab.id,\r\n                CoreEditingCommands.DeleteLeft.id,\r\n                CoreEditingCommands.DeleteRight.id,\r\n                inlineSuggestCommitId,\r\n                'acceptSelectedSuggestion',\r\n            ]);\r\n            if (commands.has(e.commandId) && editor.hasTextFocus() && this._enabled.get()) {\r\n                transaction(tx => {\r\n                    var _a;\r\n                    /** @description onDidExecuteCommand */\r\n                    (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.trigger(tx);\r\n                });\r\n            }\r\n        }));\r\n        this._register(this.editor.onDidBlurEditorWidget(() => {\r\n            // This is a hidden setting very useful for debugging\r\n            if (this.contextKeyService.getContextKeyValue('accessibleViewIsShown') || this.configurationService.getValue('editor.inlineSuggest.keepOnBlur') ||\r\n                editor.getOption(62 /* EditorOption.inlineSuggest */).keepOnBlur) {\r\n                return;\r\n            }\r\n            if (InlineSuggestionHintsContentWidget.dropDownVisible) {\r\n                return;\r\n            }\r\n            transaction(tx => {\r\n                var _a;\r\n                /** @description onDidBlurEditorWidget */\r\n                (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.stop(tx);\r\n            });\r\n        }));\r\n        this._register(autorun(reader => {\r\n            var _a;\r\n            /** @description forceRenderingAbove */\r\n            const state = (_a = this.model.read(reader)) === null || _a === void 0 ? void 0 : _a.state.read(reader);\r\n            if (state === null || state === void 0 ? void 0 : state.suggestItem) {\r\n                if (state.ghostText.lineCount >= 2) {\r\n                    this.suggestWidgetAdaptor.forceRenderingAbove();\r\n                }\r\n            }\r\n            else {\r\n                this.suggestWidgetAdaptor.stopForceRenderingAbove();\r\n            }\r\n        }));\r\n        this._register(toDisposable(() => {\r\n            this.suggestWidgetAdaptor.stopForceRenderingAbove();\r\n        }));\r\n        let lastInlineCompletionId = undefined;\r\n        this._register(autorun(reader => {\r\n            /** @description play audio cue & read suggestion */\r\n            const model = this.model.read(reader);\r\n            const state = model === null || model === void 0 ? void 0 : model.state.read(reader);\r\n            if (!model || !state || !state.inlineCompletion) {\r\n                lastInlineCompletionId = undefined;\r\n                return;\r\n            }\r\n            if (state.inlineCompletion.semanticId !== lastInlineCompletionId) {\r\n                lastInlineCompletionId = state.inlineCompletion.semanticId;\r\n                const lineText = model.textModel.getLineContent(state.ghostText.lineNumber);\r\n                this.audioCueService.playAudioCue(AudioCue.inlineSuggestion).then(() => {\r\n                    if (this.editor.getOption(8 /* EditorOption.screenReaderAnnounceInlineSuggestion */)) {\r\n                        this.provideScreenReaderUpdate(state.ghostText.renderForScreenReader(lineText));\r\n                    }\r\n                });\r\n            }\r\n        }));\r\n        this._register(new InlineCompletionsHintsWidget(this.editor, this.model, this.instantiationService));\r\n        this._register(this.configurationService.onDidChangeConfiguration(e => {\r\n            if (e.affectsConfiguration('accessibility.verbosity.inlineCompletions')) {\r\n                this.editor.updateOptions({ inlineCompletionsAccessibilityVerbose: this.configurationService.getValue('accessibility.verbosity.inlineCompletions') });\r\n            }\r\n        }));\r\n        this.editor.updateOptions({ inlineCompletionsAccessibilityVerbose: this.configurationService.getValue('accessibility.verbosity.inlineCompletions') });\r\n    }\r\n    provideScreenReaderUpdate(content) {\r\n        const accessibleViewShowing = this.contextKeyService.getContextKeyValue('accessibleViewIsShown');\r\n        const accessibleViewKeybinding = this._keybindingService.lookupKeybinding('editor.action.accessibleView');\r\n        let hint;\r\n        if (!accessibleViewShowing && accessibleViewKeybinding && this.editor.getOption(147 /* EditorOption.inlineCompletionsAccessibilityVerbose */)) {\r\n            hint = localize('showAccessibleViewHint', \"Inspect this in the accessible view ({0})\", accessibleViewKeybinding.getAriaLabel());\r\n        }\r\n        hint ? alert(content + ', ' + hint) : alert(content);\r\n    }\r\n    /**\r\n     * Copies over the relevant state from the text model to observables.\r\n     * This solves all kind of eventing issues, as we make sure we always operate on the latest state,\r\n     * regardless of who calls into us.\r\n     */\r\n    updateObservables(tx, changeReason) {\r\n        var _a, _b;\r\n        const newModel = this.editor.getModel();\r\n        this.textModelVersionId.set((_a = newModel === null || newModel === void 0 ? void 0 : newModel.getVersionId()) !== null && _a !== void 0 ? _a : -1, tx, changeReason);\r\n        this.cursorPosition.set((_b = this.editor.getPosition()) !== null && _b !== void 0 ? _b : new Position(1, 1), tx);\r\n    }\r\n    shouldShowHoverAt(range) {\r\n        var _a;\r\n        const ghostText = (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.ghostText.get();\r\n        if (ghostText) {\r\n            return ghostText.parts.some(p => range.containsPosition(new Position(ghostText.lineNumber, p.column)));\r\n        }\r\n        return false;\r\n    }\r\n    shouldShowHoverAtViewZone(viewZoneId) {\r\n        return this.ghostTextWidget.ownsViewZone(viewZoneId);\r\n    }\r\n};\r\nInlineCompletionsController.ID = 'editor.contrib.inlineCompletionsController';\r\nInlineCompletionsController = InlineCompletionsController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, IConfigurationService),\r\n    __param(4, ICommandService),\r\n    __param(5, ILanguageFeatureDebounceService),\r\n    __param(6, ILanguageFeaturesService),\r\n    __param(7, IAudioCueService),\r\n    __param(8, IKeybindingService)\r\n], InlineCompletionsController);\r\nexport { InlineCompletionsController };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, derived, observableFromEvent, observableSignalFromEvent, observableValue } from '../../../../base/common/observable.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport './ghostText.css';\r\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\r\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { InjectedTextCursorStops } from '../../../common/model.js';\r\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\r\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\r\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\r\nimport { GhostTextReplacement } from './ghostText.js';\r\nimport { ColumnRange, applyObservableDecorations } from './utils.js';\r\nexport const GHOST_TEXT_DESCRIPTION = 'ghost-text';\r\nlet GhostTextWidget = class GhostTextWidget extends Disposable {\r\n    constructor(editor, model, languageService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.model = model;\r\n        this.languageService = languageService;\r\n        this.isDisposed = observableValue(this, false);\r\n        this.currentTextModel = observableFromEvent(this.editor.onDidChangeModel, () => this.editor.getModel());\r\n        this.uiState = derived(this, reader => {\r\n            if (this.isDisposed.read(reader)) {\r\n                return undefined;\r\n            }\r\n            const textModel = this.currentTextModel.read(reader);\r\n            if (textModel !== this.model.targetTextModel.read(reader)) {\r\n                return undefined;\r\n            }\r\n            const ghostText = this.model.ghostText.read(reader);\r\n            if (!ghostText) {\r\n                return undefined;\r\n            }\r\n            const replacedRange = ghostText instanceof GhostTextReplacement ? ghostText.columnRange : undefined;\r\n            const inlineTexts = [];\r\n            const additionalLines = [];\r\n            function addToAdditionalLines(lines, className) {\r\n                if (additionalLines.length > 0) {\r\n                    const lastLine = additionalLines[additionalLines.length - 1];\r\n                    if (className) {\r\n                        lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\r\n                    }\r\n                    lastLine.content += lines[0];\r\n                    lines = lines.slice(1);\r\n                }\r\n                for (const line of lines) {\r\n                    additionalLines.push({\r\n                        content: line,\r\n                        decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\r\n                    });\r\n                }\r\n            }\r\n            const textBufferLine = textModel.getLineContent(ghostText.lineNumber);\r\n            let hiddenTextStartColumn = undefined;\r\n            let lastIdx = 0;\r\n            for (const part of ghostText.parts) {\r\n                let lines = part.lines;\r\n                if (hiddenTextStartColumn === undefined) {\r\n                    inlineTexts.push({\r\n                        column: part.column,\r\n                        text: lines[0],\r\n                        preview: part.preview,\r\n                    });\r\n                    lines = lines.slice(1);\r\n                }\r\n                else {\r\n                    addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\r\n                }\r\n                if (lines.length > 0) {\r\n                    addToAdditionalLines(lines, GHOST_TEXT_DESCRIPTION);\r\n                    if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\r\n                        hiddenTextStartColumn = part.column;\r\n                    }\r\n                }\r\n                lastIdx = part.column - 1;\r\n            }\r\n            if (hiddenTextStartColumn !== undefined) {\r\n                addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\r\n            }\r\n            const hiddenRange = hiddenTextStartColumn !== undefined ? new ColumnRange(hiddenTextStartColumn, textBufferLine.length + 1) : undefined;\r\n            return {\r\n                replacedRange,\r\n                inlineTexts,\r\n                additionalLines,\r\n                hiddenRange,\r\n                lineNumber: ghostText.lineNumber,\r\n                additionalReservedLineCount: this.model.minReservedLineCount.read(reader),\r\n                targetTextModel: textModel,\r\n            };\r\n        });\r\n        this.decorations = derived(this, reader => {\r\n            const uiState = this.uiState.read(reader);\r\n            if (!uiState) {\r\n                return [];\r\n            }\r\n            const decorations = [];\r\n            if (uiState.replacedRange) {\r\n                decorations.push({\r\n                    range: uiState.replacedRange.toRange(uiState.lineNumber),\r\n                    options: { inlineClassName: 'inline-completion-text-to-replace', description: 'GhostTextReplacement' }\r\n                });\r\n            }\r\n            if (uiState.hiddenRange) {\r\n                decorations.push({\r\n                    range: uiState.hiddenRange.toRange(uiState.lineNumber),\r\n                    options: { inlineClassName: 'ghost-text-hidden', description: 'ghost-text-hidden', }\r\n                });\r\n            }\r\n            for (const p of uiState.inlineTexts) {\r\n                decorations.push({\r\n                    range: Range.fromPositions(new Position(uiState.lineNumber, p.column)),\r\n                    options: {\r\n                        description: GHOST_TEXT_DESCRIPTION,\r\n                        after: { content: p.text, inlineClassName: p.preview ? 'ghost-text-decoration-preview' : 'ghost-text-decoration', cursorStops: InjectedTextCursorStops.Left },\r\n                        showIfCollapsed: true,\r\n                    }\r\n                });\r\n            }\r\n            return decorations;\r\n        });\r\n        this.additionalLinesWidget = this._register(new AdditionalLinesWidget(this.editor, this.languageService.languageIdCodec, derived(reader => {\r\n            /** @description lines */\r\n            const uiState = this.uiState.read(reader);\r\n            return uiState ? {\r\n                lineNumber: uiState.lineNumber,\r\n                additionalLines: uiState.additionalLines,\r\n                minReservedLineCount: uiState.additionalReservedLineCount,\r\n                targetTextModel: uiState.targetTextModel,\r\n            } : undefined;\r\n        })));\r\n        this._register(toDisposable(() => { this.isDisposed.set(true, undefined); }));\r\n        this._register(applyObservableDecorations(this.editor, this.decorations));\r\n    }\r\n    ownsViewZone(viewZoneId) {\r\n        return this.additionalLinesWidget.viewZoneId === viewZoneId;\r\n    }\r\n};\r\nGhostTextWidget = __decorate([\r\n    __param(2, ILanguageService)\r\n], GhostTextWidget);\r\nexport { GhostTextWidget };\r\nclass AdditionalLinesWidget extends Disposable {\r\n    get viewZoneId() { return this._viewZoneId; }\r\n    constructor(editor, languageIdCodec, lines) {\r\n        super();\r\n        this.editor = editor;\r\n        this.languageIdCodec = languageIdCodec;\r\n        this.lines = lines;\r\n        this._viewZoneId = undefined;\r\n        this.editorOptionsChanged = observableSignalFromEvent('editorOptionChanged', Event.filter(this.editor.onDidChangeConfiguration, e => e.hasChanged(33 /* EditorOption.disableMonospaceOptimizations */)\r\n            || e.hasChanged(116 /* EditorOption.stopRenderingLineAfter */)\r\n            || e.hasChanged(98 /* EditorOption.renderWhitespace */)\r\n            || e.hasChanged(93 /* EditorOption.renderControlCharacters */)\r\n            || e.hasChanged(51 /* EditorOption.fontLigatures */)\r\n            || e.hasChanged(50 /* EditorOption.fontInfo */)\r\n            || e.hasChanged(66 /* EditorOption.lineHeight */)));\r\n        this._register(autorun(reader => {\r\n            /** @description update view zone */\r\n            const lines = this.lines.read(reader);\r\n            this.editorOptionsChanged.read(reader);\r\n            if (lines) {\r\n                this.updateLines(lines.lineNumber, lines.additionalLines, lines.minReservedLineCount);\r\n            }\r\n            else {\r\n                this.clear();\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.clear();\r\n    }\r\n    clear() {\r\n        this.editor.changeViewZones((changeAccessor) => {\r\n            if (this._viewZoneId) {\r\n                changeAccessor.removeZone(this._viewZoneId);\r\n                this._viewZoneId = undefined;\r\n            }\r\n        });\r\n    }\r\n    updateLines(lineNumber, additionalLines, minReservedLineCount) {\r\n        const textModel = this.editor.getModel();\r\n        if (!textModel) {\r\n            return;\r\n        }\r\n        const { tabSize } = textModel.getOptions();\r\n        this.editor.changeViewZones((changeAccessor) => {\r\n            if (this._viewZoneId) {\r\n                changeAccessor.removeZone(this._viewZoneId);\r\n                this._viewZoneId = undefined;\r\n            }\r\n            const heightInLines = Math.max(additionalLines.length, minReservedLineCount);\r\n            if (heightInLines > 0) {\r\n                const domNode = document.createElement('div');\r\n                renderLines(domNode, tabSize, additionalLines, this.editor.getOptions(), this.languageIdCodec);\r\n                this._viewZoneId = changeAccessor.addZone({\r\n                    afterLineNumber: lineNumber,\r\n                    heightInLines: heightInLines,\r\n                    domNode,\r\n                    afterColumnAffinity: 1 /* PositionAffinity.Right */\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction renderLines(domNode, tabSize, lines, opts, languageIdCodec) {\r\n    const disableMonospaceOptimizations = opts.get(33 /* EditorOption.disableMonospaceOptimizations */);\r\n    const stopRenderingLineAfter = opts.get(116 /* EditorOption.stopRenderingLineAfter */);\r\n    // To avoid visual confusion, we don't want to render visible whitespace\r\n    const renderWhitespace = 'none';\r\n    const renderControlCharacters = opts.get(93 /* EditorOption.renderControlCharacters */);\r\n    const fontLigatures = opts.get(51 /* EditorOption.fontLigatures */);\r\n    const fontInfo = opts.get(50 /* EditorOption.fontInfo */);\r\n    const lineHeight = opts.get(66 /* EditorOption.lineHeight */);\r\n    const sb = new StringBuilder(10000);\r\n    sb.appendString('<div class=\"suggest-preview-text\">');\r\n    for (let i = 0, len = lines.length; i < len; i++) {\r\n        const lineData = lines[i];\r\n        const line = lineData.content;\r\n        sb.appendString('<div class=\"view-line');\r\n        sb.appendString('\" style=\"top:');\r\n        sb.appendString(String(i * lineHeight));\r\n        sb.appendString('px;width:1000000px;\">');\r\n        const isBasicASCII = strings.isBasicASCII(line);\r\n        const containsRTL = strings.containsRTL(line);\r\n        const lineTokens = LineTokens.createEmpty(line, languageIdCodec);\r\n        renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, line, false, isBasicASCII, containsRTL, 0, lineTokens, lineData.decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null), sb);\r\n        sb.appendString('</div>');\r\n    }\r\n    sb.appendString('</div>');\r\n    applyFontInfo(domNode, fontInfo);\r\n    const html = sb.build();\r\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\r\n    domNode.innerHTML = trustedhtml;\r\n}\r\nconst ttPolicy = createTrustedTypesPolicy('editorGhostText', { createHTML: value => value });\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { autorunOpts } from '../../../../base/common/observable.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nexport function applyEdits(text, edits) {\r\n    const transformer = new PositionOffsetTransformer(text);\r\n    const offsetEdits = edits.map(e => {\r\n        const range = Range.lift(e.range);\r\n        return ({\r\n            startOffset: transformer.getOffset(range.getStartPosition()),\r\n            endOffset: transformer.getOffset(range.getEndPosition()),\r\n            text: e.text\r\n        });\r\n    });\r\n    offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\r\n    for (const edit of offsetEdits) {\r\n        text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\r\n    }\r\n    return text;\r\n}\r\nclass PositionOffsetTransformer {\r\n    constructor(text) {\r\n        this.lineStartOffsetByLineIdx = [];\r\n        this.lineStartOffsetByLineIdx.push(0);\r\n        for (let i = 0; i < text.length; i++) {\r\n            if (text.charAt(i) === '\\n') {\r\n                this.lineStartOffsetByLineIdx.push(i + 1);\r\n            }\r\n        }\r\n    }\r\n    getOffset(position) {\r\n        return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\r\n    }\r\n}\r\nconst array = [];\r\nexport function getReadonlyEmptyArray() {\r\n    return array;\r\n}\r\nexport class ColumnRange {\r\n    constructor(startColumn, endColumnExclusive) {\r\n        this.startColumn = startColumn;\r\n        this.endColumnExclusive = endColumnExclusive;\r\n        if (startColumn > endColumnExclusive) {\r\n            throw new BugIndicatingError(`startColumn ${startColumn} cannot be after endColumnExclusive ${endColumnExclusive}`);\r\n        }\r\n    }\r\n    toRange(lineNumber) {\r\n        return new Range(lineNumber, this.startColumn, lineNumber, this.endColumnExclusive);\r\n    }\r\n    equals(other) {\r\n        return this.startColumn === other.startColumn\r\n            && this.endColumnExclusive === other.endColumnExclusive;\r\n    }\r\n}\r\nexport function applyObservableDecorations(editor, decorations) {\r\n    const d = new DisposableStore();\r\n    const decorationsCollection = editor.createDecorationsCollection();\r\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\r\n        const d = decorations.read(reader);\r\n        decorationsCollection.set(d);\r\n    }));\r\n    d.add({\r\n        dispose: () => {\r\n            decorationsCollection.clear();\r\n        }\r\n    });\r\n    return d;\r\n}\r\nexport function addPositions(pos1, pos2) {\r\n    return new Position(pos1.lineNumber + pos2.lineNumber - 1, pos2.lineNumber === 1 ? pos1.column + pos2.column - 1 : pos2.column);\r\n}\r\nexport function lengthOfText(text) {\r\n    let line = 1;\r\n    let column = 1;\r\n    for (const c of text) {\r\n        if (c === '\\n') {\r\n            line++;\r\n            column = 1;\r\n        }\r\n        else {\r\n            column++;\r\n        }\r\n    }\r\n    return new Position(line, column);\r\n}\r\n", "import { applyEdits } from './utils.js';\r\nexport class GhostText {\r\n    constructor(lineNumber, parts) {\r\n        this.lineNumber = lineNumber;\r\n        this.parts = parts;\r\n    }\r\n    equals(other) {\r\n        return this.lineNumber === other.lineNumber &&\r\n            this.parts.length === other.parts.length &&\r\n            this.parts.every((part, index) => part.equals(other.parts[index]));\r\n    }\r\n    renderForScreenReader(lineText) {\r\n        if (this.parts.length === 0) {\r\n            return '';\r\n        }\r\n        const lastPart = this.parts[this.parts.length - 1];\r\n        const cappedLineText = lineText.substr(0, lastPart.column - 1);\r\n        const text = applyEdits(cappedLineText, this.parts.map(p => ({\r\n            range: { startLineNumber: 1, endLineNumber: 1, startColumn: p.column, endColumn: p.column },\r\n            text: p.lines.join('\\n')\r\n        })));\r\n        return text.substring(this.parts[0].column - 1);\r\n    }\r\n    isEmpty() {\r\n        return this.parts.every(p => p.lines.length === 0);\r\n    }\r\n    get lineCount() {\r\n        return 1 + this.parts.reduce((r, p) => r + p.lines.length - 1, 0);\r\n    }\r\n}\r\nexport class GhostTextPart {\r\n    constructor(column, lines, \r\n    /**\r\n     * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.\r\n    */\r\n    preview) {\r\n        this.column = column;\r\n        this.lines = lines;\r\n        this.preview = preview;\r\n    }\r\n    equals(other) {\r\n        return this.column === other.column &&\r\n            this.lines.length === other.lines.length &&\r\n            this.lines.every((line, index) => line === other.lines[index]);\r\n    }\r\n}\r\nexport class GhostTextReplacement {\r\n    constructor(lineNumber, columnRange, newLines, additionalReservedLineCount = 0) {\r\n        this.lineNumber = lineNumber;\r\n        this.columnRange = columnRange;\r\n        this.newLines = newLines;\r\n        this.additionalReservedLineCount = additionalReservedLineCount;\r\n        this.parts = [\r\n            new GhostTextPart(this.columnRange.endColumnExclusive, this.newLines, false),\r\n        ];\r\n    }\r\n    renderForScreenReader(_lineText) {\r\n        return this.newLines.join('\\n');\r\n    }\r\n    get lineCount() {\r\n        return this.newLines.length;\r\n    }\r\n    isEmpty() {\r\n        return this.parts.every(p => p.lines.length === 0);\r\n    }\r\n    equals(other) {\r\n        return this.lineNumber === other.lineNumber &&\r\n            this.columnRange.equals(other.columnRange) &&\r\n            this.newLines.length === other.newLines.length &&\r\n            this.newLines.every((line, index) => line === other.newLines[index]) &&\r\n            this.additionalReservedLineCount === other.additionalReservedLineCount;\r\n    }\r\n}\r\nexport function ghostTextOrReplacementEquals(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    if (!a || !b) {\r\n        return false;\r\n    }\r\n    if (a instanceof GhostText && b instanceof GhostText) {\r\n        return a.equals(b);\r\n    }\r\n    if (a instanceof GhostTextReplacement && b instanceof GhostTextReplacement) {\r\n        return a.equals(b);\r\n    }\r\n    return false;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { mapFindFirst } from '../../../../base/common/arraysFind.js';\r\nimport { BugIndicatingError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, derived, derivedHandleChanges, derivedOpts, recomputeInitiallyAndOnChange, observableSignal, observableValue, subtransaction, transaction } from '../../../../base/common/observable.js';\r\nimport { isDefined } from '../../../../base/common/types.js';\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { GhostText, ghostTextOrReplacementEquals } from './ghostText.js';\r\nimport { InlineCompletionsSource } from './inlineCompletionsSource.js';\r\nimport { addPositions, lengthOfText } from './utils.js';\r\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nexport var VersionIdChangeReason;\r\n(function (VersionIdChangeReason) {\r\n    VersionIdChangeReason[VersionIdChangeReason[\"Undo\"] = 0] = \"Undo\";\r\n    VersionIdChangeReason[VersionIdChangeReason[\"Redo\"] = 1] = \"Redo\";\r\n    VersionIdChangeReason[VersionIdChangeReason[\"AcceptWord\"] = 2] = \"AcceptWord\";\r\n    VersionIdChangeReason[VersionIdChangeReason[\"Other\"] = 3] = \"Other\";\r\n})(VersionIdChangeReason || (VersionIdChangeReason = {}));\r\nlet InlineCompletionsModel = class InlineCompletionsModel extends Disposable {\r\n    get isAcceptingPartially() { return this._isAcceptingPartially; }\r\n    constructor(textModel, selectedSuggestItem, cursorPosition, textModelVersionId, _debounceValue, _suggestPreviewEnabled, _suggestPreviewMode, _inlineSuggestMode, _enabled, _instantiationService, _commandService, _languageConfigurationService) {\r\n        super();\r\n        this.textModel = textModel;\r\n        this.selectedSuggestItem = selectedSuggestItem;\r\n        this.cursorPosition = cursorPosition;\r\n        this.textModelVersionId = textModelVersionId;\r\n        this._debounceValue = _debounceValue;\r\n        this._suggestPreviewEnabled = _suggestPreviewEnabled;\r\n        this._suggestPreviewMode = _suggestPreviewMode;\r\n        this._inlineSuggestMode = _inlineSuggestMode;\r\n        this._enabled = _enabled;\r\n        this._instantiationService = _instantiationService;\r\n        this._commandService = _commandService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._source = this._register(this._instantiationService.createInstance(InlineCompletionsSource, this.textModel, this.textModelVersionId, this._debounceValue));\r\n        this._isActive = observableValue(this, false);\r\n        this._forceUpdate = observableSignal('forceUpdate');\r\n        // We use a semantic id to keep the same inline completion selected even if the provider reorders the completions.\r\n        this._selectedInlineCompletionId = observableValue(this, undefined);\r\n        this._isAcceptingPartially = false;\r\n        this._preserveCurrentCompletionReasons = new Set([\r\n            VersionIdChangeReason.Redo,\r\n            VersionIdChangeReason.Undo,\r\n            VersionIdChangeReason.AcceptWord,\r\n        ]);\r\n        this._fetchInlineCompletions = derivedHandleChanges({\r\n            owner: this,\r\n            createEmptyChangeSummary: () => ({\r\n                preserveCurrentCompletion: false,\r\n                inlineCompletionTriggerKind: InlineCompletionTriggerKind.Automatic\r\n            }),\r\n            handleChange: (ctx, changeSummary) => {\r\n                /** @description fetch inline completions */\r\n                if (ctx.didChange(this.textModelVersionId) && this._preserveCurrentCompletionReasons.has(ctx.change)) {\r\n                    changeSummary.preserveCurrentCompletion = true;\r\n                }\r\n                else if (ctx.didChange(this._forceUpdate)) {\r\n                    changeSummary.inlineCompletionTriggerKind = ctx.change;\r\n                }\r\n                return true;\r\n            },\r\n        }, (reader, changeSummary) => {\r\n            this._forceUpdate.read(reader);\r\n            const shouldUpdate = (this._enabled.read(reader) && this.selectedSuggestItem.read(reader)) || this._isActive.read(reader);\r\n            if (!shouldUpdate) {\r\n                this._source.cancelUpdate();\r\n                return undefined;\r\n            }\r\n            this.textModelVersionId.read(reader); // Refetch on text change\r\n            const itemToPreserveCandidate = this.selectedInlineCompletion.get();\r\n            const itemToPreserve = changeSummary.preserveCurrentCompletion || (itemToPreserveCandidate === null || itemToPreserveCandidate === void 0 ? void 0 : itemToPreserveCandidate.forwardStable)\r\n                ? itemToPreserveCandidate : undefined;\r\n            const suggestWidgetInlineCompletions = this._source.suggestWidgetInlineCompletions.get();\r\n            const suggestItem = this.selectedSuggestItem.read(reader);\r\n            if (suggestWidgetInlineCompletions && !suggestItem) {\r\n                const inlineCompletions = this._source.inlineCompletions.get();\r\n                transaction(tx => {\r\n                    /** @description Seed inline completions with (newer) suggest widget inline completions */\r\n                    if (inlineCompletions && suggestWidgetInlineCompletions.request.versionId > inlineCompletions.request.versionId) {\r\n                        this._source.inlineCompletions.set(suggestWidgetInlineCompletions.clone(), tx);\r\n                    }\r\n                    this._source.clearSuggestWidgetInlineCompletions(tx);\r\n                });\r\n            }\r\n            const cursorPosition = this.cursorPosition.read(reader);\r\n            const context = {\r\n                triggerKind: changeSummary.inlineCompletionTriggerKind,\r\n                selectedSuggestionInfo: suggestItem === null || suggestItem === void 0 ? void 0 : suggestItem.toSelectedSuggestionInfo(),\r\n            };\r\n            return this._source.fetch(cursorPosition, context, itemToPreserve);\r\n        });\r\n        this._filteredInlineCompletionItems = derived(this, reader => {\r\n            const c = this._source.inlineCompletions.read(reader);\r\n            if (!c) {\r\n                return [];\r\n            }\r\n            const cursorPosition = this.cursorPosition.read(reader);\r\n            const filteredCompletions = c.inlineCompletions.filter(c => c.isVisible(this.textModel, cursorPosition, reader));\r\n            return filteredCompletions;\r\n        });\r\n        this.selectedInlineCompletionIndex = derived(this, (reader) => {\r\n            const selectedInlineCompletionId = this._selectedInlineCompletionId.read(reader);\r\n            const filteredCompletions = this._filteredInlineCompletionItems.read(reader);\r\n            const idx = this._selectedInlineCompletionId === undefined ? -1\r\n                : filteredCompletions.findIndex(v => v.semanticId === selectedInlineCompletionId);\r\n            if (idx === -1) {\r\n                // Reset the selection so that the selection does not jump back when it appears again\r\n                this._selectedInlineCompletionId.set(undefined, undefined);\r\n                return 0;\r\n            }\r\n            return idx;\r\n        });\r\n        this.selectedInlineCompletion = derived(this, (reader) => {\r\n            const filteredCompletions = this._filteredInlineCompletionItems.read(reader);\r\n            const idx = this.selectedInlineCompletionIndex.read(reader);\r\n            return filteredCompletions[idx];\r\n        });\r\n        this.lastTriggerKind = this._source.inlineCompletions.map(v => /** @description lastTriggerKind */ v === null || v === void 0 ? void 0 : v.request.context.triggerKind);\r\n        this.inlineCompletionsCount = derived(this, reader => {\r\n            if (this.lastTriggerKind.read(reader) === InlineCompletionTriggerKind.Explicit) {\r\n                return this._filteredInlineCompletionItems.read(reader).length;\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        });\r\n        this.state = derivedOpts({\r\n            owner: this,\r\n            equalityComparer: (a, b) => {\r\n                if (!a || !b) {\r\n                    return a === b;\r\n                }\r\n                return ghostTextOrReplacementEquals(a.ghostText, b.ghostText)\r\n                    && a.inlineCompletion === b.inlineCompletion\r\n                    && a.suggestItem === b.suggestItem;\r\n            }\r\n        }, (reader) => {\r\n            var _a;\r\n            const model = this.textModel;\r\n            const suggestItem = this.selectedSuggestItem.read(reader);\r\n            if (suggestItem) {\r\n                const suggestCompletion = suggestItem.toSingleTextEdit().removeCommonPrefix(model);\r\n                const augmentedCompletion = this._computeAugmentedCompletion(suggestCompletion, reader);\r\n                const isSuggestionPreviewEnabled = this._suggestPreviewEnabled.read(reader);\r\n                if (!isSuggestionPreviewEnabled && !augmentedCompletion) {\r\n                    return undefined;\r\n                }\r\n                const edit = (_a = augmentedCompletion === null || augmentedCompletion === void 0 ? void 0 : augmentedCompletion.edit) !== null && _a !== void 0 ? _a : suggestCompletion;\r\n                const editPreviewLength = augmentedCompletion ? augmentedCompletion.edit.text.length - suggestCompletion.text.length : 0;\r\n                const mode = this._suggestPreviewMode.read(reader);\r\n                const cursor = this.cursorPosition.read(reader);\r\n                const newGhostText = edit.computeGhostText(model, mode, cursor, editPreviewLength);\r\n                // Show an invisible ghost text to reserve space\r\n                const ghostText = newGhostText !== null && newGhostText !== void 0 ? newGhostText : new GhostText(edit.range.endLineNumber, []);\r\n                return { ghostText, inlineCompletion: augmentedCompletion === null || augmentedCompletion === void 0 ? void 0 : augmentedCompletion.completion, suggestItem };\r\n            }\r\n            else {\r\n                if (!this._isActive.read(reader)) {\r\n                    return undefined;\r\n                }\r\n                const item = this.selectedInlineCompletion.read(reader);\r\n                if (!item) {\r\n                    return undefined;\r\n                }\r\n                const replacement = item.toSingleTextEdit(reader);\r\n                const mode = this._inlineSuggestMode.read(reader);\r\n                const cursor = this.cursorPosition.read(reader);\r\n                const ghostText = replacement.computeGhostText(model, mode, cursor);\r\n                return ghostText ? { ghostText, inlineCompletion: item, suggestItem: undefined } : undefined;\r\n            }\r\n        });\r\n        this.ghostText = derivedOpts({\r\n            owner: this,\r\n            equalityComparer: ghostTextOrReplacementEquals\r\n        }, reader => {\r\n            const v = this.state.read(reader);\r\n            if (!v) {\r\n                return undefined;\r\n            }\r\n            return v.ghostText;\r\n        });\r\n        this._register(recomputeInitiallyAndOnChange(this._fetchInlineCompletions));\r\n        let lastItem = undefined;\r\n        this._register(autorun(reader => {\r\n            var _a, _b;\r\n            /** @description call handleItemDidShow */\r\n            const item = this.state.read(reader);\r\n            const completion = item === null || item === void 0 ? void 0 : item.inlineCompletion;\r\n            if ((completion === null || completion === void 0 ? void 0 : completion.semanticId) !== (lastItem === null || lastItem === void 0 ? void 0 : lastItem.semanticId)) {\r\n                lastItem = completion;\r\n                if (completion) {\r\n                    const i = completion.inlineCompletion;\r\n                    const src = i.source;\r\n                    (_b = (_a = src.provider).handleItemDidShow) === null || _b === void 0 ? void 0 : _b.call(_a, src.inlineCompletions, i.sourceInlineCompletion, i.insertText);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    trigger(tx) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._isActive.set(true, tx);\r\n            yield this._fetchInlineCompletions.get();\r\n        });\r\n    }\r\n    triggerExplicitly(tx) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            subtransaction(tx, tx => {\r\n                this._isActive.set(true, tx);\r\n                this._forceUpdate.trigger(tx, InlineCompletionTriggerKind.Explicit);\r\n            });\r\n            yield this._fetchInlineCompletions.get();\r\n        });\r\n    }\r\n    stop(tx) {\r\n        subtransaction(tx, tx => {\r\n            this._isActive.set(false, tx);\r\n            this._source.clear(tx);\r\n        });\r\n    }\r\n    _computeAugmentedCompletion(suggestCompletion, reader) {\r\n        const model = this.textModel;\r\n        const suggestWidgetInlineCompletions = this._source.suggestWidgetInlineCompletions.read(reader);\r\n        const candidateInlineCompletions = suggestWidgetInlineCompletions\r\n            ? suggestWidgetInlineCompletions.inlineCompletions\r\n            : [this.selectedInlineCompletion.read(reader)].filter(isDefined);\r\n        const augmentedCompletion = mapFindFirst(candidateInlineCompletions, completion => {\r\n            let r = completion.toSingleTextEdit(reader);\r\n            r = r.removeCommonPrefix(model, Range.fromPositions(r.range.getStartPosition(), suggestCompletion.range.getEndPosition()));\r\n            return r.augments(suggestCompletion) ? { edit: r, completion } : undefined;\r\n        });\r\n        return augmentedCompletion;\r\n    }\r\n    _deltaSelectedInlineCompletionIndex(delta) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.triggerExplicitly();\r\n            const completions = this._filteredInlineCompletionItems.get() || [];\r\n            if (completions.length > 0) {\r\n                const newIdx = (this.selectedInlineCompletionIndex.get() + delta + completions.length) % completions.length;\r\n                this._selectedInlineCompletionId.set(completions[newIdx].semanticId, undefined);\r\n            }\r\n            else {\r\n                this._selectedInlineCompletionId.set(undefined, undefined);\r\n            }\r\n        });\r\n    }\r\n    next() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._deltaSelectedInlineCompletionIndex(1);\r\n        });\r\n    }\r\n    previous() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._deltaSelectedInlineCompletionIndex(-1);\r\n        });\r\n    }\r\n    accept(editor) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (editor.getModel() !== this.textModel) {\r\n                throw new BugIndicatingError();\r\n            }\r\n            const state = this.state.get();\r\n            if (!state || state.ghostText.isEmpty() || !state.inlineCompletion) {\r\n                return;\r\n            }\r\n            const completion = state.inlineCompletion.toInlineCompletion(undefined);\r\n            editor.pushUndoStop();\r\n            if (completion.snippetInfo) {\r\n                editor.executeEdits('inlineSuggestion.accept', [\r\n                    EditOperation.replaceMove(completion.range, ''),\r\n                    ...completion.additionalTextEdits\r\n                ]);\r\n                editor.setPosition(completion.snippetInfo.range.getStartPosition());\r\n                (_a = SnippetController2.get(editor)) === null || _a === void 0 ? void 0 : _a.insert(completion.snippetInfo.snippet, { undoStopBefore: false });\r\n            }\r\n            else {\r\n                editor.executeEdits('inlineSuggestion.accept', [\r\n                    EditOperation.replaceMove(completion.range, completion.insertText),\r\n                    ...completion.additionalTextEdits\r\n                ]);\r\n            }\r\n            if (completion.command) {\r\n                // Make sure the completion list will not be disposed.\r\n                completion.source.addRef();\r\n            }\r\n            // Reset before invoking the command, since the command might cause a follow up trigger.\r\n            transaction(tx => {\r\n                this._source.clear(tx);\r\n                // Potentially, isActive will get set back to true by the typing or accept inline suggest event\r\n                // if automatic inline suggestions are enabled.\r\n                this._isActive.set(false, tx);\r\n            });\r\n            if (completion.command) {\r\n                yield this._commandService\r\n                    .executeCommand(completion.command.id, ...(completion.command.arguments || []))\r\n                    .then(undefined, onUnexpectedExternalError);\r\n                completion.source.removeRef();\r\n            }\r\n        });\r\n    }\r\n    acceptNextWord(editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._acceptNext(editor, (pos, text) => {\r\n                const langId = this.textModel.getLanguageIdAtPosition(pos.lineNumber, pos.column);\r\n                const config = this._languageConfigurationService.getLanguageConfiguration(langId);\r\n                const wordRegExp = new RegExp(config.wordDefinition.source, config.wordDefinition.flags.replace('g', ''));\r\n                const m1 = text.match(wordRegExp);\r\n                let acceptUntilIndexExclusive = 0;\r\n                if (m1 && m1.index !== undefined) {\r\n                    if (m1.index === 0) {\r\n                        acceptUntilIndexExclusive = m1[0].length;\r\n                    }\r\n                    else {\r\n                        acceptUntilIndexExclusive = m1.index;\r\n                    }\r\n                }\r\n                else {\r\n                    acceptUntilIndexExclusive = text.length;\r\n                }\r\n                const wsRegExp = /\\s+/g;\r\n                const m2 = wsRegExp.exec(text);\r\n                if (m2 && m2.index !== undefined) {\r\n                    if (m2.index + m2[0].length < acceptUntilIndexExclusive) {\r\n                        acceptUntilIndexExclusive = m2.index + m2[0].length;\r\n                    }\r\n                }\r\n                return acceptUntilIndexExclusive;\r\n            });\r\n        });\r\n    }\r\n    acceptNextLine(editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._acceptNext(editor, (pos, text) => {\r\n                const m = text.match(/\\n/);\r\n                if (m && m.index !== undefined) {\r\n                    return m.index + 1;\r\n                }\r\n                return text.length;\r\n            });\r\n        });\r\n    }\r\n    _acceptNext(editor, getAcceptUntilIndex) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (editor.getModel() !== this.textModel) {\r\n                throw new BugIndicatingError();\r\n            }\r\n            const state = this.state.get();\r\n            if (!state || state.ghostText.isEmpty() || !state.inlineCompletion) {\r\n                return;\r\n            }\r\n            const ghostText = state.ghostText;\r\n            const completion = state.inlineCompletion.toInlineCompletion(undefined);\r\n            if (completion.snippetInfo || completion.filterText !== completion.insertText) {\r\n                // not in WYSIWYG mode, partial commit might change completion, thus it is not supported\r\n                yield this.accept(editor);\r\n                return;\r\n            }\r\n            const firstPart = ghostText.parts[0];\r\n            const position = new Position(ghostText.lineNumber, firstPart.column);\r\n            const line = firstPart.lines.join('\\n');\r\n            const acceptUntilIndexExclusive = getAcceptUntilIndex(position, line);\r\n            if (acceptUntilIndexExclusive === line.length && ghostText.parts.length === 1) {\r\n                this.accept(editor);\r\n                return;\r\n            }\r\n            const partialText = line.substring(0, acceptUntilIndexExclusive);\r\n            this._isAcceptingPartially = true;\r\n            try {\r\n                editor.pushUndoStop();\r\n                editor.executeEdits('inlineSuggestion.accept', [\r\n                    EditOperation.replace(Range.fromPositions(position), partialText),\r\n                ]);\r\n                const length = lengthOfText(partialText);\r\n                editor.setPosition(addPositions(position, length));\r\n            }\r\n            finally {\r\n                this._isAcceptingPartially = false;\r\n            }\r\n            if (completion.source.provider.handlePartialAccept) {\r\n                const acceptedRange = Range.fromPositions(completion.range.getStartPosition(), addPositions(position, lengthOfText(partialText)));\r\n                // This assumes that the inline completion and the model use the same EOL style.\r\n                const text = editor.getModel().getValueInRange(acceptedRange, 1 /* EndOfLinePreference.LF */);\r\n                completion.source.provider.handlePartialAccept(completion.source.inlineCompletions, completion.sourceInlineCompletion, text.length);\r\n            }\r\n        });\r\n    }\r\n    handleSuggestAccepted(item) {\r\n        var _a, _b;\r\n        const itemEdit = item.toSingleTextEdit().removeCommonPrefix(this.textModel);\r\n        const augmentedCompletion = this._computeAugmentedCompletion(itemEdit, undefined);\r\n        if (!augmentedCompletion) {\r\n            return;\r\n        }\r\n        const inlineCompletion = augmentedCompletion.completion.inlineCompletion;\r\n        (_b = (_a = inlineCompletion.source.provider).handlePartialAccept) === null || _b === void 0 ? void 0 : _b.call(_a, inlineCompletion.source.inlineCompletions, inlineCompletion.sourceInlineCompletion, itemEdit.text.length);\r\n    }\r\n};\r\nInlineCompletionsModel = __decorate([\r\n    __param(9, IInstantiationService),\r\n    __param(10, ICommandService),\r\n    __param(11, ILanguageConfigurationService)\r\n], InlineCompletionsModel);\r\nexport { InlineCompletionsModel };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { matchesSubString } from '../../../../base/common/filters.js';\r\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { derived, disposableObservableValue, transaction } from '../../../../base/common/observable.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { provideInlineCompletions } from './provideInlineCompletions.js';\r\nimport { SingleTextEdit } from './singleTextEdit.js';\r\nlet InlineCompletionsSource = class InlineCompletionsSource extends Disposable {\r\n    constructor(textModel, versionId, _debounceValue, languageFeaturesService, languageConfigurationService) {\r\n        super();\r\n        this.textModel = textModel;\r\n        this.versionId = versionId;\r\n        this._debounceValue = _debounceValue;\r\n        this.languageFeaturesService = languageFeaturesService;\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this._updateOperation = this._register(new MutableDisposable());\r\n        this.inlineCompletions = disposableObservableValue('inlineCompletions', undefined);\r\n        this.suggestWidgetInlineCompletions = disposableObservableValue('suggestWidgetInlineCompletions', undefined);\r\n        this._register(this.textModel.onDidChangeContent(() => {\r\n            this._updateOperation.clear();\r\n        }));\r\n    }\r\n    fetch(position, context, activeInlineCompletion) {\r\n        var _a, _b;\r\n        const request = new UpdateRequest(position, context, this.textModel.getVersionId());\r\n        const target = context.selectedSuggestionInfo ? this.suggestWidgetInlineCompletions : this.inlineCompletions;\r\n        if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.satisfies(request)) {\r\n            return this._updateOperation.value.promise;\r\n        }\r\n        else if ((_b = target.get()) === null || _b === void 0 ? void 0 : _b.request.satisfies(request)) {\r\n            return Promise.resolve(true);\r\n        }\r\n        const updateOngoing = !!this._updateOperation.value;\r\n        this._updateOperation.clear();\r\n        const source = new CancellationTokenSource();\r\n        const promise = (() => __awaiter(this, void 0, void 0, function* () {\r\n            const shouldDebounce = updateOngoing || context.triggerKind === InlineCompletionTriggerKind.Automatic;\r\n            if (shouldDebounce) {\r\n                // This debounces the operation\r\n                yield wait(this._debounceValue.get(this.textModel));\r\n            }\r\n            if (source.token.isCancellationRequested || this.textModel.getVersionId() !== request.versionId) {\r\n                return false;\r\n            }\r\n            const startTime = new Date();\r\n            const updatedCompletions = yield provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.textModel, context, source.token, this.languageConfigurationService);\r\n            if (source.token.isCancellationRequested || this.textModel.getVersionId() !== request.versionId) {\r\n                return false;\r\n            }\r\n            const endTime = new Date();\r\n            this._debounceValue.update(this.textModel, endTime.getTime() - startTime.getTime());\r\n            const completions = new UpToDateInlineCompletions(updatedCompletions, request, this.textModel, this.versionId);\r\n            if (activeInlineCompletion) {\r\n                const asInlineCompletion = activeInlineCompletion.toInlineCompletion(undefined);\r\n                if (activeInlineCompletion.canBeReused(this.textModel, position) && !updatedCompletions.has(asInlineCompletion)) {\r\n                    completions.prepend(activeInlineCompletion.inlineCompletion, asInlineCompletion.range, true);\r\n                }\r\n            }\r\n            this._updateOperation.clear();\r\n            transaction(tx => {\r\n                /** @description Update completions with provider result */\r\n                target.set(completions, tx);\r\n            });\r\n            return true;\r\n        }))();\r\n        const updateOperation = new UpdateOperation(request, source, promise);\r\n        this._updateOperation.value = updateOperation;\r\n        return promise;\r\n    }\r\n    clear(tx) {\r\n        this._updateOperation.clear();\r\n        this.inlineCompletions.set(undefined, tx);\r\n        this.suggestWidgetInlineCompletions.set(undefined, tx);\r\n    }\r\n    clearSuggestWidgetInlineCompletions(tx) {\r\n        var _a;\r\n        if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.context.selectedSuggestionInfo) {\r\n            this._updateOperation.clear();\r\n        }\r\n        this.suggestWidgetInlineCompletions.set(undefined, tx);\r\n    }\r\n    cancelUpdate() {\r\n        this._updateOperation.clear();\r\n    }\r\n};\r\nInlineCompletionsSource = __decorate([\r\n    __param(3, ILanguageFeaturesService),\r\n    __param(4, ILanguageConfigurationService)\r\n], InlineCompletionsSource);\r\nexport { InlineCompletionsSource };\r\nfunction wait(ms, cancellationToken) {\r\n    return new Promise(resolve => {\r\n        let d = undefined;\r\n        const handle = setTimeout(() => {\r\n            if (d) {\r\n                d.dispose();\r\n            }\r\n            resolve();\r\n        }, ms);\r\n        if (cancellationToken) {\r\n            d = cancellationToken.onCancellationRequested(() => {\r\n                clearTimeout(handle);\r\n                if (d) {\r\n                    d.dispose();\r\n                }\r\n                resolve();\r\n            });\r\n        }\r\n    });\r\n}\r\nclass UpdateRequest {\r\n    constructor(position, context, versionId) {\r\n        this.position = position;\r\n        this.context = context;\r\n        this.versionId = versionId;\r\n    }\r\n    satisfies(other) {\r\n        return this.position.equals(other.position)\r\n            && equals(this.context.selectedSuggestionInfo, other.context.selectedSuggestionInfo, (v1, v2) => v1.equals(v2))\r\n            && (other.context.triggerKind === InlineCompletionTriggerKind.Automatic\r\n                || this.context.triggerKind === InlineCompletionTriggerKind.Explicit)\r\n            && this.versionId === other.versionId;\r\n    }\r\n}\r\nfunction equals(v1, v2, equals) {\r\n    if (!v1 || !v2) {\r\n        return v1 === v2;\r\n    }\r\n    return equals(v1, v2);\r\n}\r\nclass UpdateOperation {\r\n    constructor(request, cancellationTokenSource, promise) {\r\n        this.request = request;\r\n        this.cancellationTokenSource = cancellationTokenSource;\r\n        this.promise = promise;\r\n    }\r\n    dispose() {\r\n        this.cancellationTokenSource.cancel();\r\n    }\r\n}\r\nexport class UpToDateInlineCompletions {\r\n    get inlineCompletions() { return this._inlineCompletions; }\r\n    constructor(inlineCompletionProviderResult, request, textModel, versionId) {\r\n        this.inlineCompletionProviderResult = inlineCompletionProviderResult;\r\n        this.request = request;\r\n        this.textModel = textModel;\r\n        this.versionId = versionId;\r\n        this._refCount = 1;\r\n        this._prependedInlineCompletionItems = [];\r\n        this._rangeVersionIdValue = 0;\r\n        this._rangeVersionId = derived(this, reader => {\r\n            this.versionId.read(reader);\r\n            let changed = false;\r\n            for (const i of this._inlineCompletions) {\r\n                changed = changed || i._updateRange(this.textModel);\r\n            }\r\n            if (changed) {\r\n                this._rangeVersionIdValue++;\r\n            }\r\n            return this._rangeVersionIdValue;\r\n        });\r\n        const ids = textModel.deltaDecorations([], inlineCompletionProviderResult.completions.map(i => ({\r\n            range: i.range,\r\n            options: {\r\n                description: 'inline-completion-tracking-range'\r\n            },\r\n        })));\r\n        this._inlineCompletions = inlineCompletionProviderResult.completions.map((i, index) => new InlineCompletionWithUpdatedRange(i, ids[index], this._rangeVersionId));\r\n    }\r\n    clone() {\r\n        this._refCount++;\r\n        return this;\r\n    }\r\n    dispose() {\r\n        this._refCount--;\r\n        if (this._refCount === 0) {\r\n            setTimeout(() => {\r\n                // To fix https://github.com/microsoft/vscode/issues/188348\r\n                if (!this.textModel.isDisposed()) {\r\n                    // This is just cleanup. It's ok if it happens with a delay.\r\n                    this.textModel.deltaDecorations(this._inlineCompletions.map(i => i.decorationId), []);\r\n                }\r\n            }, 0);\r\n            this.inlineCompletionProviderResult.dispose();\r\n            for (const i of this._prependedInlineCompletionItems) {\r\n                i.source.removeRef();\r\n            }\r\n        }\r\n    }\r\n    prepend(inlineCompletion, range, addRefToSource) {\r\n        if (addRefToSource) {\r\n            inlineCompletion.source.addRef();\r\n        }\r\n        const id = this.textModel.deltaDecorations([], [{\r\n                range,\r\n                options: {\r\n                    description: 'inline-completion-tracking-range'\r\n                },\r\n            }])[0];\r\n        this._inlineCompletions.unshift(new InlineCompletionWithUpdatedRange(inlineCompletion, id, this._rangeVersionId, range));\r\n        this._prependedInlineCompletionItems.push(inlineCompletion);\r\n    }\r\n}\r\nexport class InlineCompletionWithUpdatedRange {\r\n    get forwardStable() {\r\n        var _a;\r\n        return (_a = this.inlineCompletion.source.inlineCompletions.enableForwardStability) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    constructor(inlineCompletion, decorationId, rangeVersion, initialRange) {\r\n        this.inlineCompletion = inlineCompletion;\r\n        this.decorationId = decorationId;\r\n        this.rangeVersion = rangeVersion;\r\n        this.semanticId = JSON.stringify([\r\n            this.inlineCompletion.filterText,\r\n            this.inlineCompletion.insertText,\r\n            this.inlineCompletion.range.getStartPosition().toString()\r\n        ]);\r\n        this._isValid = true;\r\n        this._updatedRange = initialRange !== null && initialRange !== void 0 ? initialRange : inlineCompletion.range;\r\n    }\r\n    toInlineCompletion(reader) {\r\n        return this.inlineCompletion.withRange(this._getUpdatedRange(reader));\r\n    }\r\n    toSingleTextEdit(reader) {\r\n        return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.insertText);\r\n    }\r\n    isVisible(model, cursorPosition, reader) {\r\n        const minimizedReplacement = this._toFilterTextReplacement(reader).removeCommonPrefix(model);\r\n        if (!this._isValid\r\n            || !this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(reader).getStartPosition())\r\n            || cursorPosition.lineNumber !== minimizedReplacement.range.startLineNumber) {\r\n            return false;\r\n        }\r\n        const originalValue = model.getValueInRange(minimizedReplacement.range, 1 /* EndOfLinePreference.LF */).toLowerCase();\r\n        const filterText = minimizedReplacement.text.toLowerCase();\r\n        const cursorPosIndex = Math.max(0, cursorPosition.column - minimizedReplacement.range.startColumn);\r\n        let filterTextBefore = filterText.substring(0, cursorPosIndex);\r\n        let filterTextAfter = filterText.substring(cursorPosIndex);\r\n        let originalValueBefore = originalValue.substring(0, cursorPosIndex);\r\n        let originalValueAfter = originalValue.substring(cursorPosIndex);\r\n        const originalValueIndent = model.getLineIndentColumn(minimizedReplacement.range.startLineNumber);\r\n        if (minimizedReplacement.range.startColumn <= originalValueIndent) {\r\n            // Remove indentation\r\n            originalValueBefore = originalValueBefore.trimStart();\r\n            if (originalValueBefore.length === 0) {\r\n                originalValueAfter = originalValueAfter.trimStart();\r\n            }\r\n            filterTextBefore = filterTextBefore.trimStart();\r\n            if (filterTextBefore.length === 0) {\r\n                filterTextAfter = filterTextAfter.trimStart();\r\n            }\r\n        }\r\n        return filterTextBefore.startsWith(originalValueBefore)\r\n            && !!matchesSubString(originalValueAfter, filterTextAfter);\r\n    }\r\n    canBeReused(model, position) {\r\n        const result = this._isValid\r\n            && this._getUpdatedRange(undefined).containsPosition(position)\r\n            && this.isVisible(model, position, undefined)\r\n            && !this._isSmallerThanOriginal(undefined);\r\n        return result;\r\n    }\r\n    _toFilterTextReplacement(reader) {\r\n        return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.filterText);\r\n    }\r\n    _isSmallerThanOriginal(reader) {\r\n        return length(this._getUpdatedRange(reader)).isBefore(length(this.inlineCompletion.range));\r\n    }\r\n    _getUpdatedRange(reader) {\r\n        this.rangeVersion.read(reader); // This makes sure all the ranges are updated.\r\n        return this._updatedRange;\r\n    }\r\n    _updateRange(textModel) {\r\n        const range = textModel.getDecorationRange(this.decorationId);\r\n        if (!range) {\r\n            // A setValue call might flush all decorations.\r\n            this._isValid = false;\r\n            return true;\r\n        }\r\n        if (!this._updatedRange.equalsRange(range)) {\r\n            this._updatedRange = range;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nfunction length(range) {\r\n    if (range.startLineNumber === range.endLineNumber) {\r\n        return new Position(1, 1 + range.endColumn - range.startColumn);\r\n    }\r\n    else {\r\n        return new Position(1 + range.endLineNumber - range.startLineNumber, range.endColumn);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { assertNever } from '../../../../base/common/assert.js';\r\nimport { DeferredPromise } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { SetMap } from '../../../../base/common/map.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { fixBracketsInLine } from '../../../common/model/bracketPairsTextModelPart/fixBrackets.js';\r\nimport { getReadonlyEmptyArray } from './utils.js';\r\nimport { SnippetParser, Text } from '../../snippet/browser/snippetParser.js';\r\nexport function provideInlineCompletions(registry, position, model, context, token = CancellationToken.None, languageConfigurationService) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        // Important: Don't use position after the await calls, as the model could have been changed in the meantime!\r\n        const defaultReplaceRange = getDefaultRange(position, model);\r\n        const providers = registry.all(model);\r\n        const multiMap = new SetMap();\r\n        for (const provider of providers) {\r\n            if (provider.groupId) {\r\n                multiMap.add(provider.groupId, provider);\r\n            }\r\n        }\r\n        function getPreferredProviders(provider) {\r\n            if (!provider.yieldsToGroupIds) {\r\n                return [];\r\n            }\r\n            const result = [];\r\n            for (const groupId of provider.yieldsToGroupIds || []) {\r\n                const providers = multiMap.get(groupId);\r\n                for (const p of providers) {\r\n                    result.push(p);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const states = new Map();\r\n        const seen = new Set();\r\n        function findPreferredProviderCircle(provider, stack) {\r\n            stack = [...stack, provider];\r\n            if (seen.has(provider)) {\r\n                return stack;\r\n            }\r\n            seen.add(provider);\r\n            try {\r\n                const preferred = getPreferredProviders(provider);\r\n                for (const p of preferred) {\r\n                    const c = findPreferredProviderCircle(p, stack);\r\n                    if (c) {\r\n                        return c;\r\n                    }\r\n                }\r\n            }\r\n            finally {\r\n                seen.delete(provider);\r\n            }\r\n            return undefined;\r\n        }\r\n        function processProvider(provider) {\r\n            const state = states.get(provider);\r\n            if (state) {\r\n                return state;\r\n            }\r\n            const circle = findPreferredProviderCircle(provider, []);\r\n            if (circle) {\r\n                onUnexpectedExternalError(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${circle.map(s => s.toString ? s.toString() : ('' + s)).join(' -> ')}`));\r\n            }\r\n            const deferredPromise = new DeferredPromise();\r\n            states.set(provider, deferredPromise.p);\r\n            (() => __awaiter(this, void 0, void 0, function* () {\r\n                if (!circle) {\r\n                    const preferred = getPreferredProviders(provider);\r\n                    for (const p of preferred) {\r\n                        const result = yield processProvider(p);\r\n                        if (result && result.items.length > 0) {\r\n                            // Skip provider\r\n                            return undefined;\r\n                        }\r\n                    }\r\n                }\r\n                try {\r\n                    const completions = yield provider.provideInlineCompletions(model, position, context, token);\r\n                    return completions;\r\n                }\r\n                catch (e) {\r\n                    onUnexpectedExternalError(e);\r\n                    return undefined;\r\n                }\r\n            }))().then(c => deferredPromise.complete(c), e => deferredPromise.error(e));\r\n            return deferredPromise.p;\r\n        }\r\n        const providerResults = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () { return ({ provider, completions: yield processProvider(provider) }); })));\r\n        const itemsByHash = new Map();\r\n        const lists = [];\r\n        for (const result of providerResults) {\r\n            const completions = result.completions;\r\n            if (!completions) {\r\n                continue;\r\n            }\r\n            const list = new InlineCompletionList(completions, result.provider);\r\n            lists.push(list);\r\n            for (const item of completions.items) {\r\n                const inlineCompletionItem = InlineCompletionItem.from(item, list, defaultReplaceRange, model, languageConfigurationService);\r\n                itemsByHash.set(inlineCompletionItem.hash(), inlineCompletionItem);\r\n            }\r\n        }\r\n        return new InlineCompletionProviderResult(Array.from(itemsByHash.values()), new Set(itemsByHash.keys()), lists);\r\n    });\r\n}\r\nexport class InlineCompletionProviderResult {\r\n    constructor(\r\n    /**\r\n     * Free of duplicates.\r\n     */\r\n    completions, hashs, providerResults) {\r\n        this.completions = completions;\r\n        this.hashs = hashs;\r\n        this.providerResults = providerResults;\r\n    }\r\n    has(item) {\r\n        return this.hashs.has(item.hash());\r\n    }\r\n    dispose() {\r\n        for (const result of this.providerResults) {\r\n            result.removeRef();\r\n        }\r\n    }\r\n}\r\n/**\r\n * A ref counted pointer to the computed `InlineCompletions` and the `InlineCompletionsProvider` that\r\n * computed them.\r\n */\r\nexport class InlineCompletionList {\r\n    constructor(inlineCompletions, provider) {\r\n        this.inlineCompletions = inlineCompletions;\r\n        this.provider = provider;\r\n        this.refCount = 1;\r\n    }\r\n    addRef() {\r\n        this.refCount++;\r\n    }\r\n    removeRef() {\r\n        this.refCount--;\r\n        if (this.refCount === 0) {\r\n            this.provider.freeInlineCompletions(this.inlineCompletions);\r\n        }\r\n    }\r\n}\r\nexport class InlineCompletionItem {\r\n    static from(inlineCompletion, source, defaultReplaceRange, textModel, languageConfigurationService) {\r\n        let insertText;\r\n        let snippetInfo;\r\n        let range = inlineCompletion.range ? Range.lift(inlineCompletion.range) : defaultReplaceRange;\r\n        if (typeof inlineCompletion.insertText === 'string') {\r\n            insertText = inlineCompletion.insertText;\r\n            if (languageConfigurationService && inlineCompletion.completeBracketPairs) {\r\n                insertText = closeBrackets(insertText, range.getStartPosition(), textModel, languageConfigurationService);\r\n                // Modify range depending on if brackets are added or removed\r\n                const diff = insertText.length - inlineCompletion.insertText.length;\r\n                if (diff !== 0) {\r\n                    range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\r\n                }\r\n            }\r\n            snippetInfo = undefined;\r\n        }\r\n        else if ('snippet' in inlineCompletion.insertText) {\r\n            const preBracketCompletionLength = inlineCompletion.insertText.snippet.length;\r\n            if (languageConfigurationService && inlineCompletion.completeBracketPairs) {\r\n                inlineCompletion.insertText.snippet = closeBrackets(inlineCompletion.insertText.snippet, range.getStartPosition(), textModel, languageConfigurationService);\r\n                // Modify range depending on if brackets are added or removed\r\n                const diff = inlineCompletion.insertText.snippet.length - preBracketCompletionLength;\r\n                if (diff !== 0) {\r\n                    range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\r\n                }\r\n            }\r\n            const snippet = new SnippetParser().parse(inlineCompletion.insertText.snippet);\r\n            if (snippet.children.length === 1 && snippet.children[0] instanceof Text) {\r\n                insertText = snippet.children[0].value;\r\n                snippetInfo = undefined;\r\n            }\r\n            else {\r\n                insertText = snippet.toString();\r\n                snippetInfo = {\r\n                    snippet: inlineCompletion.insertText.snippet,\r\n                    range: range\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            assertNever(inlineCompletion.insertText);\r\n        }\r\n        return new InlineCompletionItem(insertText, inlineCompletion.command, range, insertText, snippetInfo, inlineCompletion.additionalTextEdits || getReadonlyEmptyArray(), inlineCompletion, source);\r\n    }\r\n    constructor(filterText, command, range, insertText, snippetInfo, additionalTextEdits, \r\n    /**\r\n     * A reference to the original inline completion this inline completion has been constructed from.\r\n     * Used for event data to ensure referential equality.\r\n    */\r\n    sourceInlineCompletion, \r\n    /**\r\n     * A reference to the original inline completion list this inline completion has been constructed from.\r\n     * Used for event data to ensure referential equality.\r\n    */\r\n    source) {\r\n        this.filterText = filterText;\r\n        this.command = command;\r\n        this.range = range;\r\n        this.insertText = insertText;\r\n        this.snippetInfo = snippetInfo;\r\n        this.additionalTextEdits = additionalTextEdits;\r\n        this.sourceInlineCompletion = sourceInlineCompletion;\r\n        this.source = source;\r\n        filterText = filterText.replace(/\\r\\n|\\r/g, '\\n');\r\n        insertText = filterText.replace(/\\r\\n|\\r/g, '\\n');\r\n    }\r\n    withRange(updatedRange) {\r\n        return new InlineCompletionItem(this.filterText, this.command, updatedRange, this.insertText, this.snippetInfo, this.additionalTextEdits, this.sourceInlineCompletion, this.source);\r\n    }\r\n    hash() {\r\n        return JSON.stringify({ insertText: this.insertText, range: this.range.toString() });\r\n    }\r\n}\r\nfunction getDefaultRange(position, model) {\r\n    const word = model.getWordAtPosition(position);\r\n    const maxColumn = model.getLineMaxColumn(position.lineNumber);\r\n    // By default, always replace up until the end of the current line.\r\n    // This default might be subject to change!\r\n    return word\r\n        ? new Range(position.lineNumber, word.startColumn, position.lineNumber, maxColumn)\r\n        : Range.fromPositions(position, position.with(undefined, maxColumn));\r\n}\r\nfunction closeBrackets(text, position, model, languageConfigurationService) {\r\n    const lineStart = model.getLineContent(position.lineNumber).substring(0, position.column - 1);\r\n    const newLine = lineStart + text;\r\n    const newTokens = model.tokenization.tokenizeLineWithEdit(position, newLine.length - (position.column - 1), text);\r\n    const slicedTokens = newTokens === null || newTokens === void 0 ? void 0 : newTokens.sliceAndInflate(position.column - 1, newLine.length, 0);\r\n    if (!slicedTokens) {\r\n        return text;\r\n    }\r\n    const newText = fixBracketsInLine(slicedTokens, languageConfigurationService);\r\n    return newText;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LanguageAgnosticBracketTokens } from './bracketPairsTree/brackets.js';\r\nimport { lengthAdd, lengthGetColumnCountIfZeroLineCount, lengthZero } from './bracketPairsTree/length.js';\r\nimport { parseDocument } from './bracketPairsTree/parser.js';\r\nimport { DenseKeyProvider } from './bracketPairsTree/smallImmutableSet.js';\r\nimport { TextBufferTokenizer } from './bracketPairsTree/tokenizer.js';\r\nexport function fixBracketsInLine(tokens, languageConfigurationService) {\r\n    const denseKeyProvider = new DenseKeyProvider();\r\n    const bracketTokens = new LanguageAgnosticBracketTokens(denseKeyProvider, (languageId) => languageConfigurationService.getLanguageConfiguration(languageId));\r\n    const tokenizer = new TextBufferTokenizer(new StaticTokenizerSource([tokens]), bracketTokens);\r\n    const node = parseDocument(tokenizer, [], undefined, true);\r\n    let str = '';\r\n    const line = tokens.getLineContent();\r\n    function processNode(node, offset) {\r\n        if (node.kind === 2 /* AstNodeKind.Pair */) {\r\n            processNode(node.openingBracket, offset);\r\n            offset = lengthAdd(offset, node.openingBracket.length);\r\n            if (node.child) {\r\n                processNode(node.child, offset);\r\n                offset = lengthAdd(offset, node.child.length);\r\n            }\r\n            if (node.closingBracket) {\r\n                processNode(node.closingBracket, offset);\r\n                offset = lengthAdd(offset, node.closingBracket.length);\r\n            }\r\n            else {\r\n                const singleLangBracketTokens = bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);\r\n                const closingTokenText = singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);\r\n                str += closingTokenText;\r\n            }\r\n        }\r\n        else if (node.kind === 3 /* AstNodeKind.UnexpectedClosingBracket */) {\r\n            // remove the bracket\r\n        }\r\n        else if (node.kind === 0 /* AstNodeKind.Text */ || node.kind === 1 /* AstNodeKind.Bracket */) {\r\n            str += line.substring(lengthGetColumnCountIfZeroLineCount(offset), lengthGetColumnCountIfZeroLineCount(lengthAdd(offset, node.length)));\r\n        }\r\n        else if (node.kind === 4 /* AstNodeKind.List */) {\r\n            for (const child of node.children) {\r\n                processNode(child, offset);\r\n                offset = lengthAdd(offset, child.length);\r\n            }\r\n        }\r\n    }\r\n    processNode(node, lengthZero);\r\n    return str;\r\n}\r\nclass StaticTokenizerSource {\r\n    constructor(lines) {\r\n        this.lines = lines;\r\n        this.tokenization = {\r\n            getLineTokens: (lineNumber) => {\r\n                return this.lines[lineNumber - 1];\r\n            }\r\n        };\r\n    }\r\n    getLineCount() {\r\n        return this.lines.length;\r\n    }\r\n    getLineLength(lineNumber) {\r\n        return this.lines[lineNumber - 1].getLineContent().length;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class Scanner {\r\n    constructor() {\r\n        this.value = '';\r\n        this.pos = 0;\r\n    }\r\n    static isDigitCharacter(ch) {\r\n        return ch >= 48 /* CharCode.Digit0 */ && ch <= 57 /* CharCode.Digit9 */;\r\n    }\r\n    static isVariableCharacter(ch) {\r\n        return ch === 95 /* CharCode.Underline */\r\n            || (ch >= 97 /* CharCode.a */ && ch <= 122 /* CharCode.z */)\r\n            || (ch >= 65 /* CharCode.A */ && ch <= 90 /* CharCode.Z */);\r\n    }\r\n    text(value) {\r\n        this.value = value;\r\n        this.pos = 0;\r\n    }\r\n    tokenText(token) {\r\n        return this.value.substr(token.pos, token.len);\r\n    }\r\n    next() {\r\n        if (this.pos >= this.value.length) {\r\n            return { type: 14 /* TokenType.EOF */, pos: this.pos, len: 0 };\r\n        }\r\n        const pos = this.pos;\r\n        let len = 0;\r\n        let ch = this.value.charCodeAt(pos);\r\n        let type;\r\n        // static types\r\n        type = Scanner._table[ch];\r\n        if (typeof type === 'number') {\r\n            this.pos += 1;\r\n            return { type, pos, len: 1 };\r\n        }\r\n        // number\r\n        if (Scanner.isDigitCharacter(ch)) {\r\n            type = 8 /* TokenType.Int */;\r\n            do {\r\n                len += 1;\r\n                ch = this.value.charCodeAt(pos + len);\r\n            } while (Scanner.isDigitCharacter(ch));\r\n            this.pos += len;\r\n            return { type, pos, len };\r\n        }\r\n        // variable name\r\n        if (Scanner.isVariableCharacter(ch)) {\r\n            type = 9 /* TokenType.VariableName */;\r\n            do {\r\n                ch = this.value.charCodeAt(pos + (++len));\r\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\r\n            this.pos += len;\r\n            return { type, pos, len };\r\n        }\r\n        // format\r\n        type = 10 /* TokenType.Format */;\r\n        do {\r\n            len += 1;\r\n            ch = this.value.charCodeAt(pos + len);\r\n        } while (!isNaN(ch)\r\n            && typeof Scanner._table[ch] === 'undefined' // not static token\r\n            && !Scanner.isDigitCharacter(ch) // not number\r\n            && !Scanner.isVariableCharacter(ch) // not variable\r\n        );\r\n        this.pos += len;\r\n        return { type, pos, len };\r\n    }\r\n}\r\nScanner._table = {\r\n    [36 /* CharCode.DollarSign */]: 0 /* TokenType.Dollar */,\r\n    [58 /* CharCode.Colon */]: 1 /* TokenType.Colon */,\r\n    [44 /* CharCode.Comma */]: 2 /* TokenType.Comma */,\r\n    [123 /* CharCode.OpenCurlyBrace */]: 3 /* TokenType.CurlyOpen */,\r\n    [125 /* CharCode.CloseCurlyBrace */]: 4 /* TokenType.CurlyClose */,\r\n    [92 /* CharCode.Backslash */]: 5 /* TokenType.Backslash */,\r\n    [47 /* CharCode.Slash */]: 6 /* TokenType.Forwardslash */,\r\n    [124 /* CharCode.Pipe */]: 7 /* TokenType.Pipe */,\r\n    [43 /* CharCode.Plus */]: 11 /* TokenType.Plus */,\r\n    [45 /* CharCode.Dash */]: 12 /* TokenType.Dash */,\r\n    [63 /* CharCode.QuestionMark */]: 13 /* TokenType.QuestionMark */,\r\n};\r\nexport class Marker {\r\n    constructor() {\r\n        this._children = [];\r\n    }\r\n    appendChild(child) {\r\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\r\n            // this and previous child are text -> merge them\r\n            this._children[this._children.length - 1].value += child.value;\r\n        }\r\n        else {\r\n            // normal adoption of child\r\n            child.parent = this;\r\n            this._children.push(child);\r\n        }\r\n        return this;\r\n    }\r\n    replace(child, others) {\r\n        const { parent } = child;\r\n        const idx = parent.children.indexOf(child);\r\n        const newChildren = parent.children.slice(0);\r\n        newChildren.splice(idx, 1, ...others);\r\n        parent._children = newChildren;\r\n        (function _fixParent(children, parent) {\r\n            for (const child of children) {\r\n                child.parent = parent;\r\n                _fixParent(child.children, child);\r\n            }\r\n        })(others, parent);\r\n    }\r\n    get children() {\r\n        return this._children;\r\n    }\r\n    get rightMostDescendant() {\r\n        if (this._children.length > 0) {\r\n            return this._children[this._children.length - 1].rightMostDescendant;\r\n        }\r\n        return this;\r\n    }\r\n    get snippet() {\r\n        let candidate = this;\r\n        while (true) {\r\n            if (!candidate) {\r\n                return undefined;\r\n            }\r\n            if (candidate instanceof TextmateSnippet) {\r\n                return candidate;\r\n            }\r\n            candidate = candidate.parent;\r\n        }\r\n    }\r\n    toString() {\r\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\r\n    }\r\n    len() {\r\n        return 0;\r\n    }\r\n}\r\nexport class Text extends Marker {\r\n    constructor(value) {\r\n        super();\r\n        this.value = value;\r\n    }\r\n    toString() {\r\n        return this.value;\r\n    }\r\n    len() {\r\n        return this.value.length;\r\n    }\r\n    clone() {\r\n        return new Text(this.value);\r\n    }\r\n}\r\nexport class TransformableMarker extends Marker {\r\n}\r\nexport class Placeholder extends TransformableMarker {\r\n    static compareByIndex(a, b) {\r\n        if (a.index === b.index) {\r\n            return 0;\r\n        }\r\n        else if (a.isFinalTabstop) {\r\n            return 1;\r\n        }\r\n        else if (b.isFinalTabstop) {\r\n            return -1;\r\n        }\r\n        else if (a.index < b.index) {\r\n            return -1;\r\n        }\r\n        else if (a.index > b.index) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    constructor(index) {\r\n        super();\r\n        this.index = index;\r\n    }\r\n    get isFinalTabstop() {\r\n        return this.index === 0;\r\n    }\r\n    get choice() {\r\n        return this._children.length === 1 && this._children[0] instanceof Choice\r\n            ? this._children[0]\r\n            : undefined;\r\n    }\r\n    clone() {\r\n        const ret = new Placeholder(this.index);\r\n        if (this.transform) {\r\n            ret.transform = this.transform.clone();\r\n        }\r\n        ret._children = this.children.map(child => child.clone());\r\n        return ret;\r\n    }\r\n}\r\nexport class Choice extends Marker {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.options = [];\r\n    }\r\n    appendChild(marker) {\r\n        if (marker instanceof Text) {\r\n            marker.parent = this;\r\n            this.options.push(marker);\r\n        }\r\n        return this;\r\n    }\r\n    toString() {\r\n        return this.options[0].value;\r\n    }\r\n    len() {\r\n        return this.options[0].len();\r\n    }\r\n    clone() {\r\n        const ret = new Choice();\r\n        this.options.forEach(ret.appendChild, ret);\r\n        return ret;\r\n    }\r\n}\r\nexport class Transform extends Marker {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.regexp = new RegExp('');\r\n    }\r\n    resolve(value) {\r\n        const _this = this;\r\n        let didMatch = false;\r\n        let ret = value.replace(this.regexp, function () {\r\n            didMatch = true;\r\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\r\n        });\r\n        // when the regex didn't match and when the transform has\r\n        // else branches, then run those\r\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\r\n            ret = this._replace([]);\r\n        }\r\n        return ret;\r\n    }\r\n    _replace(groups) {\r\n        let ret = '';\r\n        for (const marker of this._children) {\r\n            if (marker instanceof FormatString) {\r\n                let value = groups[marker.index] || '';\r\n                value = marker.resolve(value);\r\n                ret += value;\r\n            }\r\n            else {\r\n                ret += marker.toString();\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    toString() {\r\n        return '';\r\n    }\r\n    clone() {\r\n        const ret = new Transform();\r\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\r\n        ret._children = this.children.map(child => child.clone());\r\n        return ret;\r\n    }\r\n}\r\nexport class FormatString extends Marker {\r\n    constructor(index, shorthandName, ifValue, elseValue) {\r\n        super();\r\n        this.index = index;\r\n        this.shorthandName = shorthandName;\r\n        this.ifValue = ifValue;\r\n        this.elseValue = elseValue;\r\n    }\r\n    resolve(value) {\r\n        if (this.shorthandName === 'upcase') {\r\n            return !value ? '' : value.toLocaleUpperCase();\r\n        }\r\n        else if (this.shorthandName === 'downcase') {\r\n            return !value ? '' : value.toLocaleLowerCase();\r\n        }\r\n        else if (this.shorthandName === 'capitalize') {\r\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\r\n        }\r\n        else if (this.shorthandName === 'pascalcase') {\r\n            return !value ? '' : this._toPascalCase(value);\r\n        }\r\n        else if (this.shorthandName === 'camelcase') {\r\n            return !value ? '' : this._toCamelCase(value);\r\n        }\r\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\r\n            return this.ifValue;\r\n        }\r\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\r\n            return this.elseValue;\r\n        }\r\n        else {\r\n            return value || '';\r\n        }\r\n    }\r\n    _toPascalCase(value) {\r\n        const match = value.match(/[a-z0-9]+/gi);\r\n        if (!match) {\r\n            return value;\r\n        }\r\n        return match.map(word => {\r\n            return word.charAt(0).toUpperCase() + word.substr(1);\r\n        })\r\n            .join('');\r\n    }\r\n    _toCamelCase(value) {\r\n        const match = value.match(/[a-z0-9]+/gi);\r\n        if (!match) {\r\n            return value;\r\n        }\r\n        return match.map((word, index) => {\r\n            if (index === 0) {\r\n                return word.charAt(0).toLowerCase() + word.substr(1);\r\n            }\r\n            return word.charAt(0).toUpperCase() + word.substr(1);\r\n        })\r\n            .join('');\r\n    }\r\n    clone() {\r\n        const ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\r\n        return ret;\r\n    }\r\n}\r\nexport class Variable extends TransformableMarker {\r\n    constructor(name) {\r\n        super();\r\n        this.name = name;\r\n    }\r\n    resolve(resolver) {\r\n        let value = resolver.resolve(this);\r\n        if (this.transform) {\r\n            value = this.transform.resolve(value || '');\r\n        }\r\n        if (value !== undefined) {\r\n            this._children = [new Text(value)];\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    clone() {\r\n        const ret = new Variable(this.name);\r\n        if (this.transform) {\r\n            ret.transform = this.transform.clone();\r\n        }\r\n        ret._children = this.children.map(child => child.clone());\r\n        return ret;\r\n    }\r\n}\r\nfunction walk(marker, visitor) {\r\n    const stack = [...marker];\r\n    while (stack.length > 0) {\r\n        const marker = stack.shift();\r\n        const recurse = visitor(marker);\r\n        if (!recurse) {\r\n            break;\r\n        }\r\n        stack.unshift(...marker.children);\r\n    }\r\n}\r\nexport class TextmateSnippet extends Marker {\r\n    get placeholderInfo() {\r\n        if (!this._placeholders) {\r\n            // fill in placeholders\r\n            const all = [];\r\n            let last;\r\n            this.walk(function (candidate) {\r\n                if (candidate instanceof Placeholder) {\r\n                    all.push(candidate);\r\n                    last = !last || last.index < candidate.index ? candidate : last;\r\n                }\r\n                return true;\r\n            });\r\n            this._placeholders = { all, last };\r\n        }\r\n        return this._placeholders;\r\n    }\r\n    get placeholders() {\r\n        const { all } = this.placeholderInfo;\r\n        return all;\r\n    }\r\n    offset(marker) {\r\n        let pos = 0;\r\n        let found = false;\r\n        this.walk(candidate => {\r\n            if (candidate === marker) {\r\n                found = true;\r\n                return false;\r\n            }\r\n            pos += candidate.len();\r\n            return true;\r\n        });\r\n        if (!found) {\r\n            return -1;\r\n        }\r\n        return pos;\r\n    }\r\n    fullLen(marker) {\r\n        let ret = 0;\r\n        walk([marker], marker => {\r\n            ret += marker.len();\r\n            return true;\r\n        });\r\n        return ret;\r\n    }\r\n    enclosingPlaceholders(placeholder) {\r\n        const ret = [];\r\n        let { parent } = placeholder;\r\n        while (parent) {\r\n            if (parent instanceof Placeholder) {\r\n                ret.push(parent);\r\n            }\r\n            parent = parent.parent;\r\n        }\r\n        return ret;\r\n    }\r\n    resolveVariables(resolver) {\r\n        this.walk(candidate => {\r\n            if (candidate instanceof Variable) {\r\n                if (candidate.resolve(resolver)) {\r\n                    this._placeholders = undefined;\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n        return this;\r\n    }\r\n    appendChild(child) {\r\n        this._placeholders = undefined;\r\n        return super.appendChild(child);\r\n    }\r\n    replace(child, others) {\r\n        this._placeholders = undefined;\r\n        return super.replace(child, others);\r\n    }\r\n    clone() {\r\n        const ret = new TextmateSnippet();\r\n        this._children = this.children.map(child => child.clone());\r\n        return ret;\r\n    }\r\n    walk(visitor) {\r\n        walk(this.children, visitor);\r\n    }\r\n}\r\nexport class SnippetParser {\r\n    constructor() {\r\n        this._scanner = new Scanner();\r\n        this._token = { type: 14 /* TokenType.EOF */, pos: 0, len: 0 };\r\n    }\r\n    static escape(value) {\r\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\r\n    }\r\n    static guessNeedsClipboard(template) {\r\n        return /\\${?CLIPBOARD/.test(template);\r\n    }\r\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\r\n        const snippet = new TextmateSnippet();\r\n        this.parseFragment(value, snippet);\r\n        this.ensureFinalTabstop(snippet, enforceFinalTabstop !== null && enforceFinalTabstop !== void 0 ? enforceFinalTabstop : false, insertFinalTabstop !== null && insertFinalTabstop !== void 0 ? insertFinalTabstop : false);\r\n        return snippet;\r\n    }\r\n    parseFragment(value, snippet) {\r\n        const offset = snippet.children.length;\r\n        this._scanner.text(value);\r\n        this._token = this._scanner.next();\r\n        while (this._parse(snippet)) {\r\n            // nothing\r\n        }\r\n        // fill in values for placeholders. the first placeholder of an index\r\n        // that has a value defines the value for all placeholders with that index\r\n        const placeholderDefaultValues = new Map();\r\n        const incompletePlaceholders = [];\r\n        snippet.walk(marker => {\r\n            if (marker instanceof Placeholder) {\r\n                if (marker.isFinalTabstop) {\r\n                    placeholderDefaultValues.set(0, undefined);\r\n                }\r\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\r\n                    placeholderDefaultValues.set(marker.index, marker.children);\r\n                }\r\n                else {\r\n                    incompletePlaceholders.push(marker);\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n        const fillInIncompletePlaceholder = (placeholder, stack) => {\r\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\r\n            if (!defaultValues) {\r\n                return;\r\n            }\r\n            const clone = new Placeholder(placeholder.index);\r\n            clone.transform = placeholder.transform;\r\n            for (const child of defaultValues) {\r\n                const newChild = child.clone();\r\n                clone.appendChild(newChild);\r\n                // \"recurse\" on children that are again placeholders\r\n                if (newChild instanceof Placeholder && placeholderDefaultValues.has(newChild.index) && !stack.has(newChild.index)) {\r\n                    stack.add(newChild.index);\r\n                    fillInIncompletePlaceholder(newChild, stack);\r\n                    stack.delete(newChild.index);\r\n                }\r\n            }\r\n            snippet.replace(placeholder, [clone]);\r\n        };\r\n        const stack = new Set();\r\n        for (const placeholder of incompletePlaceholders) {\r\n            fillInIncompletePlaceholder(placeholder, stack);\r\n        }\r\n        return snippet.children.slice(offset);\r\n    }\r\n    ensureFinalTabstop(snippet, enforceFinalTabstop, insertFinalTabstop) {\r\n        if (enforceFinalTabstop || insertFinalTabstop && snippet.placeholders.length > 0) {\r\n            const finalTabstop = snippet.placeholders.find(p => p.index === 0);\r\n            if (!finalTabstop) {\r\n                // the snippet uses placeholders but has no\r\n                // final tabstop defined -> insert at the end\r\n                snippet.appendChild(new Placeholder(0));\r\n            }\r\n        }\r\n    }\r\n    _accept(type, value) {\r\n        if (type === undefined || this._token.type === type) {\r\n            const ret = !value ? true : this._scanner.tokenText(this._token);\r\n            this._token = this._scanner.next();\r\n            return ret;\r\n        }\r\n        return false;\r\n    }\r\n    _backTo(token) {\r\n        this._scanner.pos = token.pos + token.len;\r\n        this._token = token;\r\n        return false;\r\n    }\r\n    _until(type) {\r\n        const start = this._token;\r\n        while (this._token.type !== type) {\r\n            if (this._token.type === 14 /* TokenType.EOF */) {\r\n                return false;\r\n            }\r\n            else if (this._token.type === 5 /* TokenType.Backslash */) {\r\n                const nextToken = this._scanner.next();\r\n                if (nextToken.type !== 0 /* TokenType.Dollar */\r\n                    && nextToken.type !== 4 /* TokenType.CurlyClose */\r\n                    && nextToken.type !== 5 /* TokenType.Backslash */) {\r\n                    return false;\r\n                }\r\n            }\r\n            this._token = this._scanner.next();\r\n        }\r\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\r\n        this._token = this._scanner.next();\r\n        return value;\r\n    }\r\n    _parse(marker) {\r\n        return this._parseEscaped(marker)\r\n            || this._parseTabstopOrVariableName(marker)\r\n            || this._parseComplexPlaceholder(marker)\r\n            || this._parseComplexVariable(marker)\r\n            || this._parseAnything(marker);\r\n    }\r\n    // \\$, \\\\, \\} -> just text\r\n    _parseEscaped(marker) {\r\n        let value;\r\n        if (value = this._accept(5 /* TokenType.Backslash */, true)) {\r\n            // saw a backslash, append escaped token or that backslash\r\n            value = this._accept(0 /* TokenType.Dollar */, true)\r\n                || this._accept(4 /* TokenType.CurlyClose */, true)\r\n                || this._accept(5 /* TokenType.Backslash */, true)\r\n                || value;\r\n            marker.appendChild(new Text(value));\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    // $foo -> variable, $1 -> tabstop\r\n    _parseTabstopOrVariableName(parent) {\r\n        let value;\r\n        const token = this._token;\r\n        const match = this._accept(0 /* TokenType.Dollar */)\r\n            && (value = this._accept(9 /* TokenType.VariableName */, true) || this._accept(8 /* TokenType.Int */, true));\r\n        if (!match) {\r\n            return this._backTo(token);\r\n        }\r\n        parent.appendChild(/^\\d+$/.test(value)\r\n            ? new Placeholder(Number(value))\r\n            : new Variable(value));\r\n        return true;\r\n    }\r\n    // ${1:<children>}, ${1} -> placeholder\r\n    _parseComplexPlaceholder(parent) {\r\n        let index;\r\n        const token = this._token;\r\n        const match = this._accept(0 /* TokenType.Dollar */)\r\n            && this._accept(3 /* TokenType.CurlyOpen */)\r\n            && (index = this._accept(8 /* TokenType.Int */, true));\r\n        if (!match) {\r\n            return this._backTo(token);\r\n        }\r\n        const placeholder = new Placeholder(Number(index));\r\n        if (this._accept(1 /* TokenType.Colon */)) {\r\n            // ${1:<children>}\r\n            while (true) {\r\n                // ...} -> done\r\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\r\n                    parent.appendChild(placeholder);\r\n                    return true;\r\n                }\r\n                if (this._parse(placeholder)) {\r\n                    continue;\r\n                }\r\n                // fallback\r\n                parent.appendChild(new Text('${' + index + ':'));\r\n                placeholder.children.forEach(parent.appendChild, parent);\r\n                return true;\r\n            }\r\n        }\r\n        else if (placeholder.index > 0 && this._accept(7 /* TokenType.Pipe */)) {\r\n            // ${1|one,two,three|}\r\n            const choice = new Choice();\r\n            while (true) {\r\n                if (this._parseChoiceElement(choice)) {\r\n                    if (this._accept(2 /* TokenType.Comma */)) {\r\n                        // opt, -> more\r\n                        continue;\r\n                    }\r\n                    if (this._accept(7 /* TokenType.Pipe */)) {\r\n                        placeholder.appendChild(choice);\r\n                        if (this._accept(4 /* TokenType.CurlyClose */)) {\r\n                            // ..|} -> done\r\n                            parent.appendChild(placeholder);\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                this._backTo(token);\r\n                return false;\r\n            }\r\n        }\r\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\r\n            // ${1/<regex>/<format>/<options>}\r\n            if (this._parseTransform(placeholder)) {\r\n                parent.appendChild(placeholder);\r\n                return true;\r\n            }\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\r\n            // ${1}\r\n            parent.appendChild(placeholder);\r\n            return true;\r\n        }\r\n        else {\r\n            // ${1 <- missing curly or colon\r\n            return this._backTo(token);\r\n        }\r\n    }\r\n    _parseChoiceElement(parent) {\r\n        const token = this._token;\r\n        const values = [];\r\n        while (true) {\r\n            if (this._token.type === 2 /* TokenType.Comma */ || this._token.type === 7 /* TokenType.Pipe */) {\r\n                break;\r\n            }\r\n            let value;\r\n            if (value = this._accept(5 /* TokenType.Backslash */, true)) {\r\n                // \\, \\|, or \\\\\r\n                value = this._accept(2 /* TokenType.Comma */, true)\r\n                    || this._accept(7 /* TokenType.Pipe */, true)\r\n                    || this._accept(5 /* TokenType.Backslash */, true)\r\n                    || value;\r\n            }\r\n            else {\r\n                value = this._accept(undefined, true);\r\n            }\r\n            if (!value) {\r\n                // EOF\r\n                this._backTo(token);\r\n                return false;\r\n            }\r\n            values.push(value);\r\n        }\r\n        if (values.length === 0) {\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        parent.appendChild(new Text(values.join('')));\r\n        return true;\r\n    }\r\n    // ${foo:<children>}, ${foo} -> variable\r\n    _parseComplexVariable(parent) {\r\n        let name;\r\n        const token = this._token;\r\n        const match = this._accept(0 /* TokenType.Dollar */)\r\n            && this._accept(3 /* TokenType.CurlyOpen */)\r\n            && (name = this._accept(9 /* TokenType.VariableName */, true));\r\n        if (!match) {\r\n            return this._backTo(token);\r\n        }\r\n        const variable = new Variable(name);\r\n        if (this._accept(1 /* TokenType.Colon */)) {\r\n            // ${foo:<children>}\r\n            while (true) {\r\n                // ...} -> done\r\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\r\n                    parent.appendChild(variable);\r\n                    return true;\r\n                }\r\n                if (this._parse(variable)) {\r\n                    continue;\r\n                }\r\n                // fallback\r\n                parent.appendChild(new Text('${' + name + ':'));\r\n                variable.children.forEach(parent.appendChild, parent);\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\r\n            // ${foo/<regex>/<format>/<options>}\r\n            if (this._parseTransform(variable)) {\r\n                parent.appendChild(variable);\r\n                return true;\r\n            }\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\r\n            // ${foo}\r\n            parent.appendChild(variable);\r\n            return true;\r\n        }\r\n        else {\r\n            // ${foo <- missing curly or colon\r\n            return this._backTo(token);\r\n        }\r\n    }\r\n    _parseTransform(parent) {\r\n        // ...<regex>/<format>/<options>}\r\n        const transform = new Transform();\r\n        let regexValue = '';\r\n        let regexOptions = '';\r\n        // (1) /regex\r\n        while (true) {\r\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\r\n                break;\r\n            }\r\n            let escaped;\r\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\r\n                escaped = this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\r\n                regexValue += escaped;\r\n                continue;\r\n            }\r\n            if (this._token.type !== 14 /* TokenType.EOF */) {\r\n                regexValue += this._accept(undefined, true);\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        // (2) /format\r\n        while (true) {\r\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\r\n                break;\r\n            }\r\n            let escaped;\r\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\r\n                escaped = this._accept(5 /* TokenType.Backslash */, true) || this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\r\n                transform.appendChild(new Text(escaped));\r\n                continue;\r\n            }\r\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        // (3) /option\r\n        while (true) {\r\n            if (this._accept(4 /* TokenType.CurlyClose */)) {\r\n                break;\r\n            }\r\n            if (this._token.type !== 14 /* TokenType.EOF */) {\r\n                regexOptions += this._accept(undefined, true);\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        try {\r\n            transform.regexp = new RegExp(regexValue, regexOptions);\r\n        }\r\n        catch (e) {\r\n            // invalid regexp\r\n            return false;\r\n        }\r\n        parent.transform = transform;\r\n        return true;\r\n    }\r\n    _parseFormatString(parent) {\r\n        const token = this._token;\r\n        if (!this._accept(0 /* TokenType.Dollar */)) {\r\n            return false;\r\n        }\r\n        let complex = false;\r\n        if (this._accept(3 /* TokenType.CurlyOpen */)) {\r\n            complex = true;\r\n        }\r\n        const index = this._accept(8 /* TokenType.Int */, true);\r\n        if (!index) {\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        else if (!complex) {\r\n            // $1\r\n            parent.appendChild(new FormatString(Number(index)));\r\n            return true;\r\n        }\r\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\r\n            // ${1}\r\n            parent.appendChild(new FormatString(Number(index)));\r\n            return true;\r\n        }\r\n        else if (!this._accept(1 /* TokenType.Colon */)) {\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        if (this._accept(6 /* TokenType.Forwardslash */)) {\r\n            // ${1:/upcase}\r\n            const shorthand = this._accept(9 /* TokenType.VariableName */, true);\r\n            if (!shorthand || !this._accept(4 /* TokenType.CurlyClose */)) {\r\n                this._backTo(token);\r\n                return false;\r\n            }\r\n            else {\r\n                parent.appendChild(new FormatString(Number(index), shorthand));\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(11 /* TokenType.Plus */)) {\r\n            // ${1:+<if>}\r\n            const ifValue = this._until(4 /* TokenType.CurlyClose */);\r\n            if (ifValue) {\r\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(12 /* TokenType.Dash */)) {\r\n            // ${2:-<else>}\r\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\r\n            if (elseValue) {\r\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(13 /* TokenType.QuestionMark */)) {\r\n            // ${2:?<if>:<else>}\r\n            const ifValue = this._until(1 /* TokenType.Colon */);\r\n            if (ifValue) {\r\n                const elseValue = this._until(4 /* TokenType.CurlyClose */);\r\n                if (elseValue) {\r\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // ${1:<else>}\r\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\r\n            if (elseValue) {\r\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\r\n                return true;\r\n            }\r\n        }\r\n        this._backTo(token);\r\n        return false;\r\n    }\r\n    _parseAnything(marker) {\r\n        if (this._token.type !== 14 /* TokenType.EOF */) {\r\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\r\n            this._accept(undefined);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LcsDiff } from '../../../../base/common/diff/diff.js';\r\nimport { commonPrefixLength, getLeadingWhitespace, splitLines } from '../../../../base/common/strings.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { GhostText, GhostTextPart } from './ghostText.js';\r\nimport { addPositions, lengthOfText } from './utils.js';\r\nexport class SingleTextEdit {\r\n    constructor(range, text) {\r\n        this.range = range;\r\n        this.text = text;\r\n    }\r\n    removeCommonPrefix(model, validModelRange) {\r\n        const modelRange = validModelRange ? this.range.intersectRanges(validModelRange) : this.range;\r\n        if (!modelRange) {\r\n            return this;\r\n        }\r\n        const valueToReplace = model.getValueInRange(modelRange, 1 /* EndOfLinePreference.LF */);\r\n        const commonPrefixLen = commonPrefixLength(valueToReplace, this.text);\r\n        const start = addPositions(this.range.getStartPosition(), lengthOfText(valueToReplace.substring(0, commonPrefixLen)));\r\n        const text = this.text.substring(commonPrefixLen);\r\n        const range = Range.fromPositions(start, this.range.getEndPosition());\r\n        return new SingleTextEdit(range, text);\r\n    }\r\n    augments(base) {\r\n        // The augmented completion must replace the base range, but can replace even more\r\n        return this.text.startsWith(base.text) && rangeExtends(this.range, base.range);\r\n    }\r\n    /**\r\n     * @param previewSuffixLength Sets where to split `inlineCompletion.text`.\r\n     * \tIf the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.\r\n    */\r\n    computeGhostText(model, mode, cursorPosition, previewSuffixLength = 0) {\r\n        let edit = this.removeCommonPrefix(model);\r\n        if (edit.range.endLineNumber !== edit.range.startLineNumber) {\r\n            // This edit might span multiple lines, but the first lines must be a common prefix.\r\n            return undefined;\r\n        }\r\n        const sourceLine = model.getLineContent(edit.range.startLineNumber);\r\n        const sourceIndentationLength = getLeadingWhitespace(sourceLine).length;\r\n        const suggestionTouchesIndentation = edit.range.startColumn - 1 <= sourceIndentationLength;\r\n        if (suggestionTouchesIndentation) {\r\n            // source:      [abc]\r\n            //                         ^^^^^^^^^ inlineCompletion.range\r\n            //              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength\r\n            //                         ^^^^^^ replacedIndentation.length\r\n            //                               ^^^ rangeThatDoesNotReplaceIndentation\r\n            // inlineCompletion.text: 'foo'\r\n            //                         ^^ suggestionAddedIndentationLength\r\n            const suggestionAddedIndentationLength = getLeadingWhitespace(edit.text).length;\r\n            const replacedIndentation = sourceLine.substring(edit.range.startColumn - 1, sourceIndentationLength);\r\n            const [startPosition, endPosition] = [edit.range.getStartPosition(), edit.range.getEndPosition()];\r\n            const newStartPosition = startPosition.column + replacedIndentation.length <= endPosition.column\r\n                ? startPosition.delta(0, replacedIndentation.length)\r\n                : endPosition;\r\n            const rangeThatDoesNotReplaceIndentation = Range.fromPositions(newStartPosition, endPosition);\r\n            const suggestionWithoutIndentationChange = edit.text.startsWith(replacedIndentation)\r\n                // Adds more indentation without changing existing indentation: We can add ghost text for this\r\n                ? edit.text.substring(replacedIndentation.length)\r\n                // Changes or removes existing indentation. Only add ghost text for the non-indentation part.\r\n                : edit.text.substring(suggestionAddedIndentationLength);\r\n            edit = new SingleTextEdit(rangeThatDoesNotReplaceIndentation, suggestionWithoutIndentationChange);\r\n        }\r\n        // This is a single line string\r\n        const valueToBeReplaced = model.getValueInRange(edit.range);\r\n        const changes = cachingDiff(valueToBeReplaced, edit.text);\r\n        if (!changes) {\r\n            // No ghost text in case the diff would be too slow to compute\r\n            return undefined;\r\n        }\r\n        const lineNumber = edit.range.startLineNumber;\r\n        const parts = new Array();\r\n        if (mode === 'prefix') {\r\n            const filteredChanges = changes.filter(c => c.originalLength === 0);\r\n            if (filteredChanges.length > 1 || filteredChanges.length === 1 && filteredChanges[0].originalStart !== valueToBeReplaced.length) {\r\n                // Prefixes only have a single change.\r\n                return undefined;\r\n            }\r\n        }\r\n        const previewStartInCompletionText = edit.text.length - previewSuffixLength;\r\n        for (const c of changes) {\r\n            const insertColumn = edit.range.startColumn + c.originalStart + c.originalLength;\r\n            if (mode === 'subwordSmart' && cursorPosition && cursorPosition.lineNumber === edit.range.startLineNumber && insertColumn < cursorPosition.column) {\r\n                // No ghost text before cursor\r\n                return undefined;\r\n            }\r\n            if (c.originalLength > 0) {\r\n                return undefined;\r\n            }\r\n            if (c.modifiedLength === 0) {\r\n                continue;\r\n            }\r\n            const modifiedEnd = c.modifiedStart + c.modifiedLength;\r\n            const nonPreviewTextEnd = Math.max(c.modifiedStart, Math.min(modifiedEnd, previewStartInCompletionText));\r\n            const nonPreviewText = edit.text.substring(c.modifiedStart, nonPreviewTextEnd);\r\n            const italicText = edit.text.substring(nonPreviewTextEnd, Math.max(c.modifiedStart, modifiedEnd));\r\n            if (nonPreviewText.length > 0) {\r\n                const lines = splitLines(nonPreviewText);\r\n                parts.push(new GhostTextPart(insertColumn, lines, false));\r\n            }\r\n            if (italicText.length > 0) {\r\n                const lines = splitLines(italicText);\r\n                parts.push(new GhostTextPart(insertColumn, lines, true));\r\n            }\r\n        }\r\n        return new GhostText(lineNumber, parts);\r\n    }\r\n}\r\nfunction rangeExtends(extendingRange, rangeToExtend) {\r\n    return rangeToExtend.getStartPosition().equals(extendingRange.getStartPosition())\r\n        && rangeToExtend.getEndPosition().isBeforeOrEqual(extendingRange.getEndPosition());\r\n}\r\nlet lastRequest = undefined;\r\nfunction cachingDiff(originalValue, newValue) {\r\n    if ((lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.originalValue) === originalValue && (lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.newValue) === newValue) {\r\n        return lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.changes;\r\n    }\r\n    else {\r\n        let changes = smartDiff(originalValue, newValue, true);\r\n        if (changes) {\r\n            const deletedChars = deletedCharacters(changes);\r\n            if (deletedChars > 0) {\r\n                // For performance reasons, don't compute diff if there is nothing to improve\r\n                const newChanges = smartDiff(originalValue, newValue, false);\r\n                if (newChanges && deletedCharacters(newChanges) < deletedChars) {\r\n                    // Disabling smartness seems to be better here\r\n                    changes = newChanges;\r\n                }\r\n            }\r\n        }\r\n        lastRequest = {\r\n            originalValue,\r\n            newValue,\r\n            changes\r\n        };\r\n        return changes;\r\n    }\r\n}\r\nfunction deletedCharacters(changes) {\r\n    let sum = 0;\r\n    for (const c of changes) {\r\n        sum += c.originalLength;\r\n    }\r\n    return sum;\r\n}\r\n/**\r\n * When matching `if ()` with `if (f() = 1) { g(); }`,\r\n * align it like this:        `if (       )`\r\n * Not like this:\t\t\t  `if (  )`\r\n * Also not like this:\t\t  `if (             )`.\r\n *\r\n * The parenthesis are preprocessed to ensure that they match correctly.\r\n */\r\nfunction smartDiff(originalValue, newValue, smartBracketMatching) {\r\n    if (originalValue.length > 5000 || newValue.length > 5000) {\r\n        // We don't want to work on strings that are too big\r\n        return undefined;\r\n    }\r\n    function getMaxCharCode(val) {\r\n        let maxCharCode = 0;\r\n        for (let i = 0, len = val.length; i < len; i++) {\r\n            const charCode = val.charCodeAt(i);\r\n            if (charCode > maxCharCode) {\r\n                maxCharCode = charCode;\r\n            }\r\n        }\r\n        return maxCharCode;\r\n    }\r\n    const maxCharCode = Math.max(getMaxCharCode(originalValue), getMaxCharCode(newValue));\r\n    function getUniqueCharCode(id) {\r\n        if (id < 0) {\r\n            throw new Error('unexpected');\r\n        }\r\n        return maxCharCode + id + 1;\r\n    }\r\n    function getElements(source) {\r\n        let level = 0;\r\n        let group = 0;\r\n        const characters = new Int32Array(source.length);\r\n        for (let i = 0, len = source.length; i < len; i++) {\r\n            // TODO support more brackets\r\n            if (smartBracketMatching && source[i] === '(') {\r\n                const id = group * 100 + level;\r\n                characters[i] = getUniqueCharCode(2 * id);\r\n                level++;\r\n            }\r\n            else if (smartBracketMatching && source[i] === ')') {\r\n                level = Math.max(level - 1, 0);\r\n                const id = group * 100 + level;\r\n                characters[i] = getUniqueCharCode(2 * id + 1);\r\n                if (level === 0) {\r\n                    group++;\r\n                }\r\n            }\r\n            else {\r\n                characters[i] = source.charCodeAt(i);\r\n            }\r\n        }\r\n        return characters;\r\n    }\r\n    const elements1 = getElements(originalValue);\r\n    const elements2 = getElements(newValue);\r\n    return new LcsDiff({ getElements: () => elements1 }, { getElements: () => elements2 }).ComputeDiff(false).changes;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar SnippetController2_1;\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ILogService } from '../../../../platform/log/common/log.js';\r\nimport { SnippetSession } from './snippetSession.js';\r\nconst _defaultOptions = {\r\n    overwriteBefore: 0,\r\n    overwriteAfter: 0,\r\n    undoStopBefore: true,\r\n    undoStopAfter: true,\r\n    adjustWhitespace: true,\r\n    clipboardText: undefined,\r\n    overtypingCapturer: undefined\r\n};\r\nlet SnippetController2 = SnippetController2_1 = class SnippetController2 {\r\n    static get(editor) {\r\n        return editor.getContribution(SnippetController2_1.ID);\r\n    }\r\n    constructor(_editor, _logService, _languageFeaturesService, contextKeyService, _languageConfigurationService) {\r\n        this._editor = _editor;\r\n        this._logService = _logService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._snippetListener = new DisposableStore();\r\n        this._modelVersionId = -1;\r\n        this._inSnippet = SnippetController2_1.InSnippetMode.bindTo(contextKeyService);\r\n        this._hasNextTabstop = SnippetController2_1.HasNextTabstop.bindTo(contextKeyService);\r\n        this._hasPrevTabstop = SnippetController2_1.HasPrevTabstop.bindTo(contextKeyService);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        this._inSnippet.reset();\r\n        this._hasPrevTabstop.reset();\r\n        this._hasNextTabstop.reset();\r\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._snippetListener.dispose();\r\n    }\r\n    insert(template, opts) {\r\n        // this is here to find out more about the yet-not-understood\r\n        // error that sometimes happens when we fail to inserted a nested\r\n        // snippet\r\n        try {\r\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\r\n        }\r\n        catch (e) {\r\n            this.cancel();\r\n            this._logService.error(e);\r\n            this._logService.error('snippet_error');\r\n            this._logService.error('insert_template=', template);\r\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\r\n        }\r\n    }\r\n    _doInsert(template, opts) {\r\n        var _a;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        // don't listen while inserting the snippet\r\n        // as that is the inflight state causing cancelation\r\n        this._snippetListener.clear();\r\n        if (opts.undoStopBefore) {\r\n            this._editor.getModel().pushStackElement();\r\n        }\r\n        // don't merge\r\n        if (this._session && typeof template !== 'string') {\r\n            this.cancel();\r\n        }\r\n        if (!this._session) {\r\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\r\n            this._session = new SnippetSession(this._editor, template, opts, this._languageConfigurationService);\r\n            this._session.insert();\r\n        }\r\n        else {\r\n            assertType(typeof template === 'string');\r\n            this._session.merge(template, opts);\r\n        }\r\n        if (opts.undoStopAfter) {\r\n            this._editor.getModel().pushStackElement();\r\n        }\r\n        // regster completion item provider when there is any choice element\r\n        if ((_a = this._session) === null || _a === void 0 ? void 0 : _a.hasChoice) {\r\n            const provider = {\r\n                _debugDisplayName: 'snippetChoiceCompletions',\r\n                provideCompletionItems: (model, position) => {\r\n                    if (!this._session || model !== this._editor.getModel() || !Position.equals(this._editor.getPosition(), position)) {\r\n                        return undefined;\r\n                    }\r\n                    const { activeChoice } = this._session;\r\n                    if (!activeChoice || activeChoice.choice.options.length === 0) {\r\n                        return undefined;\r\n                    }\r\n                    const word = model.getValueInRange(activeChoice.range);\r\n                    const isAnyOfOptions = Boolean(activeChoice.choice.options.find(o => o.value === word));\r\n                    const suggestions = [];\r\n                    for (let i = 0; i < activeChoice.choice.options.length; i++) {\r\n                        const option = activeChoice.choice.options[i];\r\n                        suggestions.push({\r\n                            kind: 13 /* CompletionItemKind.Value */,\r\n                            label: option.value,\r\n                            insertText: option.value,\r\n                            sortText: 'a'.repeat(i + 1),\r\n                            range: activeChoice.range,\r\n                            filterText: isAnyOfOptions ? `${word}_${option.value}` : undefined,\r\n                            command: { id: 'jumpToNextSnippetPlaceholder', title: localize('next', 'Go to next placeholder...') }\r\n                        });\r\n                    }\r\n                    return { suggestions };\r\n                }\r\n            };\r\n            const model = this._editor.getModel();\r\n            let registration;\r\n            let isRegistered = false;\r\n            const disable = () => {\r\n                registration === null || registration === void 0 ? void 0 : registration.dispose();\r\n                isRegistered = false;\r\n            };\r\n            const enable = () => {\r\n                if (!isRegistered) {\r\n                    registration = this._languageFeaturesService.completionProvider.register({\r\n                        language: model.getLanguageId(),\r\n                        pattern: model.uri.fsPath,\r\n                        scheme: model.uri.scheme,\r\n                        exclusive: true\r\n                    }, provider);\r\n                    this._snippetListener.add(registration);\r\n                    isRegistered = true;\r\n                }\r\n            };\r\n            this._choiceCompletions = { provider, enable, disable };\r\n        }\r\n        this._updateState();\r\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\r\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\r\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\r\n    }\r\n    _updateState() {\r\n        if (!this._session || !this._editor.hasModel()) {\r\n            // canceled in the meanwhile\r\n            return;\r\n        }\r\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\r\n            // undo until the 'before' state happened\r\n            // and makes use cancel snippet mode\r\n            return this.cancel();\r\n        }\r\n        if (!this._session.hasPlaceholder) {\r\n            // don't listen for selection changes and don't\r\n            // update context keys when the snippet is plain text\r\n            return this.cancel();\r\n        }\r\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\r\n            this._editor.getModel().pushStackElement();\r\n            return this.cancel();\r\n        }\r\n        this._inSnippet.set(true);\r\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\r\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\r\n        this._handleChoice();\r\n    }\r\n    _handleChoice() {\r\n        var _a;\r\n        if (!this._session || !this._editor.hasModel()) {\r\n            this._currentChoice = undefined;\r\n            return;\r\n        }\r\n        const { activeChoice } = this._session;\r\n        if (!activeChoice || !this._choiceCompletions) {\r\n            (_a = this._choiceCompletions) === null || _a === void 0 ? void 0 : _a.disable();\r\n            this._currentChoice = undefined;\r\n            return;\r\n        }\r\n        if (this._currentChoice !== activeChoice.choice) {\r\n            this._currentChoice = activeChoice.choice;\r\n            this._choiceCompletions.enable();\r\n            // trigger suggest with the special choice completion provider\r\n            queueMicrotask(() => {\r\n                showSimpleSuggestions(this._editor, this._choiceCompletions.provider);\r\n            });\r\n        }\r\n    }\r\n    finish() {\r\n        while (this._inSnippet.get()) {\r\n            this.next();\r\n        }\r\n    }\r\n    cancel(resetSelection = false) {\r\n        var _a;\r\n        this._inSnippet.reset();\r\n        this._hasPrevTabstop.reset();\r\n        this._hasNextTabstop.reset();\r\n        this._snippetListener.clear();\r\n        this._currentChoice = undefined;\r\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._session = undefined;\r\n        this._modelVersionId = -1;\r\n        if (resetSelection) {\r\n            // reset selection to the primary cursor when being asked\r\n            // for. this happens when explicitly cancelling snippet mode,\r\n            // e.g. when pressing ESC\r\n            this._editor.setSelections([this._editor.getSelection()]);\r\n        }\r\n    }\r\n    prev() {\r\n        var _a;\r\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.prev();\r\n        this._updateState();\r\n    }\r\n    next() {\r\n        var _a;\r\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.next();\r\n        this._updateState();\r\n    }\r\n    isInSnippet() {\r\n        return Boolean(this._inSnippet.get());\r\n    }\r\n};\r\nSnippetController2.ID = 'snippetController2';\r\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\r\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\r\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\r\nSnippetController2 = SnippetController2_1 = __decorate([\r\n    __param(1, ILogService),\r\n    __param(2, ILanguageFeaturesService),\r\n    __param(3, IContextKeyService),\r\n    __param(4, ILanguageConfigurationService)\r\n], SnippetController2);\r\nexport { SnippetController2 };\r\nregisterEditorContribution(SnippetController2.ID, SnippetController2, 4 /* EditorContributionInstantiation.Lazy */);\r\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'jumpToNextSnippetPlaceholder',\r\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\r\n    handler: ctrl => ctrl.next(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        primary: 2 /* KeyCode.Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'jumpToPrevSnippetPlaceholder',\r\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\r\n    handler: ctrl => ctrl.prev(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'leaveSnippet',\r\n    precondition: SnippetController2.InSnippetMode,\r\n    handler: ctrl => ctrl.cancel(true),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'acceptSnippet',\r\n    precondition: SnippetController2.InSnippetMode,\r\n    handler: ctrl => ctrl.finish(),\r\n    // kbOpts: {\r\n    // \tweight: KeybindingWeight.EditorContrib + 30,\r\n    // \tkbExpr: EditorContextKeys.textFocus,\r\n    // \tprimary: KeyCode.Enter,\r\n    // }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { FuzzyScore } from '../../../../base/common/filters.js';\r\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\r\nexport const Context = {\r\n    Visible: historyNavigationVisible,\r\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\r\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\r\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\r\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\r\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\r\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\r\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\r\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\r\n};\r\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\r\nexport class CompletionItem {\r\n    constructor(position, completion, container, provider) {\r\n        var _a;\r\n        this.position = position;\r\n        this.completion = completion;\r\n        this.container = container;\r\n        this.provider = provider;\r\n        // validation\r\n        this.isInvalid = false;\r\n        // sorting, filtering\r\n        this.score = FuzzyScore.Default;\r\n        this.distance = 0;\r\n        this.textLabel = typeof completion.label === 'string'\r\n            ? completion.label\r\n            : (_a = completion.label) === null || _a === void 0 ? void 0 : _a.label;\r\n        // ensure lower-variants (perf)\r\n        this.labelLow = this.textLabel.toLowerCase();\r\n        // validate label\r\n        this.isInvalid = !this.textLabel;\r\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\r\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\r\n        this.extensionId = completion.extensionId;\r\n        // normalize ranges\r\n        if (Range.isIRange(completion.range)) {\r\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\r\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\r\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\r\n            // validate range\r\n            this.isInvalid = this.isInvalid\r\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\r\n        }\r\n        else {\r\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\r\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\r\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\r\n            // validate ranges\r\n            this.isInvalid = this.isInvalid\r\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\r\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\r\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\r\n        }\r\n        // create the suggestion resolver\r\n        if (typeof provider.resolveCompletionItem !== 'function') {\r\n            this._resolveCache = Promise.resolve();\r\n            this._resolveDuration = 0;\r\n        }\r\n    }\r\n    // ---- resolving\r\n    get isResolved() {\r\n        return this._resolveDuration !== undefined;\r\n    }\r\n    get resolveDuration() {\r\n        return this._resolveDuration !== undefined ? this._resolveDuration : -1;\r\n    }\r\n    resolve(token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._resolveCache) {\r\n                const sub = token.onCancellationRequested(() => {\r\n                    this._resolveCache = undefined;\r\n                    this._resolveDuration = undefined;\r\n                });\r\n                const sw = new StopWatch(true);\r\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\r\n                    Object.assign(this.completion, value);\r\n                    this._resolveDuration = sw.elapsed();\r\n                }, err => {\r\n                    if (isCancellationError(err)) {\r\n                        // the IPC queue will reject the request with the\r\n                        // cancellation error -> reset cached\r\n                        this._resolveCache = undefined;\r\n                        this._resolveDuration = undefined;\r\n                    }\r\n                }).finally(() => {\r\n                    sub.dispose();\r\n                });\r\n            }\r\n            return this._resolveCache;\r\n        });\r\n    }\r\n}\r\nexport class CompletionOptions {\r\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), providerItemsToReuse = new Map(), showDeprecated = true) {\r\n        this.snippetSortOrder = snippetSortOrder;\r\n        this.kindFilter = kindFilter;\r\n        this.providerFilter = providerFilter;\r\n        this.providerItemsToReuse = providerItemsToReuse;\r\n        this.showDeprecated = showDeprecated;\r\n    }\r\n}\r\nCompletionOptions.default = new CompletionOptions();\r\nlet _snippetSuggestSupport;\r\nexport function getSnippetSuggestSupport() {\r\n    return _snippetSuggestSupport;\r\n}\r\nexport class CompletionItemModel {\r\n    constructor(items, needsClipboard, durations, disposable) {\r\n        this.items = items;\r\n        this.needsClipboard = needsClipboard;\r\n        this.durations = durations;\r\n        this.disposable = disposable;\r\n    }\r\n}\r\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const sw = new StopWatch();\r\n        position = position.clone();\r\n        const word = model.getWordAtPosition(position);\r\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\r\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\r\n        const result = [];\r\n        const disposables = new DisposableStore();\r\n        const durations = [];\r\n        let needsClipboard = false;\r\n        const onCompletionList = (provider, container, sw) => {\r\n            var _a, _b, _c;\r\n            let didAddResult = false;\r\n            if (!container) {\r\n                return didAddResult;\r\n            }\r\n            for (const suggestion of container.suggestions) {\r\n                if (!options.kindFilter.has(suggestion.kind)) {\r\n                    // skip if not showing deprecated suggestions\r\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\r\n                        continue;\r\n                    }\r\n                    // fill in default range when missing\r\n                    if (!suggestion.range) {\r\n                        suggestion.range = defaultRange;\r\n                    }\r\n                    // fill in default sortText when missing\r\n                    if (!suggestion.sortText) {\r\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\r\n                    }\r\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\r\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\r\n                    }\r\n                    result.push(new CompletionItem(position, suggestion, container, provider));\r\n                    didAddResult = true;\r\n                }\r\n            }\r\n            if (isDisposable(container)) {\r\n                disposables.add(container);\r\n            }\r\n            durations.push({\r\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\r\n            });\r\n            return didAddResult;\r\n        };\r\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\r\n        // do so - no snippet filter, no special-providers-only request\r\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\r\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\r\n                return;\r\n            }\r\n            // we have items from a previous session that we can reuse\r\n            const reuseItems = options.providerItemsToReuse.get(_snippetSuggestSupport);\r\n            if (reuseItems) {\r\n                reuseItems.forEach(item => result.push(item));\r\n                return;\r\n            }\r\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\r\n                return;\r\n            }\r\n            const sw = new StopWatch();\r\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\r\n            onCompletionList(_snippetSuggestSupport, list, sw);\r\n        }))();\r\n        // add suggestions from contributed providers - providers are ordered in groups of\r\n        // equal score and once a group produces a result the process stops\r\n        // get provider groups, always add snippet suggestion provider\r\n        for (const providerGroup of registry.orderedGroups(model)) {\r\n            // for each support in the group ask for suggestions\r\n            let didAddResult = false;\r\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\r\n                // we have items from a previous session that we can reuse\r\n                if (options.providerItemsToReuse.has(provider)) {\r\n                    const items = options.providerItemsToReuse.get(provider);\r\n                    items.forEach(item => result.push(item));\r\n                    didAddResult = didAddResult || items.length > 0;\r\n                    return;\r\n                }\r\n                // check if this provider is filtered out\r\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\r\n                    return;\r\n                }\r\n                try {\r\n                    const sw = new StopWatch();\r\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\r\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\r\n                }\r\n                catch (err) {\r\n                    onUnexpectedExternalError(err);\r\n                }\r\n            })));\r\n            if (didAddResult || token.isCancellationRequested) {\r\n                break;\r\n            }\r\n        }\r\n        yield snippetCompletions;\r\n        if (token.isCancellationRequested) {\r\n            disposables.dispose();\r\n            return Promise.reject(new CancellationError());\r\n        }\r\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\r\n    });\r\n}\r\nfunction defaultComparator(a, b) {\r\n    // check with 'sortText'\r\n    if (a.sortTextLow && b.sortTextLow) {\r\n        if (a.sortTextLow < b.sortTextLow) {\r\n            return -1;\r\n        }\r\n        else if (a.sortTextLow > b.sortTextLow) {\r\n            return 1;\r\n        }\r\n    }\r\n    // check with 'label'\r\n    if (a.textLabel < b.textLabel) {\r\n        return -1;\r\n    }\r\n    else if (a.textLabel > b.textLabel) {\r\n        return 1;\r\n    }\r\n    // check with 'type'\r\n    return a.completion.kind - b.completion.kind;\r\n}\r\nfunction snippetUpComparator(a, b) {\r\n    if (a.completion.kind !== b.completion.kind) {\r\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\r\n            return -1;\r\n        }\r\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\r\n            return 1;\r\n        }\r\n    }\r\n    return defaultComparator(a, b);\r\n}\r\nfunction snippetDownComparator(a, b) {\r\n    if (a.completion.kind !== b.completion.kind) {\r\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\r\n            return 1;\r\n        }\r\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\r\n            return -1;\r\n        }\r\n    }\r\n    return defaultComparator(a, b);\r\n}\r\nconst _snippetComparators = new Map();\r\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\r\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\r\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\r\nexport function getSuggestionComparator(snippetConfig) {\r\n    return _snippetComparators.get(snippetConfig);\r\n}\r\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\r\n    assertType(URI.isUri(uri));\r\n    assertType(Position.isIPosition(position));\r\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\r\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\r\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\r\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\r\n    try {\r\n        const result = {\r\n            incomplete: false,\r\n            suggestions: []\r\n        };\r\n        const resolving = [];\r\n        const actualPosition = ref.object.textEditorModel.validatePosition(position);\r\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, actualPosition, undefined, { triggerCharacter: triggerCharacter !== null && triggerCharacter !== void 0 ? triggerCharacter : undefined, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\r\n        for (const item of completions.items) {\r\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\r\n                resolving.push(item.resolve(CancellationToken.None));\r\n            }\r\n            result.incomplete = result.incomplete || item.container.incomplete;\r\n            result.suggestions.push(item.completion);\r\n        }\r\n        try {\r\n            yield Promise.all(resolving);\r\n            return result;\r\n        }\r\n        finally {\r\n            setTimeout(() => completions.disposable.dispose(), 100);\r\n        }\r\n    }\r\n    finally {\r\n        ref.dispose();\r\n    }\r\n}));\r\nexport function showSimpleSuggestions(editor, provider) {\r\n    var _a;\r\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\r\n}\r\nexport class QuickSuggestionsOptions {\r\n    static isAllOff(config) {\r\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\r\n    }\r\n    static isAllOn(config) {\r\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\r\n    }\r\n    static valueFor(config, tokenType) {\r\n        switch (tokenType) {\r\n            case 1 /* StandardTokenType.Comment */: return config.comments;\r\n            case 2 /* StandardTokenType.String */: return config.strings;\r\n            default: return config.other;\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar SnippetSession_1;\r\nimport { groupBy } from '../../../../base/common/arrays.js';\r\nimport { dispose } from '../../../../base/common/lifecycle.js';\r\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\r\nimport './snippetSession.css';\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { ILabelService } from '../../../../platform/label/common/label.js';\r\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\r\nimport { Choice, Placeholder, SnippetParser, Text, TextmateSnippet } from './snippetParser.js';\r\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\r\nexport class OneSnippet {\r\n    constructor(_editor, _snippet, _snippetLineLeadingWhitespace) {\r\n        this._editor = _editor;\r\n        this._snippet = _snippet;\r\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\r\n        this._offset = -1;\r\n        this._nestingLevel = 1;\r\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\r\n        this._placeholderGroupsIdx = -1;\r\n    }\r\n    initialize(textChange) {\r\n        this._offset = textChange.newPosition;\r\n    }\r\n    dispose() {\r\n        if (this._placeholderDecorations) {\r\n            this._editor.removeDecorations([...this._placeholderDecorations.values()]);\r\n        }\r\n        this._placeholderGroups.length = 0;\r\n    }\r\n    _initDecorations() {\r\n        if (this._offset === -1) {\r\n            throw new Error(`Snippet not initialized!`);\r\n        }\r\n        if (this._placeholderDecorations) {\r\n            // already initialized\r\n            return;\r\n        }\r\n        this._placeholderDecorations = new Map();\r\n        const model = this._editor.getModel();\r\n        this._editor.changeDecorations(accessor => {\r\n            // create a decoration for each placeholder\r\n            for (const placeholder of this._snippet.placeholders) {\r\n                const placeholderOffset = this._snippet.offset(placeholder);\r\n                const placeholderLen = this._snippet.fullLen(placeholder);\r\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\r\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\r\n                const handle = accessor.addDecoration(range, options);\r\n                this._placeholderDecorations.set(placeholder, handle);\r\n            }\r\n        });\r\n    }\r\n    move(fwd) {\r\n        if (!this._editor.hasModel()) {\r\n            return [];\r\n        }\r\n        this._initDecorations();\r\n        // Transform placeholder text if necessary\r\n        if (this._placeholderGroupsIdx >= 0) {\r\n            const operations = [];\r\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\r\n                // Check if the placeholder has a transformation\r\n                if (placeholder.transform) {\r\n                    const id = this._placeholderDecorations.get(placeholder);\r\n                    const range = this._editor.getModel().getDecorationRange(id);\r\n                    const currentValue = this._editor.getModel().getValueInRange(range);\r\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\r\n                    // fix indentation for transformed lines\r\n                    for (let i = 1; i < transformedValueLines.length; i++) {\r\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\r\n                    }\r\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\r\n                }\r\n            }\r\n            if (operations.length > 0) {\r\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\r\n            }\r\n        }\r\n        let couldSkipThisPlaceholder = false;\r\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\r\n            this._placeholderGroupsIdx += 1;\r\n            couldSkipThisPlaceholder = true;\r\n        }\r\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\r\n            this._placeholderGroupsIdx -= 1;\r\n            couldSkipThisPlaceholder = true;\r\n        }\r\n        else {\r\n            // the selection of the current placeholder might\r\n            // not acurate any more -> simply restore it\r\n        }\r\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\r\n            const activePlaceholders = new Set();\r\n            // change stickiness to always grow when typing at its edges\r\n            // because these decorations represent the currently active\r\n            // tabstop.\r\n            // Special case #1: reaching the final tabstop\r\n            // Special case #2: placeholders enclosing active placeholders\r\n            const selections = [];\r\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\r\n                const id = this._placeholderDecorations.get(placeholder);\r\n                const range = this._editor.getModel().getDecorationRange(id);\r\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\r\n                // consider to skip this placeholder index when the decoration\r\n                // range is empty but when the placeholder wasn't. that's a strong\r\n                // hint that the placeholder has been deleted. (all placeholder must match this)\r\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\r\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\r\n                activePlaceholders.add(placeholder);\r\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\r\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\r\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\r\n                    activePlaceholders.add(enclosingPlaceholder);\r\n                }\r\n            }\r\n            // change stickness to never grow when typing at its edges\r\n            // so that in-active tabstops never grow\r\n            for (const [placeholder, id] of this._placeholderDecorations) {\r\n                if (!activePlaceholders.has(placeholder)) {\r\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\r\n                }\r\n            }\r\n            return selections;\r\n        });\r\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\r\n    }\r\n    _hasPlaceholderBeenCollapsed(placeholder) {\r\n        // A placeholder is empty when it wasn't empty when authored but\r\n        // when its tracking decoration is empty. This also applies to all\r\n        // potential parent placeholders\r\n        let marker = placeholder;\r\n        while (marker) {\r\n            if (marker instanceof Placeholder) {\r\n                const id = this._placeholderDecorations.get(marker);\r\n                const range = this._editor.getModel().getDecorationRange(id);\r\n                if (range.isEmpty() && marker.toString().length > 0) {\r\n                    return true;\r\n                }\r\n            }\r\n            marker = marker.parent;\r\n        }\r\n        return false;\r\n    }\r\n    get isAtFirstPlaceholder() {\r\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\r\n    }\r\n    get isAtLastPlaceholder() {\r\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\r\n    }\r\n    get hasPlaceholder() {\r\n        return this._snippet.placeholders.length > 0;\r\n    }\r\n    /**\r\n     * A snippet is trivial when it has no placeholder or only a final placeholder at\r\n     * its very end\r\n     */\r\n    get isTrivialSnippet() {\r\n        if (this._snippet.placeholders.length === 0) {\r\n            return true;\r\n        }\r\n        if (this._snippet.placeholders.length === 1) {\r\n            const [placeholder] = this._snippet.placeholders;\r\n            if (placeholder.isFinalTabstop) {\r\n                if (this._snippet.rightMostDescendant === placeholder) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    computePossibleSelections() {\r\n        const result = new Map();\r\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\r\n            let ranges;\r\n            for (const placeholder of placeholdersWithEqualIndex) {\r\n                if (placeholder.isFinalTabstop) {\r\n                    // ignore those\r\n                    break;\r\n                }\r\n                if (!ranges) {\r\n                    ranges = [];\r\n                    result.set(placeholder.index, ranges);\r\n                }\r\n                const id = this._placeholderDecorations.get(placeholder);\r\n                const range = this._editor.getModel().getDecorationRange(id);\r\n                if (!range) {\r\n                    // one of the placeholder lost its decoration and\r\n                    // therefore we bail out and pretend the placeholder\r\n                    // (with its mirrors) doesn't exist anymore.\r\n                    result.delete(placeholder.index);\r\n                    break;\r\n                }\r\n                ranges.push(range);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    get activeChoice() {\r\n        if (!this._placeholderDecorations) {\r\n            return undefined;\r\n        }\r\n        const placeholder = this._placeholderGroups[this._placeholderGroupsIdx][0];\r\n        if (!(placeholder === null || placeholder === void 0 ? void 0 : placeholder.choice)) {\r\n            return undefined;\r\n        }\r\n        const id = this._placeholderDecorations.get(placeholder);\r\n        if (!id) {\r\n            return undefined;\r\n        }\r\n        const range = this._editor.getModel().getDecorationRange(id);\r\n        if (!range) {\r\n            return undefined;\r\n        }\r\n        return { range, choice: placeholder.choice };\r\n    }\r\n    get hasChoice() {\r\n        let result = false;\r\n        this._snippet.walk(marker => {\r\n            result = marker instanceof Choice;\r\n            return !result;\r\n        });\r\n        return result;\r\n    }\r\n    merge(others) {\r\n        const model = this._editor.getModel();\r\n        this._nestingLevel *= 10;\r\n        this._editor.changeDecorations(accessor => {\r\n            // For each active placeholder take one snippet and merge it\r\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\r\n            // everything is sorted by editor selection we can simply remove\r\n            // elements from the beginning of the array\r\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\r\n                const nested = others.shift();\r\n                console.assert(nested._offset !== -1);\r\n                console.assert(!nested._placeholderDecorations);\r\n                // Massage placeholder-indicies of the nested snippet to be\r\n                // sorted right after the insertion point. This ensures we move\r\n                // through the placeholders in the correct order\r\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\r\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\r\n                    if (nestedPlaceholder.isFinalTabstop) {\r\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\r\n                    }\r\n                    else {\r\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\r\n                    }\r\n                }\r\n                this._snippet.replace(placeholder, nested._snippet.children);\r\n                // Remove the placeholder at which position are inserting\r\n                // the snippet and also remove its decoration.\r\n                const id = this._placeholderDecorations.get(placeholder);\r\n                accessor.removeDecoration(id);\r\n                this._placeholderDecorations.delete(placeholder);\r\n                // For each *new* placeholder we create decoration to monitor\r\n                // how and if it grows/shrinks.\r\n                for (const placeholder of nested._snippet.placeholders) {\r\n                    const placeholderOffset = nested._snippet.offset(placeholder);\r\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\r\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\r\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\r\n                    this._placeholderDecorations.set(placeholder, handle);\r\n                }\r\n            }\r\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\r\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\r\n        });\r\n    }\r\n}\r\nOneSnippet._decor = {\r\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\r\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\r\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\r\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\r\n};\r\nconst _defaultOptions = {\r\n    overwriteBefore: 0,\r\n    overwriteAfter: 0,\r\n    adjustWhitespace: true,\r\n    clipboardText: undefined,\r\n    overtypingCapturer: undefined\r\n};\r\nlet SnippetSession = SnippetSession_1 = class SnippetSession {\r\n    static adjustWhitespace(model, position, adjustIndentation, snippet, filter) {\r\n        const line = model.getLineContent(position.lineNumber);\r\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\r\n        // the snippet as inserted\r\n        let snippetTextString;\r\n        snippet.walk(marker => {\r\n            // all text elements that are not inside choice\r\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\r\n                return true;\r\n            }\r\n            // check with filter (iff provided)\r\n            if (filter && !filter.has(marker)) {\r\n                return true;\r\n            }\r\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\r\n            if (adjustIndentation) {\r\n                // adjust indentation of snippet test\r\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\r\n                // -all N+1 lines get extra-indented and normalized\r\n                // -the text start get extra-indented and normalized when following a linebreak\r\n                const offset = snippet.offset(marker);\r\n                if (offset === 0) {\r\n                    // snippet start\r\n                    lines[0] = model.normalizeIndentation(lines[0]);\r\n                }\r\n                else {\r\n                    // check if text start is after a linebreak\r\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\r\n                    const prevChar = snippetTextString.charCodeAt(offset - 1);\r\n                    if (prevChar === 10 /* CharCode.LineFeed */ || prevChar === 13 /* CharCode.CarriageReturn */) {\r\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\r\n                    }\r\n                }\r\n                for (let i = 1; i < lines.length; i++) {\r\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\r\n                }\r\n            }\r\n            const newValue = lines.join(model.getEOL());\r\n            if (newValue !== marker.value) {\r\n                marker.parent.replace(marker, [new Text(newValue)]);\r\n                snippetTextString = undefined;\r\n            }\r\n            return true;\r\n        });\r\n        return lineLeadingWhitespace;\r\n    }\r\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\r\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\r\n            // overwrite[Before|After] is compute using the position, not the whole\r\n            // selection. therefore we adjust the selection around that position\r\n            const { positionLineNumber, positionColumn } = selection;\r\n            const positionColumnBefore = positionColumn - overwriteBefore;\r\n            const positionColumnAfter = positionColumn + overwriteAfter;\r\n            const range = model.validateRange({\r\n                startLineNumber: positionLineNumber,\r\n                startColumn: positionColumnBefore,\r\n                endLineNumber: positionLineNumber,\r\n                endColumn: positionColumnAfter\r\n            });\r\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\r\n        }\r\n        return selection;\r\n    }\r\n    static createEditsAndSnippetsFromSelections(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\r\n        const edits = [];\r\n        const snippets = [];\r\n        if (!editor.hasModel()) {\r\n            return { edits, snippets };\r\n        }\r\n        const model = editor.getModel();\r\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\r\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\r\n        const readClipboardText = () => clipboardText;\r\n        // know what text the overwrite[Before|After] extensions\r\n        // of the primary curser have selected because only when\r\n        // secondary selections extend to the same text we can grow them\r\n        const firstBeforeText = model.getValueInRange(SnippetSession_1.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\r\n        const firstAfterText = model.getValueInRange(SnippetSession_1.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\r\n        // remember the first non-whitespace column to decide if\r\n        // `keepWhitespace` should be overruled for secondary selections\r\n        const firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\r\n        // sort selections by their start position but remeber\r\n        // the original index. that allows you to create correct\r\n        // offset-based selection logic without changing the\r\n        // primary selection\r\n        const indexedSelections = editor.getSelections()\r\n            .map((selection, idx) => ({ selection, idx }))\r\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\r\n        for (const { selection, idx } of indexedSelections) {\r\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\r\n            // compare if this matches the extensions of the primary selection\r\n            let extensionBefore = SnippetSession_1.adjustSelection(model, selection, overwriteBefore, 0);\r\n            let extensionAfter = SnippetSession_1.adjustSelection(model, selection, 0, overwriteAfter);\r\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\r\n                extensionBefore = selection;\r\n            }\r\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\r\n                extensionAfter = selection;\r\n            }\r\n            // merge the before and after selection into one\r\n            const snippetSelection = selection\r\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\r\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\r\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\r\n            // adjust the template string to match the indentation and\r\n            // whitespace rules of this insert location (can be different for each cursor)\r\n            // happens when being asked for (default) or when this is a secondary\r\n            // cursor and the leading whitespace is different\r\n            const start = snippetSelection.getStartPosition();\r\n            const snippetLineLeadingWhitespace = SnippetSession_1.adjustWhitespace(model, start, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), snippet);\r\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\r\n                modelBasedVariableResolver,\r\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(78 /* EditorOption.multiCursorPaste */) === 'spread'),\r\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\r\n                new CommentBasedVariableResolver(model, selection, languageConfigurationService),\r\n                new TimeBasedVariableResolver,\r\n                new WorkspaceBasedVariableResolver(workspaceService),\r\n                new RandomBasedVariableResolver,\r\n            ]));\r\n            // store snippets with the index of their originating selection.\r\n            // that ensures the primiary cursor stays primary despite not being\r\n            // the one with lowest start position\r\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\r\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\r\n            edits[idx]._isTracked = true;\r\n            snippets[idx] = new OneSnippet(editor, snippet, snippetLineLeadingWhitespace);\r\n        }\r\n        return { edits, snippets };\r\n    }\r\n    static createEditsAndSnippetsFromEdits(editor, snippetEdits, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\r\n        if (!editor.hasModel() || snippetEdits.length === 0) {\r\n            return { edits: [], snippets: [] };\r\n        }\r\n        const edits = [];\r\n        const model = editor.getModel();\r\n        const parser = new SnippetParser();\r\n        const snippet = new TextmateSnippet();\r\n        // snippet variables resolver\r\n        const resolver = new CompositeSnippetVariableResolver([\r\n            editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model)),\r\n            new ClipboardBasedVariableResolver(() => clipboardText, 0, editor.getSelections().length, editor.getOption(78 /* EditorOption.multiCursorPaste */) === 'spread'),\r\n            new SelectionBasedVariableResolver(model, editor.getSelection(), 0, overtypingCapturer),\r\n            new CommentBasedVariableResolver(model, editor.getSelection(), languageConfigurationService),\r\n            new TimeBasedVariableResolver,\r\n            new WorkspaceBasedVariableResolver(editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService))),\r\n            new RandomBasedVariableResolver,\r\n        ]);\r\n        //\r\n        snippetEdits = snippetEdits.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\r\n        let offset = 0;\r\n        for (let i = 0; i < snippetEdits.length; i++) {\r\n            const { range, template } = snippetEdits[i];\r\n            // gaps between snippet edits are appended as text nodes. this\r\n            // ensures placeholder-offsets are later correct\r\n            if (i > 0) {\r\n                const lastRange = snippetEdits[i - 1].range;\r\n                const textRange = Range.fromPositions(lastRange.getEndPosition(), range.getStartPosition());\r\n                const textNode = new Text(model.getValueInRange(textRange));\r\n                snippet.appendChild(textNode);\r\n                offset += textNode.value.length;\r\n            }\r\n            const newNodes = parser.parseFragment(template, snippet);\r\n            SnippetSession_1.adjustWhitespace(model, range.getStartPosition(), true, snippet, new Set(newNodes));\r\n            snippet.resolveVariables(resolver);\r\n            const snippetText = snippet.toString();\r\n            const snippetFragmentText = snippetText.slice(offset);\r\n            offset = snippetText.length;\r\n            // make edit\r\n            const edit = EditOperation.replace(range, snippetFragmentText);\r\n            edit.identifier = { major: i, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\r\n            edit._isTracked = true;\r\n            edits.push(edit);\r\n        }\r\n        //\r\n        parser.ensureFinalTabstop(snippet, enforceFinalTabstop, true);\r\n        return {\r\n            edits,\r\n            snippets: [new OneSnippet(editor, snippet, '')]\r\n        };\r\n    }\r\n    constructor(_editor, _template, _options = _defaultOptions, _languageConfigurationService) {\r\n        this._editor = _editor;\r\n        this._template = _template;\r\n        this._options = _options;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._templateMerges = [];\r\n        this._snippets = [];\r\n    }\r\n    dispose() {\r\n        dispose(this._snippets);\r\n    }\r\n    _logInfo() {\r\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\r\n    }\r\n    insert() {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        // make insert edit and start with first selections\r\n        const { edits, snippets } = typeof this._template === 'string'\r\n            ? SnippetSession_1.createEditsAndSnippetsFromSelections(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService)\r\n            : SnippetSession_1.createEditsAndSnippetsFromEdits(this._editor, this._template, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService);\r\n        this._snippets = snippets;\r\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\r\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\r\n            // so we need to look only at the undo edits relevant for us.\r\n            // Our edits have an identifier set so that's how we can distinguish them\r\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\r\n            for (let idx = 0; idx < snippets.length; idx++) {\r\n                snippets[idx].initialize(undoEdits[idx].textChange);\r\n            }\r\n            if (this._snippets[0].hasPlaceholder) {\r\n                return this._move(true);\r\n            }\r\n            else {\r\n                return undoEdits\r\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\r\n            }\r\n        });\r\n        this._editor.revealRange(this._editor.getSelections()[0]);\r\n    }\r\n    merge(template, options = _defaultOptions) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\r\n        const { edits, snippets } = SnippetSession_1.createEditsAndSnippetsFromSelections(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer, this._languageConfigurationService);\r\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\r\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\r\n            // so we need to look only at the undo edits relevant for us.\r\n            // Our edits have an identifier set so that's how we can distinguish them\r\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\r\n            for (let idx = 0; idx < snippets.length; idx++) {\r\n                snippets[idx].initialize(undoEdits[idx].textChange);\r\n            }\r\n            // Trivial snippets have no placeholder or are just the final placeholder. That means they\r\n            // are just text insertions and we don't need to merge the nested snippet into the existing\r\n            // snippet\r\n            const isTrivialSnippet = snippets[0].isTrivialSnippet;\r\n            if (!isTrivialSnippet) {\r\n                for (const snippet of this._snippets) {\r\n                    snippet.merge(snippets);\r\n                }\r\n                console.assert(snippets.length === 0);\r\n            }\r\n            if (this._snippets[0].hasPlaceholder && !isTrivialSnippet) {\r\n                return this._move(undefined);\r\n            }\r\n            else {\r\n                return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\r\n            }\r\n        });\r\n    }\r\n    next() {\r\n        const newSelections = this._move(true);\r\n        this._editor.setSelections(newSelections);\r\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\r\n    }\r\n    prev() {\r\n        const newSelections = this._move(false);\r\n        this._editor.setSelections(newSelections);\r\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\r\n    }\r\n    _move(fwd) {\r\n        const selections = [];\r\n        for (const snippet of this._snippets) {\r\n            const oneSelection = snippet.move(fwd);\r\n            selections.push(...oneSelection);\r\n        }\r\n        return selections;\r\n    }\r\n    get isAtFirstPlaceholder() {\r\n        return this._snippets[0].isAtFirstPlaceholder;\r\n    }\r\n    get isAtLastPlaceholder() {\r\n        return this._snippets[0].isAtLastPlaceholder;\r\n    }\r\n    get hasPlaceholder() {\r\n        return this._snippets[0].hasPlaceholder;\r\n    }\r\n    get hasChoice() {\r\n        return this._snippets[0].hasChoice;\r\n    }\r\n    get activeChoice() {\r\n        return this._snippets[0].activeChoice;\r\n    }\r\n    isSelectionWithinPlaceholders() {\r\n        if (!this.hasPlaceholder) {\r\n            return false;\r\n        }\r\n        const selections = this._editor.getSelections();\r\n        if (selections.length < this._snippets.length) {\r\n            // this means we started snippet mode with N\r\n            // selections and have M (N > M) selections.\r\n            // So one snippet is without selection -> cancel\r\n            return false;\r\n        }\r\n        const allPossibleSelections = new Map();\r\n        for (const snippet of this._snippets) {\r\n            const possibleSelections = snippet.computePossibleSelections();\r\n            // for the first snippet find the placeholder (and its ranges)\r\n            // that contain at least one selection. for all remaining snippets\r\n            // the same placeholder (and their ranges) must be used.\r\n            if (allPossibleSelections.size === 0) {\r\n                for (const [index, ranges] of possibleSelections) {\r\n                    ranges.sort(Range.compareRangesUsingStarts);\r\n                    for (const selection of selections) {\r\n                        if (ranges[0].containsRange(selection)) {\r\n                            allPossibleSelections.set(index, []);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (allPossibleSelections.size === 0) {\r\n                // return false if we couldn't associate a selection to\r\n                // this (the first) snippet\r\n                return false;\r\n            }\r\n            // add selections from 'this' snippet so that we know all\r\n            // selections for this placeholder\r\n            allPossibleSelections.forEach((array, index) => {\r\n                array.push(...possibleSelections.get(index));\r\n            });\r\n        }\r\n        // sort selections (and later placeholder-ranges). then walk both\r\n        // arrays and make sure the placeholder-ranges contain the corresponding\r\n        // selection\r\n        selections.sort(Range.compareRangesUsingStarts);\r\n        for (const [index, ranges] of allPossibleSelections) {\r\n            if (ranges.length !== selections.length) {\r\n                allPossibleSelections.delete(index);\r\n                continue;\r\n            }\r\n            ranges.sort(Range.compareRangesUsingStarts);\r\n            for (let i = 0; i < ranges.length; i++) {\r\n                if (!ranges[i].containsRange(selections[i])) {\r\n                    allPossibleSelections.delete(index);\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        // from all possible selections we have deleted those\r\n        // that don't match with the current selection. if we don't\r\n        // have any left, we don't have a selection anymore\r\n        return allPossibleSelections.size > 0;\r\n    }\r\n};\r\nSnippetSession = SnippetSession_1 = __decorate([\r\n    __param(3, ILanguageConfigurationService)\r\n], SnippetSession);\r\nexport { SnippetSession };\r\n", "import { hasDriveLetter } from './extpath.js';\r\nimport { isWindows } from './platform.js';\r\nexport function normalizeDriveLetter(path, isWindowsOS = isWindows) {\r\n    if (hasDriveLetter(path, isWindowsOS)) {\r\n        return path.charAt(0).toUpperCase() + path.slice(1);\r\n    }\r\n    return path;\r\n}\r\nlet normalizedUserHomeCached = Object.create(null);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\r\nimport * as path from '../../../../base/common/path.js';\r\nimport { dirname } from '../../../../base/common/resources.js';\r\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\r\nimport { generateUuid } from '../../../../base/common/uuid.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { Text } from './snippetParser.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier, isEmptyWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\r\nexport const KnownSnippetVariableNames = Object.freeze({\r\n    'CURRENT_YEAR': true,\r\n    'CURRENT_YEAR_SHORT': true,\r\n    'CURRENT_MONTH': true,\r\n    'CURRENT_DATE': true,\r\n    'CURRENT_HOUR': true,\r\n    'CURRENT_MINUTE': true,\r\n    'CURRENT_SECOND': true,\r\n    'CURRENT_DAY_NAME': true,\r\n    'CURRENT_DAY_NAME_SHORT': true,\r\n    'CURRENT_MONTH_NAME': true,\r\n    'CURRENT_MONTH_NAME_SHORT': true,\r\n    'CURRENT_SECONDS_UNIX': true,\r\n    'CURRENT_TIMEZONE_OFFSET': true,\r\n    'SELECTION': true,\r\n    'CLIPBOARD': true,\r\n    'TM_SELECTED_TEXT': true,\r\n    'TM_CURRENT_LINE': true,\r\n    'TM_CURRENT_WORD': true,\r\n    'TM_LINE_INDEX': true,\r\n    'TM_LINE_NUMBER': true,\r\n    'TM_FILENAME': true,\r\n    'TM_FILENAME_BASE': true,\r\n    'TM_DIRECTORY': true,\r\n    'TM_FILEPATH': true,\r\n    'CURSOR_INDEX': true, // 0-offset\r\n    'CURSOR_NUMBER': true, // 1-offset\r\n    'RELATIVE_FILEPATH': true,\r\n    'BLOCK_COMMENT_START': true,\r\n    'BLOCK_COMMENT_END': true,\r\n    'LINE_COMMENT': true,\r\n    'WORKSPACE_NAME': true,\r\n    'WORKSPACE_FOLDER': true,\r\n    'RANDOM': true,\r\n    'RANDOM_HEX': true,\r\n    'UUID': true\r\n});\r\nexport class CompositeSnippetVariableResolver {\r\n    constructor(_delegates) {\r\n        this._delegates = _delegates;\r\n        //\r\n    }\r\n    resolve(variable) {\r\n        for (const delegate of this._delegates) {\r\n            const value = delegate.resolve(variable);\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexport class SelectionBasedVariableResolver {\r\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\r\n        this._model = _model;\r\n        this._selection = _selection;\r\n        this._selectionIdx = _selectionIdx;\r\n        this._overtypingCapturer = _overtypingCapturer;\r\n        //\r\n    }\r\n    resolve(variable) {\r\n        const { name } = variable;\r\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\r\n            let value = this._model.getValueInRange(this._selection) || undefined;\r\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\r\n            // If there was no selected text, try to get last overtyped text\r\n            if (!value && this._overtypingCapturer) {\r\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\r\n                if (info) {\r\n                    value = info.value;\r\n                    isMultiline = info.multiline;\r\n                }\r\n            }\r\n            if (value && isMultiline && variable.snippet) {\r\n                // Selection is a multiline string which we indentation we now\r\n                // need to adjust. We compare the indentation of this variable\r\n                // with the indentation at the editor position and add potential\r\n                // extra indentation to the value\r\n                const line = this._model.getLineContent(this._selection.startLineNumber);\r\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\r\n                let varLeadingWhitespace = lineLeadingWhitespace;\r\n                variable.snippet.walk(marker => {\r\n                    if (marker === variable) {\r\n                        return false;\r\n                    }\r\n                    if (marker instanceof Text) {\r\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\r\n                    }\r\n                    return true;\r\n                });\r\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\r\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\r\n            }\r\n            return value;\r\n        }\r\n        else if (name === 'TM_CURRENT_LINE') {\r\n            return this._model.getLineContent(this._selection.positionLineNumber);\r\n        }\r\n        else if (name === 'TM_CURRENT_WORD') {\r\n            const info = this._model.getWordAtPosition({\r\n                lineNumber: this._selection.positionLineNumber,\r\n                column: this._selection.positionColumn\r\n            });\r\n            return info && info.word || undefined;\r\n        }\r\n        else if (name === 'TM_LINE_INDEX') {\r\n            return String(this._selection.positionLineNumber - 1);\r\n        }\r\n        else if (name === 'TM_LINE_NUMBER') {\r\n            return String(this._selection.positionLineNumber);\r\n        }\r\n        else if (name === 'CURSOR_INDEX') {\r\n            return String(this._selectionIdx);\r\n        }\r\n        else if (name === 'CURSOR_NUMBER') {\r\n            return String(this._selectionIdx + 1);\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexport class ModelBasedVariableResolver {\r\n    constructor(_labelService, _model) {\r\n        this._labelService = _labelService;\r\n        this._model = _model;\r\n        //\r\n    }\r\n    resolve(variable) {\r\n        const { name } = variable;\r\n        if (name === 'TM_FILENAME') {\r\n            return path.basename(this._model.uri.fsPath);\r\n        }\r\n        else if (name === 'TM_FILENAME_BASE') {\r\n            const name = path.basename(this._model.uri.fsPath);\r\n            const idx = name.lastIndexOf('.');\r\n            if (idx <= 0) {\r\n                return name;\r\n            }\r\n            else {\r\n                return name.slice(0, idx);\r\n            }\r\n        }\r\n        else if (name === 'TM_DIRECTORY') {\r\n            if (path.dirname(this._model.uri.fsPath) === '.') {\r\n                return '';\r\n            }\r\n            return this._labelService.getUriLabel(dirname(this._model.uri));\r\n        }\r\n        else if (name === 'TM_FILEPATH') {\r\n            return this._labelService.getUriLabel(this._model.uri);\r\n        }\r\n        else if (name === 'RELATIVE_FILEPATH') {\r\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexport class ClipboardBasedVariableResolver {\r\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\r\n        this._readClipboardText = _readClipboardText;\r\n        this._selectionIdx = _selectionIdx;\r\n        this._selectionCount = _selectionCount;\r\n        this._spread = _spread;\r\n        //\r\n    }\r\n    resolve(variable) {\r\n        if (variable.name !== 'CLIPBOARD') {\r\n            return undefined;\r\n        }\r\n        const clipboardText = this._readClipboardText();\r\n        if (!clipboardText) {\r\n            return undefined;\r\n        }\r\n        // `spread` is assigning each cursor a line of the clipboard\r\n        // text whenever there the line count equals the cursor count\r\n        // and when enabled\r\n        if (this._spread) {\r\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\r\n            if (lines.length === this._selectionCount) {\r\n                return lines[this._selectionIdx];\r\n            }\r\n        }\r\n        return clipboardText;\r\n    }\r\n}\r\nlet CommentBasedVariableResolver = class CommentBasedVariableResolver {\r\n    constructor(_model, _selection, _languageConfigurationService) {\r\n        this._model = _model;\r\n        this._selection = _selection;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        //\r\n    }\r\n    resolve(variable) {\r\n        const { name } = variable;\r\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\r\n        const config = this._languageConfigurationService.getLanguageConfiguration(langId).comments;\r\n        if (!config) {\r\n            return undefined;\r\n        }\r\n        if (name === 'LINE_COMMENT') {\r\n            return config.lineCommentToken || undefined;\r\n        }\r\n        else if (name === 'BLOCK_COMMENT_START') {\r\n            return config.blockCommentStartToken || undefined;\r\n        }\r\n        else if (name === 'BLOCK_COMMENT_END') {\r\n            return config.blockCommentEndToken || undefined;\r\n        }\r\n        return undefined;\r\n    }\r\n};\r\nCommentBasedVariableResolver = __decorate([\r\n    __param(2, ILanguageConfigurationService)\r\n], CommentBasedVariableResolver);\r\nexport { CommentBasedVariableResolver };\r\nexport class TimeBasedVariableResolver {\r\n    constructor() {\r\n        this._date = new Date();\r\n    }\r\n    resolve(variable) {\r\n        const { name } = variable;\r\n        if (name === 'CURRENT_YEAR') {\r\n            return String(this._date.getFullYear());\r\n        }\r\n        else if (name === 'CURRENT_YEAR_SHORT') {\r\n            return String(this._date.getFullYear()).slice(-2);\r\n        }\r\n        else if (name === 'CURRENT_MONTH') {\r\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\r\n        }\r\n        else if (name === 'CURRENT_DATE') {\r\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\r\n        }\r\n        else if (name === 'CURRENT_HOUR') {\r\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\r\n        }\r\n        else if (name === 'CURRENT_MINUTE') {\r\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\r\n        }\r\n        else if (name === 'CURRENT_SECOND') {\r\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\r\n        }\r\n        else if (name === 'CURRENT_DAY_NAME') {\r\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\r\n        }\r\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\r\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\r\n        }\r\n        else if (name === 'CURRENT_MONTH_NAME') {\r\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\r\n        }\r\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\r\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\r\n        }\r\n        else if (name === 'CURRENT_SECONDS_UNIX') {\r\n            return String(Math.floor(this._date.getTime() / 1000));\r\n        }\r\n        else if (name === 'CURRENT_TIMEZONE_OFFSET') {\r\n            const rawTimeOffset = this._date.getTimezoneOffset();\r\n            const sign = rawTimeOffset > 0 ? '-' : '+';\r\n            const hours = Math.trunc(Math.abs(rawTimeOffset / 60));\r\n            const hoursString = (hours < 10 ? '0' + hours : hours);\r\n            const minutes = Math.abs(rawTimeOffset) - hours * 60;\r\n            const minutesString = (minutes < 10 ? '0' + minutes : minutes);\r\n            return sign + hoursString + ':' + minutesString;\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\r\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\r\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\r\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\r\nexport class WorkspaceBasedVariableResolver {\r\n    constructor(_workspaceService) {\r\n        this._workspaceService = _workspaceService;\r\n        //\r\n    }\r\n    resolve(variable) {\r\n        if (!this._workspaceService) {\r\n            return undefined;\r\n        }\r\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\r\n        if (isEmptyWorkspaceIdentifier(workspaceIdentifier)) {\r\n            return undefined;\r\n        }\r\n        if (variable.name === 'WORKSPACE_NAME') {\r\n            return this._resolveWorkspaceName(workspaceIdentifier);\r\n        }\r\n        else if (variable.name === 'WORKSPACE_FOLDER') {\r\n            return this._resoveWorkspacePath(workspaceIdentifier);\r\n        }\r\n        return undefined;\r\n    }\r\n    _resolveWorkspaceName(workspaceIdentifier) {\r\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\r\n            return path.basename(workspaceIdentifier.uri.path);\r\n        }\r\n        let filename = path.basename(workspaceIdentifier.configPath.path);\r\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\r\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\r\n        }\r\n        return filename;\r\n    }\r\n    _resoveWorkspacePath(workspaceIdentifier) {\r\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\r\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\r\n        }\r\n        const filename = path.basename(workspaceIdentifier.configPath.path);\r\n        let folderpath = workspaceIdentifier.configPath.fsPath;\r\n        if (folderpath.endsWith(filename)) {\r\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\r\n        }\r\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\r\n    }\r\n}\r\nexport class RandomBasedVariableResolver {\r\n    resolve(variable) {\r\n        const { name } = variable;\r\n        if (name === 'RANDOM') {\r\n            return Math.random().toString().slice(-6);\r\n        }\r\n        else if (name === 'RANDOM_HEX') {\r\n            return Math.random().toString(16).slice(-6);\r\n        }\r\n        else if (name === 'UUID') {\r\n            return generateUuid();\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { SelectedSuggestionInfo } from '../../../common/languages.js';\r\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\r\nimport { SnippetSession } from '../../snippet/browser/snippetSession.js';\r\nimport { SuggestController } from '../../suggest/browser/suggestController.js';\r\nimport { observableValue, transaction } from '../../../../base/common/observable.js';\r\nimport { SingleTextEdit } from './singleTextEdit.js';\r\nimport { compareBy, numberComparator } from '../../../../base/common/arrays.js';\r\nimport { findFirstMaxBy } from '../../../../base/common/arraysFind.js';\r\nexport class SuggestWidgetAdaptor extends Disposable {\r\n    get selectedItem() {\r\n        return this._selectedItem;\r\n    }\r\n    constructor(editor, suggestControllerPreselector, checkModelVersion, onWillAccept) {\r\n        super();\r\n        this.editor = editor;\r\n        this.suggestControllerPreselector = suggestControllerPreselector;\r\n        this.checkModelVersion = checkModelVersion;\r\n        this.onWillAccept = onWillAccept;\r\n        this.isSuggestWidgetVisible = false;\r\n        this.isShiftKeyPressed = false;\r\n        this._isActive = false;\r\n        this._currentSuggestItemInfo = undefined;\r\n        this._selectedItem = observableValue(this, undefined);\r\n        // See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab\r\n        this._register(editor.onKeyDown(e => {\r\n            if (e.shiftKey && !this.isShiftKeyPressed) {\r\n                this.isShiftKeyPressed = true;\r\n                this.update(this._isActive);\r\n            }\r\n        }));\r\n        this._register(editor.onKeyUp(e => {\r\n            if (e.shiftKey && this.isShiftKeyPressed) {\r\n                this.isShiftKeyPressed = false;\r\n                this.update(this._isActive);\r\n            }\r\n        }));\r\n        const suggestController = SuggestController.get(this.editor);\r\n        if (suggestController) {\r\n            this._register(suggestController.registerSelector({\r\n                priority: 100,\r\n                select: (model, pos, suggestItems) => {\r\n                    var _a;\r\n                    transaction(tx => this.checkModelVersion(tx));\r\n                    const textModel = this.editor.getModel();\r\n                    if (!textModel) {\r\n                        // Should not happen\r\n                        return -1;\r\n                    }\r\n                    const itemToPreselect = (_a = this.suggestControllerPreselector()) === null || _a === void 0 ? void 0 : _a.removeCommonPrefix(textModel);\r\n                    if (!itemToPreselect) {\r\n                        return -1;\r\n                    }\r\n                    const position = Position.lift(pos);\r\n                    const candidates = suggestItems\r\n                        .map((suggestItem, index) => {\r\n                        const suggestItemInfo = SuggestItemInfo.fromSuggestion(suggestController, textModel, position, suggestItem, this.isShiftKeyPressed);\r\n                        const suggestItemTextEdit = suggestItemInfo.toSingleTextEdit().removeCommonPrefix(textModel);\r\n                        const valid = itemToPreselect.augments(suggestItemTextEdit);\r\n                        return { index, valid, prefixLength: suggestItemTextEdit.text.length, suggestItem };\r\n                    })\r\n                        .filter(item => item && item.valid && item.prefixLength > 0);\r\n                    const result = findFirstMaxBy(candidates, compareBy(s => s.prefixLength, numberComparator));\r\n                    return result ? result.index : -1;\r\n                }\r\n            }));\r\n            let isBoundToSuggestWidget = false;\r\n            const bindToSuggestWidget = () => {\r\n                if (isBoundToSuggestWidget) {\r\n                    return;\r\n                }\r\n                isBoundToSuggestWidget = true;\r\n                this._register(suggestController.widget.value.onDidShow(() => {\r\n                    this.isSuggestWidgetVisible = true;\r\n                    this.update(true);\r\n                }));\r\n                this._register(suggestController.widget.value.onDidHide(() => {\r\n                    this.isSuggestWidgetVisible = false;\r\n                    this.update(false);\r\n                }));\r\n                this._register(suggestController.widget.value.onDidFocus(() => {\r\n                    this.isSuggestWidgetVisible = true;\r\n                    this.update(true);\r\n                }));\r\n            };\r\n            this._register(Event.once(suggestController.model.onDidTrigger)(e => {\r\n                bindToSuggestWidget();\r\n            }));\r\n            this._register(suggestController.onWillInsertSuggestItem(e => {\r\n                const position = this.editor.getPosition();\r\n                const model = this.editor.getModel();\r\n                if (!position || !model) {\r\n                    return undefined;\r\n                }\r\n                const suggestItemInfo = SuggestItemInfo.fromSuggestion(suggestController, model, position, e.item, this.isShiftKeyPressed);\r\n                this.onWillAccept(suggestItemInfo);\r\n            }));\r\n        }\r\n        this.update(this._isActive);\r\n    }\r\n    update(newActive) {\r\n        const newInlineCompletion = this.getSuggestItemInfo();\r\n        if (this._isActive !== newActive || !suggestItemInfoEquals(this._currentSuggestItemInfo, newInlineCompletion)) {\r\n            this._isActive = newActive;\r\n            this._currentSuggestItemInfo = newInlineCompletion;\r\n            transaction(tx => {\r\n                /** @description Update state from suggest widget */\r\n                this.checkModelVersion(tx);\r\n                this._selectedItem.set(this._isActive ? this._currentSuggestItemInfo : undefined, tx);\r\n            });\r\n        }\r\n    }\r\n    getSuggestItemInfo() {\r\n        const suggestController = SuggestController.get(this.editor);\r\n        if (!suggestController || !this.isSuggestWidgetVisible) {\r\n            return undefined;\r\n        }\r\n        const focusedItem = suggestController.widget.value.getFocusedItem();\r\n        const position = this.editor.getPosition();\r\n        const model = this.editor.getModel();\r\n        if (!focusedItem || !position || !model) {\r\n            return undefined;\r\n        }\r\n        return SuggestItemInfo.fromSuggestion(suggestController, model, position, focusedItem.item, this.isShiftKeyPressed);\r\n    }\r\n    stopForceRenderingAbove() {\r\n        const suggestController = SuggestController.get(this.editor);\r\n        suggestController === null || suggestController === void 0 ? void 0 : suggestController.stopForceRenderingAbove();\r\n    }\r\n    forceRenderingAbove() {\r\n        const suggestController = SuggestController.get(this.editor);\r\n        suggestController === null || suggestController === void 0 ? void 0 : suggestController.forceRenderingAbove();\r\n    }\r\n}\r\nexport class SuggestItemInfo {\r\n    static fromSuggestion(suggestController, model, position, item, toggleMode) {\r\n        let { insertText } = item.completion;\r\n        let isSnippetText = false;\r\n        if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */) {\r\n            const snippet = new SnippetParser().parse(insertText);\r\n            if (snippet.children.length < 100) {\r\n                // Adjust whitespace is expensive.\r\n                SnippetSession.adjustWhitespace(model, position, true, snippet);\r\n            }\r\n            insertText = snippet.toString();\r\n            isSnippetText = true;\r\n        }\r\n        const info = suggestController.getOverwriteInfo(item, toggleMode);\r\n        return new SuggestItemInfo(Range.fromPositions(position.delta(0, -info.overwriteBefore), position.delta(0, Math.max(info.overwriteAfter, 0))), insertText, item.completion.kind, isSnippetText);\r\n    }\r\n    constructor(range, insertText, completionItemKind, isSnippetText) {\r\n        this.range = range;\r\n        this.insertText = insertText;\r\n        this.completionItemKind = completionItemKind;\r\n        this.isSnippetText = isSnippetText;\r\n    }\r\n    equals(other) {\r\n        return this.range.equalsRange(other.range)\r\n            && this.insertText === other.insertText\r\n            && this.completionItemKind === other.completionItemKind\r\n            && this.isSnippetText === other.isSnippetText;\r\n    }\r\n    toSelectedSuggestionInfo() {\r\n        return new SelectedSuggestionInfo(this.range, this.insertText, this.completionItemKind, this.isSnippetText);\r\n    }\r\n    toSingleTextEdit() {\r\n        return new SingleTextEdit(this.range, this.insertText);\r\n    }\r\n}\r\nfunction suggestItemInfoEquals(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    if (!a || !b) {\r\n        return false;\r\n    }\r\n    return a.equals(b);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar SuggestController_1;\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { IdleValue } from '../../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Emitter, Event } from '../../../../base/common/event.js';\r\nimport { KeyCodeChord } from '../../../../base/common/keybindings.js';\r\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { assertType, isObject } from '../../../../base/common/types.js';\r\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\r\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\r\nimport { ISuggestMemoryService } from './suggestMemory.js';\r\nimport { WordContextKey } from './wordContextKey.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ILogService } from '../../../../platform/log/common/log.js';\r\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\r\nimport { SuggestAlternatives } from './suggestAlternatives.js';\r\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\r\nimport { SuggestModel } from './suggestModel.js';\r\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\r\nimport { SuggestWidget } from './suggestWidget.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nimport { basename, extname } from '../../../../base/common/resources.js';\r\nimport { hash } from '../../../../base/common/hash.js';\r\n// sticky suggest widget which doesn't disappear on focus out and such\r\nconst _sticky = false;\r\nclass LineSuffix {\r\n    constructor(_model, _position) {\r\n        this._model = _model;\r\n        this._position = _position;\r\n        // spy on what's happening right of the cursor. two cases:\r\n        // 1. end of line -> check that it's still end of line\r\n        // 2. mid of line -> add a marker and compute the delta\r\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\r\n        if (maxColumn !== _position.column) {\r\n            const offset = _model.getOffsetAt(_position);\r\n            const end = _model.getPositionAt(offset + 1);\r\n            this._marker = _model.deltaDecorations([], [{\r\n                    range: Range.fromPositions(_position, end),\r\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\r\n                }]);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._marker && !this._model.isDisposed()) {\r\n            this._model.deltaDecorations(this._marker, []);\r\n        }\r\n    }\r\n    delta(position) {\r\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\r\n            // bail out early if things seems fishy\r\n            return 0;\r\n        }\r\n        // read the marker (in case suggest was triggered at line end) or compare\r\n        // the cursor to the line end.\r\n        if (this._marker) {\r\n            const range = this._model.getDecorationRange(this._marker[0]);\r\n            const end = this._model.getOffsetAt(range.getStartPosition());\r\n            return end - this._model.getOffsetAt(position);\r\n        }\r\n        else {\r\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\r\n        }\r\n    }\r\n}\r\nlet SuggestController = SuggestController_1 = class SuggestController {\r\n    static get(editor) {\r\n        return editor.getContribution(SuggestController_1.ID);\r\n    }\r\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\r\n        this._memoryService = _memoryService;\r\n        this._commandService = _commandService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._instantiationService = _instantiationService;\r\n        this._logService = _logService;\r\n        this._telemetryService = _telemetryService;\r\n        this._lineSuffix = new MutableDisposable();\r\n        this._toDispose = new DisposableStore();\r\n        this._selectors = new PriorityRegistry(s => s.priority);\r\n        this._onWillInsertSuggestItem = new Emitter();\r\n        this.onWillInsertSuggestItem = this._onWillInsertSuggestItem.event;\r\n        this.editor = editor;\r\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\r\n        // default selector\r\n        this._selectors.register({\r\n            priority: 0,\r\n            select: (model, pos, items) => this._memoryService.select(model, pos, items)\r\n        });\r\n        // context key: update insert/replace mode\r\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\r\n        ctxInsertMode.set(editor.getOption(117 /* EditorOption.suggest */).insertMode);\r\n        this._toDispose.add(this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(117 /* EditorOption.suggest */).insertMode)));\r\n        this.widget = this._toDispose.add(new IdleValue(() => {\r\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\r\n            this._toDispose.add(widget);\r\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0 /* InsertFlags.None */), this));\r\n            // Wire up logic to accept a suggestion on certain characters\r\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, this.model, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\r\n            this._toDispose.add(commitCharacterController);\r\n            // Wire up makes text edit context key\r\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\r\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\r\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\r\n            this._toDispose.add(toDisposable(() => {\r\n                ctxMakesTextEdit.reset();\r\n                ctxHasInsertAndReplace.reset();\r\n                ctxCanResolve.reset();\r\n            }));\r\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\r\n                // (ctx: makesTextEdit)\r\n                const position = this.editor.getPosition();\r\n                const startColumn = item.editStart.column;\r\n                const endColumn = position.column;\r\n                let value = true;\r\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\r\n                    && this.model.state === 2 /* State.Auto */\r\n                    && !item.completion.additionalTextEdits\r\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\r\n                    && endColumn - startColumn === item.completion.insertText.length) {\r\n                    const oldText = this.editor.getModel().getValueInRange({\r\n                        startLineNumber: position.lineNumber,\r\n                        startColumn,\r\n                        endLineNumber: position.lineNumber,\r\n                        endColumn\r\n                    });\r\n                    value = oldText !== item.completion.insertText;\r\n                }\r\n                ctxMakesTextEdit.set(value);\r\n                // (ctx: hasInsertAndReplaceRange)\r\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\r\n                // (ctx: canResolve)\r\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\r\n            }));\r\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\r\n                // cmd + c on macOS, ctrl + c on Win / Linux\r\n                if (e.toKeyCodeChord().equals(new KeyCodeChord(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\r\n                    (platform.isMacintosh && e.toKeyCodeChord().equals(new KeyCodeChord(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\r\n                    e.stopPropagation();\r\n                    return;\r\n                }\r\n                if (!e.toKeyCodeChord().isModifierKey()) {\r\n                    this.editor.focus();\r\n                }\r\n            }));\r\n            return widget;\r\n        }));\r\n        // Wire up text overtyping capture\r\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\r\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\r\n        }));\r\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\r\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\r\n        }));\r\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\r\n        this._toDispose.add(this.model.onDidTrigger(e => {\r\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\r\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\r\n        }));\r\n        this._toDispose.add(this.model.onDidSuggest(e => {\r\n            if (e.triggerOptions.shy) {\r\n                return;\r\n            }\r\n            let index = -1;\r\n            for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\r\n                index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\r\n                if (index !== -1) {\r\n                    break;\r\n                }\r\n            }\r\n            if (index === -1) {\r\n                index = 0;\r\n            }\r\n            let noFocus = false;\r\n            if (e.triggerOptions.auto) {\r\n                // don't \"focus\" item when configured to do\r\n                const options = this.editor.getOption(117 /* EditorOption.suggest */);\r\n                if (options.selectionMode === 'never' || options.selectionMode === 'always') {\r\n                    // simple: always or never\r\n                    noFocus = options.selectionMode === 'never';\r\n                }\r\n                else if (options.selectionMode === 'whenTriggerCharacter') {\r\n                    // on with trigger character\r\n                    noFocus = e.triggerOptions.triggerKind !== 1 /* CompletionTriggerKind.TriggerCharacter */;\r\n                }\r\n                else if (options.selectionMode === 'whenQuickSuggestion') {\r\n                    // without trigger character or when refiltering\r\n                    noFocus = e.triggerOptions.triggerKind === 1 /* CompletionTriggerKind.TriggerCharacter */ && !e.triggerOptions.refilter;\r\n                }\r\n            }\r\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.triggerOptions.auto, noFocus);\r\n        }));\r\n        this._toDispose.add(this.model.onDidCancel(e => {\r\n            if (!e.retrigger) {\r\n                this.widget.value.hideWidget();\r\n            }\r\n        }));\r\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\r\n            if (!_sticky) {\r\n                this.model.cancel();\r\n                this.model.clear();\r\n            }\r\n        }));\r\n        // Manage the acceptSuggestionsOnEnter context key\r\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\r\n        const updateFromConfig = () => {\r\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\r\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\r\n        };\r\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\r\n        updateFromConfig();\r\n    }\r\n    dispose() {\r\n        this._alternatives.dispose();\r\n        this._toDispose.dispose();\r\n        this.widget.dispose();\r\n        this.model.dispose();\r\n        this._lineSuffix.dispose();\r\n        this._onWillInsertSuggestItem.dispose();\r\n    }\r\n    _insertSuggestion(event, flags) {\r\n        if (!event || !event.item) {\r\n            this._alternatives.value.reset();\r\n            this.model.cancel();\r\n            this.model.clear();\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        const snippetController = SnippetController2.get(this.editor);\r\n        if (!snippetController) {\r\n            return;\r\n        }\r\n        this._onWillInsertSuggestItem.fire({ item: event.item });\r\n        const model = this.editor.getModel();\r\n        const modelVersionNow = model.getAlternativeVersionId();\r\n        const { item } = event;\r\n        //\r\n        const tasks = [];\r\n        const cts = new CancellationTokenSource();\r\n        // pushing undo stops *before* additional text edits and\r\n        // *after* the main edit\r\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\r\n            this.editor.pushUndoStop();\r\n        }\r\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\r\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\r\n        // keep item in memory\r\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\r\n        const isResolved = item.isResolved;\r\n        // telemetry data points: duration of command execution, info about async additional edits (-1=n/a, -2=none, 1=success, 0=failed)\r\n        let _commandExectionDuration = -1;\r\n        let _additionalEditsAppliedAsync = -1;\r\n        if (Array.isArray(item.completion.additionalTextEdits)) {\r\n            // cancel -> stops all listening and closes widget\r\n            this.model.cancel();\r\n            // sync additional edits\r\n            const scrollState = StableEditorScrollState.capture(this.editor);\r\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\r\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\r\n        }\r\n        else if (!isResolved) {\r\n            // async additional edits\r\n            const sw = new StopWatch();\r\n            let position;\r\n            const docListener = model.onDidChangeContent(e => {\r\n                if (e.isFlush) {\r\n                    cts.cancel();\r\n                    docListener.dispose();\r\n                    return;\r\n                }\r\n                for (const change of e.changes) {\r\n                    const thisPosition = Range.getEndPosition(change.range);\r\n                    if (!position || Position.isBefore(thisPosition, position)) {\r\n                        position = thisPosition;\r\n                    }\r\n                }\r\n            });\r\n            const oldFlags = flags;\r\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\r\n            let didType = false;\r\n            const typeListener = this.editor.onWillType(() => {\r\n                typeListener.dispose();\r\n                didType = true;\r\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\r\n                    this.editor.pushUndoStop();\r\n                }\r\n            });\r\n            tasks.push(item.resolve(cts.token).then(() => {\r\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\r\n                    return undefined;\r\n                }\r\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\r\n                    return false;\r\n                }\r\n                if (didType) {\r\n                    this.editor.pushUndoStop();\r\n                }\r\n                const scrollState = StableEditorScrollState.capture(this.editor);\r\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\r\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\r\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\r\n                    this.editor.pushUndoStop();\r\n                }\r\n                return true;\r\n            }).then(applied => {\r\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\r\n                _additionalEditsAppliedAsync = applied === true ? 1 : applied === false ? 0 : -2;\r\n            }).finally(() => {\r\n                docListener.dispose();\r\n                typeListener.dispose();\r\n            }));\r\n        }\r\n        let { insertText } = item.completion;\r\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\r\n            insertText = SnippetParser.escape(insertText);\r\n        }\r\n        // cancel -> stops all listening and closes widget\r\n        this.model.cancel();\r\n        snippetController.insert(insertText, {\r\n            overwriteBefore: info.overwriteBefore,\r\n            overwriteAfter: info.overwriteAfter,\r\n            undoStopBefore: false,\r\n            undoStopAfter: false,\r\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\r\n            clipboardText: event.model.clipboardText,\r\n            overtypingCapturer: this._overtypingCapturer.value\r\n        });\r\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\r\n            this.editor.pushUndoStop();\r\n        }\r\n        if (item.completion.command) {\r\n            if (item.completion.command.id === TriggerSuggestAction.id) {\r\n                // retigger\r\n                this.model.trigger({ auto: true, retrigger: true });\r\n            }\r\n            else {\r\n                // exec command, done\r\n                const sw = new StopWatch();\r\n                tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(e => {\r\n                    if (item.completion.extensionId) {\r\n                        onUnexpectedExternalError(e);\r\n                    }\r\n                    else {\r\n                        onUnexpectedError(e);\r\n                    }\r\n                }).finally(() => {\r\n                    _commandExectionDuration = sw.elapsed();\r\n                }));\r\n            }\r\n        }\r\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\r\n            this._alternatives.value.set(event, next => {\r\n                // cancel resolving of additional edits\r\n                cts.cancel();\r\n                // this is not so pretty. when inserting the 'next'\r\n                // suggestion we undo until we are at the state at\r\n                // which we were before inserting the previous suggestion...\r\n                while (model.canUndo()) {\r\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\r\n                        model.undo();\r\n                    }\r\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\r\n                    break;\r\n                }\r\n            });\r\n        }\r\n        this._alertCompletionItem(item);\r\n        // clear only now - after all tasks are done\r\n        Promise.all(tasks).finally(() => {\r\n            this._reportSuggestionAcceptedTelemetry(item, model, isResolved, _commandExectionDuration, _additionalEditsAppliedAsync);\r\n            this.model.clear();\r\n            cts.dispose();\r\n        });\r\n    }\r\n    _reportSuggestionAcceptedTelemetry(item, model, itemResolved, commandExectionDuration, additionalEditsAppliedAsync) {\r\n        var _a, _b, _c;\r\n        if (Math.floor(Math.random() * 100) === 0) {\r\n            // throttle telemetry event because accepting completions happens a lot\r\n            return;\r\n        }\r\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\r\n            extensionId: (_b = (_a = item.extensionId) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : 'unknown',\r\n            providerId: (_c = item.provider._debugDisplayName) !== null && _c !== void 0 ? _c : 'unknown',\r\n            kind: item.completion.kind,\r\n            basenameHash: hash(basename(model.uri)).toString(16),\r\n            languageId: model.getLanguageId(),\r\n            fileExtension: extname(model.uri),\r\n            resolveInfo: !item.provider.resolveCompletionItem ? -1 : itemResolved ? 1 : 0,\r\n            resolveDuration: item.resolveDuration,\r\n            commandDuration: commandExectionDuration,\r\n            additionalEditsAsync: additionalEditsAppliedAsync\r\n        });\r\n    }\r\n    getOverwriteInfo(item, toggleMode) {\r\n        assertType(this.editor.hasModel());\r\n        let replace = this.editor.getOption(117 /* EditorOption.suggest */).insertMode === 'replace';\r\n        if (toggleMode) {\r\n            replace = !replace;\r\n        }\r\n        const overwriteBefore = item.position.column - item.editStart.column;\r\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\r\n        const columnDelta = this.editor.getPosition().column - item.position.column;\r\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\r\n        return {\r\n            overwriteBefore: overwriteBefore + columnDelta,\r\n            overwriteAfter: overwriteAfter + suffixDelta\r\n        };\r\n    }\r\n    _alertCompletionItem(item) {\r\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\r\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\r\n            alert(msg);\r\n        }\r\n    }\r\n    triggerSuggest(onlyFrom, auto, noFilter) {\r\n        if (this.editor.hasModel()) {\r\n            this.model.trigger({\r\n                auto: auto !== null && auto !== void 0 ? auto : false,\r\n                completionOptions: { providerFilter: onlyFrom, kindFilter: noFilter ? new Set() : undefined }\r\n            });\r\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\r\n            this.editor.focus();\r\n        }\r\n    }\r\n    triggerSuggestAndAcceptBest(arg) {\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        const positionNow = this.editor.getPosition();\r\n        const fallback = () => {\r\n            if (positionNow.equals(this.editor.getPosition())) {\r\n                this._commandService.executeCommand(arg.fallback);\r\n            }\r\n        };\r\n        const makesTextEdit = (item) => {\r\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\r\n                // snippet, other editor -> makes edit\r\n                return true;\r\n            }\r\n            const position = this.editor.getPosition();\r\n            const startColumn = item.editStart.column;\r\n            const endColumn = position.column;\r\n            if (endColumn - startColumn !== item.completion.insertText.length) {\r\n                // unequal lengths -> makes edit\r\n                return true;\r\n            }\r\n            const textNow = this.editor.getModel().getValueInRange({\r\n                startLineNumber: position.lineNumber,\r\n                startColumn,\r\n                endLineNumber: position.lineNumber,\r\n                endColumn\r\n            });\r\n            // unequal text -> makes edit\r\n            return textNow !== item.completion.insertText;\r\n        };\r\n        Event.once(this.model.onDidTrigger)(_ => {\r\n            // wait for trigger because only then the cancel-event is trustworthy\r\n            const listener = [];\r\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\r\n                // retrigger or cancel -> try to type default text\r\n                dispose(listener);\r\n                fallback();\r\n            }, undefined, listener);\r\n            this.model.onDidSuggest(({ completionModel }) => {\r\n                dispose(listener);\r\n                if (completionModel.items.length === 0) {\r\n                    fallback();\r\n                    return;\r\n                }\r\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\r\n                const item = completionModel.items[index];\r\n                if (!makesTextEdit(item)) {\r\n                    fallback();\r\n                    return;\r\n                }\r\n                this.editor.pushUndoStop();\r\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\r\n            }, undefined, listener);\r\n        });\r\n        this.model.trigger({ auto: false, shy: true });\r\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\r\n        this.editor.focus();\r\n    }\r\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\r\n        const item = this.widget.value.getFocusedItem();\r\n        let flags = 0;\r\n        if (keepAlternativeSuggestions) {\r\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\r\n        }\r\n        if (alternativeOverwriteConfig) {\r\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\r\n        }\r\n        this._insertSuggestion(item, flags);\r\n    }\r\n    acceptNextSuggestion() {\r\n        this._alternatives.value.next();\r\n    }\r\n    acceptPrevSuggestion() {\r\n        this._alternatives.value.prev();\r\n    }\r\n    cancelSuggestWidget() {\r\n        this.model.cancel();\r\n        this.model.clear();\r\n        this.widget.value.hideWidget();\r\n    }\r\n    focusSuggestion() {\r\n        this.widget.value.focusSelected();\r\n    }\r\n    selectNextSuggestion() {\r\n        this.widget.value.selectNext();\r\n    }\r\n    selectNextPageSuggestion() {\r\n        this.widget.value.selectNextPage();\r\n    }\r\n    selectLastSuggestion() {\r\n        this.widget.value.selectLast();\r\n    }\r\n    selectPrevSuggestion() {\r\n        this.widget.value.selectPrevious();\r\n    }\r\n    selectPrevPageSuggestion() {\r\n        this.widget.value.selectPreviousPage();\r\n    }\r\n    selectFirstSuggestion() {\r\n        this.widget.value.selectFirst();\r\n    }\r\n    toggleSuggestionDetails() {\r\n        this.widget.value.toggleDetails();\r\n    }\r\n    toggleExplainMode() {\r\n        this.widget.value.toggleExplainMode();\r\n    }\r\n    toggleSuggestionFocus() {\r\n        this.widget.value.toggleDetailsFocus();\r\n    }\r\n    resetWidgetSize() {\r\n        this.widget.value.resetPersistedSize();\r\n    }\r\n    forceRenderingAbove() {\r\n        this.widget.value.forceRenderingAbove();\r\n    }\r\n    stopForceRenderingAbove() {\r\n        if (!this.widget.isInitialized) {\r\n            // This method has no effect if the widget is not initialized yet.\r\n            return;\r\n        }\r\n        this.widget.value.stopForceRenderingAbove();\r\n    }\r\n    registerSelector(selector) {\r\n        return this._selectors.register(selector);\r\n    }\r\n};\r\nSuggestController.ID = 'editor.contrib.suggestController';\r\nSuggestController = SuggestController_1 = __decorate([\r\n    __param(1, ISuggestMemoryService),\r\n    __param(2, ICommandService),\r\n    __param(3, IContextKeyService),\r\n    __param(4, IInstantiationService),\r\n    __param(5, ILogService),\r\n    __param(6, ITelemetryService)\r\n], SuggestController);\r\nexport { SuggestController };\r\nclass PriorityRegistry {\r\n    constructor(prioritySelector) {\r\n        this.prioritySelector = prioritySelector;\r\n        this._items = new Array();\r\n    }\r\n    register(value) {\r\n        if (this._items.indexOf(value) !== -1) {\r\n            throw new Error('Value is already registered');\r\n        }\r\n        this._items.push(value);\r\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\r\n        return {\r\n            dispose: () => {\r\n                const idx = this._items.indexOf(value);\r\n                if (idx >= 0) {\r\n                    this._items.splice(idx, 1);\r\n                }\r\n            }\r\n        };\r\n    }\r\n    get itemsOrderedByPriorityDesc() {\r\n        return this._items;\r\n    }\r\n}\r\nexport class TriggerSuggestAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: TriggerSuggestAction.id,\r\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\r\n            alias: 'Trigger Suggest',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider, SuggestContext.Visible.toNegated()),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor, args) {\r\n        const controller = SuggestController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        let auto;\r\n        if (args && typeof args === 'object') {\r\n            if (args.auto === true) {\r\n                auto = true;\r\n            }\r\n        }\r\n        controller.triggerSuggest(undefined, auto, undefined);\r\n    }\r\n}\r\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\r\nregisterEditorContribution(SuggestController.ID, SuggestController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorAction(TriggerSuggestAction);\r\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\r\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'acceptSelectedSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\r\n    handler(x) {\r\n        x.acceptSelectedSuggestion(true, false);\r\n    },\r\n    kbOpts: [{\r\n            // normal tab\r\n            primary: 2 /* KeyCode.Tab */,\r\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\r\n            weight,\r\n        }, {\r\n            // accept on enter has special rules\r\n            primary: 3 /* KeyCode.Enter */,\r\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\r\n            weight,\r\n        }],\r\n    menuOpts: [{\r\n            menuId: suggestWidgetStatusbarMenu,\r\n            title: nls.localize('accept.insert', \"Insert\"),\r\n            group: 'left',\r\n            order: 1,\r\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\r\n        }, {\r\n            menuId: suggestWidgetStatusbarMenu,\r\n            title: nls.localize('accept.insert', \"Insert\"),\r\n            group: 'left',\r\n            order: 1,\r\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\r\n        }, {\r\n            menuId: suggestWidgetStatusbarMenu,\r\n            title: nls.localize('accept.replace', \"Replace\"),\r\n            group: 'left',\r\n            order: 1,\r\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\r\n        }]\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'acceptAlternativeSelectedSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\r\n    },\r\n    handler(x) {\r\n        x.acceptSelectedSuggestion(false, true);\r\n    },\r\n    menuOpts: [{\r\n            menuId: suggestWidgetStatusbarMenu,\r\n            group: 'left',\r\n            order: 2,\r\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\r\n            title: nls.localize('accept.replace', \"Replace\")\r\n        }, {\r\n            menuId: suggestWidgetStatusbarMenu,\r\n            group: 'left',\r\n            order: 2,\r\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\r\n            title: nls.localize('accept.insert', \"Insert\")\r\n        }]\r\n}));\r\n// continue to support the old command\r\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'hideSuggestWidget',\r\n    precondition: SuggestContext.Visible,\r\n    handler: x => x.cancelSuggestWidget(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectNextSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\r\n    handler: c => c.selectNextSuggestion(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 18 /* KeyCode.DownArrow */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\r\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectNextPageSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\r\n    handler: c => c.selectNextPageSuggestion(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 12 /* KeyCode.PageDown */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectLastSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\r\n    handler: c => c.selectLastSuggestion()\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectPrevSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\r\n    handler: c => c.selectPrevSuggestion(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 16 /* KeyCode.UpArrow */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\r\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectPrevPageSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\r\n    handler: c => c.selectPrevPageSuggestion(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 11 /* KeyCode.PageUp */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectFirstSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\r\n    handler: c => c.selectFirstSuggestion()\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'focusSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\r\n    handler: x => x.focusSuggestion(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\r\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\r\n    },\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'focusAndAcceptSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\r\n    handler: c => {\r\n        c.focusSuggestion();\r\n        c.acceptSelectedSuggestion(true, false);\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleSuggestionDetails',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\r\n    handler: x => x.toggleSuggestionDetails(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\r\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\r\n    },\r\n    menuOpts: [{\r\n            menuId: suggestWidgetStatusbarMenu,\r\n            group: 'right',\r\n            order: 1,\r\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\r\n            title: nls.localize('detail.more', \"show less\")\r\n        }, {\r\n            menuId: suggestWidgetStatusbarMenu,\r\n            group: 'right',\r\n            order: 1,\r\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\r\n            title: nls.localize('detail.less', \"show more\")\r\n        }]\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleExplainMode',\r\n    precondition: SuggestContext.Visible,\r\n    handler: x => x.toggleExplainMode(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleSuggestionFocus',\r\n    precondition: SuggestContext.Visible,\r\n    handler: x => x.toggleSuggestionFocus(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\r\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\r\n    }\r\n}));\r\n//#region tab completions\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertBestCompletion',\r\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: (x, arg) => {\r\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\r\n    },\r\n    kbOpts: {\r\n        weight,\r\n        primary: 2 /* KeyCode.Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertNextSuggestion',\r\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: x => x.acceptNextSuggestion(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2 /* KeyCode.Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertPrevSuggestion',\r\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: x => x.acceptPrevSuggestion(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\r\n    }\r\n}));\r\nregisterEditorAction(class extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.resetSuggestSize',\r\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\r\n            alias: 'Reset Suggest Widget Size',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        var _a;\r\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar SuggestMemoryService_1;\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { LRUCache } from '../../../../base/common/map.js';\r\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\r\nimport { CompletionItemKinds } from '../../../common/languages.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\r\nexport class Memory {\r\n    constructor(name) {\r\n        this.name = name;\r\n    }\r\n    select(model, pos, items) {\r\n        if (items.length === 0) {\r\n            return 0;\r\n        }\r\n        const topScore = items[0].score[0];\r\n        for (let i = 0; i < items.length; i++) {\r\n            const { score, completion: suggestion } = items[i];\r\n            if (score[0] !== topScore) {\r\n                // stop when leaving the group of top matches\r\n                break;\r\n            }\r\n            if (suggestion.preselect) {\r\n                // stop when seeing an auto-select-item\r\n                return i;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\nexport class NoMemory extends Memory {\r\n    constructor() {\r\n        super('first');\r\n    }\r\n    memorize(model, pos, item) {\r\n        // no-op\r\n    }\r\n    toJSON() {\r\n        return undefined;\r\n    }\r\n    fromJSON() {\r\n        //\r\n    }\r\n}\r\nexport class LRUMemory extends Memory {\r\n    constructor() {\r\n        super('recentlyUsed');\r\n        this._cache = new LRUCache(300, 0.66);\r\n        this._seq = 0;\r\n    }\r\n    memorize(model, pos, item) {\r\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\r\n        this._cache.set(key, {\r\n            touch: this._seq++,\r\n            type: item.completion.kind,\r\n            insertText: item.completion.insertText\r\n        });\r\n    }\r\n    select(model, pos, items) {\r\n        if (items.length === 0) {\r\n            return 0;\r\n        }\r\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\r\n        if (/\\s$/.test(lineSuffix)) {\r\n            return super.select(model, pos, items);\r\n        }\r\n        const topScore = items[0].score[0];\r\n        let indexPreselect = -1;\r\n        let indexRecency = -1;\r\n        let seq = -1;\r\n        for (let i = 0; i < items.length; i++) {\r\n            if (items[i].score[0] !== topScore) {\r\n                // consider only top items\r\n                break;\r\n            }\r\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\r\n            const item = this._cache.peek(key);\r\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\r\n                seq = item.touch;\r\n                indexRecency = i;\r\n            }\r\n            if (items[i].completion.preselect && indexPreselect === -1) {\r\n                // stop when seeing an auto-select-item\r\n                return indexPreselect = i;\r\n            }\r\n        }\r\n        if (indexRecency !== -1) {\r\n            return indexRecency;\r\n        }\r\n        else if (indexPreselect !== -1) {\r\n            return indexPreselect;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    toJSON() {\r\n        return this._cache.toJSON();\r\n    }\r\n    fromJSON(data) {\r\n        this._cache.clear();\r\n        const seq = 0;\r\n        for (const [key, value] of data) {\r\n            value.touch = seq;\r\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\r\n            this._cache.set(key, value);\r\n        }\r\n        this._seq = this._cache.size;\r\n    }\r\n}\r\nexport class PrefixMemory extends Memory {\r\n    constructor() {\r\n        super('recentlyUsedByPrefix');\r\n        this._trie = TernarySearchTree.forStrings();\r\n        this._seq = 0;\r\n    }\r\n    memorize(model, pos, item) {\r\n        const { word } = model.getWordUntilPosition(pos);\r\n        const key = `${model.getLanguageId()}/${word}`;\r\n        this._trie.set(key, {\r\n            type: item.completion.kind,\r\n            insertText: item.completion.insertText,\r\n            touch: this._seq++\r\n        });\r\n    }\r\n    select(model, pos, items) {\r\n        const { word } = model.getWordUntilPosition(pos);\r\n        if (!word) {\r\n            return super.select(model, pos, items);\r\n        }\r\n        const key = `${model.getLanguageId()}/${word}`;\r\n        let item = this._trie.get(key);\r\n        if (!item) {\r\n            item = this._trie.findSubstr(key);\r\n        }\r\n        if (item) {\r\n            for (let i = 0; i < items.length; i++) {\r\n                const { kind, insertText } = items[i].completion;\r\n                if (kind === item.type && insertText === item.insertText) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return super.select(model, pos, items);\r\n    }\r\n    toJSON() {\r\n        const entries = [];\r\n        this._trie.forEach((value, key) => entries.push([key, value]));\r\n        // sort by last recently used (touch), then\r\n        // take the top 200 item and normalize their\r\n        // touch\r\n        entries\r\n            .sort((a, b) => -(a[1].touch - b[1].touch))\r\n            .forEach((value, i) => value[1].touch = i);\r\n        return entries.slice(0, 200);\r\n    }\r\n    fromJSON(data) {\r\n        this._trie.clear();\r\n        if (data.length > 0) {\r\n            this._seq = data[0][1].touch + 1;\r\n            for (const [key, value] of data) {\r\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\r\n                this._trie.set(key, value);\r\n            }\r\n        }\r\n    }\r\n}\r\nlet SuggestMemoryService = SuggestMemoryService_1 = class SuggestMemoryService {\r\n    constructor(_storageService, _configService) {\r\n        this._storageService = _storageService;\r\n        this._configService = _configService;\r\n        this._disposables = new DisposableStore();\r\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\r\n        this._disposables.add(_storageService.onWillSaveState(e => {\r\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\r\n                this._saveState();\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this._persistSoon.dispose();\r\n    }\r\n    memorize(model, pos, item) {\r\n        this._withStrategy(model, pos).memorize(model, pos, item);\r\n        this._persistSoon.schedule();\r\n    }\r\n    select(model, pos, items) {\r\n        return this._withStrategy(model, pos).select(model, pos, items);\r\n    }\r\n    _withStrategy(model, pos) {\r\n        var _a;\r\n        const mode = this._configService.getValue('editor.suggestSelection', {\r\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\r\n            resource: model.uri\r\n        });\r\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\r\n            this._saveState();\r\n            const ctor = SuggestMemoryService_1._strategyCtors.get(mode) || NoMemory;\r\n            this._strategy = new ctor();\r\n            try {\r\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\r\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\r\n                const raw = this._storageService.get(`${SuggestMemoryService_1._storagePrefix}/${mode}`, scope);\r\n                if (raw) {\r\n                    this._strategy.fromJSON(JSON.parse(raw));\r\n                }\r\n            }\r\n            catch (e) {\r\n                // things can go wrong with JSON...\r\n            }\r\n        }\r\n        return this._strategy;\r\n    }\r\n    _saveState() {\r\n        if (this._strategy) {\r\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\r\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\r\n            const raw = JSON.stringify(this._strategy);\r\n            this._storageService.store(`${SuggestMemoryService_1._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\r\n        }\r\n    }\r\n};\r\nSuggestMemoryService._strategyCtors = new Map([\r\n    ['recentlyUsedByPrefix', PrefixMemory],\r\n    ['recentlyUsed', LRUMemory],\r\n    ['first', NoMemory]\r\n]);\r\nSuggestMemoryService._storagePrefix = 'suggest/memories';\r\nSuggestMemoryService = SuggestMemoryService_1 = __decorate([\r\n    __param(0, IStorageService),\r\n    __param(1, IConfigurationService)\r\n], SuggestMemoryService);\r\nexport { SuggestMemoryService };\r\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\r\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar WordContextKey_1;\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nlet WordContextKey = WordContextKey_1 = class WordContextKey {\r\n    constructor(_editor, contextKeyService) {\r\n        this._editor = _editor;\r\n        this._enabled = false;\r\n        this._ckAtEnd = WordContextKey_1.AtEnd.bindTo(contextKeyService);\r\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(122 /* EditorOption.tabCompletion */) && this._update());\r\n        this._update();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        this._configListener.dispose();\r\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._ckAtEnd.reset();\r\n    }\r\n    _update() {\r\n        // only update this when tab completions are enabled\r\n        const enabled = this._editor.getOption(122 /* EditorOption.tabCompletion */) === 'on';\r\n        if (this._enabled === enabled) {\r\n            return;\r\n        }\r\n        this._enabled = enabled;\r\n        if (this._enabled) {\r\n            const checkForWordEnd = () => {\r\n                if (!this._editor.hasModel()) {\r\n                    this._ckAtEnd.set(false);\r\n                    return;\r\n                }\r\n                const model = this._editor.getModel();\r\n                const selection = this._editor.getSelection();\r\n                const word = model.getWordAtPosition(selection.getStartPosition());\r\n                if (!word) {\r\n                    this._ckAtEnd.set(false);\r\n                    return;\r\n                }\r\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\r\n            };\r\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\r\n            checkForWordEnd();\r\n        }\r\n        else if (this._selectionListener) {\r\n            this._ckAtEnd.reset();\r\n            this._selectionListener.dispose();\r\n            this._selectionListener = undefined;\r\n        }\r\n    }\r\n};\r\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\r\nWordContextKey = WordContextKey_1 = __decorate([\r\n    __param(1, IContextKeyService)\r\n], WordContextKey);\r\nexport { WordContextKey };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar SuggestAlternatives_1;\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nlet SuggestAlternatives = SuggestAlternatives_1 = class SuggestAlternatives {\r\n    constructor(_editor, contextKeyService) {\r\n        this._editor = _editor;\r\n        this._index = 0;\r\n        this._ckOtherSuggestions = SuggestAlternatives_1.OtherSuggestions.bindTo(contextKeyService);\r\n    }\r\n    dispose() {\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        var _a;\r\n        this._ckOtherSuggestions.reset();\r\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._model = undefined;\r\n        this._acceptNext = undefined;\r\n        this._ignore = false;\r\n    }\r\n    set({ model, index }, acceptNext) {\r\n        // no suggestions -> nothing to do\r\n        if (model.items.length === 0) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        // no alternative suggestions -> nothing to do\r\n        const nextIndex = SuggestAlternatives_1._moveIndex(true, model, index);\r\n        if (nextIndex === index) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._acceptNext = acceptNext;\r\n        this._model = model;\r\n        this._index = index;\r\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\r\n            if (!this._ignore) {\r\n                this.reset();\r\n            }\r\n        });\r\n        this._ckOtherSuggestions.set(true);\r\n    }\r\n    static _moveIndex(fwd, model, index) {\r\n        let newIndex = index;\r\n        for (let rounds = model.items.length; rounds > 0; rounds--) {\r\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\r\n            if (newIndex === index) {\r\n                break;\r\n            }\r\n            if (!model.items[newIndex].completion.additionalTextEdits) {\r\n                break;\r\n            }\r\n        }\r\n        return newIndex;\r\n    }\r\n    next() {\r\n        this._move(true);\r\n    }\r\n    prev() {\r\n        this._move(false);\r\n    }\r\n    _move(fwd) {\r\n        if (!this._model) {\r\n            // nothing to reason about\r\n            return;\r\n        }\r\n        try {\r\n            this._ignore = true;\r\n            this._index = SuggestAlternatives_1._moveIndex(fwd, this._model, this._index);\r\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\r\n        }\r\n        finally {\r\n            this._ignore = false;\r\n        }\r\n    }\r\n};\r\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\r\nSuggestAlternatives = SuggestAlternatives_1 = __decorate([\r\n    __param(1, IContextKeyService)\r\n], SuggestAlternatives);\r\nexport { SuggestAlternatives };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\r\nexport class CommitCharacterController {\r\n    constructor(editor, widget, model, accept) {\r\n        this._disposables = new DisposableStore();\r\n        this._disposables.add(model.onDidSuggest(e => {\r\n            if (e.completionModel.items.length === 0) {\r\n                this.reset();\r\n            }\r\n        }));\r\n        this._disposables.add(model.onDidCancel(e => {\r\n            this.reset();\r\n        }));\r\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\r\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\r\n        this._disposables.add(widget.onDidHide(this.reset, this));\r\n        this._disposables.add(editor.onWillType(text => {\r\n            if (this._active && !widget.isFrozen() && model.state !== 0 /* State.Idle */) {\r\n                const ch = text.charCodeAt(text.length - 1);\r\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\r\n                    accept(this._active.item);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    _onItem(selected) {\r\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\r\n            // no item or no commit characters\r\n            this.reset();\r\n            return;\r\n        }\r\n        if (this._active && this._active.item.item === selected.item) {\r\n            // still the same item\r\n            return;\r\n        }\r\n        // keep item and its commit characters\r\n        const acceptCharacters = new CharacterSet();\r\n        for (const ch of selected.item.completion.commitCharacters) {\r\n            if (ch.length > 0) {\r\n                acceptCharacters.add(ch.charCodeAt(0));\r\n            }\r\n        }\r\n        this._active = { acceptCharacters, item: selected };\r\n    }\r\n    reset() {\r\n        this._active = undefined;\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar SuggestModel_1;\r\nimport { TimeoutTimer } from '../../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\r\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\r\nimport { WordDistance } from './wordDistance.js';\r\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ILogService } from '../../../../platform/log/common/log.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nimport { CompletionModel } from './completionModel.js';\r\nimport { CompletionOptions, getSnippetSuggestSupport, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { FuzzyScoreOptions } from '../../../../base/common/filters.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { InlineCompletionContextKeys } from '../../inlineCompletions/browser/inlineCompletionContextKeys.js';\r\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\r\nimport { IEnvironmentService } from '../../../../platform/environment/common/environment.js';\r\nexport class LineContext {\r\n    static shouldAutoTrigger(editor) {\r\n        if (!editor.hasModel()) {\r\n            return false;\r\n        }\r\n        const model = editor.getModel();\r\n        const pos = editor.getPosition();\r\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\r\n        const word = model.getWordAtPosition(pos);\r\n        if (!word) {\r\n            return false;\r\n        }\r\n        if (word.endColumn !== pos.column &&\r\n            word.startColumn + 1 !== pos.column /* after typing a single character before a word */) {\r\n            return false;\r\n        }\r\n        if (!isNaN(Number(word.word))) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    constructor(model, position, triggerOptions) {\r\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\r\n        this.leadingWord = model.getWordUntilPosition(position);\r\n        this.lineNumber = position.lineNumber;\r\n        this.column = position.column;\r\n        this.triggerOptions = triggerOptions;\r\n    }\r\n}\r\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\r\n    if (!Boolean(contextKeyService.getContextKeyValue(InlineCompletionContextKeys.inlineSuggestionVisible.key))) {\r\n        // Allow if there is no inline suggestion.\r\n        return true;\r\n    }\r\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\r\n    if (suppressSuggestions !== undefined) {\r\n        return !suppressSuggestions;\r\n    }\r\n    return !editor.getOption(62 /* EditorOption.inlineSuggest */).suppressSuggestions;\r\n}\r\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\r\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\r\n        // Allow if there is no inline suggestion.\r\n        return true;\r\n    }\r\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\r\n    if (suppressSuggestions !== undefined) {\r\n        return !suppressSuggestions;\r\n    }\r\n    return !editor.getOption(62 /* EditorOption.inlineSuggest */).suppressSuggestions;\r\n}\r\nlet SuggestModel = SuggestModel_1 = class SuggestModel {\r\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService, _envService) {\r\n        this._editor = _editor;\r\n        this._editorWorkerService = _editorWorkerService;\r\n        this._clipboardService = _clipboardService;\r\n        this._telemetryService = _telemetryService;\r\n        this._logService = _logService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._configurationService = _configurationService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._envService = _envService;\r\n        this._toDispose = new DisposableStore();\r\n        this._triggerCharacterListener = new DisposableStore();\r\n        this._triggerQuickSuggest = new TimeoutTimer();\r\n        this._triggerState = undefined;\r\n        this._completionDisposables = new DisposableStore();\r\n        this._onDidCancel = new Emitter();\r\n        this._onDidTrigger = new Emitter();\r\n        this._onDidSuggest = new Emitter();\r\n        this.onDidCancel = this._onDidCancel.event;\r\n        this.onDidTrigger = this._onDidTrigger.event;\r\n        this.onDidSuggest = this._onDidSuggest.event;\r\n        this._telemetryGate = 0;\r\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\r\n        // wire up various listeners\r\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\r\n            this._updateTriggerCharacters();\r\n            this.cancel();\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\r\n            this._updateTriggerCharacters();\r\n            this.cancel();\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\r\n            this._updateTriggerCharacters();\r\n        }));\r\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\r\n            this._updateTriggerCharacters();\r\n            this._updateActiveSuggestSession();\r\n        }));\r\n        let editorIsComposing = false;\r\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\r\n            editorIsComposing = true;\r\n        }));\r\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\r\n            editorIsComposing = false;\r\n            this._onCompositionEnd();\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\r\n            // only trigger suggest when the editor isn't composing a character\r\n            if (!editorIsComposing) {\r\n                this._onCursorChange(e);\r\n            }\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\r\n            // only filter completions when the editor isn't composing a character\r\n            // allow-any-unicode-next-line\r\n            // e.g.  + u makes  but just  cannot be used for filtering\r\n            if (!editorIsComposing && this._triggerState !== undefined) {\r\n                this._refilterCompletionItems();\r\n            }\r\n        }));\r\n        this._updateTriggerCharacters();\r\n    }\r\n    dispose() {\r\n        dispose(this._triggerCharacterListener);\r\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\r\n        this._toDispose.dispose();\r\n        this._completionDisposables.dispose();\r\n        this.cancel();\r\n    }\r\n    _updateTriggerCharacters() {\r\n        this._triggerCharacterListener.clear();\r\n        if (this._editor.getOption(90 /* EditorOption.readOnly */)\r\n            || !this._editor.hasModel()\r\n            || !this._editor.getOption(120 /* EditorOption.suggestOnTriggerCharacters */)) {\r\n            return;\r\n        }\r\n        const supportsByTriggerCharacter = new Map();\r\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\r\n            for (const ch of support.triggerCharacters || []) {\r\n                let set = supportsByTriggerCharacter.get(ch);\r\n                if (!set) {\r\n                    set = new Set();\r\n                    set.add(getSnippetSuggestSupport());\r\n                    supportsByTriggerCharacter.set(ch, set);\r\n                }\r\n                set.add(support);\r\n            }\r\n        }\r\n        const checkTriggerCharacter = (text) => {\r\n            var _a;\r\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\r\n                return;\r\n            }\r\n            if (LineContext.shouldAutoTrigger(this._editor)) {\r\n                // don't trigger by trigger characters when this is a case for quick suggest\r\n                return;\r\n            }\r\n            if (!text) {\r\n                // came here from the compositionEnd-event\r\n                const position = this._editor.getPosition();\r\n                const model = this._editor.getModel();\r\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\r\n            }\r\n            let lastChar = '';\r\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\r\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\r\n                    lastChar = text.substr(text.length - 2);\r\n                }\r\n            }\r\n            else {\r\n                lastChar = text.charAt(text.length - 1);\r\n            }\r\n            const supports = supportsByTriggerCharacter.get(lastChar);\r\n            if (supports) {\r\n                // keep existing items that where not computed by the\r\n                // supports/providers that want to trigger now\r\n                const providerItemsToReuse = new Map();\r\n                if (this._completionModel) {\r\n                    for (const [provider, items] of this._completionModel.getItemsByProvider()) {\r\n                        if (!supports.has(provider)) {\r\n                            providerItemsToReuse.set(provider, items);\r\n                        }\r\n                    }\r\n                }\r\n                this.trigger({\r\n                    auto: true,\r\n                    triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\r\n                    triggerCharacter: lastChar,\r\n                    retrigger: Boolean(this._completionModel),\r\n                    clipboardText: (_a = this._completionModel) === null || _a === void 0 ? void 0 : _a.clipboardText,\r\n                    completionOptions: { providerFilter: supports, providerItemsToReuse }\r\n                });\r\n            }\r\n        };\r\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\r\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\r\n    }\r\n    // --- trigger/retrigger/cancel suggest\r\n    get state() {\r\n        if (!this._triggerState) {\r\n            return 0 /* State.Idle */;\r\n        }\r\n        else if (!this._triggerState.auto) {\r\n            return 1 /* State.Manual */;\r\n        }\r\n        else {\r\n            return 2 /* State.Auto */;\r\n        }\r\n    }\r\n    cancel(retrigger = false) {\r\n        var _a;\r\n        if (this._triggerState !== undefined) {\r\n            this._triggerQuickSuggest.cancel();\r\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            this._requestToken = undefined;\r\n            this._triggerState = undefined;\r\n            this._completionModel = undefined;\r\n            this._context = undefined;\r\n            this._onDidCancel.fire({ retrigger });\r\n        }\r\n    }\r\n    clear() {\r\n        this._completionDisposables.clear();\r\n    }\r\n    _updateActiveSuggestSession() {\r\n        if (this._triggerState !== undefined) {\r\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\r\n                this.cancel();\r\n            }\r\n            else {\r\n                this.trigger({ auto: this._triggerState.auto, retrigger: true });\r\n            }\r\n        }\r\n    }\r\n    _onCursorChange(e) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const prevSelection = this._currentSelection;\r\n        this._currentSelection = this._editor.getSelection();\r\n        if (!e.selection.isEmpty()\r\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\r\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\r\n            // Early exit if nothing needs to be done!\r\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n            this.cancel();\r\n            return;\r\n        }\r\n        if (this._triggerState === undefined && e.reason === 0 /* CursorChangeReason.NotSet */) {\r\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\r\n                // cursor did move RIGHT due to typing -> trigger quick suggest\r\n                this._doTriggerQuickSuggest();\r\n            }\r\n        }\r\n        else if (this._triggerState !== undefined && e.reason === 3 /* CursorChangeReason.Explicit */) {\r\n            // suggest is active and something like cursor keys are used to move\r\n            // the cursor. this means we can refilter at the new position\r\n            this._refilterCompletionItems();\r\n        }\r\n    }\r\n    _onCompositionEnd() {\r\n        // trigger or refilter when composition ends\r\n        if (this._triggerState === undefined) {\r\n            this._doTriggerQuickSuggest();\r\n        }\r\n        else {\r\n            this._refilterCompletionItems();\r\n        }\r\n    }\r\n    _doTriggerQuickSuggest() {\r\n        var _a;\r\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(88 /* EditorOption.quickSuggestions */))) {\r\n            // not enabled\r\n            return;\r\n        }\r\n        if (this._editor.getOption(117 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\r\n            // no quick suggestion when in snippet mode\r\n            return;\r\n        }\r\n        this.cancel();\r\n        this._triggerQuickSuggest.cancelAndSet(() => {\r\n            if (this._triggerState !== undefined) {\r\n                return;\r\n            }\r\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\r\n                return;\r\n            }\r\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\r\n                return;\r\n            }\r\n            const model = this._editor.getModel();\r\n            const pos = this._editor.getPosition();\r\n            // validate enabled now\r\n            const config = this._editor.getOption(88 /* EditorOption.quickSuggestions */);\r\n            if (QuickSuggestionsOptions.isAllOff(config)) {\r\n                return;\r\n            }\r\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\r\n                // Check the type of the token that triggered this\r\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\r\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\r\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\r\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\r\n                    return;\r\n                }\r\n            }\r\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\r\n                // do not trigger quick suggestions if inline suggestions are shown\r\n                return;\r\n            }\r\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\r\n                return;\r\n            }\r\n            // we made it till here -> trigger now\r\n            this.trigger({ auto: true });\r\n        }, this._editor.getOption(89 /* EditorOption.quickSuggestionsDelay */));\r\n    }\r\n    _refilterCompletionItems() {\r\n        assertType(this._editor.hasModel());\r\n        assertType(this._triggerState !== undefined);\r\n        const model = this._editor.getModel();\r\n        const position = this._editor.getPosition();\r\n        const ctx = new LineContext(model, position, Object.assign(Object.assign({}, this._triggerState), { refilter: true }));\r\n        this._onNewContext(ctx);\r\n    }\r\n    trigger(options) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const ctx = new LineContext(model, this._editor.getPosition(), options);\r\n        // Cancel previous requests, change state & update UI\r\n        this.cancel(options.retrigger);\r\n        this._triggerState = options;\r\n        this._onDidTrigger.fire({ auto: options.auto, shy: (_a = options.shy) !== null && _a !== void 0 ? _a : false, position: this._editor.getPosition() });\r\n        // Capture context when request was sent\r\n        this._context = ctx;\r\n        // Build context for request\r\n        let suggestCtx = { triggerKind: (_b = options.triggerKind) !== null && _b !== void 0 ? _b : 0 /* CompletionTriggerKind.Invoke */ };\r\n        if (options.triggerCharacter) {\r\n            suggestCtx = {\r\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\r\n                triggerCharacter: options.triggerCharacter\r\n            };\r\n        }\r\n        this._requestToken = new CancellationTokenSource();\r\n        // kind filter and snippet sort rules\r\n        const snippetSuggestions = this._editor.getOption(111 /* EditorOption.snippetSuggestions */);\r\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\r\n        switch (snippetSuggestions) {\r\n            case 'top':\r\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\r\n                break;\r\n            // \t that's the default anyways...\r\n            // case 'inline':\r\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\r\n            // \tbreak;\r\n            case 'bottom':\r\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\r\n                break;\r\n        }\r\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel_1._createSuggestFilter(this._editor);\r\n        const completionOptions = new CompletionOptions(snippetSortOrder, (_d = (_c = options.completionOptions) === null || _c === void 0 ? void 0 : _c.kindFilter) !== null && _d !== void 0 ? _d : itemKindFilter, (_e = options.completionOptions) === null || _e === void 0 ? void 0 : _e.providerFilter, (_f = options.completionOptions) === null || _f === void 0 ? void 0 : _f.providerItemsToReuse, showDeprecated);\r\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\r\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\r\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\r\n            var _g;\r\n            (_g = this._requestToken) === null || _g === void 0 ? void 0 : _g.dispose();\r\n            if (!this._editor.hasModel()) {\r\n                return;\r\n            }\r\n            let clipboardText = options === null || options === void 0 ? void 0 : options.clipboardText;\r\n            if (!clipboardText && completions.needsClipboard) {\r\n                clipboardText = yield this._clipboardService.readText();\r\n            }\r\n            if (this._triggerState === undefined) {\r\n                return;\r\n            }\r\n            const model = this._editor.getModel();\r\n            // const items = completions.items;\r\n            // if (existing) {\r\n            // \tconst cmpFn = getSuggestionComparator(snippetSortOrder);\r\n            // \titems = items.concat(existing.items).sort(cmpFn);\r\n            // }\r\n            const ctx = new LineContext(model, this._editor.getPosition(), options);\r\n            const fuzzySearchOptions = Object.assign(Object.assign({}, FuzzyScoreOptions.default), { firstMatchCanBeWeak: !this._editor.getOption(117 /* EditorOption.suggest */).matchOnWordStartOnly });\r\n            this._completionModel = new CompletionModel(completions.items, this._context.column, {\r\n                leadingLineContent: ctx.leadingLineContent,\r\n                characterCountDelta: ctx.column - this._context.column\r\n            }, wordDistance, this._editor.getOption(117 /* EditorOption.suggest */), this._editor.getOption(111 /* EditorOption.snippetSuggestions */), fuzzySearchOptions, clipboardText);\r\n            // store containers so that they can be disposed later\r\n            this._completionDisposables.add(completions.disposable);\r\n            this._onNewContext(ctx);\r\n            // finally report telemetry about durations\r\n            this._reportDurationsTelemetry(completions.durations);\r\n            // report invalid completions by source\r\n            if (!this._envService.isBuilt || this._envService.isExtensionDevelopment) {\r\n                for (const item of completions.items) {\r\n                    if (item.isInvalid) {\r\n                        this._logService.warn(`[suggest] did IGNORE invalid completion item from ${item.provider._debugDisplayName}`, item.completion);\r\n                    }\r\n                }\r\n            }\r\n        })).catch(onUnexpectedError);\r\n    }\r\n    _reportDurationsTelemetry(durations) {\r\n        if (this._telemetryGate++ % 230 !== 0) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\r\n            this._logService.debug('suggest.durations.json', durations);\r\n        });\r\n    }\r\n    static _createSuggestFilter(editor) {\r\n        // kind filter and snippet sort rules\r\n        const result = new Set();\r\n        // snippet setting\r\n        const snippetSuggestions = editor.getOption(111 /* EditorOption.snippetSuggestions */);\r\n        if (snippetSuggestions === 'none') {\r\n            result.add(27 /* CompletionItemKind.Snippet */);\r\n        }\r\n        // type setting\r\n        const suggestOptions = editor.getOption(117 /* EditorOption.suggest */);\r\n        if (!suggestOptions.showMethods) {\r\n            result.add(0 /* CompletionItemKind.Method */);\r\n        }\r\n        if (!suggestOptions.showFunctions) {\r\n            result.add(1 /* CompletionItemKind.Function */);\r\n        }\r\n        if (!suggestOptions.showConstructors) {\r\n            result.add(2 /* CompletionItemKind.Constructor */);\r\n        }\r\n        if (!suggestOptions.showFields) {\r\n            result.add(3 /* CompletionItemKind.Field */);\r\n        }\r\n        if (!suggestOptions.showVariables) {\r\n            result.add(4 /* CompletionItemKind.Variable */);\r\n        }\r\n        if (!suggestOptions.showClasses) {\r\n            result.add(5 /* CompletionItemKind.Class */);\r\n        }\r\n        if (!suggestOptions.showStructs) {\r\n            result.add(6 /* CompletionItemKind.Struct */);\r\n        }\r\n        if (!suggestOptions.showInterfaces) {\r\n            result.add(7 /* CompletionItemKind.Interface */);\r\n        }\r\n        if (!suggestOptions.showModules) {\r\n            result.add(8 /* CompletionItemKind.Module */);\r\n        }\r\n        if (!suggestOptions.showProperties) {\r\n            result.add(9 /* CompletionItemKind.Property */);\r\n        }\r\n        if (!suggestOptions.showEvents) {\r\n            result.add(10 /* CompletionItemKind.Event */);\r\n        }\r\n        if (!suggestOptions.showOperators) {\r\n            result.add(11 /* CompletionItemKind.Operator */);\r\n        }\r\n        if (!suggestOptions.showUnits) {\r\n            result.add(12 /* CompletionItemKind.Unit */);\r\n        }\r\n        if (!suggestOptions.showValues) {\r\n            result.add(13 /* CompletionItemKind.Value */);\r\n        }\r\n        if (!suggestOptions.showConstants) {\r\n            result.add(14 /* CompletionItemKind.Constant */);\r\n        }\r\n        if (!suggestOptions.showEnums) {\r\n            result.add(15 /* CompletionItemKind.Enum */);\r\n        }\r\n        if (!suggestOptions.showEnumMembers) {\r\n            result.add(16 /* CompletionItemKind.EnumMember */);\r\n        }\r\n        if (!suggestOptions.showKeywords) {\r\n            result.add(17 /* CompletionItemKind.Keyword */);\r\n        }\r\n        if (!suggestOptions.showWords) {\r\n            result.add(18 /* CompletionItemKind.Text */);\r\n        }\r\n        if (!suggestOptions.showColors) {\r\n            result.add(19 /* CompletionItemKind.Color */);\r\n        }\r\n        if (!suggestOptions.showFiles) {\r\n            result.add(20 /* CompletionItemKind.File */);\r\n        }\r\n        if (!suggestOptions.showReferences) {\r\n            result.add(21 /* CompletionItemKind.Reference */);\r\n        }\r\n        if (!suggestOptions.showColors) {\r\n            result.add(22 /* CompletionItemKind.Customcolor */);\r\n        }\r\n        if (!suggestOptions.showFolders) {\r\n            result.add(23 /* CompletionItemKind.Folder */);\r\n        }\r\n        if (!suggestOptions.showTypeParameters) {\r\n            result.add(24 /* CompletionItemKind.TypeParameter */);\r\n        }\r\n        if (!suggestOptions.showSnippets) {\r\n            result.add(27 /* CompletionItemKind.Snippet */);\r\n        }\r\n        if (!suggestOptions.showUsers) {\r\n            result.add(25 /* CompletionItemKind.User */);\r\n        }\r\n        if (!suggestOptions.showIssues) {\r\n            result.add(26 /* CompletionItemKind.Issue */);\r\n        }\r\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\r\n    }\r\n    _onNewContext(ctx) {\r\n        if (!this._context) {\r\n            // happens when 24x7 IntelliSense is enabled and still in its delay\r\n            return;\r\n        }\r\n        if (ctx.lineNumber !== this._context.lineNumber) {\r\n            // e.g. happens when pressing Enter while IntelliSense is computed\r\n            this.cancel();\r\n            return;\r\n        }\r\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\r\n            // cancel IntelliSense when line start changes\r\n            // happens when the current word gets outdented\r\n            this.cancel();\r\n            return;\r\n        }\r\n        if (ctx.column < this._context.column) {\r\n            // typed -> moved cursor LEFT -> retrigger if still on a word\r\n            if (ctx.leadingWord.word) {\r\n                this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\r\n            }\r\n            else {\r\n                this.cancel();\r\n            }\r\n            return;\r\n        }\r\n        if (!this._completionModel) {\r\n            // happens when IntelliSense is not yet computed\r\n            return;\r\n        }\r\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\r\n            // started a new word while IntelliSense shows -> retrigger but reuse all items that we currently have\r\n            const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\r\n            if (shouldAutoTrigger && this._context) {\r\n                // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\r\n                // suggestions to be cancelled, which causes `this._context` to be undefined\r\n                const map = this._completionModel.getItemsByProvider();\r\n                this.trigger({\r\n                    auto: this._context.triggerOptions.auto,\r\n                    retrigger: true,\r\n                    clipboardText: this._completionModel.clipboardText,\r\n                    completionOptions: { providerItemsToReuse: map }\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        if (ctx.column > this._context.column && this._completionModel.getIncompleteProvider().size > 0 && ctx.leadingWord.word.length !== 0) {\r\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\r\n            const providerItemsToReuse = new Map();\r\n            const providerFilter = new Set();\r\n            for (const [provider, items] of this._completionModel.getItemsByProvider()) {\r\n                if (items.length > 0 && items[0].container.incomplete) {\r\n                    providerFilter.add(provider);\r\n                }\r\n                else {\r\n                    providerItemsToReuse.set(provider, items);\r\n                }\r\n            }\r\n            this.trigger({\r\n                auto: this._context.triggerOptions.auto,\r\n                triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */,\r\n                retrigger: true,\r\n                clipboardText: this._completionModel.clipboardText,\r\n                completionOptions: { providerFilter, providerItemsToReuse }\r\n            });\r\n        }\r\n        else {\r\n            // typed -> moved cursor RIGHT -> update UI\r\n            const oldLineContext = this._completionModel.lineContext;\r\n            let isFrozen = false;\r\n            this._completionModel.lineContext = {\r\n                leadingLineContent: ctx.leadingLineContent,\r\n                characterCountDelta: ctx.column - this._context.column\r\n            };\r\n            if (this._completionModel.items.length === 0) {\r\n                const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\r\n                if (!this._context) {\r\n                    // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\r\n                    // suggestions to be cancelled, which causes `this._context` to be undefined\r\n                    this.cancel();\r\n                    return;\r\n                }\r\n                if (shouldAutoTrigger && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\r\n                    // retrigger when heading into a new word\r\n                    this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\r\n                    return;\r\n                }\r\n                if (!this._context.triggerOptions.auto) {\r\n                    // freeze when IntelliSense was manually requested\r\n                    this._completionModel.lineContext = oldLineContext;\r\n                    isFrozen = this._completionModel.items.length > 0;\r\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\r\n                        // there were results before but now there aren't\r\n                        // and also we are not on a word anymore -> cancel\r\n                        this.cancel();\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    // nothing left\r\n                    this.cancel();\r\n                    return;\r\n                }\r\n            }\r\n            this._onDidSuggest.fire({\r\n                completionModel: this._completionModel,\r\n                triggerOptions: ctx.triggerOptions,\r\n                isFrozen,\r\n            });\r\n        }\r\n    }\r\n};\r\nSuggestModel = SuggestModel_1 = __decorate([\r\n    __param(1, IEditorWorkerService),\r\n    __param(2, IClipboardService),\r\n    __param(3, ITelemetryService),\r\n    __param(4, ILogService),\r\n    __param(5, IContextKeyService),\r\n    __param(6, IConfigurationService),\r\n    __param(7, ILanguageFeaturesService),\r\n    __param(8, IEnvironmentService)\r\n], SuggestModel);\r\nexport { SuggestModel };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\r\nexport class WordDistance {\r\n    static create(service, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!editor.getOption(117 /* EditorOption.suggest */).localityBonus) {\r\n                return WordDistance.None;\r\n            }\r\n            if (!editor.hasModel()) {\r\n                return WordDistance.None;\r\n            }\r\n            const model = editor.getModel();\r\n            const position = editor.getPosition();\r\n            if (!service.canComputeWordRanges(model.uri)) {\r\n                return WordDistance.None;\r\n            }\r\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\r\n            if (ranges.length === 0) {\r\n                return WordDistance.None;\r\n            }\r\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\r\n            if (!wordRanges) {\r\n                return WordDistance.None;\r\n            }\r\n            // remove current word\r\n            const wordUntilPos = model.getWordUntilPosition(position);\r\n            delete wordRanges[wordUntilPos.word];\r\n            return new class extends WordDistance {\r\n                distance(anchor, item) {\r\n                    if (!position.equals(editor.getPosition())) {\r\n                        return 0;\r\n                    }\r\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\r\n                        return 2 << 20;\r\n                    }\r\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\r\n                    const wordLines = wordRanges[word];\r\n                    if (isFalsyOrEmpty(wordLines)) {\r\n                        return 2 << 20;\r\n                    }\r\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\r\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\r\n                    let blockDistance = ranges.length;\r\n                    for (const range of ranges) {\r\n                        if (!Range.containsRange(range.range, bestWordRange)) {\r\n                            break;\r\n                        }\r\n                        blockDistance -= 1;\r\n                    }\r\n                    return blockDistance;\r\n                }\r\n            };\r\n        });\r\n    }\r\n}\r\nWordDistance.None = new class extends WordDistance {\r\n    distance() { return 0; }\r\n};\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { LinkedList } from '../../../../base/common/linkedList.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nexport class BracketSelectionRangeProvider {\r\n    provideSelectionRanges(model, positions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = [];\r\n            for (const position of positions) {\r\n                const bucket = [];\r\n                result.push(bucket);\r\n                const ranges = new Map();\r\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\r\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\r\n            }\r\n            return result;\r\n        });\r\n    }\r\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\r\n        const counts = new Map();\r\n        const t1 = Date.now();\r\n        while (true) {\r\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\r\n                resolve();\r\n                break;\r\n            }\r\n            if (!pos) {\r\n                resolve();\r\n                break;\r\n            }\r\n            const bracket = model.bracketPairs.findNextBracket(pos);\r\n            if (!bracket) {\r\n                resolve();\r\n                break;\r\n            }\r\n            const d = Date.now() - t1;\r\n            if (d > BracketSelectionRangeProvider._maxDuration) {\r\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\r\n                break;\r\n            }\r\n            if (bracket.bracketInfo.isOpeningBracket) {\r\n                const key = bracket.bracketInfo.bracketText;\r\n                // wait for closing\r\n                const val = counts.has(key) ? counts.get(key) : 0;\r\n                counts.set(key, val + 1);\r\n            }\r\n            else {\r\n                const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\r\n                // process closing\r\n                let val = counts.has(key) ? counts.get(key) : 0;\r\n                val -= 1;\r\n                counts.set(key, Math.max(0, val));\r\n                if (val < 0) {\r\n                    let list = ranges.get(key);\r\n                    if (!list) {\r\n                        list = new LinkedList();\r\n                        ranges.set(key, list);\r\n                    }\r\n                    list.push(bracket.range);\r\n                }\r\n            }\r\n            pos = bracket.range.getEndPosition();\r\n        }\r\n    }\r\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\r\n        const counts = new Map();\r\n        const t1 = Date.now();\r\n        while (true) {\r\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\r\n                resolve();\r\n                break;\r\n            }\r\n            if (!pos) {\r\n                resolve();\r\n                break;\r\n            }\r\n            const bracket = model.bracketPairs.findPrevBracket(pos);\r\n            if (!bracket) {\r\n                resolve();\r\n                break;\r\n            }\r\n            const d = Date.now() - t1;\r\n            if (d > BracketSelectionRangeProvider._maxDuration) {\r\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\r\n                break;\r\n            }\r\n            if (!bracket.bracketInfo.isOpeningBracket) {\r\n                const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\r\n                // wait for opening\r\n                const val = counts.has(key) ? counts.get(key) : 0;\r\n                counts.set(key, val + 1);\r\n            }\r\n            else {\r\n                const key = bracket.bracketInfo.bracketText;\r\n                // opening\r\n                let val = counts.has(key) ? counts.get(key) : 0;\r\n                val -= 1;\r\n                counts.set(key, Math.max(0, val));\r\n                if (val < 0) {\r\n                    const list = ranges.get(key);\r\n                    if (list) {\r\n                        const closing = list.shift();\r\n                        if (list.size === 0) {\r\n                            ranges.delete(key);\r\n                        }\r\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\r\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\r\n                        bucket.push({ range: innerBracket });\r\n                        bucket.push({ range: outerBracket });\r\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\r\n                    }\r\n                }\r\n            }\r\n            pos = bracket.range.getStartPosition();\r\n        }\r\n    }\r\n    static _addBracketLeading(model, bracket, bucket) {\r\n        if (bracket.startLineNumber === bracket.endLineNumber) {\r\n            return;\r\n        }\r\n        // xxxxxxxx {\r\n        //\r\n        // }\r\n        const startLine = bracket.startLineNumber;\r\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\r\n        if (column !== 0 && column !== bracket.startColumn) {\r\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\r\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\r\n        }\r\n        // xxxxxxxx\r\n        // {\r\n        //\r\n        // }\r\n        const aboveLine = startLine - 1;\r\n        if (aboveLine > 0) {\r\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\r\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\r\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\r\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\r\n            }\r\n        }\r\n    }\r\n}\r\nBracketSelectionRangeProvider._maxDuration = 30;\r\nBracketSelectionRangeProvider._maxRounds = 2;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { quickSelect } from '../../../../base/common/arrays.js';\r\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\r\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\r\nexport class LineContext {\r\n    constructor(leadingLineContent, characterCountDelta) {\r\n        this.leadingLineContent = leadingLineContent;\r\n        this.characterCountDelta = characterCountDelta;\r\n    }\r\n}\r\n/**\r\n * Sorted, filtered completion view model\r\n * */\r\nexport class CompletionModel {\r\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\r\n        this.clipboardText = clipboardText;\r\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\r\n        this._items = items;\r\n        this._column = column;\r\n        this._wordDistance = wordDistance;\r\n        this._options = options;\r\n        this._refilterKind = 1 /* Refilter.All */;\r\n        this._lineContext = lineContext;\r\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\r\n        if (snippetSuggestions === 'top') {\r\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\r\n        }\r\n        else if (snippetSuggestions === 'bottom') {\r\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\r\n        }\r\n    }\r\n    get lineContext() {\r\n        return this._lineContext;\r\n    }\r\n    set lineContext(value) {\r\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\r\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\r\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\r\n            this._lineContext = value;\r\n        }\r\n    }\r\n    get items() {\r\n        this._ensureCachedState();\r\n        return this._filteredItems;\r\n    }\r\n    getItemsByProvider() {\r\n        this._ensureCachedState();\r\n        return this._itemsByProvider;\r\n    }\r\n    getIncompleteProvider() {\r\n        this._ensureCachedState();\r\n        const result = new Set();\r\n        for (const [provider, items] of this.getItemsByProvider()) {\r\n            if (items.length > 0 && items[0].container.incomplete) {\r\n                result.add(provider);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    get stats() {\r\n        this._ensureCachedState();\r\n        return this._stats;\r\n    }\r\n    _ensureCachedState() {\r\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\r\n            this._createCachedState();\r\n        }\r\n    }\r\n    _createCachedState() {\r\n        this._itemsByProvider = new Map();\r\n        const labelLengths = [];\r\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\r\n        let word = '';\r\n        let wordLow = '';\r\n        // incrementally filter less\r\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\r\n        const target = [];\r\n        // picks a score function based on the number of\r\n        // items that we have to score/filter and based on the\r\n        // user-configuration\r\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\r\n        for (let i = 0; i < source.length; i++) {\r\n            const item = source[i];\r\n            if (item.isInvalid) {\r\n                continue; // SKIP invalid items\r\n            }\r\n            // keep all items by their provider\r\n            const arr = this._itemsByProvider.get(item.provider);\r\n            if (arr) {\r\n                arr.push(item);\r\n            }\r\n            else {\r\n                this._itemsByProvider.set(item.provider, [item]);\r\n            }\r\n            // 'word' is that remainder of the current line that we\r\n            // filter and score against. In theory each suggestion uses a\r\n            // different word, but in practice not - that's why we cache\r\n            const overwriteBefore = item.position.column - item.editStart.column;\r\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\r\n            if (word.length !== wordLen) {\r\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\r\n                wordLow = word.toLowerCase();\r\n            }\r\n            // remember the word against which this item was\r\n            // scored\r\n            item.word = word;\r\n            if (wordLen === 0) {\r\n                // when there is nothing to score against, don't\r\n                // event try to do. Use a const rank and rely on\r\n                // the fallback-sort using the initial sort order.\r\n                // use a score of `-100` because that is out of the\r\n                // bound of values `fuzzyScore` will return\r\n                item.score = FuzzyScore.Default;\r\n            }\r\n            else {\r\n                // skip word characters that are whitespace until\r\n                // we have hit the replace range (overwriteBefore)\r\n                let wordPos = 0;\r\n                while (wordPos < overwriteBefore) {\r\n                    const ch = word.charCodeAt(wordPos);\r\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\r\n                        wordPos += 1;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n                if (wordPos >= wordLen) {\r\n                    // the wordPos at which scoring starts is the whole word\r\n                    // and therefore the same rules as not having a word apply\r\n                    item.score = FuzzyScore.Default;\r\n                }\r\n                else if (typeof item.completion.filterText === 'string') {\r\n                    // when there is a `filterText` it must match the `word`.\r\n                    // if it matches we check with the label to compute highlights\r\n                    // and if that doesn't yield a result we have no highlights,\r\n                    // despite having the match\r\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\r\n                    if (!match) {\r\n                        continue; // NO match\r\n                    }\r\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\r\n                        // filterText and label are actually the same -> use good highlights\r\n                        item.score = match;\r\n                    }\r\n                    else {\r\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\r\n                        // of the filterText-match\r\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\r\n                        item.score[0] = match[0]; // use score from filterText\r\n                    }\r\n                }\r\n                else {\r\n                    // by default match `word` against the `label`\r\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\r\n                    if (!match) {\r\n                        continue; // NO match\r\n                    }\r\n                    item.score = match;\r\n                }\r\n            }\r\n            item.idx = i;\r\n            item.distance = this._wordDistance.distance(item.position, item.completion);\r\n            target.push(item);\r\n            // update stats\r\n            labelLengths.push(item.textLabel.length);\r\n        }\r\n        this._filteredItems = target.sort(this._snippetCompareFn);\r\n        this._refilterKind = 0 /* Refilter.Nothing */;\r\n        this._stats = {\r\n            pLabelLen: labelLengths.length ?\r\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\r\n                : 0\r\n        };\r\n    }\r\n    static _compareCompletionItems(a, b) {\r\n        if (a.score[0] > b.score[0]) {\r\n            return -1;\r\n        }\r\n        else if (a.score[0] < b.score[0]) {\r\n            return 1;\r\n        }\r\n        else if (a.distance < b.distance) {\r\n            return -1;\r\n        }\r\n        else if (a.distance > b.distance) {\r\n            return 1;\r\n        }\r\n        else if (a.idx < b.idx) {\r\n            return -1;\r\n        }\r\n        else if (a.idx > b.idx) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    static _compareCompletionItemsSnippetsDown(a, b) {\r\n        if (a.completion.kind !== b.completion.kind) {\r\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\r\n                return 1;\r\n            }\r\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\r\n                return -1;\r\n            }\r\n        }\r\n        return CompletionModel._compareCompletionItems(a, b);\r\n    }\r\n    static _compareCompletionItemsSnippetsUp(a, b) {\r\n        if (a.completion.kind !== b.completion.kind) {\r\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\r\n                return -1;\r\n            }\r\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\r\n                return 1;\r\n            }\r\n        }\r\n        return CompletionModel._compareCompletionItems(a, b);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nexport class OvertypingCapturer {\r\n    constructor(editor, suggestModel) {\r\n        this._disposables = new DisposableStore();\r\n        this._lastOvertyped = [];\r\n        this._locked = false;\r\n        this._disposables.add(editor.onWillType(() => {\r\n            if (this._locked || !editor.hasModel()) {\r\n                return;\r\n            }\r\n            const selections = editor.getSelections();\r\n            const selectionsLength = selections.length;\r\n            // Check if it will overtype any selections\r\n            let willOvertype = false;\r\n            for (let i = 0; i < selectionsLength; i++) {\r\n                if (!selections[i].isEmpty()) {\r\n                    willOvertype = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!willOvertype) {\r\n                if (this._lastOvertyped.length !== 0) {\r\n                    this._lastOvertyped.length = 0;\r\n                }\r\n                return;\r\n            }\r\n            this._lastOvertyped = [];\r\n            const model = editor.getModel();\r\n            for (let i = 0; i < selectionsLength; i++) {\r\n                const selection = selections[i];\r\n                // Check for overtyping capturer restrictions\r\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\r\n                    return;\r\n                }\r\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\r\n            }\r\n        }));\r\n        this._disposables.add(suggestModel.onDidTrigger(e => {\r\n            this._locked = true;\r\n        }));\r\n        this._disposables.add(suggestModel.onDidCancel(e => {\r\n            this._locked = false;\r\n        }));\r\n    }\r\n    getLastOvertypedInfo(idx) {\r\n        if (idx >= 0 && idx < this._lastOvertyped.length) {\r\n            return this._lastOvertyped[idx];\r\n        }\r\n        return undefined;\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n    }\r\n}\r\nOvertypingCapturer._maxSelectionLength = 51200;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar SuggestWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\r\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter, PauseableEmitter } from '../../../../base/common/event.js';\r\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { clamp } from '../../../../base/common/numbers.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport './media/suggest.css';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\r\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\r\nimport * as nls from '../../../../nls.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\r\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\r\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\r\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\r\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\r\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\r\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\r\n/**\r\n * Suggest widget colors\r\n */\r\nregisterColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\r\nregisterColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\r\nconst editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\r\nregisterColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\r\nregisterColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\r\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\r\nregisterColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\r\nregisterColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\r\nregisterColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\r\nclass PersistedWidgetSize {\r\n    constructor(_service, editor) {\r\n        this._service = _service;\r\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\r\n    }\r\n    restore() {\r\n        var _a;\r\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\r\n        try {\r\n            const obj = JSON.parse(raw);\r\n            if (dom.Dimension.is(obj)) {\r\n                return dom.Dimension.lift(obj);\r\n            }\r\n        }\r\n        catch (_b) {\r\n            // ignore\r\n        }\r\n        return undefined;\r\n    }\r\n    store(size) {\r\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\r\n    }\r\n    reset() {\r\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\r\n    }\r\n}\r\nlet SuggestWidget = SuggestWidget_1 = class SuggestWidget {\r\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\r\n        this.editor = editor;\r\n        this._storageService = _storageService;\r\n        this._state = 0 /* State.Hidden */;\r\n        this._isAuto = false;\r\n        this._pendingLayout = new MutableDisposable();\r\n        this._pendingShowDetails = new MutableDisposable();\r\n        this._ignoreFocusEvents = false;\r\n        this._forceRenderingAbove = false;\r\n        this._explainMode = false;\r\n        this._showTimeout = new TimeoutTimer();\r\n        this._disposables = new DisposableStore();\r\n        this._onDidSelect = new PauseableEmitter();\r\n        this._onDidFocus = new PauseableEmitter();\r\n        this._onDidHide = new Emitter();\r\n        this._onDidShow = new Emitter();\r\n        this.onDidSelect = this._onDidSelect.event;\r\n        this.onDidFocus = this._onDidFocus.event;\r\n        this.onDidHide = this._onDidHide.event;\r\n        this.onDidShow = this._onDidShow.event;\r\n        this._onDetailsKeydown = new Emitter();\r\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\r\n        this.element = new ResizableHTMLElement();\r\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\r\n        this._contentWidget = new SuggestContentWidget(this, editor);\r\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\r\n        class ResizeState {\r\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\r\n                this.persistedSize = persistedSize;\r\n                this.currentSize = currentSize;\r\n                this.persistHeight = persistHeight;\r\n                this.persistWidth = persistWidth;\r\n            }\r\n        }\r\n        let state;\r\n        this._disposables.add(this.element.onDidWillResize(() => {\r\n            this._contentWidget.lockPreference();\r\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\r\n        }));\r\n        this._disposables.add(this.element.onDidResize(e => {\r\n            var _a, _b, _c, _d;\r\n            this._resize(e.dimension.width, e.dimension.height);\r\n            if (state) {\r\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\r\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\r\n            }\r\n            if (!e.done) {\r\n                return;\r\n            }\r\n            if (state) {\r\n                // only store width or height value that have changed and also\r\n                // only store changes that are above a certain threshold\r\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\r\n                const threshold = Math.round(itemHeight / 2);\r\n                let { width, height } = this.element.size;\r\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\r\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\r\n                }\r\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\r\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\r\n                }\r\n                this._persistedSize.store(new dom.Dimension(width, height));\r\n            }\r\n            // reset working state\r\n            this._contentWidget.unlockPreference();\r\n            state = undefined;\r\n        }));\r\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\r\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\r\n        const details = this._disposables.add(instantiationService.createInstance(SuggestDetailsWidget, this.editor));\r\n        details.onDidClose(this.toggleDetails, this, this._disposables);\r\n        this._details = new SuggestDetailsOverlay(details, this.editor);\r\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(117 /* EditorOption.suggest */).showIcons);\r\n        applyIconStyle();\r\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\r\n        this._disposables.add(renderer);\r\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\r\n        this._list = new List('SuggestWidget', this._listElement, {\r\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\r\n            getTemplateId: (_element) => 'suggestion'\r\n        }, [renderer], {\r\n            alwaysConsumeMouseWheel: true,\r\n            useShadows: false,\r\n            mouseSupport: false,\r\n            multipleSelectionSupport: false,\r\n            accessibilityProvider: {\r\n                getRole: () => 'option',\r\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\r\n                getWidgetRole: () => 'listbox',\r\n                getAriaLabel: (item) => {\r\n                    let label = item.textLabel;\r\n                    if (typeof item.completion.label !== 'string') {\r\n                        const { detail, description } = item.completion.label;\r\n                        if (detail && description) {\r\n                            label = nls.localize('label.full', '{0} {1}, {2}', label, detail, description);\r\n                        }\r\n                        else if (detail) {\r\n                            label = nls.localize('label.detail', '{0} {1}', label, detail);\r\n                        }\r\n                        else if (description) {\r\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\r\n                        }\r\n                    }\r\n                    if (!item.isResolved || !this._isDetailsVisible()) {\r\n                        return label;\r\n                    }\r\n                    const { documentation, detail } = item.completion;\r\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\r\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\r\n                },\r\n            }\r\n        });\r\n        this._list.style(getListStyles({\r\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\r\n            listInactiveFocusOutline: activeContrastBorder\r\n        }));\r\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode, suggestWidgetStatusbarMenu);\r\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(117 /* EditorOption.suggest */).showStatusBar);\r\n        applyStatusBarStyle();\r\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\r\n        this._onThemeChange(_themeService.getColorTheme());\r\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\r\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\r\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\r\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\r\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\r\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(117 /* EditorOption.suggest */)) {\r\n                applyStatusBarStyle();\r\n                applyIconStyle();\r\n            }\r\n        }));\r\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\r\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\r\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\r\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\r\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\r\n            this._onDetailsKeydown.fire(e);\r\n        }));\r\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        this._details.widget.dispose();\r\n        this._details.dispose();\r\n        this._list.dispose();\r\n        this._status.dispose();\r\n        this._disposables.dispose();\r\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._pendingLayout.dispose();\r\n        this._pendingShowDetails.dispose();\r\n        this._showTimeout.dispose();\r\n        this._contentWidget.dispose();\r\n        this.element.dispose();\r\n    }\r\n    _onEditorMouseDown(mouseEvent) {\r\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\r\n            // Clicking inside details\r\n            this._details.widget.domNode.focus();\r\n        }\r\n        else {\r\n            // Clicking outside details and inside suggest\r\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\r\n                this.editor.focus();\r\n            }\r\n        }\r\n    }\r\n    _onCursorSelectionChanged() {\r\n        if (this._state !== 0 /* State.Hidden */) {\r\n            this._contentWidget.layout();\r\n        }\r\n    }\r\n    _onListMouseDownOrTap(e) {\r\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\r\n            return;\r\n        }\r\n        // prevent stealing browser focus from the editor\r\n        e.browserEvent.preventDefault();\r\n        e.browserEvent.stopPropagation();\r\n        this._select(e.element, e.index);\r\n    }\r\n    _onListSelection(e) {\r\n        if (e.elements.length) {\r\n            this._select(e.elements[0], e.indexes[0]);\r\n        }\r\n    }\r\n    _select(item, index) {\r\n        const completionModel = this._completionModel;\r\n        if (completionModel) {\r\n            this._onDidSelect.fire({ item, index, model: completionModel });\r\n            this.editor.focus();\r\n        }\r\n    }\r\n    _onThemeChange(theme) {\r\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\r\n    }\r\n    _onListFocus(e) {\r\n        var _a;\r\n        if (this._ignoreFocusEvents) {\r\n            return;\r\n        }\r\n        if (!e.elements.length) {\r\n            if (this._currentSuggestionDetails) {\r\n                this._currentSuggestionDetails.cancel();\r\n                this._currentSuggestionDetails = undefined;\r\n                this._focusedItem = undefined;\r\n            }\r\n            this.editor.setAriaOptions({ activeDescendant: undefined });\r\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\r\n            return;\r\n        }\r\n        if (!this._completionModel) {\r\n            return;\r\n        }\r\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\r\n        const item = e.elements[0];\r\n        const index = e.indexes[0];\r\n        if (item !== this._focusedItem) {\r\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\r\n            this._currentSuggestionDetails = undefined;\r\n            this._focusedItem = item;\r\n            this._list.reveal(index);\r\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n                const loading = disposableTimeout(() => {\r\n                    if (this._isDetailsVisible()) {\r\n                        this.showDetails(true);\r\n                    }\r\n                }, 250);\r\n                const sub = token.onCancellationRequested(() => loading.dispose());\r\n                try {\r\n                    return yield item.resolve(token);\r\n                }\r\n                finally {\r\n                    loading.dispose();\r\n                    sub.dispose();\r\n                }\r\n            }));\r\n            this._currentSuggestionDetails.then(() => {\r\n                if (index >= this._list.length || item !== this._list.element(index)) {\r\n                    return;\r\n                }\r\n                // item can have extra information, so re-render\r\n                this._ignoreFocusEvents = true;\r\n                this._list.splice(index, 1, [item]);\r\n                this._list.setFocus([index]);\r\n                this._ignoreFocusEvents = false;\r\n                if (this._isDetailsVisible()) {\r\n                    this.showDetails(false);\r\n                }\r\n                else {\r\n                    this.element.domNode.classList.remove('docs-side');\r\n                }\r\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\r\n            }).catch(onUnexpectedError);\r\n        }\r\n        // emit an event\r\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\r\n    }\r\n    _setState(state) {\r\n        if (this._state === state) {\r\n            return;\r\n        }\r\n        this._state = state;\r\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\r\n        this.element.domNode.classList.remove('message');\r\n        switch (state) {\r\n            case 0 /* State.Hidden */:\r\n                dom.hide(this._messageElement, this._listElement, this._status.element);\r\n                this._details.hide(true);\r\n                this._status.hide();\r\n                this._contentWidget.hide();\r\n                this._ctxSuggestWidgetVisible.reset();\r\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\r\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\r\n                this._showTimeout.cancel();\r\n                this.element.domNode.classList.remove('visible');\r\n                this._list.splice(0, this._list.length);\r\n                this._focusedItem = undefined;\r\n                this._cappedHeight = undefined;\r\n                this._explainMode = false;\r\n                break;\r\n            case 1 /* State.Loading */:\r\n                this.element.domNode.classList.add('message');\r\n                this._messageElement.textContent = SuggestWidget_1.LOADING_MESSAGE;\r\n                dom.hide(this._listElement, this._status.element);\r\n                dom.show(this._messageElement);\r\n                this._details.hide();\r\n                this._show();\r\n                this._focusedItem = undefined;\r\n                status(SuggestWidget_1.LOADING_MESSAGE);\r\n                break;\r\n            case 2 /* State.Empty */:\r\n                this.element.domNode.classList.add('message');\r\n                this._messageElement.textContent = SuggestWidget_1.NO_SUGGESTIONS_MESSAGE;\r\n                dom.hide(this._listElement, this._status.element);\r\n                dom.show(this._messageElement);\r\n                this._details.hide();\r\n                this._show();\r\n                this._focusedItem = undefined;\r\n                status(SuggestWidget_1.NO_SUGGESTIONS_MESSAGE);\r\n                break;\r\n            case 3 /* State.Open */:\r\n                dom.hide(this._messageElement);\r\n                dom.show(this._listElement, this._status.element);\r\n                this._show();\r\n                break;\r\n            case 4 /* State.Frozen */:\r\n                dom.hide(this._messageElement);\r\n                dom.show(this._listElement, this._status.element);\r\n                this._show();\r\n                break;\r\n            case 5 /* State.Details */:\r\n                dom.hide(this._messageElement);\r\n                dom.show(this._listElement, this._status.element);\r\n                this._details.show();\r\n                this._show();\r\n                break;\r\n        }\r\n    }\r\n    _show() {\r\n        this._status.show();\r\n        this._contentWidget.show();\r\n        this._layout(this._persistedSize.restore());\r\n        this._ctxSuggestWidgetVisible.set(true);\r\n        this._showTimeout.cancelAndSet(() => {\r\n            this.element.domNode.classList.add('visible');\r\n            this._onDidShow.fire(this);\r\n        }, 100);\r\n    }\r\n    showTriggered(auto, delay) {\r\n        if (this._state !== 0 /* State.Hidden */) {\r\n            return;\r\n        }\r\n        this._contentWidget.setPosition(this.editor.getPosition());\r\n        this._isAuto = !!auto;\r\n        if (!this._isAuto) {\r\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\r\n        }\r\n    }\r\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto, noFocus) {\r\n        var _a, _b;\r\n        this._contentWidget.setPosition(this.editor.getPosition());\r\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\r\n        this._currentSuggestionDetails = undefined;\r\n        if (this._completionModel !== completionModel) {\r\n            this._completionModel = completionModel;\r\n        }\r\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\r\n            this._setState(4 /* State.Frozen */);\r\n            return;\r\n        }\r\n        const visibleCount = this._completionModel.items.length;\r\n        const isEmpty = visibleCount === 0;\r\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\r\n        if (isEmpty) {\r\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\r\n            this._completionModel = undefined;\r\n            return;\r\n        }\r\n        this._focusedItem = undefined;\r\n        // calling list.splice triggers focus event which this widget forwards. That can lead to\r\n        // suggestions being cancelled and the widget being cleared (and hidden). All this happens\r\n        // before revealing and focusing is done which means revealing and focusing will fail when\r\n        // they get run.\r\n        this._onDidFocus.pause();\r\n        this._onDidSelect.pause();\r\n        try {\r\n            this._list.splice(0, this._list.length, this._completionModel.items);\r\n            this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\r\n            this._list.reveal(selectionIndex, 0);\r\n            this._list.setFocus(noFocus ? [] : [selectionIndex]);\r\n        }\r\n        finally {\r\n            this._onDidFocus.resume();\r\n            this._onDidSelect.resume();\r\n        }\r\n        this._pendingLayout.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\r\n            this._pendingLayout.clear();\r\n            this._layout(this.element.size);\r\n            // Reset focus border\r\n            this._details.widget.domNode.classList.remove('focused');\r\n        });\r\n    }\r\n    focusSelected() {\r\n        if (this._list.length > 0) {\r\n            this._list.setFocus([0]);\r\n        }\r\n    }\r\n    selectNextPage() {\r\n        switch (this._state) {\r\n            case 0 /* State.Hidden */:\r\n                return false;\r\n            case 5 /* State.Details */:\r\n                this._details.widget.pageDown();\r\n                return true;\r\n            case 1 /* State.Loading */:\r\n                return !this._isAuto;\r\n            default:\r\n                this._list.focusNextPage();\r\n                return true;\r\n        }\r\n    }\r\n    selectNext() {\r\n        switch (this._state) {\r\n            case 0 /* State.Hidden */:\r\n                return false;\r\n            case 1 /* State.Loading */:\r\n                return !this._isAuto;\r\n            default:\r\n                this._list.focusNext(1, true);\r\n                return true;\r\n        }\r\n    }\r\n    selectLast() {\r\n        switch (this._state) {\r\n            case 0 /* State.Hidden */:\r\n                return false;\r\n            case 5 /* State.Details */:\r\n                this._details.widget.scrollBottom();\r\n                return true;\r\n            case 1 /* State.Loading */:\r\n                return !this._isAuto;\r\n            default:\r\n                this._list.focusLast();\r\n                return true;\r\n        }\r\n    }\r\n    selectPreviousPage() {\r\n        switch (this._state) {\r\n            case 0 /* State.Hidden */:\r\n                return false;\r\n            case 5 /* State.Details */:\r\n                this._details.widget.pageUp();\r\n                return true;\r\n            case 1 /* State.Loading */:\r\n                return !this._isAuto;\r\n            default:\r\n                this._list.focusPreviousPage();\r\n                return true;\r\n        }\r\n    }\r\n    selectPrevious() {\r\n        switch (this._state) {\r\n            case 0 /* State.Hidden */:\r\n                return false;\r\n            case 1 /* State.Loading */:\r\n                return !this._isAuto;\r\n            default:\r\n                this._list.focusPrevious(1, true);\r\n                return false;\r\n        }\r\n    }\r\n    selectFirst() {\r\n        switch (this._state) {\r\n            case 0 /* State.Hidden */:\r\n                return false;\r\n            case 5 /* State.Details */:\r\n                this._details.widget.scrollTop();\r\n                return true;\r\n            case 1 /* State.Loading */:\r\n                return !this._isAuto;\r\n            default:\r\n                this._list.focusFirst();\r\n                return true;\r\n        }\r\n    }\r\n    getFocusedItem() {\r\n        if (this._state !== 0 /* State.Hidden */\r\n            && this._state !== 2 /* State.Empty */\r\n            && this._state !== 1 /* State.Loading */\r\n            && this._completionModel\r\n            && this._list.getFocus().length > 0) {\r\n            return {\r\n                item: this._list.getFocusedElements()[0],\r\n                index: this._list.getFocus()[0],\r\n                model: this._completionModel\r\n            };\r\n        }\r\n        return undefined;\r\n    }\r\n    toggleDetailsFocus() {\r\n        if (this._state === 5 /* State.Details */) {\r\n            this._setState(3 /* State.Open */);\r\n            this._details.widget.domNode.classList.remove('focused');\r\n        }\r\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\r\n            this._setState(5 /* State.Details */);\r\n            this._details.widget.domNode.classList.add('focused');\r\n        }\r\n    }\r\n    toggleDetails() {\r\n        if (this._isDetailsVisible()) {\r\n            // hide details widget\r\n            this._pendingShowDetails.clear();\r\n            this._ctxSuggestWidgetDetailsVisible.set(false);\r\n            this._setDetailsVisible(false);\r\n            this._details.hide();\r\n            this.element.domNode.classList.remove('shows-details');\r\n        }\r\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\r\n            // show details widget (iff possible)\r\n            this._ctxSuggestWidgetDetailsVisible.set(true);\r\n            this._setDetailsVisible(true);\r\n            this.showDetails(false);\r\n        }\r\n    }\r\n    showDetails(loading) {\r\n        this._pendingShowDetails.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\r\n            this._pendingShowDetails.clear();\r\n            this._details.show();\r\n            if (loading) {\r\n                this._details.widget.renderLoading();\r\n            }\r\n            else {\r\n                this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\r\n            }\r\n            this._positionDetails();\r\n            this.editor.focus();\r\n            this.element.domNode.classList.add('shows-details');\r\n        });\r\n    }\r\n    toggleExplainMode() {\r\n        if (this._list.getFocusedElements()[0]) {\r\n            this._explainMode = !this._explainMode;\r\n            if (!this._isDetailsVisible()) {\r\n                this.toggleDetails();\r\n            }\r\n            else {\r\n                this.showDetails(false);\r\n            }\r\n        }\r\n    }\r\n    resetPersistedSize() {\r\n        this._persistedSize.reset();\r\n    }\r\n    hideWidget() {\r\n        var _a;\r\n        this._pendingLayout.clear();\r\n        this._pendingShowDetails.clear();\r\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._setState(0 /* State.Hidden */);\r\n        this._onDidHide.fire(this);\r\n        this.element.clearSashHoverState();\r\n        // ensure that a reasonable widget height is persisted so that\r\n        // accidential \"resize-to-single-items\" cases aren't happening\r\n        const dim = this._persistedSize.restore();\r\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\r\n        if (dim && dim.height < minPersistedHeight) {\r\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\r\n        }\r\n    }\r\n    isFrozen() {\r\n        return this._state === 4 /* State.Frozen */;\r\n    }\r\n    _afterRender(position) {\r\n        if (position === null) {\r\n            if (this._isDetailsVisible()) {\r\n                this._details.hide(); //todo@jrieken soft-hide\r\n            }\r\n            return;\r\n        }\r\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\r\n            // no special positioning when widget isn't showing list\r\n            return;\r\n        }\r\n        if (this._isDetailsVisible()) {\r\n            this._details.show();\r\n        }\r\n        this._positionDetails();\r\n    }\r\n    _layout(size) {\r\n        var _a, _b, _c;\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (!this.editor.getDomNode()) {\r\n            // happens when running tests\r\n            return;\r\n        }\r\n        const bodyBox = dom.getClientArea(this.element.domNode.ownerDocument.body);\r\n        const info = this.getLayoutInfo();\r\n        if (!size) {\r\n            size = info.defaultSize;\r\n        }\r\n        let height = size.height;\r\n        let width = size.width;\r\n        // status bar\r\n        this._status.element.style.height = `${info.itemHeight}px`;\r\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\r\n            // showing a message only\r\n            height = info.itemHeight + info.borderHeight;\r\n            width = info.defaultSize.width / 2;\r\n            this.element.enableSashes(false, false, false, false);\r\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\r\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\r\n        }\r\n        else {\r\n            // showing items\r\n            // width math\r\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\r\n            if (width > maxWidth) {\r\n                width = maxWidth;\r\n            }\r\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\r\n            // height math\r\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\r\n            const minHeight = info.itemHeight + info.statusBarHeight;\r\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\r\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\r\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\r\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\r\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\r\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\r\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\r\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\r\n                // Restore the old (wanted) height when the current\r\n                // height is capped to fit\r\n                height = this._cappedHeight.wanted;\r\n            }\r\n            if (height < minHeight) {\r\n                height = minHeight;\r\n            }\r\n            if (height > maxHeight) {\r\n                height = maxHeight;\r\n            }\r\n            const forceRenderingAboveRequiredSpace = 150;\r\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\r\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\r\n                this.element.enableSashes(true, true, false, false);\r\n                maxHeight = maxHeightAbove;\r\n            }\r\n            else {\r\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\r\n                this.element.enableSashes(false, true, true, false);\r\n                maxHeight = maxHeightBelow;\r\n            }\r\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\r\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\r\n            this.element.minSize = new dom.Dimension(220, minHeight);\r\n            // Know when the height was capped to fit and remember\r\n            // the wanted height for later. This is required when going\r\n            // left to widen suggestions.\r\n            this._cappedHeight = height === fullHeight\r\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\r\n                : undefined;\r\n        }\r\n        this._resize(width, height);\r\n    }\r\n    _resize(width, height) {\r\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\r\n        width = Math.min(maxWidth, width);\r\n        height = Math.min(maxHeight, height);\r\n        const { statusBarHeight } = this.getLayoutInfo();\r\n        this._list.layout(height - statusBarHeight, width);\r\n        this._listElement.style.height = `${height - statusBarHeight}px`;\r\n        this.element.layout(height, width);\r\n        this._contentWidget.layout();\r\n        this._positionDetails();\r\n    }\r\n    _positionDetails() {\r\n        var _a;\r\n        if (this._isDetailsVisible()) {\r\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\r\n        }\r\n    }\r\n    getLayoutInfo() {\r\n        const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\r\n        const itemHeight = clamp(this.editor.getOption(119 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\r\n        const statusBarHeight = !this.editor.getOption(117 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\r\n        const borderWidth = this._details.widget.borderWidth;\r\n        const borderHeight = 2 * borderWidth;\r\n        return {\r\n            itemHeight,\r\n            statusBarHeight,\r\n            borderWidth,\r\n            borderHeight,\r\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\r\n            verticalPadding: 22,\r\n            horizontalPadding: 14,\r\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\r\n        };\r\n    }\r\n    _isDetailsVisible() {\r\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\r\n    }\r\n    _setDetailsVisible(value) {\r\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\r\n    }\r\n    forceRenderingAbove() {\r\n        if (!this._forceRenderingAbove) {\r\n            this._forceRenderingAbove = true;\r\n            this._layout(this._persistedSize.restore());\r\n        }\r\n    }\r\n    stopForceRenderingAbove() {\r\n        this._forceRenderingAbove = false;\r\n    }\r\n};\r\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\r\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\r\nSuggestWidget = SuggestWidget_1 = __decorate([\r\n    __param(1, IStorageService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, IThemeService),\r\n    __param(4, IInstantiationService)\r\n], SuggestWidget);\r\nexport { SuggestWidget };\r\nexport class SuggestContentWidget {\r\n    constructor(_widget, _editor) {\r\n        this._widget = _widget;\r\n        this._editor = _editor;\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this._preferenceLocked = false;\r\n        this._added = false;\r\n        this._hidden = false;\r\n    }\r\n    dispose() {\r\n        if (this._added) {\r\n            this._added = false;\r\n            this._editor.removeContentWidget(this);\r\n        }\r\n    }\r\n    getId() {\r\n        return 'editor.widget.suggestWidget';\r\n    }\r\n    getDomNode() {\r\n        return this._widget.element.domNode;\r\n    }\r\n    show() {\r\n        this._hidden = false;\r\n        if (!this._added) {\r\n            this._added = true;\r\n            this._editor.addContentWidget(this);\r\n        }\r\n    }\r\n    hide() {\r\n        if (!this._hidden) {\r\n            this._hidden = true;\r\n            this.layout();\r\n        }\r\n    }\r\n    layout() {\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n    getPosition() {\r\n        if (this._hidden || !this._position || !this._preference) {\r\n            return null;\r\n        }\r\n        return {\r\n            position: this._position,\r\n            preference: [this._preference]\r\n        };\r\n    }\r\n    beforeRender() {\r\n        const { height, width } = this._widget.element.size;\r\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\r\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\r\n    }\r\n    afterRender(position) {\r\n        this._widget._afterRender(position);\r\n    }\r\n    setPreference(preference) {\r\n        if (!this._preferenceLocked) {\r\n            this._preference = preference;\r\n        }\r\n    }\r\n    lockPreference() {\r\n        this._preferenceLocked = true;\r\n    }\r\n    unlockPreference() {\r\n        this._preferenceLocked = false;\r\n    }\r\n    setPosition(position) {\r\n        this._position = position;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\r\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nclass StatusBarViewItem extends MenuEntryActionViewItem {\r\n    updateLabel() {\r\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\r\n        if (!kb) {\r\n            return super.updateLabel();\r\n        }\r\n        if (this.label) {\r\n            this.label.textContent = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\r\n        }\r\n    }\r\n    static symbolPrintEnter(kb) {\r\n        var _a;\r\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\r\n    }\r\n}\r\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\r\n    constructor(container, _menuId, instantiationService, _menuService, _contextKeyService) {\r\n        this._menuId = _menuId;\r\n        this._menuService = _menuService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._menuDisposables = new DisposableStore();\r\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\r\n        const actionViewItemProvider = (action => {\r\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\r\n        });\r\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\r\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\r\n        this._leftActions.domNode.classList.add('left');\r\n        this._rightActions.domNode.classList.add('right');\r\n    }\r\n    dispose() {\r\n        this._menuDisposables.dispose();\r\n        this._leftActions.dispose();\r\n        this._rightActions.dispose();\r\n        this.element.remove();\r\n    }\r\n    show() {\r\n        const menu = this._menuService.createMenu(this._menuId, this._contextKeyService);\r\n        const renderMenu = () => {\r\n            const left = [];\r\n            const right = [];\r\n            for (const [group, actions] of menu.getActions()) {\r\n                if (group === 'left') {\r\n                    left.push(...actions);\r\n                }\r\n                else {\r\n                    right.push(...actions);\r\n                }\r\n            }\r\n            this._leftActions.clear();\r\n            this._leftActions.push(left);\r\n            this._rightActions.clear();\r\n            this._rightActions.push(right);\r\n        };\r\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\r\n        this._menuDisposables.add(menu);\r\n    }\r\n    hide() {\r\n        this._menuDisposables.clear();\r\n    }\r\n};\r\nSuggestWidgetStatus = __decorate([\r\n    __param(2, IInstantiationService),\r\n    __param(3, IMenuService),\r\n    __param(4, IContextKeyService)\r\n], SuggestWidgetStatus);\r\nexport { SuggestWidgetStatus };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nexport function canExpandCompletionItem(item) {\r\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\r\n}\r\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\r\n    constructor(_editor, instaService) {\r\n        this._editor = _editor;\r\n        this._onDidClose = new Emitter();\r\n        this.onDidClose = this._onDidClose.event;\r\n        this._onDidChangeContents = new Emitter();\r\n        this.onDidChangeContents = this._onDidChangeContents.event;\r\n        this._disposables = new DisposableStore();\r\n        this._renderDisposeable = new DisposableStore();\r\n        this._borderWidth = 1;\r\n        this._size = new dom.Dimension(330, 0);\r\n        this.domNode = dom.$('.suggest-details');\r\n        this.domNode.classList.add('no-docs');\r\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\r\n        this._body = dom.$('.body');\r\n        this._scrollbar = new DomScrollableElement(this._body, {\r\n            alwaysConsumeMouseWheel: true,\r\n        });\r\n        dom.append(this.domNode, this._scrollbar.getDomNode());\r\n        this._disposables.add(this._scrollbar);\r\n        this._header = dom.append(this._body, dom.$('.header'));\r\n        this._close = dom.append(this._header, dom.$('span' + ThemeIcon.asCSSSelector(Codicon.close)));\r\n        this._close.title = nls.localize('details.close', \"Close\");\r\n        this._type = dom.append(this._header, dom.$('p.type'));\r\n        this._docs = dom.append(this._body, dom.$('p.docs'));\r\n        this._configureFont();\r\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\r\n                this._configureFont();\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this._renderDisposeable.dispose();\r\n    }\r\n    _configureFont() {\r\n        const options = this._editor.getOptions();\r\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\r\n        const fontFamily = fontInfo.getMassagedFontFamily();\r\n        const fontSize = options.get(118 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\r\n        const lineHeight = options.get(119 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\r\n        const fontWeight = fontInfo.fontWeight;\r\n        const fontSizePx = `${fontSize}px`;\r\n        const lineHeightPx = `${lineHeight}px`;\r\n        this.domNode.style.fontSize = fontSizePx;\r\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\r\n        this.domNode.style.fontWeight = fontWeight;\r\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\r\n        this._type.style.fontFamily = fontFamily;\r\n        this._close.style.height = lineHeightPx;\r\n        this._close.style.width = lineHeightPx;\r\n    }\r\n    getLayoutInfo() {\r\n        const lineHeight = this._editor.getOption(119 /* EditorOption.suggestLineHeight */) || this._editor.getOption(50 /* EditorOption.fontInfo */).lineHeight;\r\n        const borderWidth = this._borderWidth;\r\n        const borderHeight = borderWidth * 2;\r\n        return {\r\n            lineHeight,\r\n            borderWidth,\r\n            borderHeight,\r\n            verticalPadding: 22,\r\n            horizontalPadding: 14\r\n        };\r\n    }\r\n    renderLoading() {\r\n        this._type.textContent = nls.localize('loading', \"Loading...\");\r\n        this._docs.textContent = '';\r\n        this.domNode.classList.remove('no-docs', 'no-type');\r\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\r\n        this._onDidChangeContents.fire(this);\r\n    }\r\n    renderItem(item, explainMode) {\r\n        var _a, _b;\r\n        this._renderDisposeable.clear();\r\n        let { detail, documentation } = item.completion;\r\n        if (explainMode) {\r\n            let md = '';\r\n            md += `score: ${item.score[0]}\\n`;\r\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\r\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\r\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\r\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\r\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\r\n            documentation = new MarkdownString().appendCodeblock('empty', md);\r\n            detail = `Provider: ${item.provider._debugDisplayName}`;\r\n        }\r\n        if (!explainMode && !canExpandCompletionItem(item)) {\r\n            this.clearContents();\r\n            return;\r\n        }\r\n        this.domNode.classList.remove('no-docs', 'no-type');\r\n        // --- details\r\n        if (detail) {\r\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\r\n            this._type.textContent = cappedDetail;\r\n            this._type.title = cappedDetail;\r\n            dom.show(this._type);\r\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\r\n        }\r\n        else {\r\n            dom.clearNode(this._type);\r\n            this._type.title = '';\r\n            dom.hide(this._type);\r\n            this.domNode.classList.add('no-type');\r\n        }\r\n        // --- documentation\r\n        dom.clearNode(this._docs);\r\n        if (typeof documentation === 'string') {\r\n            this._docs.classList.remove('markdown-docs');\r\n            this._docs.textContent = documentation;\r\n        }\r\n        else if (documentation) {\r\n            this._docs.classList.add('markdown-docs');\r\n            dom.clearNode(this._docs);\r\n            const renderedContents = this._markdownRenderer.render(documentation);\r\n            this._docs.appendChild(renderedContents.element);\r\n            this._renderDisposeable.add(renderedContents);\r\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\r\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\r\n                this._onDidChangeContents.fire(this);\r\n            }));\r\n        }\r\n        this.domNode.style.userSelect = 'text';\r\n        this.domNode.tabIndex = -1;\r\n        this._close.onmousedown = e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        };\r\n        this._close.onclick = e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this._onDidClose.fire();\r\n        };\r\n        this._body.scrollTop = 0;\r\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\r\n        this._onDidChangeContents.fire(this);\r\n    }\r\n    clearContents() {\r\n        this.domNode.classList.add('no-docs');\r\n        this._type.textContent = '';\r\n        this._docs.textContent = '';\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    layout(width, height) {\r\n        const newSize = new dom.Dimension(width, height);\r\n        if (!dom.Dimension.equals(newSize, this._size)) {\r\n            this._size = newSize;\r\n            dom.size(this.domNode, width, height);\r\n        }\r\n        this._scrollbar.scanDomNode();\r\n    }\r\n    scrollDown(much = 8) {\r\n        this._body.scrollTop += much;\r\n    }\r\n    scrollUp(much = 8) {\r\n        this._body.scrollTop -= much;\r\n    }\r\n    scrollTop() {\r\n        this._body.scrollTop = 0;\r\n    }\r\n    scrollBottom() {\r\n        this._body.scrollTop = this._body.scrollHeight;\r\n    }\r\n    pageDown() {\r\n        this.scrollDown(80);\r\n    }\r\n    pageUp() {\r\n        this.scrollUp(80);\r\n    }\r\n    set borderWidth(width) {\r\n        this._borderWidth = width;\r\n    }\r\n    get borderWidth() {\r\n        return this._borderWidth;\r\n    }\r\n};\r\nSuggestDetailsWidget = __decorate([\r\n    __param(1, IInstantiationService)\r\n], SuggestDetailsWidget);\r\nexport { SuggestDetailsWidget };\r\nexport class SuggestDetailsOverlay {\r\n    constructor(widget, _editor) {\r\n        this.widget = widget;\r\n        this._editor = _editor;\r\n        this._disposables = new DisposableStore();\r\n        this._added = false;\r\n        this._preferAlignAtTop = true;\r\n        this._resizable = new ResizableHTMLElement();\r\n        this._resizable.domNode.classList.add('suggest-details-container');\r\n        this._resizable.domNode.appendChild(widget.domNode);\r\n        this._resizable.enableSashes(false, true, true, false);\r\n        let topLeftNow;\r\n        let sizeNow;\r\n        let deltaTop = 0;\r\n        let deltaLeft = 0;\r\n        this._disposables.add(this._resizable.onDidWillResize(() => {\r\n            topLeftNow = this._topLeft;\r\n            sizeNow = this._resizable.size;\r\n        }));\r\n        this._disposables.add(this._resizable.onDidResize(e => {\r\n            if (topLeftNow && sizeNow) {\r\n                this.widget.layout(e.dimension.width, e.dimension.height);\r\n                let updateTopLeft = false;\r\n                if (e.west) {\r\n                    deltaLeft = sizeNow.width - e.dimension.width;\r\n                    updateTopLeft = true;\r\n                }\r\n                if (e.north) {\r\n                    deltaTop = sizeNow.height - e.dimension.height;\r\n                    updateTopLeft = true;\r\n                }\r\n                if (updateTopLeft) {\r\n                    this._applyTopLeft({\r\n                        top: topLeftNow.top + deltaTop,\r\n                        left: topLeftNow.left + deltaLeft,\r\n                    });\r\n                }\r\n            }\r\n            if (e.done) {\r\n                topLeftNow = undefined;\r\n                sizeNow = undefined;\r\n                deltaTop = 0;\r\n                deltaLeft = 0;\r\n                this._userSize = e.dimension;\r\n            }\r\n        }));\r\n        this._disposables.add(this.widget.onDidChangeContents(() => {\r\n            var _a;\r\n            if (this._anchorBox) {\r\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._resizable.dispose();\r\n        this._disposables.dispose();\r\n        this.hide();\r\n    }\r\n    getId() {\r\n        return 'suggest.details';\r\n    }\r\n    getDomNode() {\r\n        return this._resizable.domNode;\r\n    }\r\n    getPosition() {\r\n        return null;\r\n    }\r\n    show() {\r\n        if (!this._added) {\r\n            this._editor.addOverlayWidget(this);\r\n            this.getDomNode().style.position = 'fixed';\r\n            this._added = true;\r\n        }\r\n    }\r\n    hide(sessionEnded = false) {\r\n        this._resizable.clearSashHoverState();\r\n        if (this._added) {\r\n            this._editor.removeOverlayWidget(this);\r\n            this._added = false;\r\n            this._anchorBox = undefined;\r\n            this._topLeft = undefined;\r\n        }\r\n        if (sessionEnded) {\r\n            this._userSize = undefined;\r\n            this.widget.clearContents();\r\n        }\r\n    }\r\n    placeAtAnchor(anchor, preferAlignAtTop) {\r\n        var _a;\r\n        const anchorBox = anchor.getBoundingClientRect();\r\n        this._anchorBox = anchorBox;\r\n        this._preferAlignAtTop = preferAlignAtTop;\r\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\r\n    }\r\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\r\n        var _a;\r\n        const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\r\n        const info = this.widget.getLayoutInfo();\r\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\r\n        const defaultTop = anchorBox.top;\r\n        // EAST\r\n        const eastPlacement = (function () {\r\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\r\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\r\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\r\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\r\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\r\n        })();\r\n        // WEST\r\n        const westPlacement = (function () {\r\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\r\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\r\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\r\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\r\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\r\n        })();\r\n        // SOUTH\r\n        const southPacement = (function () {\r\n            const left = anchorBox.left;\r\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\r\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\r\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\r\n        })();\r\n        // take first placement that fits or the first with \"least bad\" fit\r\n        const placements = [eastPlacement, westPlacement, southPacement];\r\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\r\n        // top/bottom placement\r\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\r\n        let alignAtTop;\r\n        let height = size.height;\r\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\r\n        if (height > maxHeight) {\r\n            height = maxHeight;\r\n        }\r\n        let maxSize;\r\n        if (preferAlignAtTop) {\r\n            if (height <= placement.maxSizeTop.height) {\r\n                alignAtTop = true;\r\n                maxSize = placement.maxSizeTop;\r\n            }\r\n            else {\r\n                alignAtTop = false;\r\n                maxSize = placement.maxSizeBottom;\r\n            }\r\n        }\r\n        else {\r\n            if (height <= placement.maxSizeBottom.height) {\r\n                alignAtTop = false;\r\n                maxSize = placement.maxSizeBottom;\r\n            }\r\n            else {\r\n                alignAtTop = true;\r\n                maxSize = placement.maxSizeTop;\r\n            }\r\n        }\r\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\r\n        this.getDomNode().style.position = 'fixed';\r\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\r\n        this._resizable.minSize = placement.minSize;\r\n        this._resizable.maxSize = maxSize;\r\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\r\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\r\n    }\r\n    _applyTopLeft(topLeft) {\r\n        this._topLeft = topLeft;\r\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\r\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar _a;\r\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\r\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { createMatches } from '../../../../base/common/filters.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { CompletionItemKinds } from '../../../common/languages.js';\r\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { FileKind } from '../../../../platform/files/common/files.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\r\nexport function getAriaId(index) {\r\n    return `suggest-aria-id:${index}`;\r\n}\r\nconst suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\r\nconst _completionItemColor = new (_a = class ColorExtractor {\r\n        extract(item, out) {\r\n            if (item.textLabel.match(_a._regexStrict)) {\r\n                out[0] = item.textLabel;\r\n                return true;\r\n            }\r\n            if (item.completion.detail && item.completion.detail.match(_a._regexStrict)) {\r\n                out[0] = item.completion.detail;\r\n                return true;\r\n            }\r\n            if (typeof item.completion.documentation === 'string') {\r\n                const match = _a._regexRelaxed.exec(item.completion.documentation);\r\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\r\n                    out[0] = match[0];\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    },\r\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\r\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\r\n    _a);\r\nlet ItemRenderer = class ItemRenderer {\r\n    constructor(_editor, _modelService, _languageService, _themeService) {\r\n        this._editor = _editor;\r\n        this._modelService = _modelService;\r\n        this._languageService = _languageService;\r\n        this._themeService = _themeService;\r\n        this._onDidToggleDetails = new Emitter();\r\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\r\n        this.templateId = 'suggestion';\r\n    }\r\n    dispose() {\r\n        this._onDidToggleDetails.dispose();\r\n    }\r\n    renderTemplate(container) {\r\n        const disposables = new DisposableStore();\r\n        const root = container;\r\n        root.classList.add('show-file-icons');\r\n        const icon = append(container, $('.icon'));\r\n        const colorspan = append(icon, $('span.colorspan'));\r\n        const text = append(container, $('.contents'));\r\n        const main = append(text, $('.main'));\r\n        const iconContainer = append(main, $('.icon-label.codicon'));\r\n        const left = append(main, $('span.left'));\r\n        const right = append(main, $('span.right'));\r\n        const iconLabel = new IconLabel(left, { supportHighlights: true, supportIcons: true });\r\n        disposables.add(iconLabel);\r\n        const parametersLabel = append(left, $('span.signature-label'));\r\n        const qualifierLabel = append(left, $('span.qualifier-label'));\r\n        const detailsLabel = append(right, $('span.details-label'));\r\n        const readMore = append(right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\r\n        readMore.title = nls.localize('readMore', \"Read More\");\r\n        const configureFont = () => {\r\n            const options = this._editor.getOptions();\r\n            const fontInfo = options.get(50 /* EditorOption.fontInfo */);\r\n            const fontFamily = fontInfo.getMassagedFontFamily();\r\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\r\n            const fontSize = options.get(118 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\r\n            const lineHeight = options.get(119 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\r\n            const fontWeight = fontInfo.fontWeight;\r\n            const letterSpacing = fontInfo.letterSpacing;\r\n            const fontSizePx = `${fontSize}px`;\r\n            const lineHeightPx = `${lineHeight}px`;\r\n            const letterSpacingPx = `${letterSpacing}px`;\r\n            root.style.fontSize = fontSizePx;\r\n            root.style.fontWeight = fontWeight;\r\n            root.style.letterSpacing = letterSpacingPx;\r\n            main.style.fontFamily = fontFamily;\r\n            main.style.fontFeatureSettings = fontFeatureSettings;\r\n            main.style.lineHeight = lineHeightPx;\r\n            icon.style.height = lineHeightPx;\r\n            icon.style.width = lineHeightPx;\r\n            readMore.style.height = lineHeightPx;\r\n            readMore.style.width = lineHeightPx;\r\n        };\r\n        configureFont();\r\n        disposables.add(this._editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(118 /* EditorOption.suggestFontSize */) || e.hasChanged(119 /* EditorOption.suggestLineHeight */)) {\r\n                configureFont();\r\n            }\r\n        }));\r\n        return { root, left, right, icon, colorspan, iconLabel, iconContainer, parametersLabel, qualifierLabel, detailsLabel, readMore, disposables };\r\n    }\r\n    renderElement(element, index, data) {\r\n        const { completion } = element;\r\n        data.root.id = getAriaId(index);\r\n        data.colorspan.style.backgroundColor = '';\r\n        const labelOptions = {\r\n            labelEscapeNewLines: true,\r\n            matches: createMatches(element.score)\r\n        };\r\n        const color = [];\r\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\r\n            // special logic for 'color' completion items\r\n            data.icon.className = 'icon customcolor';\r\n            data.iconContainer.className = 'icon hide';\r\n            data.colorspan.style.backgroundColor = color[0];\r\n        }\r\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\r\n            // special logic for 'file' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\r\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\r\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\r\n        }\r\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\r\n            // special logic for 'folder' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            labelOptions.extraClasses = [\r\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\r\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\r\n            ].flat();\r\n        }\r\n        else {\r\n            // normal icon\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = '';\r\n            data.iconContainer.classList.add('suggest-icon', ...ThemeIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\r\n        }\r\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\r\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\r\n            labelOptions.matches = [];\r\n        }\r\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\r\n        if (typeof completion.label === 'string') {\r\n            data.parametersLabel.textContent = '';\r\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\r\n            data.root.classList.add('string-label');\r\n        }\r\n        else {\r\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\r\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\r\n            data.root.classList.remove('string-label');\r\n        }\r\n        if (this._editor.getOption(117 /* EditorOption.suggest */).showInlineDetails) {\r\n            show(data.detailsLabel);\r\n        }\r\n        else {\r\n            hide(data.detailsLabel);\r\n        }\r\n        if (canExpandCompletionItem(element)) {\r\n            data.right.classList.add('can-expand-details');\r\n            show(data.readMore);\r\n            data.readMore.onmousedown = e => {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            };\r\n            data.readMore.onclick = e => {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                this._onDidToggleDetails.fire();\r\n            };\r\n        }\r\n        else {\r\n            data.right.classList.remove('can-expand-details');\r\n            hide(data.readMore);\r\n            data.readMore.onmousedown = null;\r\n            data.readMore.onclick = null;\r\n        }\r\n    }\r\n    disposeTemplate(templateData) {\r\n        templateData.disposables.dispose();\r\n    }\r\n};\r\nItemRenderer = __decorate([\r\n    __param(1, IModelService),\r\n    __param(2, ILanguageService),\r\n    __param(3, IThemeService)\r\n], ItemRenderer);\r\nexport { ItemRenderer };\r\nfunction stripNewLines(str) {\r\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { DataUri } from '../../../base/common/resources.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\r\nimport { FileKind } from '../../../platform/files/common/files.js';\r\nconst fileIconDirectoryRegex = /(?:\\/|^)(?:([^\\/]+)\\/)?([^\\/]+)$/;\r\nexport function getIconClasses(modelService, languageService, resource, fileKind) {\r\n    // we always set these base classes even if we do not have a path\r\n    const classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\r\n    if (resource) {\r\n        // Get the path and name of the resource. For data-URIs, we need to parse specially\r\n        let name;\r\n        if (resource.scheme === Schemas.data) {\r\n            const metadata = DataUri.parseMetaData(resource);\r\n            name = metadata.get(DataUri.META_DATA_LABEL);\r\n        }\r\n        else {\r\n            const match = resource.path.match(fileIconDirectoryRegex);\r\n            if (match) {\r\n                name = cssEscape(match[2].toLowerCase());\r\n                if (match[1]) {\r\n                    classes.push(`${cssEscape(match[1].toLowerCase())}-name-dir-icon`); // parent directory\r\n                }\r\n            }\r\n            else {\r\n                name = cssEscape(resource.authority.toLowerCase());\r\n            }\r\n        }\r\n        // Folders\r\n        if (fileKind === FileKind.FOLDER) {\r\n            classes.push(`${name}-name-folder-icon`);\r\n        }\r\n        // Files\r\n        else {\r\n            // Name & Extension(s)\r\n            if (name) {\r\n                classes.push(`${name}-name-file-icon`);\r\n                classes.push(`name-file-icon`); // extra segment to increase file-name score\r\n                // Avoid doing an explosive combination of extensions for very long filenames\r\n                // (most file systems do not allow files > 255 length) with lots of `.` characters\r\n                // https://github.com/microsoft/vscode/issues/116199\r\n                if (name.length <= 255) {\r\n                    const dotSegments = name.split('.');\r\n                    for (let i = 1; i < dotSegments.length; i++) {\r\n                        classes.push(`${dotSegments.slice(i).join('.')}-ext-file-icon`); // add each combination of all found extensions if more than one\r\n                    }\r\n                }\r\n                classes.push(`ext-file-icon`); // extra segment to increase file-ext score\r\n            }\r\n            // Detected Mode\r\n            const detectedLanguageId = detectLanguageId(modelService, languageService, resource);\r\n            if (detectedLanguageId) {\r\n                classes.push(`${cssEscape(detectedLanguageId)}-lang-file-icon`);\r\n            }\r\n        }\r\n    }\r\n    return classes;\r\n}\r\nfunction detectLanguageId(modelService, languageService, resource) {\r\n    if (!resource) {\r\n        return null; // we need a resource at least\r\n    }\r\n    let languageId = null;\r\n    // Data URI: check for encoded metadata\r\n    if (resource.scheme === Schemas.data) {\r\n        const metadata = DataUri.parseMetaData(resource);\r\n        const mime = metadata.get(DataUri.META_DATA_MIME);\r\n        if (mime) {\r\n            languageId = languageService.getLanguageIdByMimeType(mime);\r\n        }\r\n    }\r\n    // Any other URI: check for model if existing\r\n    else {\r\n        const model = modelService.getModel(resource);\r\n        if (model) {\r\n            languageId = model.getLanguageId();\r\n        }\r\n    }\r\n    // only take if the language id is specific (aka no just plain text)\r\n    if (languageId && languageId !== PLAINTEXT_LANGUAGE_ID) {\r\n        return languageId;\r\n    }\r\n    // otherwise fallback to path based detection\r\n    return languageService.guessLanguageIdByFilepathOrFirstLine(resource);\r\n}\r\nfunction cssEscape(str) {\r\n    return str.replace(/[\\11\\12\\14\\15\\40]/g, '/'); // HTML class names can not contain certain whitespace characters, use / instead, which doesn't exist in file names.\r\n}\r\n", "//#endregion\r\n//#region Utilities\r\nexport var FileKind;\r\n(function (FileKind) {\r\n    FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\r\n    FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\r\n    FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\r\n})(FileKind || (FileKind = {}));\r\n//#endregion\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, constObservable } from '../../../../base/common/observable.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\r\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\r\nimport { InlineSuggestionHintsContentWidget } from './inlineCompletionsHintsWidget.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nexport class InlineCompletionsHover {\r\n    constructor(owner, range, controller) {\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.controller = controller;\r\n    }\r\n    isValidForHoverAnchor(anchor) {\r\n        return (anchor.type === 1 /* HoverAnchorType.Range */\r\n            && this.range.startColumn <= anchor.range.startColumn\r\n            && this.range.endColumn >= anchor.range.endColumn);\r\n    }\r\n}\r\nlet InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\r\n    constructor(_editor, _languageService, _openerService, accessibilityService, _instantiationService, _telemetryService) {\r\n        this._editor = _editor;\r\n        this._languageService = _languageService;\r\n        this._openerService = _openerService;\r\n        this.accessibilityService = accessibilityService;\r\n        this._instantiationService = _instantiationService;\r\n        this._telemetryService = _telemetryService;\r\n        this.hoverOrdinal = 4;\r\n    }\r\n    suggestHoverAnchor(mouseEvent) {\r\n        const controller = InlineCompletionsController.get(this._editor);\r\n        if (!controller) {\r\n            return null;\r\n        }\r\n        const target = mouseEvent.target;\r\n        if (target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\r\n            // handle the case where the mouse is over the view zone\r\n            const viewZoneData = target.detail;\r\n            if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\r\n                return new HoverForeignElementAnchor(1000, this, Range.fromPositions(this._editor.getModel().validatePosition(viewZoneData.positionBefore || viewZoneData.position)), mouseEvent.event.posx, mouseEvent.event.posy, false);\r\n            }\r\n        }\r\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\r\n            // handle the case where the mouse is over the empty portion of a line following ghost text\r\n            if (controller.shouldShowHoverAt(target.range)) {\r\n                return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\r\n            }\r\n        }\r\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\r\n            // handle the case where the mouse is directly over ghost text\r\n            const mightBeForeignElement = target.detail.mightBeForeignElement;\r\n            if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\r\n                return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    computeSync(anchor, lineDecorations) {\r\n        if (this._editor.getOption(62 /* EditorOption.inlineSuggest */).showToolbar === 'always') {\r\n            return [];\r\n        }\r\n        const controller = InlineCompletionsController.get(this._editor);\r\n        if (controller && controller.shouldShowHoverAt(anchor.range)) {\r\n            return [new InlineCompletionsHover(this, anchor.range, controller)];\r\n        }\r\n        return [];\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        const disposableStore = new DisposableStore();\r\n        const part = hoverParts[0];\r\n        this._telemetryService.publicLog2('inlineCompletionHover.shown');\r\n        if (this.accessibilityService.isScreenReaderOptimized() && !this._editor.getOption(8 /* EditorOption.screenReaderAnnounceInlineSuggestion */)) {\r\n            this.renderScreenReaderText(context, part, disposableStore);\r\n        }\r\n        const model = part.controller.model.get();\r\n        const w = this._instantiationService.createInstance(InlineSuggestionHintsContentWidget, this._editor, false, constObservable(null), model.selectedInlineCompletionIndex, model.inlineCompletionsCount, model.selectedInlineCompletion.map(v => { var _a; return (_a = v === null || v === void 0 ? void 0 : v.inlineCompletion.source.inlineCompletions.commands) !== null && _a !== void 0 ? _a : []; }));\r\n        context.fragment.appendChild(w.getDomNode());\r\n        model.triggerExplicitly();\r\n        disposableStore.add(w);\r\n        return disposableStore;\r\n    }\r\n    renderScreenReaderText(context, part, disposableStore) {\r\n        const $ = dom.$;\r\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\r\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents', { ['aria-live']: 'assertive' }));\r\n        const renderer = disposableStore.add(new MarkdownRenderer({ editor: this._editor }, this._languageService, this._openerService));\r\n        const render = (code) => {\r\n            disposableStore.add(renderer.onDidRenderAsync(() => {\r\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\r\n                context.onContentsChanged();\r\n            }));\r\n            const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\r\n            const renderedContents = disposableStore.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\r\n            hoverContentsElement.replaceChildren(renderedContents.element);\r\n        };\r\n        disposableStore.add(autorun(reader => {\r\n            var _a;\r\n            /** @description update hover */\r\n            const ghostText = (_a = part.controller.model.read(reader)) === null || _a === void 0 ? void 0 : _a.ghostText.read(reader);\r\n            if (ghostText) {\r\n                const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\r\n                render(ghostText.renderForScreenReader(lineText));\r\n            }\r\n            else {\r\n                dom.reset(hoverContentsElement);\r\n            }\r\n        }));\r\n        context.fragment.appendChild(markdownHoverElement);\r\n    }\r\n};\r\nInlineCompletionsHoverParticipant = __decorate([\r\n    __param(1, ILanguageService),\r\n    __param(2, IOpenerService),\r\n    __param(3, IAccessibilityService),\r\n    __param(4, IInstantiationService),\r\n    __param(5, ITelemetryService)\r\n], InlineCompletionsHoverParticipant);\r\nexport { InlineCompletionsHoverParticipant };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport * as indentUtils from './indentUtils.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\r\nimport { normalizeIndentation } from '../../../common/core/indentation.js';\r\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\r\nexport function getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber, inheritedIndent) {\r\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\r\n        // Model is empty\r\n        return [];\r\n    }\r\n    const indentationRules = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).indentationRules;\r\n    if (!indentationRules) {\r\n        return [];\r\n    }\r\n    endLineNumber = Math.min(endLineNumber, model.getLineCount());\r\n    // Skip `unIndentedLinePattern` lines\r\n    while (startLineNumber <= endLineNumber) {\r\n        if (!indentationRules.unIndentedLinePattern) {\r\n            break;\r\n        }\r\n        const text = model.getLineContent(startLineNumber);\r\n        if (!indentationRules.unIndentedLinePattern.test(text)) {\r\n            break;\r\n        }\r\n        startLineNumber++;\r\n    }\r\n    if (startLineNumber > endLineNumber - 1) {\r\n        return [];\r\n    }\r\n    const { tabSize, indentSize, insertSpaces } = model.getOptions();\r\n    const shiftIndent = (indentation, count) => {\r\n        count = count || 1;\r\n        return ShiftCommand.shiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\r\n    };\r\n    const unshiftIndent = (indentation, count) => {\r\n        count = count || 1;\r\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\r\n    };\r\n    const indentEdits = [];\r\n    // indentation being passed to lines below\r\n    let globalIndent;\r\n    // Calculate indentation for the first line\r\n    // If there is no passed-in indentation, we use the indentation of the first line as base.\r\n    const currentLineText = model.getLineContent(startLineNumber);\r\n    let adjustedLineContent = currentLineText;\r\n    if (inheritedIndent !== undefined && inheritedIndent !== null) {\r\n        globalIndent = inheritedIndent;\r\n        const oldIndentation = strings.getLeadingWhitespace(currentLineText);\r\n        adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\r\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\r\n            globalIndent = unshiftIndent(globalIndent);\r\n            adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\r\n        }\r\n        if (currentLineText !== adjustedLineContent) {\r\n            indentEdits.push(EditOperation.replaceMove(new Selection(startLineNumber, 1, startLineNumber, oldIndentation.length + 1), normalizeIndentation(globalIndent, indentSize, insertSpaces)));\r\n        }\r\n    }\r\n    else {\r\n        globalIndent = strings.getLeadingWhitespace(currentLineText);\r\n    }\r\n    // idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.\r\n    let idealIndentForNextLine = globalIndent;\r\n    if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\r\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\r\n        globalIndent = shiftIndent(globalIndent);\r\n    }\r\n    else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\r\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\r\n    }\r\n    startLineNumber++;\r\n    // Calculate indentation adjustment for all following lines\r\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\r\n        const text = model.getLineContent(lineNumber);\r\n        const oldIndentation = strings.getLeadingWhitespace(text);\r\n        const adjustedLineContent = idealIndentForNextLine + text.substring(oldIndentation.length);\r\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\r\n            idealIndentForNextLine = unshiftIndent(idealIndentForNextLine);\r\n            globalIndent = unshiftIndent(globalIndent);\r\n        }\r\n        if (oldIndentation !== idealIndentForNextLine) {\r\n            indentEdits.push(EditOperation.replaceMove(new Selection(lineNumber, 1, lineNumber, oldIndentation.length + 1), normalizeIndentation(idealIndentForNextLine, indentSize, insertSpaces)));\r\n        }\r\n        // calculate idealIndentForNextLine\r\n        if (indentationRules.unIndentedLinePattern && indentationRules.unIndentedLinePattern.test(text)) {\r\n            // In reindent phase, if the line matches `unIndentedLinePattern` we inherit indentation from above lines\r\n            // but don't change globalIndent and idealIndentForNextLine.\r\n            continue;\r\n        }\r\n        else if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\r\n            globalIndent = shiftIndent(globalIndent);\r\n            idealIndentForNextLine = globalIndent;\r\n        }\r\n        else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\r\n            idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\r\n        }\r\n        else {\r\n            idealIndentForNextLine = globalIndent;\r\n        }\r\n    }\r\n    return indentEdits;\r\n}\r\nexport class IndentationToSpacesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: IndentationToSpacesAction.ID,\r\n            label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\r\n            alias: 'Convert Indentation to Spaces',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const model = editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        const modelOpts = model.getOptions();\r\n        const selection = editor.getSelection();\r\n        if (!selection) {\r\n            return;\r\n        }\r\n        const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, [command]);\r\n        editor.pushUndoStop();\r\n        model.updateOptions({\r\n            insertSpaces: true\r\n        });\r\n    }\r\n}\r\nIndentationToSpacesAction.ID = 'editor.action.indentationToSpaces';\r\nexport class IndentationToTabsAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: IndentationToTabsAction.ID,\r\n            label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\r\n            alias: 'Convert Indentation to Tabs',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const model = editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        const modelOpts = model.getOptions();\r\n        const selection = editor.getSelection();\r\n        if (!selection) {\r\n            return;\r\n        }\r\n        const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, [command]);\r\n        editor.pushUndoStop();\r\n        model.updateOptions({\r\n            insertSpaces: false\r\n        });\r\n    }\r\n}\r\nIndentationToTabsAction.ID = 'editor.action.indentationToTabs';\r\nexport class ChangeIndentationSizeAction extends EditorAction {\r\n    constructor(insertSpaces, displaySizeOnly, opts) {\r\n        super(opts);\r\n        this.insertSpaces = insertSpaces;\r\n        this.displaySizeOnly = displaySizeOnly;\r\n    }\r\n    run(accessor, editor) {\r\n        const quickInputService = accessor.get(IQuickInputService);\r\n        const modelService = accessor.get(IModelService);\r\n        const model = editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\r\n        const modelOpts = model.getOptions();\r\n        const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\r\n            id: n.toString(),\r\n            label: n.toString(),\r\n            // add description for tabSize value set in the configuration\r\n            description: (n === creationOpts.tabSize && n === modelOpts.tabSize\r\n                ? nls.localize('configuredTabSize', \"Configured Tab Size\")\r\n                : n === creationOpts.tabSize\r\n                    ? nls.localize('defaultTabSize', \"Default Tab Size\")\r\n                    : n === modelOpts.tabSize\r\n                        ? nls.localize('currentTabSize', \"Current Tab Size\")\r\n                        : undefined)\r\n        }));\r\n        // auto focus the tabSize set for the current editor\r\n        const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\r\n        setTimeout(() => {\r\n            quickInputService.pick(picks, { placeHolder: nls.localize({ key: 'selectTabWidth', comment: ['Tab corresponds to the tab key'] }, \"Select Tab Size for Current File\"), activeItem: picks[autoFocusIndex] }).then(pick => {\r\n                if (pick) {\r\n                    if (model && !model.isDisposed()) {\r\n                        const pickedVal = parseInt(pick.label, 10);\r\n                        if (this.displaySizeOnly) {\r\n                            model.updateOptions({\r\n                                tabSize: pickedVal\r\n                            });\r\n                        }\r\n                        else {\r\n                            model.updateOptions({\r\n                                tabSize: pickedVal,\r\n                                indentSize: pickedVal,\r\n                                insertSpaces: this.insertSpaces\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }, 50 /* quick input is sensitive to being opened so soon after another */);\r\n    }\r\n}\r\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\r\n    constructor() {\r\n        super(false, false, {\r\n            id: IndentUsingTabs.ID,\r\n            label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\r\n            alias: 'Indent Using Tabs',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nIndentUsingTabs.ID = 'editor.action.indentUsingTabs';\r\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\r\n    constructor() {\r\n        super(true, false, {\r\n            id: IndentUsingSpaces.ID,\r\n            label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\r\n            alias: 'Indent Using Spaces',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nIndentUsingSpaces.ID = 'editor.action.indentUsingSpaces';\r\nexport class ChangeTabDisplaySize extends ChangeIndentationSizeAction {\r\n    constructor() {\r\n        super(true, true, {\r\n            id: ChangeTabDisplaySize.ID,\r\n            label: nls.localize('changeTabDisplaySize', \"Change Tab Display Size\"),\r\n            alias: 'Change Tab Display Size',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nChangeTabDisplaySize.ID = 'editor.action.changeTabDisplaySize';\r\nexport class DetectIndentation extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: DetectIndentation.ID,\r\n            label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\r\n            alias: 'Detect Indentation from Content',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const modelService = accessor.get(IModelService);\r\n        const model = editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\r\n        model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\r\n    }\r\n}\r\nDetectIndentation.ID = 'editor.action.detectIndentation';\r\nexport class ReindentLinesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.reindentlines',\r\n            label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\r\n            alias: 'Reindent Lines',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        const model = editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\r\n        if (edits.length > 0) {\r\n            editor.pushUndoStop();\r\n            editor.executeEdits(this.id, edits);\r\n            editor.pushUndoStop();\r\n        }\r\n    }\r\n}\r\nexport class ReindentSelectedLinesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.reindentselectedlines',\r\n            label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\r\n            alias: 'Reindent Selected Lines',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        const model = editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        const selections = editor.getSelections();\r\n        if (selections === null) {\r\n            return;\r\n        }\r\n        const edits = [];\r\n        for (const selection of selections) {\r\n            let startLineNumber = selection.startLineNumber;\r\n            let endLineNumber = selection.endLineNumber;\r\n            if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\r\n                endLineNumber--;\r\n            }\r\n            if (startLineNumber === 1) {\r\n                if (startLineNumber === endLineNumber) {\r\n                    continue;\r\n                }\r\n            }\r\n            else {\r\n                startLineNumber--;\r\n            }\r\n            const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\r\n            edits.push(...editOperations);\r\n        }\r\n        if (edits.length > 0) {\r\n            editor.pushUndoStop();\r\n            editor.executeEdits(this.id, edits);\r\n            editor.pushUndoStop();\r\n        }\r\n    }\r\n}\r\nexport class AutoIndentOnPasteCommand {\r\n    constructor(edits, initialSelection) {\r\n        this._initialSelection = initialSelection;\r\n        this._edits = [];\r\n        this._selectionId = null;\r\n        for (const edit of edits) {\r\n            if (edit.range && typeof edit.text === 'string') {\r\n                this._edits.push(edit);\r\n            }\r\n        }\r\n    }\r\n    getEditOperations(model, builder) {\r\n        for (const edit of this._edits) {\r\n            builder.addEditOperation(Range.lift(edit.range), edit.text);\r\n        }\r\n        let selectionIsSet = false;\r\n        if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\r\n            if (this._edits[0].range.startColumn === this._initialSelection.endColumn &&\r\n                this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\r\n                selectionIsSet = true;\r\n                this._selectionId = builder.trackSelection(this._initialSelection, true);\r\n            }\r\n            else if (this._edits[0].range.endColumn === this._initialSelection.startColumn &&\r\n                this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\r\n                selectionIsSet = true;\r\n                this._selectionId = builder.trackSelection(this._initialSelection, false);\r\n            }\r\n        }\r\n        if (!selectionIsSet) {\r\n            this._selectionId = builder.trackSelection(this._initialSelection);\r\n        }\r\n    }\r\n    computeCursorState(model, helper) {\r\n        return helper.getTrackedSelection(this._selectionId);\r\n    }\r\n}\r\nlet AutoIndentOnPaste = class AutoIndentOnPaste {\r\n    constructor(editor, _languageConfigurationService) {\r\n        this.editor = editor;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this.callOnDispose = new DisposableStore();\r\n        this.callOnModel = new DisposableStore();\r\n        this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\r\n        this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\r\n        this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\r\n    }\r\n    update() {\r\n        // clean up\r\n        this.callOnModel.clear();\r\n        // we are disabled\r\n        if (this.editor.getOption(12 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\r\n            return;\r\n        }\r\n        // no model\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        this.callOnModel.add(this.editor.onDidPaste(({ range }) => {\r\n            this.trigger(range);\r\n        }));\r\n    }\r\n    trigger(range) {\r\n        const selections = this.editor.getSelections();\r\n        if (selections === null || selections.length > 1) {\r\n            return;\r\n        }\r\n        const model = this.editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\r\n            return;\r\n        }\r\n        const autoIndent = this.editor.getOption(12 /* EditorOption.autoIndent */);\r\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\r\n        const textEdits = [];\r\n        const indentConverter = {\r\n            shiftIndent: (indentation) => {\r\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\r\n            },\r\n            unshiftIndent: (indentation) => {\r\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\r\n            }\r\n        };\r\n        let startLineNumber = range.startLineNumber;\r\n        while (startLineNumber <= range.endLineNumber) {\r\n            if (this.shouldIgnoreLine(model, startLineNumber)) {\r\n                startLineNumber++;\r\n                continue;\r\n            }\r\n            break;\r\n        }\r\n        if (startLineNumber > range.endLineNumber) {\r\n            return;\r\n        }\r\n        let firstLineText = model.getLineContent(startLineNumber);\r\n        if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\r\n            const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\r\n            if (indentOfFirstLine !== null) {\r\n                const oldIndentation = strings.getLeadingWhitespace(firstLineText);\r\n                const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\r\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\r\n                if (newSpaceCnt !== oldSpaceCnt) {\r\n                    const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\r\n                    textEdits.push({\r\n                        range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\r\n                        text: newIndent\r\n                    });\r\n                    firstLineText = newIndent + firstLineText.substr(oldIndentation.length);\r\n                }\r\n                else {\r\n                    const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\r\n                    if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\r\n                        // we paste content into a line where only contains whitespaces\r\n                        // after pasting, the indentation of the first line is already correct\r\n                        // the first line doesn't match any indentation rule\r\n                        // then no-op.\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const firstLineNumber = startLineNumber;\r\n        // ignore empty or ignored lines\r\n        while (startLineNumber < range.endLineNumber) {\r\n            if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\r\n                startLineNumber++;\r\n                continue;\r\n            }\r\n            break;\r\n        }\r\n        if (startLineNumber !== range.endLineNumber) {\r\n            const virtualModel = {\r\n                tokenization: {\r\n                    getLineTokens: (lineNumber) => {\r\n                        return model.tokenization.getLineTokens(lineNumber);\r\n                    },\r\n                    getLanguageId: () => {\r\n                        return model.getLanguageId();\r\n                    },\r\n                    getLanguageIdAtPosition: (lineNumber, column) => {\r\n                        return model.getLanguageIdAtPosition(lineNumber, column);\r\n                    },\r\n                },\r\n                getLineContent: (lineNumber) => {\r\n                    if (lineNumber === firstLineNumber) {\r\n                        return firstLineText;\r\n                    }\r\n                    else {\r\n                        return model.getLineContent(lineNumber);\r\n                    }\r\n                }\r\n            };\r\n            const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\r\n            if (indentOfSecondLine !== null) {\r\n                const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\r\n                const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\r\n                if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\r\n                    const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\r\n                    for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\r\n                        const lineContent = model.getLineContent(i);\r\n                        const originalIndent = strings.getLeadingWhitespace(lineContent);\r\n                        const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\r\n                        const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\r\n                        const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\r\n                        if (newIndent !== originalIndent) {\r\n                            textEdits.push({\r\n                                range: new Range(i, 1, i, originalIndent.length + 1),\r\n                                text: newIndent\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (textEdits.length > 0) {\r\n            this.editor.pushUndoStop();\r\n            const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\r\n            this.editor.executeCommand('autoIndentOnPaste', cmd);\r\n            this.editor.pushUndoStop();\r\n        }\r\n    }\r\n    shouldIgnoreLine(model, lineNumber) {\r\n        model.tokenization.forceTokenization(lineNumber);\r\n        const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\r\n        if (nonWhitespaceColumn === 0) {\r\n            return true;\r\n        }\r\n        const tokens = model.tokenization.getLineTokens(lineNumber);\r\n        if (tokens.getCount() > 0) {\r\n            const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\r\n            if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    dispose() {\r\n        this.callOnDispose.dispose();\r\n        this.callOnModel.dispose();\r\n    }\r\n};\r\nAutoIndentOnPaste.ID = 'editor.contrib.autoIndentOnPaste';\r\nAutoIndentOnPaste = __decorate([\r\n    __param(1, ILanguageConfigurationService)\r\n], AutoIndentOnPaste);\r\nexport { AutoIndentOnPaste };\r\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\r\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\r\n        // Model is empty\r\n        return;\r\n    }\r\n    let spaces = '';\r\n    for (let i = 0; i < tabSize; i++) {\r\n        spaces += ' ';\r\n    }\r\n    const spacesRegExp = new RegExp(spaces, 'gi');\r\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\r\n        let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\r\n        if (lastIndentationColumn === 0) {\r\n            lastIndentationColumn = model.getLineMaxColumn(lineNumber);\r\n        }\r\n        if (lastIndentationColumn === 1) {\r\n            continue;\r\n        }\r\n        const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\r\n        const originalIndentation = model.getValueInRange(originalIndentationRange);\r\n        const newIndentation = (tabsToSpaces\r\n            ? originalIndentation.replace(/\\t/ig, spaces)\r\n            : originalIndentation.replace(spacesRegExp, '\\t'));\r\n        builder.addEditOperation(originalIndentationRange, newIndentation);\r\n    }\r\n}\r\nexport class IndentationToSpacesCommand {\r\n    constructor(selection, tabSize) {\r\n        this.selection = selection;\r\n        this.tabSize = tabSize;\r\n        this.selectionId = null;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        this.selectionId = builder.trackSelection(this.selection);\r\n        getIndentationEditOperations(model, builder, this.tabSize, true);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        return helper.getTrackedSelection(this.selectionId);\r\n    }\r\n}\r\nexport class IndentationToTabsCommand {\r\n    constructor(selection, tabSize) {\r\n        this.selection = selection;\r\n        this.tabSize = tabSize;\r\n        this.selectionId = null;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        this.selectionId = builder.trackSelection(this.selection);\r\n        getIndentationEditOperations(model, builder, this.tabSize, false);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        return helper.getTrackedSelection(this.selectionId);\r\n    }\r\n}\r\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorAction(IndentationToSpacesAction);\r\nregisterEditorAction(IndentationToTabsAction);\r\nregisterEditorAction(IndentUsingTabs);\r\nregisterEditorAction(IndentUsingSpaces);\r\nregisterEditorAction(ChangeTabDisplaySize);\r\nregisterEditorAction(DetectIndentation);\r\nregisterEditorAction(ReindentLinesAction);\r\nregisterEditorAction(ReindentSelectedLinesAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function getSpaceCnt(str, tabSize) {\r\n    let spacesCnt = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        if (str.charAt(i) === '\\t') {\r\n            spacesCnt += tabSize;\r\n        }\r\n        else {\r\n            spacesCnt++;\r\n        }\r\n    }\r\n    return spacesCnt;\r\n}\r\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\r\n    spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\r\n    let result = '';\r\n    if (!insertSpaces) {\r\n        const tabsCnt = Math.floor(spacesCnt / tabSize);\r\n        spacesCnt = spacesCnt % tabSize;\r\n        for (let i = 0; i < tabsCnt; i++) {\r\n            result += '\\t';\r\n        }\r\n    }\r\n    for (let i = 0; i < spacesCnt; i++) {\r\n        result += ' ';\r\n    }\r\n    return result;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\r\nimport { InlayHintsController } from './inlayHintsController.js';\r\nimport { InlayHintsHover } from './inlayHintsHover.js';\r\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nHoverParticipantRegistry.register(InlayHintsHover);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar InlayHintsController_1;\r\nimport { ModifierKeyEmitter } from '../../../../base/browser/dom.js';\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { LRUCache } from '../../../../base/common/map.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\r\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\r\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport * as languages from '../../../common/languages.js';\r\nimport { InjectedTextCursorStops } from '../../../common/model.js';\r\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\r\nimport { InlayHintAnchor, InlayHintsFragments } from './inlayHints.js';\r\nimport { goToDefinitionWithLocation, showGoToContextMenu } from './inlayHintsLocations.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\r\nimport * as colors from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\r\n// --- hint caching service (per session)\r\nclass InlayHintsCache {\r\n    constructor() {\r\n        this._entries = new LRUCache(50);\r\n    }\r\n    get(model) {\r\n        const key = InlayHintsCache._key(model);\r\n        return this._entries.get(key);\r\n    }\r\n    set(model, value) {\r\n        const key = InlayHintsCache._key(model);\r\n        this._entries.set(key, value);\r\n    }\r\n    static _key(model) {\r\n        return `${model.uri.toString()}/${model.getVersionId()}`;\r\n    }\r\n}\r\nconst IInlayHintsCache = createDecorator('IInlayHintsCache');\r\nregisterSingleton(IInlayHintsCache, InlayHintsCache, 1 /* InstantiationType.Delayed */);\r\n// --- rendered label\r\nexport class RenderedInlayHintLabelPart {\r\n    constructor(item, index) {\r\n        this.item = item;\r\n        this.index = index;\r\n    }\r\n    get part() {\r\n        const label = this.item.hint.label;\r\n        if (typeof label === 'string') {\r\n            return { label };\r\n        }\r\n        else {\r\n            return label[this.index];\r\n        }\r\n    }\r\n}\r\nclass ActiveInlayHintInfo {\r\n    constructor(part, hasTriggerModifier) {\r\n        this.part = part;\r\n        this.hasTriggerModifier = hasTriggerModifier;\r\n    }\r\n}\r\n// --- controller\r\nlet InlayHintsController = InlayHintsController_1 = class InlayHintsController {\r\n    static get(editor) {\r\n        var _a;\r\n        return (_a = editor.getContribution(InlayHintsController_1.ID)) !== null && _a !== void 0 ? _a : undefined;\r\n    }\r\n    constructor(_editor, _languageFeaturesService, _featureDebounce, _inlayHintsCache, _commandService, _notificationService, _instaService) {\r\n        this._editor = _editor;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._inlayHintsCache = _inlayHintsCache;\r\n        this._commandService = _commandService;\r\n        this._notificationService = _notificationService;\r\n        this._instaService = _instaService;\r\n        this._disposables = new DisposableStore();\r\n        this._sessionDisposables = new DisposableStore();\r\n        this._decorationsMetadata = new Map();\r\n        this._ruleFactory = new DynamicCssRules(this._editor);\r\n        this._activeRenderMode = 0 /* RenderMode.Normal */;\r\n        this._debounceInfo = _featureDebounce.for(_languageFeaturesService.inlayHintsProvider, 'InlayHint', { min: 25 });\r\n        this._disposables.add(_languageFeaturesService.inlayHintsProvider.onDidChange(() => this._update()));\r\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\r\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\r\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(139 /* EditorOption.inlayHints */)) {\r\n                this._update();\r\n            }\r\n        }));\r\n        this._update();\r\n    }\r\n    dispose() {\r\n        this._sessionDisposables.dispose();\r\n        this._removeAllDecorations();\r\n        this._disposables.dispose();\r\n    }\r\n    _update() {\r\n        this._sessionDisposables.clear();\r\n        this._removeAllDecorations();\r\n        const options = this._editor.getOption(139 /* EditorOption.inlayHints */);\r\n        if (options.enabled === 'off') {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (!model || !this._languageFeaturesService.inlayHintsProvider.has(model)) {\r\n            return;\r\n        }\r\n        // iff possible, quickly update from cache\r\n        const cached = this._inlayHintsCache.get(model);\r\n        if (cached) {\r\n            this._updateHintsDecorators([model.getFullModelRange()], cached);\r\n        }\r\n        this._sessionDisposables.add(toDisposable(() => {\r\n            // cache items when switching files etc\r\n            if (!model.isDisposed()) {\r\n                this._cacheHintsForFastRestore(model);\r\n            }\r\n        }));\r\n        let cts;\r\n        const watchedProviders = new Set();\r\n        const scheduler = new RunOnceScheduler(() => __awaiter(this, void 0, void 0, function* () {\r\n            const t1 = Date.now();\r\n            cts === null || cts === void 0 ? void 0 : cts.dispose(true);\r\n            cts = new CancellationTokenSource();\r\n            const listener = model.onWillDispose(() => cts === null || cts === void 0 ? void 0 : cts.cancel());\r\n            try {\r\n                const myToken = cts.token;\r\n                const inlayHints = yield InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider, model, this._getHintsRanges(), myToken);\r\n                scheduler.delay = this._debounceInfo.update(model, Date.now() - t1);\r\n                if (myToken.isCancellationRequested) {\r\n                    inlayHints.dispose();\r\n                    return;\r\n                }\r\n                // listen to provider changes\r\n                for (const provider of inlayHints.provider) {\r\n                    if (typeof provider.onDidChangeInlayHints === 'function' && !watchedProviders.has(provider)) {\r\n                        watchedProviders.add(provider);\r\n                        this._sessionDisposables.add(provider.onDidChangeInlayHints(() => {\r\n                            if (!scheduler.isScheduled()) { // ignore event when request is already scheduled\r\n                                scheduler.schedule();\r\n                            }\r\n                        }));\r\n                    }\r\n                }\r\n                this._sessionDisposables.add(inlayHints);\r\n                this._updateHintsDecorators(inlayHints.ranges, inlayHints.items);\r\n                this._cacheHintsForFastRestore(model);\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n            finally {\r\n                cts.dispose();\r\n                listener.dispose();\r\n            }\r\n        }), this._debounceInfo.get(model));\r\n        this._sessionDisposables.add(scheduler);\r\n        this._sessionDisposables.add(toDisposable(() => cts === null || cts === void 0 ? void 0 : cts.dispose(true)));\r\n        scheduler.schedule(0);\r\n        this._sessionDisposables.add(this._editor.onDidScrollChange((e) => {\r\n            // update when scroll position changes\r\n            // uses scrollTopChanged has weak heuristic to differenatiate between scrolling due to\r\n            // typing or due to \"actual\" scrolling\r\n            if (e.scrollTopChanged || !scheduler.isScheduled()) {\r\n                scheduler.schedule();\r\n            }\r\n        }));\r\n        this._sessionDisposables.add(this._editor.onDidChangeModelContent((e) => {\r\n            // update less aggressive when typing\r\n            const delay = Math.max(scheduler.delay, 1250);\r\n            scheduler.schedule(delay);\r\n        }));\r\n        if (options.enabled === 'on') {\r\n            // different \"on\" modes: always\r\n            this._activeRenderMode = 0 /* RenderMode.Normal */;\r\n        }\r\n        else {\r\n            // different \"on\" modes: offUnlessPressed, or onUnlessPressed\r\n            let defaultMode;\r\n            let altMode;\r\n            if (options.enabled === 'onUnlessPressed') {\r\n                defaultMode = 0 /* RenderMode.Normal */;\r\n                altMode = 1 /* RenderMode.Invisible */;\r\n            }\r\n            else {\r\n                defaultMode = 1 /* RenderMode.Invisible */;\r\n                altMode = 0 /* RenderMode.Normal */;\r\n            }\r\n            this._activeRenderMode = defaultMode;\r\n            this._sessionDisposables.add(ModifierKeyEmitter.getInstance().event(e => {\r\n                if (!this._editor.hasModel()) {\r\n                    return;\r\n                }\r\n                const newRenderMode = e.altKey && e.ctrlKey && !(e.shiftKey || e.metaKey) ? altMode : defaultMode;\r\n                if (newRenderMode !== this._activeRenderMode) {\r\n                    this._activeRenderMode = newRenderMode;\r\n                    const model = this._editor.getModel();\r\n                    const copies = this._copyInlayHintsWithCurrentAnchor(model);\r\n                    this._updateHintsDecorators([model.getFullModelRange()], copies);\r\n                    scheduler.schedule(0);\r\n                }\r\n            }));\r\n        }\r\n        // mouse gestures\r\n        this._sessionDisposables.add(this._installDblClickGesture(() => scheduler.schedule(0)));\r\n        this._sessionDisposables.add(this._installLinkGesture());\r\n        this._sessionDisposables.add(this._installContextMenu());\r\n    }\r\n    _installLinkGesture() {\r\n        const store = new DisposableStore();\r\n        const gesture = store.add(new ClickLinkGesture(this._editor));\r\n        // let removeHighlight = () => { };\r\n        const sessionStore = new DisposableStore();\r\n        store.add(sessionStore);\r\n        store.add(gesture.onMouseMoveOrRelevantKeyDown(e => {\r\n            const [mouseEvent] = e;\r\n            const labelPart = this._getInlayHintLabelPart(mouseEvent);\r\n            const model = this._editor.getModel();\r\n            if (!labelPart || !model) {\r\n                sessionStore.clear();\r\n                return;\r\n            }\r\n            // resolve the item\r\n            const cts = new CancellationTokenSource();\r\n            sessionStore.add(toDisposable(() => cts.dispose(true)));\r\n            labelPart.item.resolve(cts.token);\r\n            // render link => when the modifier is pressed and when there is a command or location\r\n            this._activeInlayHintPart = labelPart.part.command || labelPart.part.location\r\n                ? new ActiveInlayHintInfo(labelPart, mouseEvent.hasTriggerModifier)\r\n                : undefined;\r\n            const lineNumber = model.validatePosition(labelPart.item.hint.position).lineNumber;\r\n            const range = new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber));\r\n            const lineHints = this._getInlineHintsForRange(range);\r\n            this._updateHintsDecorators([range], lineHints);\r\n            sessionStore.add(toDisposable(() => {\r\n                this._activeInlayHintPart = undefined;\r\n                this._updateHintsDecorators([range], lineHints);\r\n            }));\r\n        }));\r\n        store.add(gesture.onCancel(() => sessionStore.clear()));\r\n        store.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\r\n            const label = this._getInlayHintLabelPart(e);\r\n            if (label) {\r\n                const part = label.part;\r\n                if (part.location) {\r\n                    // location -> execute go to def\r\n                    this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, part.location);\r\n                }\r\n                else if (languages.Command.is(part.command)) {\r\n                    // command -> execute it\r\n                    yield this._invokeCommand(part.command, label.item);\r\n                }\r\n            }\r\n        })));\r\n        return store;\r\n    }\r\n    _getInlineHintsForRange(range) {\r\n        const lineHints = new Set();\r\n        for (const data of this._decorationsMetadata.values()) {\r\n            if (range.containsRange(data.item.anchor.range)) {\r\n                lineHints.add(data.item);\r\n            }\r\n        }\r\n        return Array.from(lineHints);\r\n    }\r\n    _installDblClickGesture(updateInlayHints) {\r\n        return this._editor.onMouseUp((e) => __awaiter(this, void 0, void 0, function* () {\r\n            if (e.event.detail !== 2) {\r\n                return;\r\n            }\r\n            const part = this._getInlayHintLabelPart(e);\r\n            if (!part) {\r\n                return;\r\n            }\r\n            e.event.preventDefault();\r\n            yield part.item.resolve(CancellationToken.None);\r\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\r\n                const edits = part.item.hint.textEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text));\r\n                this._editor.executeEdits('inlayHint.default', edits);\r\n                updateInlayHints();\r\n            }\r\n        }));\r\n    }\r\n    _installContextMenu() {\r\n        return this._editor.onContextMenu((e) => __awaiter(this, void 0, void 0, function* () {\r\n            if (!(e.event.target instanceof HTMLElement)) {\r\n                return;\r\n            }\r\n            const part = this._getInlayHintLabelPart(e);\r\n            if (part) {\r\n                yield this._instaService.invokeFunction(showGoToContextMenu, this._editor, e.event.target, part);\r\n            }\r\n        }));\r\n    }\r\n    _getInlayHintLabelPart(e) {\r\n        var _a;\r\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\r\n            return undefined;\r\n        }\r\n        const options = (_a = e.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\r\n        if (options instanceof ModelDecorationInjectedTextOptions && (options === null || options === void 0 ? void 0 : options.attachedData) instanceof RenderedInlayHintLabelPart) {\r\n            return options.attachedData;\r\n        }\r\n        return undefined;\r\n    }\r\n    _invokeCommand(command, item) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                yield this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\r\n            }\r\n            catch (err) {\r\n                this._notificationService.notify({\r\n                    severity: Severity.Error,\r\n                    source: item.provider.displayName,\r\n                    message: err\r\n                });\r\n            }\r\n        });\r\n    }\r\n    _cacheHintsForFastRestore(model) {\r\n        const hints = this._copyInlayHintsWithCurrentAnchor(model);\r\n        this._inlayHintsCache.set(model, hints);\r\n    }\r\n    // return inlay hints but with an anchor that reflects \"updates\"\r\n    // that happened after receiving them, e.g adding new lines before a hint\r\n    _copyInlayHintsWithCurrentAnchor(model) {\r\n        const items = new Map();\r\n        for (const [id, obj] of this._decorationsMetadata) {\r\n            if (items.has(obj.item)) {\r\n                // an inlay item can be rendered as multiple decorations\r\n                // but they will all uses the same range\r\n                continue;\r\n            }\r\n            const range = model.getDecorationRange(id);\r\n            if (range) {\r\n                // update range with whatever the editor has tweaked it to\r\n                const anchor = new InlayHintAnchor(range, obj.item.anchor.direction);\r\n                const copy = obj.item.with({ anchor });\r\n                items.set(obj.item, copy);\r\n            }\r\n        }\r\n        return Array.from(items.values());\r\n    }\r\n    _getHintsRanges() {\r\n        const extra = 30;\r\n        const model = this._editor.getModel();\r\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\r\n        const result = [];\r\n        for (const range of visibleRanges.sort(Range.compareRangesUsingStarts)) {\r\n            const extendedRange = model.validateRange(new Range(range.startLineNumber - extra, range.startColumn, range.endLineNumber + extra, range.endColumn));\r\n            if (result.length === 0 || !Range.areIntersectingOrTouching(result[result.length - 1], extendedRange)) {\r\n                result.push(extendedRange);\r\n            }\r\n            else {\r\n                result[result.length - 1] = Range.plusRange(result[result.length - 1], extendedRange);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    _updateHintsDecorators(ranges, items) {\r\n        var _a, _b;\r\n        // utils to collect/create injected text decorations\r\n        const newDecorationsData = [];\r\n        const addInjectedText = (item, ref, content, cursorStops, attachedData) => {\r\n            const opts = {\r\n                content,\r\n                inlineClassNameAffectsLetterSpacing: true,\r\n                inlineClassName: ref.className,\r\n                cursorStops,\r\n                attachedData\r\n            };\r\n            newDecorationsData.push({\r\n                item,\r\n                classNameRef: ref,\r\n                decoration: {\r\n                    range: item.anchor.range,\r\n                    options: {\r\n                        // className: \"rangeHighlight\", // DEBUG highlight to see to what range a hint is attached\r\n                        description: 'InlayHint',\r\n                        showIfCollapsed: item.anchor.range.isEmpty(), // \"original\" range is empty\r\n                        collapseOnReplaceEdit: !item.anchor.range.isEmpty(),\r\n                        stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n                        [item.anchor.direction]: this._activeRenderMode === 0 /* RenderMode.Normal */ ? opts : undefined\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        const addInjectedWhitespace = (item, isLast) => {\r\n            const marginRule = this._ruleFactory.createClassNameRef({\r\n                width: `${(fontSize / 3) | 0}px`,\r\n                display: 'inline-block'\r\n            });\r\n            addInjectedText(item, marginRule, '\\u200a', isLast ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None);\r\n        };\r\n        //\r\n        const { fontSize, fontFamily, padding, isUniform } = this._getLayoutInfo();\r\n        const fontFamilyVar = '--code-editorInlayHintsFontFamily';\r\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily);\r\n        for (const item of items) {\r\n            // whitespace leading the actual label\r\n            if (item.hint.paddingLeft) {\r\n                addInjectedWhitespace(item, false);\r\n            }\r\n            // the label with its parts\r\n            const parts = typeof item.hint.label === 'string'\r\n                ? [{ label: item.hint.label }]\r\n                : item.hint.label;\r\n            for (let i = 0; i < parts.length; i++) {\r\n                const part = parts[i];\r\n                const isFirst = i === 0;\r\n                const isLast = i === parts.length - 1;\r\n                const cssProperties = {\r\n                    fontSize: `${fontSize}px`,\r\n                    fontFamily: `var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}`,\r\n                    verticalAlign: isUniform ? 'baseline' : 'middle',\r\n                    unicodeBidi: 'isolate'\r\n                };\r\n                if (isNonEmptyArray(item.hint.textEdits)) {\r\n                    cssProperties.cursor = 'default';\r\n                }\r\n                this._fillInColors(cssProperties, item.hint);\r\n                if ((part.command || part.location) && ((_a = this._activeInlayHintPart) === null || _a === void 0 ? void 0 : _a.part.item) === item && this._activeInlayHintPart.part.index === i) {\r\n                    // active link!\r\n                    cssProperties.textDecoration = 'underline';\r\n                    if (this._activeInlayHintPart.hasTriggerModifier) {\r\n                        cssProperties.color = themeColorFromId(colors.editorActiveLinkForeground);\r\n                        cssProperties.cursor = 'pointer';\r\n                    }\r\n                }\r\n                if (padding) {\r\n                    if (isFirst && isLast) {\r\n                        // only element\r\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px`;\r\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px`;\r\n                    }\r\n                    else if (isFirst) {\r\n                        // first element\r\n                        cssProperties.padding = `1px 0 1px ${Math.max(1, fontSize / 4) | 0}px`;\r\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px 0 0 ${(fontSize / 4) | 0}px`;\r\n                    }\r\n                    else if (isLast) {\r\n                        // last element\r\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px 1px 0`;\r\n                        cssProperties.borderRadius = `0 ${(fontSize / 4) | 0}px ${(fontSize / 4) | 0}px 0`;\r\n                    }\r\n                    else {\r\n                        cssProperties.padding = `1px 0 1px 0`;\r\n                    }\r\n                }\r\n                addInjectedText(item, this._ruleFactory.createClassNameRef(cssProperties), fixSpace(part.label), isLast && !item.hint.paddingRight ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None, new RenderedInlayHintLabelPart(item, i));\r\n            }\r\n            // whitespace trailing the actual label\r\n            if (item.hint.paddingRight) {\r\n                addInjectedWhitespace(item, true);\r\n            }\r\n            if (newDecorationsData.length > InlayHintsController_1._MAX_DECORATORS) {\r\n                break;\r\n            }\r\n        }\r\n        // collect all decoration ids that are affected by the ranges\r\n        // and only update those decorations\r\n        const decorationIdsToReplace = [];\r\n        for (const range of ranges) {\r\n            for (const { id } of (_b = this._editor.getDecorationsInRange(range)) !== null && _b !== void 0 ? _b : []) {\r\n                const metadata = this._decorationsMetadata.get(id);\r\n                if (metadata) {\r\n                    decorationIdsToReplace.push(id);\r\n                    metadata.classNameRef.dispose();\r\n                    this._decorationsMetadata.delete(id);\r\n                }\r\n            }\r\n        }\r\n        const scrollState = StableEditorScrollState.capture(this._editor);\r\n        this._editor.changeDecorations(accessor => {\r\n            const newDecorationIds = accessor.deltaDecorations(decorationIdsToReplace, newDecorationsData.map(d => d.decoration));\r\n            for (let i = 0; i < newDecorationIds.length; i++) {\r\n                const data = newDecorationsData[i];\r\n                this._decorationsMetadata.set(newDecorationIds[i], data);\r\n            }\r\n        });\r\n        scrollState.restore(this._editor);\r\n    }\r\n    _fillInColors(props, hint) {\r\n        if (hint.kind === languages.InlayHintKind.Parameter) {\r\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintParameterBackground);\r\n            props.color = themeColorFromId(colors.editorInlayHintParameterForeground);\r\n        }\r\n        else if (hint.kind === languages.InlayHintKind.Type) {\r\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintTypeBackground);\r\n            props.color = themeColorFromId(colors.editorInlayHintTypeForeground);\r\n        }\r\n        else {\r\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintBackground);\r\n            props.color = themeColorFromId(colors.editorInlayHintForeground);\r\n        }\r\n    }\r\n    _getLayoutInfo() {\r\n        const options = this._editor.getOption(139 /* EditorOption.inlayHints */);\r\n        const padding = options.padding;\r\n        const editorFontSize = this._editor.getOption(52 /* EditorOption.fontSize */);\r\n        const editorFontFamily = this._editor.getOption(49 /* EditorOption.fontFamily */);\r\n        let fontSize = options.fontSize;\r\n        if (!fontSize || fontSize < 5 || fontSize > editorFontSize) {\r\n            fontSize = editorFontSize;\r\n        }\r\n        const fontFamily = options.fontFamily || editorFontFamily;\r\n        const isUniform = !padding\r\n            && fontFamily === editorFontFamily\r\n            && fontSize === editorFontSize;\r\n        return { fontSize, fontFamily, padding, isUniform };\r\n    }\r\n    _removeAllDecorations() {\r\n        this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));\r\n        for (const obj of this._decorationsMetadata.values()) {\r\n            obj.classNameRef.dispose();\r\n        }\r\n        this._decorationsMetadata.clear();\r\n    }\r\n};\r\nInlayHintsController.ID = 'editor.contrib.InlayHints';\r\nInlayHintsController._MAX_DECORATORS = 1500;\r\nInlayHintsController = InlayHintsController_1 = __decorate([\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, ILanguageFeatureDebounceService),\r\n    __param(3, IInlayHintsCache),\r\n    __param(4, ICommandService),\r\n    __param(5, INotificationService),\r\n    __param(6, IInstantiationService)\r\n], InlayHintsController);\r\nexport { InlayHintsController };\r\n// Prevents the view from potentially visible whitespace\r\nfunction fixSpace(str) {\r\n    const noBreakWhitespace = '\\xa0';\r\n    return str.replace(/[ \\t]/g, noBreakWhitespace);\r\n}\r\nCommandsRegistry.registerCommand('_executeInlayHintProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const [uri, range] = args;\r\n    assertType(URI.isUri(uri));\r\n    assertType(Range.isIRange(range));\r\n    const { inlayHintsProvider } = accessor.get(ILanguageFeaturesService);\r\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\r\n    try {\r\n        const model = yield InlayHintsFragments.create(inlayHintsProvider, ref.object.textEditorModel, [Range.lift(range)], CancellationToken.None);\r\n        const result = model.items.map(i => i.hint);\r\n        setTimeout(() => model.dispose(), 0); // dispose after sending to ext host\r\n        return result;\r\n    }\r\n    finally {\r\n        ref.dispose();\r\n    }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Schemas } from '../../../../base/common/network.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nexport class InlayHintAnchor {\r\n    constructor(range, direction) {\r\n        this.range = range;\r\n        this.direction = direction;\r\n    }\r\n}\r\nexport class InlayHintItem {\r\n    constructor(hint, anchor, provider) {\r\n        this.hint = hint;\r\n        this.anchor = anchor;\r\n        this.provider = provider;\r\n        this._isResolved = false;\r\n    }\r\n    with(delta) {\r\n        const result = new InlayHintItem(this.hint, delta.anchor, this.provider);\r\n        result._isResolved = this._isResolved;\r\n        result._currentResolve = this._currentResolve;\r\n        return result;\r\n    }\r\n    resolve(token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (typeof this.provider.resolveInlayHint !== 'function') {\r\n                return;\r\n            }\r\n            if (this._currentResolve) {\r\n                // wait for an active resolve operation and try again\r\n                // when that's done.\r\n                yield this._currentResolve;\r\n                if (token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                return this.resolve(token);\r\n            }\r\n            if (!this._isResolved) {\r\n                this._currentResolve = this._doResolve(token)\r\n                    .finally(() => this._currentResolve = undefined);\r\n            }\r\n            yield this._currentResolve;\r\n        });\r\n    }\r\n    _doResolve(token) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const newHint = yield Promise.resolve(this.provider.resolveInlayHint(this.hint, token));\r\n                this.hint.tooltip = (_a = newHint === null || newHint === void 0 ? void 0 : newHint.tooltip) !== null && _a !== void 0 ? _a : this.hint.tooltip;\r\n                this.hint.label = (_b = newHint === null || newHint === void 0 ? void 0 : newHint.label) !== null && _b !== void 0 ? _b : this.hint.label;\r\n                this._isResolved = true;\r\n            }\r\n            catch (err) {\r\n                onUnexpectedExternalError(err);\r\n                this._isResolved = false;\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class InlayHintsFragments {\r\n    static create(registry, model, ranges, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const data = [];\r\n            const promises = registry.ordered(model).reverse().map(provider => ranges.map((range) => __awaiter(this, void 0, void 0, function* () {\r\n                try {\r\n                    const result = yield provider.provideInlayHints(model, range, token);\r\n                    if (result === null || result === void 0 ? void 0 : result.hints.length) {\r\n                        data.push([result, provider]);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    onUnexpectedExternalError(err);\r\n                }\r\n            })));\r\n            yield Promise.all(promises.flat());\r\n            if (token.isCancellationRequested || model.isDisposed()) {\r\n                throw new CancellationError();\r\n            }\r\n            return new InlayHintsFragments(ranges, data, model);\r\n        });\r\n    }\r\n    constructor(ranges, data, model) {\r\n        this._disposables = new DisposableStore();\r\n        this.ranges = ranges;\r\n        this.provider = new Set();\r\n        const items = [];\r\n        for (const [list, provider] of data) {\r\n            this._disposables.add(list);\r\n            this.provider.add(provider);\r\n            for (const hint of list.hints) {\r\n                // compute the range to which the item should be attached to\r\n                const position = model.validatePosition(hint.position);\r\n                let direction = 'before';\r\n                const wordRange = InlayHintsFragments._getRangeAtPosition(model, position);\r\n                let range;\r\n                if (wordRange.getStartPosition().isBefore(position)) {\r\n                    range = Range.fromPositions(wordRange.getStartPosition(), position);\r\n                    direction = 'after';\r\n                }\r\n                else {\r\n                    range = Range.fromPositions(position, wordRange.getEndPosition());\r\n                    direction = 'before';\r\n                }\r\n                items.push(new InlayHintItem(hint, new InlayHintAnchor(range, direction), provider));\r\n            }\r\n        }\r\n        this.items = items.sort((a, b) => Position.compare(a.hint.position, b.hint.position));\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n    }\r\n    static _getRangeAtPosition(model, position) {\r\n        const line = position.lineNumber;\r\n        const word = model.getWordAtPosition(position);\r\n        if (word) {\r\n            // always prefer the word range\r\n            return new Range(line, word.startColumn, line, word.endColumn);\r\n        }\r\n        model.tokenization.tokenizeIfCheap(line);\r\n        const tokens = model.tokenization.getLineTokens(line);\r\n        const offset = position.column - 1;\r\n        const idx = tokens.findTokenIndexAtOffset(offset);\r\n        let start = tokens.getStartOffset(idx);\r\n        let end = tokens.getEndOffset(idx);\r\n        if (end - start === 1) {\r\n            // single character token, when at its end try leading/trailing token instead\r\n            if (start === offset && idx > 1) {\r\n                // leading token\r\n                start = tokens.getStartOffset(idx - 1);\r\n                end = tokens.getEndOffset(idx - 1);\r\n            }\r\n            else if (end === offset && idx < tokens.getCount() - 1) {\r\n                // trailing token\r\n                start = tokens.getStartOffset(idx + 1);\r\n                end = tokens.getEndOffset(idx + 1);\r\n            }\r\n        }\r\n        return new Range(line, start + 1, line, end + 1);\r\n    }\r\n}\r\nexport function asCommandLink(command) {\r\n    return URI.from({\r\n        scheme: Schemas.command,\r\n        path: command.id,\r\n        query: command.arguments && encodeURIComponent(JSON.stringify(command.arguments))\r\n    }).toString();\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Action, Separator } from '../../../../base/common/actions.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { generateUuid } from '../../../../base/common/uuid.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\r\nimport { PeekContext } from '../../peekView/browser/peekView.js';\r\nimport { isIMenuItem, MenuId, MenuItemAction, MenuRegistry } from '../../../../platform/actions/common/actions.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\r\nexport function showGoToContextMenu(accessor, editor, anchor, part) {\r\n    var _a;\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const resolverService = accessor.get(ITextModelService);\r\n        const contextMenuService = accessor.get(IContextMenuService);\r\n        const commandService = accessor.get(ICommandService);\r\n        const instaService = accessor.get(IInstantiationService);\r\n        const notificationService = accessor.get(INotificationService);\r\n        yield part.item.resolve(CancellationToken.None);\r\n        if (!part.part.location) {\r\n            return;\r\n        }\r\n        const location = part.part.location;\r\n        const menuActions = [];\r\n        // from all registered (not active) context menu actions select those\r\n        // that are a symbol navigation actions\r\n        const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext)\r\n            .map(item => isIMenuItem(item) ? item.command.id : generateUuid()));\r\n        for (const delegate of SymbolNavigationAction.all()) {\r\n            if (filter.has(delegate.desc.id)) {\r\n                menuActions.push(new Action(delegate.desc.id, MenuItemAction.label(delegate.desc, { renderShortTitle: true }), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\r\n                    const ref = yield resolverService.createModelReference(location.uri);\r\n                    try {\r\n                        const symbolAnchor = new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range));\r\n                        const range = part.item.anchor.range;\r\n                        yield instaService.invokeFunction(delegate.runEditorCommand.bind(delegate), editor, symbolAnchor, range);\r\n                    }\r\n                    finally {\r\n                        ref.dispose();\r\n                    }\r\n                })));\r\n            }\r\n        }\r\n        if (part.part.command) {\r\n            const { command } = part.part;\r\n            menuActions.push(new Separator());\r\n            menuActions.push(new Action(command.id, command.title, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\r\n                var _b;\r\n                try {\r\n                    yield commandService.executeCommand(command.id, ...((_b = command.arguments) !== null && _b !== void 0 ? _b : []));\r\n                }\r\n                catch (err) {\r\n                    notificationService.notify({\r\n                        severity: Severity.Error,\r\n                        source: part.item.provider.displayName,\r\n                        message: err\r\n                    });\r\n                }\r\n            })));\r\n        }\r\n        // show context menu\r\n        const useShadowDOM = editor.getOption(126 /* EditorOption.useShadowDOM */);\r\n        contextMenuService.showContextMenu({\r\n            domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\r\n            getAnchor: () => {\r\n                const box = dom.getDomNodePagePosition(anchor);\r\n                return { x: box.left, y: box.top + box.height + 8 };\r\n            },\r\n            getActions: () => menuActions,\r\n            onHide: () => {\r\n                editor.focus();\r\n            },\r\n            autoSelectFirstItem: true,\r\n        });\r\n    });\r\n}\r\nexport function goToDefinitionWithLocation(accessor, event, editor, location) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const resolverService = accessor.get(ITextModelService);\r\n        const ref = yield resolverService.createModelReference(location.uri);\r\n        yield editor.invokeWithinContext((accessor) => __awaiter(this, void 0, void 0, function* () {\r\n            const openToSide = event.hasSideBySideModifier;\r\n            const contextKeyService = accessor.get(IContextKeyService);\r\n            const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\r\n            const canPeek = !openToSide && editor.getOption(87 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\r\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\r\n            return action.run(accessor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)), Range.lift(location.range));\r\n        }));\r\n        ref.dispose();\r\n    });\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n};\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\r\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { getHover } from '../../hover/browser/getHover.js';\r\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\r\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport { asCommandLink } from './inlayHints.js';\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\r\n    constructor(part, owner, initialMousePosX, initialMousePosY) {\r\n        super(10, owner, part.item.anchor.range, initialMousePosX, initialMousePosY, true);\r\n        this.part = part;\r\n    }\r\n}\r\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\r\n    constructor(editor, languageService, openerService, configurationService, _resolverService, languageFeaturesService) {\r\n        super(editor, languageService, openerService, configurationService, languageFeaturesService);\r\n        this._resolverService = _resolverService;\r\n        this.hoverOrdinal = 6;\r\n    }\r\n    suggestHoverAnchor(mouseEvent) {\r\n        var _a;\r\n        const controller = InlayHintsController.get(this._editor);\r\n        if (!controller) {\r\n            return null;\r\n        }\r\n        if (mouseEvent.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\r\n            return null;\r\n        }\r\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\r\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\r\n            return null;\r\n        }\r\n        return new InlayHintsHoverAnchor(options.attachedData, this, mouseEvent.event.posx, mouseEvent.event.posy);\r\n    }\r\n    computeSync() {\r\n        return [];\r\n    }\r\n    computeAsync(anchor, _lineDecorations, token) {\r\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\r\n            return AsyncIterableObject.EMPTY;\r\n        }\r\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\r\n            var _a, e_1, _b, _c;\r\n            const { part } = anchor;\r\n            yield part.item.resolve(token);\r\n            if (token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            // (1) Inlay Tooltip\r\n            let itemTooltip;\r\n            if (typeof part.item.hint.tooltip === 'string') {\r\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\r\n            }\r\n            else if (part.item.hint.tooltip) {\r\n                itemTooltip = part.item.hint.tooltip;\r\n            }\r\n            if (itemTooltip) {\r\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], false, 0));\r\n            }\r\n            // (1.2) Inlay dbl-click gesture\r\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\r\n                executor.emitOne(new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(localize('hint.dbl', \"Double-click to insert\"))], false, 10001));\r\n            }\r\n            // (2) Inlay Label Part Tooltip\r\n            let partTooltip;\r\n            if (typeof part.part.tooltip === 'string') {\r\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\r\n            }\r\n            else if (part.part.tooltip) {\r\n                partTooltip = part.part.tooltip;\r\n            }\r\n            if (partTooltip) {\r\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], false, 1));\r\n            }\r\n            // (2.2) Inlay Label Part Help Hover\r\n            if (part.part.location || part.part.command) {\r\n                let linkHint;\r\n                const useMetaKey = this._editor.getOption(77 /* EditorOption.multiCursorModifier */) === 'altKey';\r\n                const kb = useMetaKey\r\n                    ? platform.isMacintosh\r\n                        ? localize('links.navigate.kb.meta.mac', \"cmd + click\")\r\n                        : localize('links.navigate.kb.meta', \"ctrl + click\")\r\n                    : platform.isMacintosh\r\n                        ? localize('links.navigate.kb.alt.mac', \"option + click\")\r\n                        : localize('links.navigate.kb.alt', \"alt + click\");\r\n                if (part.part.location && part.part.command) {\r\n                    linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\r\n                }\r\n                else if (part.part.location) {\r\n                    linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\r\n                }\r\n                else if (part.part.command) {\r\n                    linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, { isTrusted: true });\r\n                }\r\n                if (linkHint) {\r\n                    executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], false, 10000));\r\n                }\r\n            }\r\n            // (3) Inlay Label Part Location tooltip\r\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\r\n            try {\r\n                for (var _d = true, iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), _a = iterable_1_1.done, !_a; _d = true) {\r\n                    _c = iterable_1_1.value;\r\n                    _d = false;\r\n                    const item = _c;\r\n                    executor.emitOne(item);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (!_d && !_a && (_b = iterable_1.return)) yield _b.call(iterable_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }));\r\n    }\r\n    _resolveInlayHintLabelPartHover(part, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!part.part.location) {\r\n                return AsyncIterableObject.EMPTY;\r\n            }\r\n            const { uri, range } = part.part.location;\r\n            const ref = yield this._resolverService.createModelReference(uri);\r\n            try {\r\n                const model = ref.object.textEditorModel;\r\n                if (!this._languageFeaturesService.hoverProvider.has(model)) {\r\n                    return AsyncIterableObject.EMPTY;\r\n                }\r\n                return getHover(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token)\r\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\r\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, false, 2 + item.ordinal));\r\n            }\r\n            finally {\r\n                ref.dispose();\r\n            }\r\n        });\r\n    }\r\n};\r\nInlayHintsHover = __decorate([\r\n    __param(1, ILanguageService),\r\n    __param(2, IOpenerService),\r\n    __param(3, IConfigurationService),\r\n    __param(4, ITextModelService),\r\n    __param(5, ILanguageFeaturesService)\r\n], InlayHintsHover);\r\nexport { InlayHintsHover };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport * as nls from '../../../../nls.js';\r\nexport class ExpandLineSelectionAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'expandLineSelection',\r\n            label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\r\n            alias: 'Expand Line Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                weight: 0 /* KeybindingWeight.EditorCore */,\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */\r\n            },\r\n        });\r\n    }\r\n    run(_accessor, editor, args) {\r\n        args = args || {};\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        viewModel.model.pushStackElement();\r\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\r\n        viewModel.revealPrimaryCursor(args.source, true);\r\n    }\r\n}\r\nregisterEditorAction(ExpandLineSelectionAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\r\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\r\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { CopyLinesCommand } from './copyLinesCommand.js';\r\nimport { MoveLinesCommand } from './moveLinesCommand.js';\r\nimport { SortLinesCommand } from './sortLinesCommand.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\n// copy lines\r\nclass AbstractCopyLinesAction extends EditorAction {\r\n    constructor(down, opts) {\r\n        super(opts);\r\n        this.down = down;\r\n    }\r\n    run(_accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\r\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\r\n        // Remove selections that would result in copying the same line\r\n        let prev = selections[0];\r\n        for (let i = 1; i < selections.length; i++) {\r\n            const curr = selections[i];\r\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\r\n                // these two selections would copy the same line\r\n                if (prev.index < curr.index) {\r\n                    // prev wins\r\n                    curr.ignore = true;\r\n                }\r\n                else {\r\n                    // curr wins\r\n                    prev.ignore = true;\r\n                    prev = curr;\r\n                }\r\n            }\r\n        }\r\n        const commands = [];\r\n        for (const selection of selections) {\r\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\r\n    constructor() {\r\n        super(false, {\r\n            id: 'editor.action.copyLinesUpAction',\r\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\r\n            alias: 'Copy Line Up',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\r\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '2_line',\r\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\r\n                order: 1\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\r\n    constructor() {\r\n        super(true, {\r\n            id: 'editor.action.copyLinesDownAction',\r\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\r\n            alias: 'Copy Line Down',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\r\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '2_line',\r\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class DuplicateSelectionAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.duplicateSelection',\r\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\r\n            alias: 'Duplicate Selection',\r\n            precondition: EditorContextKeys.writable,\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '2_line',\r\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\r\n                order: 5\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const commands = [];\r\n        const selections = editor.getSelections();\r\n        const model = editor.getModel();\r\n        for (const selection of selections) {\r\n            if (selection.isEmpty()) {\r\n                commands.push(new CopyLinesCommand(selection, true));\r\n            }\r\n            else {\r\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\r\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\r\n            }\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\n// move lines\r\nclass AbstractMoveLinesAction extends EditorAction {\r\n    constructor(down, opts) {\r\n        super(opts);\r\n        this.down = down;\r\n    }\r\n    run(accessor, editor) {\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        const commands = [];\r\n        const selections = editor.getSelections() || [];\r\n        const autoIndent = editor.getOption(12 /* EditorOption.autoIndent */);\r\n        for (const selection of selections) {\r\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\r\n    constructor() {\r\n        super(false, {\r\n            id: 'editor.action.moveLinesUpAction',\r\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\r\n            alias: 'Move Line Up',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\r\n                linux: { primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '2_line',\r\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\r\n                order: 3\r\n            }\r\n        });\r\n    }\r\n}\r\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\r\n    constructor() {\r\n        super(true, {\r\n            id: 'editor.action.moveLinesDownAction',\r\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\r\n            alias: 'Move Line Down',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\r\n                linux: { primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '2_line',\r\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\r\n                order: 4\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class AbstractSortLinesAction extends EditorAction {\r\n    constructor(descending, opts) {\r\n        super(opts);\r\n        this.descending = descending;\r\n    }\r\n    run(_accessor, editor) {\r\n        const selections = editor.getSelections() || [];\r\n        for (const selection of selections) {\r\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\r\n                return;\r\n            }\r\n        }\r\n        const commands = [];\r\n        for (let i = 0, len = selections.length; i < len; i++) {\r\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\r\n    constructor() {\r\n        super(false, {\r\n            id: 'editor.action.sortLinesAscending',\r\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\r\n            alias: 'Sort Lines Ascending',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\r\n    constructor() {\r\n        super(true, {\r\n            id: 'editor.action.sortLinesDescending',\r\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\r\n            alias: 'Sort Lines Descending',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nexport class DeleteDuplicateLinesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.removeDuplicateLines',\r\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\r\n            alias: 'Delete Duplicate Lines',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = editor.getModel();\r\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\r\n            return;\r\n        }\r\n        const edits = [];\r\n        const endCursorState = [];\r\n        let linesDeleted = 0;\r\n        for (const selection of editor.getSelections()) {\r\n            const uniqueLines = new Set();\r\n            const lines = [];\r\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\r\n                const line = model.getLineContent(i);\r\n                if (uniqueLines.has(line)) {\r\n                    continue;\r\n                }\r\n                lines.push(line);\r\n                uniqueLines.add(line);\r\n            }\r\n            const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\r\n            const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\r\n            const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\r\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\r\n            endCursorState.push(finalSelection);\r\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeEdits(this.id, edits, endCursorState);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nexport class TrimTrailingWhitespaceAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: TrimTrailingWhitespaceAction.ID,\r\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\r\n            alias: 'Trim Trailing Whitespace',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor, args) {\r\n        let cursors = [];\r\n        if (args.reason === 'auto-save') {\r\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\r\n            // It is very convenient for the editor config extension to invoke this action.\r\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\r\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\r\n        }\r\n        const selection = editor.getSelection();\r\n        if (selection === null) {\r\n            return;\r\n        }\r\n        const command = new TrimTrailingWhitespaceCommand(selection, cursors);\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, [command]);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\r\nexport class DeleteLinesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.deleteLines',\r\n            label: nls.localize('lines.delete', \"Delete Line\"),\r\n            alias: 'Delete Line',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const ops = this._getLinesToRemove(editor);\r\n        const model = editor.getModel();\r\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\r\n            // Model is empty\r\n            return;\r\n        }\r\n        let linesDeleted = 0;\r\n        const edits = [];\r\n        const cursorState = [];\r\n        for (let i = 0, len = ops.length; i < len; i++) {\r\n            const op = ops[i];\r\n            let startLineNumber = op.startLineNumber;\r\n            let endLineNumber = op.endLineNumber;\r\n            let startColumn = 1;\r\n            let endColumn = model.getLineMaxColumn(endLineNumber);\r\n            if (endLineNumber < model.getLineCount()) {\r\n                endLineNumber += 1;\r\n                endColumn = 1;\r\n            }\r\n            else if (startLineNumber > 1) {\r\n                startLineNumber -= 1;\r\n                startColumn = model.getLineMaxColumn(startLineNumber);\r\n            }\r\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\r\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\r\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeEdits(this.id, edits, cursorState);\r\n        editor.pushUndoStop();\r\n    }\r\n    _getLinesToRemove(editor) {\r\n        // Construct delete operations\r\n        const operations = editor.getSelections().map((s) => {\r\n            let endLineNumber = s.endLineNumber;\r\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\r\n                endLineNumber -= 1;\r\n            }\r\n            return {\r\n                startLineNumber: s.startLineNumber,\r\n                selectionStartColumn: s.selectionStartColumn,\r\n                endLineNumber: endLineNumber,\r\n                positionColumn: s.positionColumn\r\n            };\r\n        });\r\n        // Sort delete operations\r\n        operations.sort((a, b) => {\r\n            if (a.startLineNumber === b.startLineNumber) {\r\n                return a.endLineNumber - b.endLineNumber;\r\n            }\r\n            return a.startLineNumber - b.startLineNumber;\r\n        });\r\n        // Merge delete operations which are adjacent or overlapping\r\n        const mergedOperations = [];\r\n        let previousOperation = operations[0];\r\n        for (let i = 1; i < operations.length; i++) {\r\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\r\n                // Merge current operations into the previous one\r\n                previousOperation.endLineNumber = operations[i].endLineNumber;\r\n            }\r\n            else {\r\n                // Push previous operation\r\n                mergedOperations.push(previousOperation);\r\n                previousOperation = operations[i];\r\n            }\r\n        }\r\n        // Push the last operation\r\n        mergedOperations.push(previousOperation);\r\n        return mergedOperations;\r\n    }\r\n}\r\nexport class IndentLinesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.indentLines',\r\n            label: nls.localize('lines.indent', \"Indent Line\"),\r\n            alias: 'Indent Line',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        const viewModel = editor._getViewModel();\r\n        if (!viewModel) {\r\n            return;\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nclass OutdentLinesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.outdentLines',\r\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\r\n            alias: 'Outdent Line',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\r\n    }\r\n}\r\nexport class InsertLineBeforeAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.insertLineBefore',\r\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\r\n            alias: 'Insert Line Above',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        const viewModel = editor._getViewModel();\r\n        if (!viewModel) {\r\n            return;\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\r\n    }\r\n}\r\nexport class InsertLineAfterAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.insertLineAfter',\r\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\r\n            alias: 'Insert Line Below',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        const viewModel = editor._getViewModel();\r\n        if (!viewModel) {\r\n            return;\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\r\n    }\r\n}\r\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\r\n    run(_accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const primaryCursor = editor.getSelection();\r\n        const rangesToDelete = this._getRangesToDelete(editor);\r\n        // merge overlapping selections\r\n        const effectiveRanges = [];\r\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\r\n            const range = rangesToDelete[i];\r\n            const nextRange = rangesToDelete[i + 1];\r\n            if (Range.intersectRanges(range, nextRange) === null) {\r\n                effectiveRanges.push(range);\r\n            }\r\n            else {\r\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\r\n            }\r\n        }\r\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\r\n        const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\r\n        const edits = effectiveRanges.map(range => {\r\n            return EditOperation.replace(range, '');\r\n        });\r\n        editor.pushUndoStop();\r\n        editor.executeEdits(this.id, edits, endCursorState);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\r\n    constructor() {\r\n        super({\r\n            id: 'deleteAllLeft',\r\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\r\n            alias: 'Delete All Left',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    _getEndCursorState(primaryCursor, rangesToDelete) {\r\n        let endPrimaryCursor = null;\r\n        const endCursorState = [];\r\n        let deletedLines = 0;\r\n        rangesToDelete.forEach(range => {\r\n            let endCursor;\r\n            if (range.endColumn === 1 && deletedLines > 0) {\r\n                const newStartLine = range.startLineNumber - deletedLines;\r\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\r\n            }\r\n            else {\r\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\r\n            }\r\n            deletedLines += range.endLineNumber - range.startLineNumber;\r\n            if (range.intersectRanges(primaryCursor)) {\r\n                endPrimaryCursor = endCursor;\r\n            }\r\n            else {\r\n                endCursorState.push(endCursor);\r\n            }\r\n        });\r\n        if (endPrimaryCursor) {\r\n            endCursorState.unshift(endPrimaryCursor);\r\n        }\r\n        return endCursorState;\r\n    }\r\n    _getRangesToDelete(editor) {\r\n        const selections = editor.getSelections();\r\n        if (selections === null) {\r\n            return [];\r\n        }\r\n        let rangesToDelete = selections;\r\n        const model = editor.getModel();\r\n        if (model === null) {\r\n            return [];\r\n        }\r\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\r\n        rangesToDelete = rangesToDelete.map(selection => {\r\n            if (selection.isEmpty()) {\r\n                if (selection.startColumn === 1) {\r\n                    const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\r\n                    const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineLength(deleteFromLine) + 1;\r\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\r\n                }\r\n                else {\r\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\r\n                }\r\n            }\r\n            else {\r\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\r\n            }\r\n        });\r\n        return rangesToDelete;\r\n    }\r\n}\r\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\r\n    constructor() {\r\n        super({\r\n            id: 'deleteAllRight',\r\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\r\n            alias: 'Delete All Right',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */, secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */] },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    _getEndCursorState(primaryCursor, rangesToDelete) {\r\n        let endPrimaryCursor = null;\r\n        const endCursorState = [];\r\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\r\n            const range = rangesToDelete[i];\r\n            const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\r\n            if (range.intersectRanges(primaryCursor)) {\r\n                endPrimaryCursor = endCursor;\r\n            }\r\n            else {\r\n                endCursorState.push(endCursor);\r\n            }\r\n        }\r\n        if (endPrimaryCursor) {\r\n            endCursorState.unshift(endPrimaryCursor);\r\n        }\r\n        return endCursorState;\r\n    }\r\n    _getRangesToDelete(editor) {\r\n        const model = editor.getModel();\r\n        if (model === null) {\r\n            return [];\r\n        }\r\n        const selections = editor.getSelections();\r\n        if (selections === null) {\r\n            return [];\r\n        }\r\n        const rangesToDelete = selections.map((sel) => {\r\n            if (sel.isEmpty()) {\r\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\r\n                if (sel.startColumn === maxColumn) {\r\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\r\n                }\r\n                else {\r\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\r\n                }\r\n            }\r\n            return sel;\r\n        });\r\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\r\n        return rangesToDelete;\r\n    }\r\n}\r\nexport class JoinLinesAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.joinLines',\r\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\r\n            alias: 'Join Lines',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        const selections = editor.getSelections();\r\n        if (selections === null) {\r\n            return;\r\n        }\r\n        let primaryCursor = editor.getSelection();\r\n        if (primaryCursor === null) {\r\n            return;\r\n        }\r\n        selections.sort(Range.compareRangesUsingStarts);\r\n        const reducedSelections = [];\r\n        const lastSelection = selections.reduce((previousValue, currentValue) => {\r\n            if (previousValue.isEmpty()) {\r\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\r\n                    if (primaryCursor.equalsSelection(previousValue)) {\r\n                        primaryCursor = currentValue;\r\n                    }\r\n                    return currentValue;\r\n                }\r\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\r\n                    reducedSelections.push(previousValue);\r\n                    return currentValue;\r\n                }\r\n                else {\r\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\r\n                }\r\n            }\r\n            else {\r\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\r\n                    reducedSelections.push(previousValue);\r\n                    return currentValue;\r\n                }\r\n                else {\r\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\r\n                }\r\n            }\r\n        });\r\n        reducedSelections.push(lastSelection);\r\n        const model = editor.getModel();\r\n        if (model === null) {\r\n            return;\r\n        }\r\n        const edits = [];\r\n        const endCursorState = [];\r\n        let endPrimaryCursor = primaryCursor;\r\n        let lineOffset = 0;\r\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\r\n            const selection = reducedSelections[i];\r\n            const startLineNumber = selection.startLineNumber;\r\n            const startColumn = 1;\r\n            let columnDeltaOffset = 0;\r\n            let endLineNumber, endColumn;\r\n            const selectionEndPositionOffset = model.getLineLength(selection.endLineNumber) - selection.endColumn;\r\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\r\n                const position = selection.getStartPosition();\r\n                if (position.lineNumber < model.getLineCount()) {\r\n                    endLineNumber = startLineNumber + 1;\r\n                    endColumn = model.getLineMaxColumn(endLineNumber);\r\n                }\r\n                else {\r\n                    endLineNumber = position.lineNumber;\r\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\r\n                }\r\n            }\r\n            else {\r\n                endLineNumber = selection.endLineNumber;\r\n                endColumn = model.getLineMaxColumn(endLineNumber);\r\n            }\r\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\r\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\r\n                const lineText = model.getLineContent(i);\r\n                const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\r\n                if (firstNonWhitespaceIdx >= 1) {\r\n                    let insertSpace = true;\r\n                    if (trimmedLinesContent === '') {\r\n                        insertSpace = false;\r\n                    }\r\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\r\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\r\n                        insertSpace = false;\r\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\r\n                    }\r\n                    const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\r\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\r\n                    if (insertSpace) {\r\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\r\n                    }\r\n                    else {\r\n                        columnDeltaOffset = lineTextWithoutIndent.length;\r\n                    }\r\n                }\r\n                else {\r\n                    columnDeltaOffset = 0;\r\n                }\r\n            }\r\n            const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\r\n            if (!deleteSelection.isEmpty()) {\r\n                let resultSelection;\r\n                if (selection.isEmpty()) {\r\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\r\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\r\n                }\r\n                else {\r\n                    if (selection.startLineNumber === selection.endLineNumber) {\r\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\r\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\r\n                    }\r\n                    else {\r\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\r\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\r\n                    }\r\n                }\r\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\r\n                    endPrimaryCursor = resultSelection;\r\n                }\r\n                else {\r\n                    endCursorState.push(resultSelection);\r\n                }\r\n            }\r\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\r\n        }\r\n        endCursorState.unshift(endPrimaryCursor);\r\n        editor.pushUndoStop();\r\n        editor.executeEdits(this.id, edits, endCursorState);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nexport class TransposeAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transpose',\r\n            label: nls.localize('editor.transpose', \"Transpose Characters around the Cursor\"),\r\n            alias: 'Transpose Characters around the Cursor',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    run(_accessor, editor) {\r\n        const selections = editor.getSelections();\r\n        if (selections === null) {\r\n            return;\r\n        }\r\n        const model = editor.getModel();\r\n        if (model === null) {\r\n            return;\r\n        }\r\n        const commands = [];\r\n        for (let i = 0, len = selections.length; i < len; i++) {\r\n            const selection = selections[i];\r\n            if (!selection.isEmpty()) {\r\n                continue;\r\n            }\r\n            const cursor = selection.getStartPosition();\r\n            const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\r\n            if (cursor.column >= maxColumn) {\r\n                if (cursor.lineNumber === model.getLineCount()) {\r\n                    continue;\r\n                }\r\n                // The cursor is at the end of current line and current line is not empty\r\n                // then we transpose the character before the cursor and the line break if there is any following line.\r\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\r\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\r\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\r\n            }\r\n            else {\r\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\r\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\r\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\r\n            }\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nexport class AbstractCaseAction extends EditorAction {\r\n    run(_accessor, editor) {\r\n        const selections = editor.getSelections();\r\n        if (selections === null) {\r\n            return;\r\n        }\r\n        const model = editor.getModel();\r\n        if (model === null) {\r\n            return;\r\n        }\r\n        const wordSeparators = editor.getOption(129 /* EditorOption.wordSeparators */);\r\n        const textEdits = [];\r\n        for (const selection of selections) {\r\n            if (selection.isEmpty()) {\r\n                const cursor = selection.getStartPosition();\r\n                const word = editor.getConfiguredWordAtPosition(cursor);\r\n                if (!word) {\r\n                    continue;\r\n                }\r\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\r\n                const text = model.getValueInRange(wordRange);\r\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\r\n            }\r\n            else {\r\n                const text = model.getValueInRange(selection);\r\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\r\n            }\r\n        }\r\n        editor.pushUndoStop();\r\n        editor.executeEdits(this.id, textEdits);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nexport class UpperCaseAction extends AbstractCaseAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transformToUppercase',\r\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\r\n            alias: 'Transform to Uppercase',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    _modifyText(text, wordSeparators) {\r\n        return text.toLocaleUpperCase();\r\n    }\r\n}\r\nexport class LowerCaseAction extends AbstractCaseAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transformToLowercase',\r\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\r\n            alias: 'Transform to Lowercase',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    _modifyText(text, wordSeparators) {\r\n        return text.toLocaleLowerCase();\r\n    }\r\n}\r\nclass BackwardsCompatibleRegExp {\r\n    constructor(_pattern, _flags) {\r\n        this._pattern = _pattern;\r\n        this._flags = _flags;\r\n        this._actual = null;\r\n        this._evaluated = false;\r\n    }\r\n    get() {\r\n        if (!this._evaluated) {\r\n            this._evaluated = true;\r\n            try {\r\n                this._actual = new RegExp(this._pattern, this._flags);\r\n            }\r\n            catch (err) {\r\n                // this browser does not support this regular expression\r\n            }\r\n        }\r\n        return this._actual;\r\n    }\r\n    isSupported() {\r\n        return (this.get() !== null);\r\n    }\r\n}\r\nexport class TitleCaseAction extends AbstractCaseAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transformToTitlecase',\r\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\r\n            alias: 'Transform to Title Case',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    _modifyText(text, wordSeparators) {\r\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\r\n        if (!titleBoundary) {\r\n            // cannot support this\r\n            return text;\r\n        }\r\n        return text\r\n            .toLocaleLowerCase()\r\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\r\n    }\r\n}\r\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\r\nexport class SnakeCaseAction extends AbstractCaseAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transformToSnakecase',\r\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\r\n            alias: 'Transform to Snake Case',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    _modifyText(text, wordSeparators) {\r\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\r\n        const singleLetters = SnakeCaseAction.singleLetters.get();\r\n        if (!caseBoundary || !singleLetters) {\r\n            // cannot support this\r\n            return text;\r\n        }\r\n        return (text\r\n            .replace(caseBoundary, '$1_$2')\r\n            .replace(singleLetters, '$1_$2$3')\r\n            .toLocaleLowerCase());\r\n    }\r\n}\r\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\r\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\r\nexport class CamelCaseAction extends AbstractCaseAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transformToCamelcase',\r\n            label: nls.localize('editor.transformToCamelcase', \"Transform to Camel Case\"),\r\n            alias: 'Transform to Camel Case',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    _modifyText(text, wordSeparators) {\r\n        const wordBoundary = CamelCaseAction.wordBoundary.get();\r\n        if (!wordBoundary) {\r\n            // cannot support this\r\n            return text;\r\n        }\r\n        const words = text.split(wordBoundary);\r\n        const firstWord = words.shift();\r\n        return firstWord + words.map((word) => word.substring(0, 1).toLocaleUpperCase() + word.substring(1))\r\n            .join('');\r\n    }\r\n}\r\nCamelCaseAction.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\r\nexport class KebabCaseAction extends AbstractCaseAction {\r\n    static isSupported() {\r\n        const areAllRegexpsSupported = [\r\n            this.caseBoundary,\r\n            this.singleLetters,\r\n            this.underscoreBoundary,\r\n        ].every((regexp) => regexp.isSupported());\r\n        return areAllRegexpsSupported;\r\n    }\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.transformToKebabcase',\r\n            label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\r\n            alias: 'Transform to Kebab Case',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n    _modifyText(text, _) {\r\n        const caseBoundary = KebabCaseAction.caseBoundary.get();\r\n        const singleLetters = KebabCaseAction.singleLetters.get();\r\n        const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\r\n        if (!caseBoundary || !singleLetters || !underscoreBoundary) {\r\n            // one or more regexps aren't supported\r\n            return text;\r\n        }\r\n        return text\r\n            .replace(underscoreBoundary, '$1-$3')\r\n            .replace(caseBoundary, '$1-$2')\r\n            .replace(singleLetters, '$1-$2')\r\n            .toLocaleLowerCase();\r\n    }\r\n}\r\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\r\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\r\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\r\nregisterEditorAction(CopyLinesUpAction);\r\nregisterEditorAction(CopyLinesDownAction);\r\nregisterEditorAction(DuplicateSelectionAction);\r\nregisterEditorAction(MoveLinesUpAction);\r\nregisterEditorAction(MoveLinesDownAction);\r\nregisterEditorAction(SortLinesAscendingAction);\r\nregisterEditorAction(SortLinesDescendingAction);\r\nregisterEditorAction(DeleteDuplicateLinesAction);\r\nregisterEditorAction(TrimTrailingWhitespaceAction);\r\nregisterEditorAction(DeleteLinesAction);\r\nregisterEditorAction(IndentLinesAction);\r\nregisterEditorAction(OutdentLinesAction);\r\nregisterEditorAction(InsertLineBeforeAction);\r\nregisterEditorAction(InsertLineAfterAction);\r\nregisterEditorAction(DeleteAllLeftAction);\r\nregisterEditorAction(DeleteAllRightAction);\r\nregisterEditorAction(JoinLinesAction);\r\nregisterEditorAction(TransposeAction);\r\nregisterEditorAction(UpperCaseAction);\r\nregisterEditorAction(LowerCaseAction);\r\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\r\n    registerEditorAction(SnakeCaseAction);\r\n}\r\nif (CamelCaseAction.wordBoundary.isSupported()) {\r\n    registerEditorAction(CamelCaseAction);\r\n}\r\nif (TitleCaseAction.titleBoundary.isSupported()) {\r\n    registerEditorAction(TitleCaseAction);\r\n}\r\nif (KebabCaseAction.isSupported()) {\r\n    registerEditorAction(KebabCaseAction);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { EditOperation } from '../core/editOperation.js';\r\nimport { Range } from '../core/range.js';\r\nexport class TrimTrailingWhitespaceCommand {\r\n    constructor(selection, cursors) {\r\n        this._selection = selection;\r\n        this._cursors = cursors;\r\n        this._selectionId = null;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        const ops = trimTrailingWhitespace(model, this._cursors);\r\n        for (let i = 0, len = ops.length; i < len; i++) {\r\n            const op = ops[i];\r\n            builder.addEditOperation(op.range, op.text);\r\n        }\r\n        this._selectionId = builder.trackSelection(this._selection);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        return helper.getTrackedSelection(this._selectionId);\r\n    }\r\n}\r\n/**\r\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\r\n */\r\nexport function trimTrailingWhitespace(model, cursors) {\r\n    // Sort cursors ascending\r\n    cursors.sort((a, b) => {\r\n        if (a.lineNumber === b.lineNumber) {\r\n            return a.column - b.column;\r\n        }\r\n        return a.lineNumber - b.lineNumber;\r\n    });\r\n    // Reduce multiple cursors on the same line and only keep the last one on the line\r\n    for (let i = cursors.length - 2; i >= 0; i--) {\r\n        if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\r\n            // Remove cursor at `i`\r\n            cursors.splice(i, 1);\r\n        }\r\n    }\r\n    const r = [];\r\n    let rLen = 0;\r\n    let cursorIndex = 0;\r\n    const cursorLen = cursors.length;\r\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\r\n        const lineContent = model.getLineContent(lineNumber);\r\n        const maxLineColumn = lineContent.length + 1;\r\n        let minEditColumn = 0;\r\n        if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\r\n            minEditColumn = cursors[cursorIndex].column;\r\n            cursorIndex++;\r\n            if (minEditColumn === maxLineColumn) {\r\n                // The cursor is at the end of the line => no edits for sure on this line\r\n                continue;\r\n            }\r\n        }\r\n        if (lineContent.length === 0) {\r\n            continue;\r\n        }\r\n        const lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\r\n        let fromColumn = 0;\r\n        if (lastNonWhitespaceIndex === -1) {\r\n            // Entire line is whitespace\r\n            fromColumn = 1;\r\n        }\r\n        else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\r\n            // There is trailing whitespace\r\n            fromColumn = lastNonWhitespaceIndex + 2;\r\n        }\r\n        else {\r\n            // There is no trailing whitespace\r\n            continue;\r\n        }\r\n        fromColumn = Math.max(minEditColumn, fromColumn);\r\n        r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\r\n    }\r\n    return r;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nexport class CopyLinesCommand {\r\n    constructor(selection, isCopyingDown, noop) {\r\n        this._selection = selection;\r\n        this._isCopyingDown = isCopyingDown;\r\n        this._noop = noop || false;\r\n        this._selectionDirection = 0 /* SelectionDirection.LTR */;\r\n        this._selectionId = null;\r\n        this._startLineNumberDelta = 0;\r\n        this._endLineNumberDelta = 0;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        let s = this._selection;\r\n        this._startLineNumberDelta = 0;\r\n        this._endLineNumberDelta = 0;\r\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\r\n            this._endLineNumberDelta = 1;\r\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\r\n        }\r\n        const sourceLines = [];\r\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\r\n            sourceLines.push(model.getLineContent(i));\r\n        }\r\n        const sourceText = sourceLines.join('\\n');\r\n        if (sourceText === '') {\r\n            // Duplicating empty line\r\n            if (this._isCopyingDown) {\r\n                this._startLineNumberDelta++;\r\n                this._endLineNumberDelta++;\r\n            }\r\n        }\r\n        if (this._noop) {\r\n            builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\r\n        }\r\n        else {\r\n            if (!this._isCopyingDown) {\r\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\r\n            }\r\n            else {\r\n                builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\r\n            }\r\n        }\r\n        this._selectionId = builder.trackSelection(s);\r\n        this._selectionDirection = this._selection.getDirection();\r\n    }\r\n    computeCursorState(model, helper) {\r\n        let result = helper.getTrackedSelection(this._selectionId);\r\n        if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\r\n            let startLineNumber = result.startLineNumber;\r\n            let startColumn = result.startColumn;\r\n            let endLineNumber = result.endLineNumber;\r\n            let endColumn = result.endColumn;\r\n            if (this._startLineNumberDelta !== 0) {\r\n                startLineNumber = startLineNumber + this._startLineNumberDelta;\r\n                startColumn = 1;\r\n            }\r\n            if (this._endLineNumberDelta !== 0) {\r\n                endLineNumber = endLineNumber + this._endLineNumberDelta;\r\n                endColumn = 1;\r\n            }\r\n            result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport * as indentUtils from '../../indentation/browser/indentUtils.js';\r\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\r\nimport { getEnterAction } from '../../../common/languages/enterAction.js';\r\nlet MoveLinesCommand = class MoveLinesCommand {\r\n    constructor(selection, isMovingDown, autoIndent, _languageConfigurationService) {\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._selection = selection;\r\n        this._isMovingDown = isMovingDown;\r\n        this._autoIndent = autoIndent;\r\n        this._selectionId = null;\r\n        this._moveEndLineSelectionShrink = false;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        const modelLineCount = model.getLineCount();\r\n        if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\r\n            this._selectionId = builder.trackSelection(this._selection);\r\n            return;\r\n        }\r\n        if (!this._isMovingDown && this._selection.startLineNumber === 1) {\r\n            this._selectionId = builder.trackSelection(this._selection);\r\n            return;\r\n        }\r\n        this._moveEndPositionDown = false;\r\n        let s = this._selection;\r\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\r\n            this._moveEndPositionDown = true;\r\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\r\n        }\r\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\r\n        const indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\r\n        const virtualModel = {\r\n            tokenization: {\r\n                getLineTokens: (lineNumber) => {\r\n                    return model.tokenization.getLineTokens(lineNumber);\r\n                },\r\n                getLanguageId: () => {\r\n                    return model.getLanguageId();\r\n                },\r\n                getLanguageIdAtPosition: (lineNumber, column) => {\r\n                    return model.getLanguageIdAtPosition(lineNumber, column);\r\n                },\r\n            },\r\n            getLineContent: null,\r\n        };\r\n        if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\r\n            // Current line is empty\r\n            const lineNumber = s.startLineNumber;\r\n            const otherLineNumber = (this._isMovingDown ? lineNumber + 1 : lineNumber - 1);\r\n            if (model.getLineMaxColumn(otherLineNumber) === 1) {\r\n                // Other line number is empty too, so no editing is needed\r\n                // Add a no-op to force running by the model\r\n                builder.addEditOperation(new Range(1, 1, 1, 1), null);\r\n            }\r\n            else {\r\n                // Type content from other line number on line number\r\n                builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\r\n                // Remove content from other line number\r\n                builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\r\n            }\r\n            // Track selection at the other line number\r\n            s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\r\n        }\r\n        else {\r\n            let movingLineNumber;\r\n            let movingLineText;\r\n            if (this._isMovingDown) {\r\n                movingLineNumber = s.endLineNumber + 1;\r\n                movingLineText = model.getLineContent(movingLineNumber);\r\n                // Delete line that needs to be moved\r\n                builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\r\n                let insertingText = movingLineText;\r\n                if (this.shouldAutoIndent(model, s)) {\r\n                    const movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\r\n                    // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\r\n                    if (movingLineMatchResult !== null) {\r\n                        const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\r\n                        const newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\r\n                        const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\r\n                        insertingText = newIndentation + this.trimStart(movingLineText);\r\n                    }\r\n                    else {\r\n                        // no enter rule matches, let's check indentatin rules then.\r\n                        virtualModel.getLineContent = (lineNumber) => {\r\n                            if (lineNumber === s.startLineNumber) {\r\n                                return model.getLineContent(movingLineNumber);\r\n                            }\r\n                            else {\r\n                                return model.getLineContent(lineNumber);\r\n                            }\r\n                        };\r\n                        const indentOfMovingLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter, this._languageConfigurationService);\r\n                        if (indentOfMovingLine !== null) {\r\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\r\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\r\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\r\n                            if (newSpaceCnt !== oldSpaceCnt) {\r\n                                const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\r\n                                insertingText = newIndentation + this.trimStart(movingLineText);\r\n                            }\r\n                        }\r\n                    }\r\n                    // add edit operations for moving line first to make sure it's executed after we make indentation change\r\n                    // to s.startLineNumber\r\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\r\n                    const ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\r\n                    // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\r\n                    if (ret !== null) {\r\n                        if (ret !== 0) {\r\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // it doesn't match onEnter rules, let's check indentation rules then.\r\n                        virtualModel.getLineContent = (lineNumber) => {\r\n                            if (lineNumber === s.startLineNumber) {\r\n                                return insertingText;\r\n                            }\r\n                            else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\r\n                                return model.getLineContent(lineNumber - 1);\r\n                            }\r\n                            else {\r\n                                return model.getLineContent(lineNumber);\r\n                            }\r\n                        };\r\n                        const newIndentatOfMovingBlock = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter, this._languageConfigurationService);\r\n                        if (newIndentatOfMovingBlock !== null) {\r\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\r\n                            const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\r\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\r\n                            if (newSpaceCnt !== oldSpaceCnt) {\r\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\r\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // Insert line that needs to be moved before\r\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\r\n                }\r\n            }\r\n            else {\r\n                movingLineNumber = s.startLineNumber - 1;\r\n                movingLineText = model.getLineContent(movingLineNumber);\r\n                // Delete line that needs to be moved\r\n                builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\r\n                // Insert line that needs to be moved after\r\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\r\n                if (this.shouldAutoIndent(model, s)) {\r\n                    virtualModel.getLineContent = (lineNumber) => {\r\n                        if (lineNumber === movingLineNumber) {\r\n                            return model.getLineContent(s.startLineNumber);\r\n                        }\r\n                        else {\r\n                            return model.getLineContent(lineNumber);\r\n                        }\r\n                    };\r\n                    const ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\r\n                    // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\r\n                    if (ret !== null) {\r\n                        if (ret !== 0) {\r\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // it doesn't match any onEnter rule, let's check indentation rules then.\r\n                        const indentOfFirstLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter, this._languageConfigurationService);\r\n                        if (indentOfFirstLine !== null) {\r\n                            // adjust the indentation of the moving block\r\n                            const oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\r\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\r\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\r\n                            if (newSpaceCnt !== oldSpaceCnt) {\r\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\r\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._selectionId = builder.trackSelection(s);\r\n    }\r\n    buildIndentConverter(tabSize, indentSize, insertSpaces) {\r\n        return {\r\n            shiftIndent: (indentation) => {\r\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\r\n            },\r\n            unshiftIndent: (indentation) => {\r\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\r\n            }\r\n        };\r\n    }\r\n    parseEnterResult(model, indentConverter, tabSize, line, enter) {\r\n        if (enter) {\r\n            let enterPrefix = enter.indentation;\r\n            if (enter.indentAction === IndentAction.None) {\r\n                enterPrefix = enter.indentation + enter.appendText;\r\n            }\r\n            else if (enter.indentAction === IndentAction.Indent) {\r\n                enterPrefix = enter.indentation + enter.appendText;\r\n            }\r\n            else if (enter.indentAction === IndentAction.IndentOutdent) {\r\n                enterPrefix = enter.indentation;\r\n            }\r\n            else if (enter.indentAction === IndentAction.Outdent) {\r\n                enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\r\n            }\r\n            const movingLineText = model.getLineContent(line);\r\n            if (this.trimStart(movingLineText).indexOf(this.trimStart(enterPrefix)) >= 0) {\r\n                const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\r\n                let newIndentation = strings.getLeadingWhitespace(enterPrefix);\r\n                const indentMetadataOfMovelingLine = getIndentMetadata(model, line, this._languageConfigurationService);\r\n                if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* IndentConsts.DECREASE_MASK */) {\r\n                    newIndentation = indentConverter.unshiftIndent(newIndentation);\r\n                }\r\n                const newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\r\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\r\n                return newSpaceCnt - oldSpaceCnt;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     *\r\n     * @param model\r\n     * @param indentConverter\r\n     * @param tabSize\r\n     * @param line the line moving down\r\n     * @param futureAboveLineNumber the line which will be at the `line` position\r\n     * @param futureAboveLineText\r\n     */\r\n    matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\r\n        if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\r\n            // break\r\n            const maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\r\n            const enter = getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn), this._languageConfigurationService);\r\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\r\n        }\r\n        else {\r\n            // go upwards, starting from `line - 1`\r\n            let validPrecedingLine = line - 1;\r\n            while (validPrecedingLine >= 1) {\r\n                const lineContent = model.getLineContent(validPrecedingLine);\r\n                const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\r\n                if (nonWhitespaceIdx >= 0) {\r\n                    break;\r\n                }\r\n                validPrecedingLine--;\r\n            }\r\n            if (validPrecedingLine < 1 || line > model.getLineCount()) {\r\n                return null;\r\n            }\r\n            const maxColumn = model.getLineMaxColumn(validPrecedingLine);\r\n            const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\r\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\r\n        }\r\n    }\r\n    matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\r\n        let validPrecedingLine = oneLineAbove;\r\n        while (validPrecedingLine >= 1) {\r\n            // ship empty lines as empty lines just inherit indentation\r\n            let lineContent;\r\n            if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\r\n                lineContent = previousLineText;\r\n            }\r\n            else {\r\n                lineContent = model.getLineContent(validPrecedingLine);\r\n            }\r\n            const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\r\n            if (nonWhitespaceIdx >= 0) {\r\n                break;\r\n            }\r\n            validPrecedingLine--;\r\n        }\r\n        if (validPrecedingLine < 1 || line > model.getLineCount()) {\r\n            return null;\r\n        }\r\n        const maxColumn = model.getLineMaxColumn(validPrecedingLine);\r\n        const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\r\n        return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\r\n    }\r\n    trimStart(str) {\r\n        return str.replace(/^\\s+/, '');\r\n    }\r\n    shouldAutoIndent(model, selection) {\r\n        if (this._autoIndent < 4 /* EditorAutoIndentStrategy.Full */) {\r\n            return false;\r\n        }\r\n        // if it's not easy to tokenize, we stop auto indent.\r\n        if (!model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\r\n            return false;\r\n        }\r\n        const languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\r\n        const languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\r\n        if (languageAtSelectionStart !== languageAtSelectionEnd) {\r\n            return false;\r\n        }\r\n        if (this._languageConfigurationService.getLanguageConfiguration(languageAtSelectionStart).indentRulesSupport === null) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\r\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\r\n            const lineContent = model.getLineContent(i);\r\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\r\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\r\n            const newSpacesCnt = originalSpacesCnt + offset;\r\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\r\n            if (newIndent !== originalIndent) {\r\n                builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\r\n                if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\r\n                    // as users select part of the original indent white spaces\r\n                    // when we adjust the indentation of endLine, we should adjust the cursor position as well.\r\n                    this._moveEndLineSelectionShrink = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    computeCursorState(model, helper) {\r\n        let result = helper.getTrackedSelection(this._selectionId);\r\n        if (this._moveEndPositionDown) {\r\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\r\n        }\r\n        if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\r\n            result = result.setEndPosition(result.endLineNumber, 2);\r\n        }\r\n        return result;\r\n    }\r\n};\r\nMoveLinesCommand = __decorate([\r\n    __param(3, ILanguageConfigurationService)\r\n], MoveLinesCommand);\r\nexport { MoveLinesCommand };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditOperation } from '../../../common/core/editOperation.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nexport class SortLinesCommand {\r\n    static getCollator() {\r\n        if (!SortLinesCommand._COLLATOR) {\r\n            SortLinesCommand._COLLATOR = new Intl.Collator();\r\n        }\r\n        return SortLinesCommand._COLLATOR;\r\n    }\r\n    constructor(selection, descending) {\r\n        this.selection = selection;\r\n        this.descending = descending;\r\n        this.selectionId = null;\r\n    }\r\n    getEditOperations(model, builder) {\r\n        const op = sortLines(model, this.selection, this.descending);\r\n        if (op) {\r\n            builder.addEditOperation(op.range, op.text);\r\n        }\r\n        this.selectionId = builder.trackSelection(this.selection);\r\n    }\r\n    computeCursorState(model, helper) {\r\n        return helper.getTrackedSelection(this.selectionId);\r\n    }\r\n    static canRun(model, selection, descending) {\r\n        if (model === null) {\r\n            return false;\r\n        }\r\n        const data = getSortData(model, selection, descending);\r\n        if (!data) {\r\n            return false;\r\n        }\r\n        for (let i = 0, len = data.before.length; i < len; i++) {\r\n            if (data.before[i] !== data.after[i]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nSortLinesCommand._COLLATOR = null;\r\nfunction getSortData(model, selection, descending) {\r\n    const startLineNumber = selection.startLineNumber;\r\n    let endLineNumber = selection.endLineNumber;\r\n    if (selection.endColumn === 1) {\r\n        endLineNumber--;\r\n    }\r\n    // Nothing to sort if user didn't select anything.\r\n    if (startLineNumber >= endLineNumber) {\r\n        return null;\r\n    }\r\n    const linesToSort = [];\r\n    // Get the contents of the selection to be sorted.\r\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\r\n        linesToSort.push(model.getLineContent(lineNumber));\r\n    }\r\n    let sorted = linesToSort.slice(0);\r\n    sorted.sort(SortLinesCommand.getCollator().compare);\r\n    // If descending, reverse the order.\r\n    if (descending === true) {\r\n        sorted = sorted.reverse();\r\n    }\r\n    return {\r\n        startLineNumber: startLineNumber,\r\n        endLineNumber: endLineNumber,\r\n        before: linesToSort,\r\n        after: sorted\r\n    };\r\n}\r\n/**\r\n * Generate commands for sorting lines on a model.\r\n */\r\nfunction sortLines(model, selection, descending) {\r\n    const data = getSortData(model, selection, descending);\r\n    if (!data) {\r\n        return null;\r\n    }\r\n    return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar LinkedEditingContribution_1;\r\nimport * as arrays from '../../../../base/common/arrays.js';\r\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport './linkedEditing.css';\r\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\r\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\r\nlet LinkedEditingContribution = LinkedEditingContribution_1 = class LinkedEditingContribution extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(LinkedEditingContribution_1.ID);\r\n    }\r\n    constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\r\n        super();\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this._syncRangesToken = 0;\r\n        this._localToDispose = this._register(new DisposableStore());\r\n        this._editor = editor;\r\n        this._providers = languageFeaturesService.linkedEditingRangeProvider;\r\n        this._enabled = false;\r\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\r\n        this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { max: 200 });\r\n        this._currentDecorations = this._editor.createDecorationsCollection();\r\n        this._languageWordPattern = null;\r\n        this._currentWordPattern = null;\r\n        this._ignoreChangeEvent = false;\r\n        this._localToDispose = this._register(new DisposableStore());\r\n        this._rangeUpdateTriggerPromise = null;\r\n        this._rangeSyncTriggerPromise = null;\r\n        this._currentRequest = null;\r\n        this._currentRequestPosition = null;\r\n        this._currentRequestModelVersion = null;\r\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\r\n        this._register(this._editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(69 /* EditorOption.linkedEditing */) || e.hasChanged(92 /* EditorOption.renameOnType */)) {\r\n                this.reinitialize(false);\r\n            }\r\n        }));\r\n        this._register(this._providers.onDidChange(() => this.reinitialize(false)));\r\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\r\n        this.reinitialize(true);\r\n    }\r\n    reinitialize(forceRefresh) {\r\n        const model = this._editor.getModel();\r\n        const isEnabled = model !== null && (this._editor.getOption(69 /* EditorOption.linkedEditing */) || this._editor.getOption(92 /* EditorOption.renameOnType */)) && this._providers.has(model);\r\n        if (isEnabled === this._enabled && !forceRefresh) {\r\n            return;\r\n        }\r\n        this._enabled = isEnabled;\r\n        this.clearRanges();\r\n        this._localToDispose.clear();\r\n        if (!isEnabled || model === null) {\r\n            return;\r\n        }\r\n        this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\r\n            this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\r\n        }));\r\n        const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\r\n        const triggerRangeUpdate = () => {\r\n            var _a;\r\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), (_a = this._debounceDuration) !== null && _a !== void 0 ? _a : this._debounceInformation.get(model));\r\n        };\r\n        const rangeSyncScheduler = new Delayer(0);\r\n        const triggerRangeSync = (token) => {\r\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\r\n        };\r\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\r\n            triggerRangeUpdate();\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\r\n            if (!this._ignoreChangeEvent) {\r\n                if (this._currentDecorations.length > 0) {\r\n                    const referenceRange = this._currentDecorations.getRange(0);\r\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\r\n                        triggerRangeSync(this._syncRangesToken);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            triggerRangeUpdate();\r\n        }));\r\n        this._localToDispose.add({\r\n            dispose: () => {\r\n                rangeUpdateScheduler.dispose();\r\n                rangeSyncScheduler.dispose();\r\n            }\r\n        });\r\n        this.updateRanges();\r\n    }\r\n    _syncRanges(token) {\r\n        // delayed invocation, make sure we're still on\r\n        if (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\r\n            // nothing to do\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const referenceRange = this._currentDecorations.getRange(0);\r\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\r\n            return this.clearRanges();\r\n        }\r\n        const referenceValue = model.getValueInRange(referenceRange);\r\n        if (this._currentWordPattern) {\r\n            const match = referenceValue.match(this._currentWordPattern);\r\n            const matchLength = match ? match[0].length : 0;\r\n            if (matchLength !== referenceValue.length) {\r\n                return this.clearRanges();\r\n            }\r\n        }\r\n        const edits = [];\r\n        for (let i = 1, len = this._currentDecorations.length; i < len; i++) {\r\n            const mirrorRange = this._currentDecorations.getRange(i);\r\n            if (!mirrorRange) {\r\n                continue;\r\n            }\r\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\r\n                edits.push({\r\n                    range: mirrorRange,\r\n                    text: referenceValue\r\n                });\r\n            }\r\n            else {\r\n                let oldValue = model.getValueInRange(mirrorRange);\r\n                let newValue = referenceValue;\r\n                let rangeStartColumn = mirrorRange.startColumn;\r\n                let rangeEndColumn = mirrorRange.endColumn;\r\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\r\n                rangeStartColumn += commonPrefixLength;\r\n                oldValue = oldValue.substr(commonPrefixLength);\r\n                newValue = newValue.substr(commonPrefixLength);\r\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\r\n                rangeEndColumn -= commonSuffixLength;\r\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\r\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\r\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\r\n                    edits.push({\r\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\r\n                        text: newValue\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        if (edits.length === 0) {\r\n            return;\r\n        }\r\n        try {\r\n            this._editor.popUndoStop();\r\n            this._ignoreChangeEvent = true;\r\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\r\n            this._editor.executeEdits('linkedEditing', edits);\r\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\r\n        }\r\n        finally {\r\n            this._ignoreChangeEvent = false;\r\n        }\r\n    }\r\n    dispose() {\r\n        this.clearRanges();\r\n        super.dispose();\r\n    }\r\n    clearRanges() {\r\n        this._visibleContextKey.set(false);\r\n        this._currentDecorations.clear();\r\n        if (this._currentRequest) {\r\n            this._currentRequest.cancel();\r\n            this._currentRequest = null;\r\n            this._currentRequestPosition = null;\r\n        }\r\n    }\r\n    updateRanges(force = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel()) {\r\n                this.clearRanges();\r\n                return;\r\n            }\r\n            const position = this._editor.getPosition();\r\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\r\n                // disabled or multicursor\r\n                this.clearRanges();\r\n                return;\r\n            }\r\n            const model = this._editor.getModel();\r\n            const modelVersionId = model.getVersionId();\r\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\r\n                if (position.equals(this._currentRequestPosition)) {\r\n                    return; // same position\r\n                }\r\n                if (this._currentDecorations.length > 0) {\r\n                    const range = this._currentDecorations.getRange(0);\r\n                    if (range && range.containsPosition(position)) {\r\n                        return; // just moving inside the existing primary range\r\n                    }\r\n                }\r\n            }\r\n            // Clear existing decorations while we compute new ones\r\n            this.clearRanges();\r\n            this._currentRequestPosition = position;\r\n            this._currentRequestModelVersion = modelVersionId;\r\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n                try {\r\n                    const sw = new StopWatch(false);\r\n                    const response = yield getLinkedEditingRanges(this._providers, model, position, token);\r\n                    this._debounceInformation.update(model, sw.elapsed());\r\n                    if (request !== this._currentRequest) {\r\n                        return;\r\n                    }\r\n                    this._currentRequest = null;\r\n                    if (modelVersionId !== model.getVersionId()) {\r\n                        return;\r\n                    }\r\n                    let ranges = [];\r\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\r\n                        ranges = response.ranges;\r\n                    }\r\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\r\n                    let foundReferenceRange = false;\r\n                    for (let i = 0, len = ranges.length; i < len; i++) {\r\n                        if (Range.containsPosition(ranges[i], position)) {\r\n                            foundReferenceRange = true;\r\n                            if (i !== 0) {\r\n                                const referenceRange = ranges[i];\r\n                                ranges.splice(i, 1);\r\n                                ranges.unshift(referenceRange);\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!foundReferenceRange) {\r\n                        // Cannot do linked editing if the ranges are not where the cursor is...\r\n                        this.clearRanges();\r\n                        return;\r\n                    }\r\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution_1.DECORATION }));\r\n                    this._visibleContextKey.set(true);\r\n                    this._currentDecorations.set(decorations);\r\n                    this._syncRangesToken++; // cancel any pending syncRanges call\r\n                }\r\n                catch (err) {\r\n                    if (!isCancellationError(err)) {\r\n                        onUnexpectedError(err);\r\n                    }\r\n                    if (this._currentRequest === request || !this._currentRequest) {\r\n                        // stop if we are still the latest request\r\n                        this.clearRanges();\r\n                    }\r\n                }\r\n            }));\r\n            this._currentRequest = request;\r\n            return request;\r\n        });\r\n    }\r\n};\r\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\r\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\r\n    description: 'linked-editing',\r\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\r\n    className: DECORATION_CLASS_NAME\r\n});\r\nLinkedEditingContribution = LinkedEditingContribution_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, ILanguageFeaturesService),\r\n    __param(3, ILanguageConfigurationService),\r\n    __param(4, ILanguageFeatureDebounceService)\r\n], LinkedEditingContribution);\r\nexport { LinkedEditingContribution };\r\nexport class LinkedEditingAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.linkedEditing',\r\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\r\n            alias: 'Start Linked Editing',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 60 /* KeyCode.F2 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    runCommand(accessor, args) {\r\n        const editorService = accessor.get(ICodeEditorService);\r\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\r\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\r\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\r\n                if (!editor) {\r\n                    return;\r\n                }\r\n                editor.setPosition(pos);\r\n                editor.invokeWithinContext(accessor => {\r\n                    this.reportTelemetry(accessor, editor);\r\n                    return this.run(accessor, editor);\r\n                });\r\n            }, onUnexpectedError);\r\n        }\r\n        return super.runCommand(accessor, args);\r\n    }\r\n    run(_accessor, editor) {\r\n        const controller = LinkedEditingContribution.get(editor);\r\n        if (controller) {\r\n            return Promise.resolve(controller.updateRanges(true));\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n}\r\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\r\nregisterEditorCommand(new LinkedEditingCommand({\r\n    id: 'cancelLinkedEditingInput',\r\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\r\n    handler: x => x.clearRanges(),\r\n    kbOpts: {\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\nfunction getLinkedEditingRanges(providers, model, position, token) {\r\n    const orderedByScore = providers.ordered(model);\r\n    // in order of score ask the linked editing range provider\r\n    // until someone response with a good result\r\n    // (good = not null)\r\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            return yield provider.provideLinkedEditingRanges(model, position, token);\r\n        }\r\n        catch (e) {\r\n            onUnexpectedExternalError(e);\r\n            return undefined;\r\n        }\r\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\r\n}\r\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hcDark: Color.fromHex('#f00').transparent(0.3), hcLight: Color.white }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\r\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\r\n    const { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\r\n    return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\r\n});\r\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nregisterEditorAction(LinkedEditingAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar LinkDetector_1;\r\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../../base/common/network.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport * as resources from '../../../../base/common/resources.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport './links.css';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\r\nimport { getLinks } from './getLinks.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nlet LinkDetector = LinkDetector_1 = class LinkDetector extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(LinkDetector_1.ID);\r\n    }\r\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.openerService = openerService;\r\n        this.notificationService = notificationService;\r\n        this.languageFeaturesService = languageFeaturesService;\r\n        this.providers = this.languageFeaturesService.linkProvider;\r\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\r\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\r\n        this.computePromise = null;\r\n        this.activeLinksList = null;\r\n        this.currentOccurrences = {};\r\n        this.activeLinkDecorationId = null;\r\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\r\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\r\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\r\n        }));\r\n        this._register(clickLinkGesture.onExecute((e) => {\r\n            this.onEditorMouseUp(e);\r\n        }));\r\n        this._register(clickLinkGesture.onCancel((e) => {\r\n            this.cleanUpActiveLinkDecoration();\r\n        }));\r\n        this._register(editor.onDidChangeConfiguration((e) => {\r\n            if (!e.hasChanged(70 /* EditorOption.links */)) {\r\n                return;\r\n            }\r\n            // Remove any links (for the getting disabled case)\r\n            this.updateDecorations([]);\r\n            // Stop any computation (for the getting disabled case)\r\n            this.stop();\r\n            // Start computing (for the getting enabled case)\r\n            this.computeLinks.schedule(0);\r\n        }));\r\n        this._register(editor.onDidChangeModelContent((e) => {\r\n            if (!this.editor.hasModel()) {\r\n                return;\r\n            }\r\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\r\n        }));\r\n        this._register(editor.onDidChangeModel((e) => {\r\n            this.currentOccurrences = {};\r\n            this.activeLinkDecorationId = null;\r\n            this.stop();\r\n            this.computeLinks.schedule(0);\r\n        }));\r\n        this._register(editor.onDidChangeModelLanguage((e) => {\r\n            this.stop();\r\n            this.computeLinks.schedule(0);\r\n        }));\r\n        this._register(this.providers.onDidChange((e) => {\r\n            this.stop();\r\n            this.computeLinks.schedule(0);\r\n        }));\r\n        this.computeLinks.schedule(0);\r\n    }\r\n    computeLinksNow() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.editor.hasModel() || !this.editor.getOption(70 /* EditorOption.links */)) {\r\n                return;\r\n            }\r\n            const model = this.editor.getModel();\r\n            if (model.isTooLargeForSyncing()) {\r\n                return;\r\n            }\r\n            if (!this.providers.has(model)) {\r\n                return;\r\n            }\r\n            if (this.activeLinksList) {\r\n                this.activeLinksList.dispose();\r\n                this.activeLinksList = null;\r\n            }\r\n            this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\r\n            try {\r\n                const sw = new StopWatch(false);\r\n                this.activeLinksList = yield this.computePromise;\r\n                this.debounceInformation.update(model, sw.elapsed());\r\n                if (model.isDisposed()) {\r\n                    return;\r\n                }\r\n                this.updateDecorations(this.activeLinksList.links);\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n            finally {\r\n                this.computePromise = null;\r\n            }\r\n        });\r\n    }\r\n    updateDecorations(links) {\r\n        const useMetaKey = (this.editor.getOption(77 /* EditorOption.multiCursorModifier */) === 'altKey');\r\n        const oldDecorations = [];\r\n        const keys = Object.keys(this.currentOccurrences);\r\n        for (const decorationId of keys) {\r\n            const occurence = this.currentOccurrences[decorationId];\r\n            oldDecorations.push(occurence.decorationId);\r\n        }\r\n        const newDecorations = [];\r\n        if (links) {\r\n            // Not sure why this is sometimes null\r\n            for (const link of links) {\r\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\r\n            }\r\n        }\r\n        this.editor.changeDecorations((changeAccessor) => {\r\n            const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\r\n            this.currentOccurrences = {};\r\n            this.activeLinkDecorationId = null;\r\n            for (let i = 0, len = decorations.length; i < len; i++) {\r\n                const occurence = new LinkOccurrence(links[i], decorations[i]);\r\n                this.currentOccurrences[occurence.decorationId] = occurence;\r\n            }\r\n        });\r\n    }\r\n    _onEditorMouseMove(mouseEvent, withKey) {\r\n        const useMetaKey = (this.editor.getOption(77 /* EditorOption.multiCursorModifier */) === 'altKey');\r\n        if (this.isEnabled(mouseEvent, withKey)) {\r\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\r\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\r\n            if (occurrence) {\r\n                this.editor.changeDecorations((changeAccessor) => {\r\n                    occurrence.activate(changeAccessor, useMetaKey);\r\n                    this.activeLinkDecorationId = occurrence.decorationId;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.cleanUpActiveLinkDecoration();\r\n        }\r\n    }\r\n    cleanUpActiveLinkDecoration() {\r\n        const useMetaKey = (this.editor.getOption(77 /* EditorOption.multiCursorModifier */) === 'altKey');\r\n        if (this.activeLinkDecorationId) {\r\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\r\n            if (occurrence) {\r\n                this.editor.changeDecorations((changeAccessor) => {\r\n                    occurrence.deactivate(changeAccessor, useMetaKey);\r\n                });\r\n            }\r\n            this.activeLinkDecorationId = null;\r\n        }\r\n    }\r\n    onEditorMouseUp(mouseEvent) {\r\n        if (!this.isEnabled(mouseEvent)) {\r\n            return;\r\n        }\r\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\r\n        if (!occurrence) {\r\n            return;\r\n        }\r\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\r\n    }\r\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\r\n        if (!this.openerService) {\r\n            return;\r\n        }\r\n        const { link } = occurrence;\r\n        link.resolve(CancellationToken.None).then(uri => {\r\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\r\n            if (typeof uri === 'string' && this.editor.hasModel()) {\r\n                const modelUri = this.editor.getModel().uri;\r\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\r\n                    const parsedUri = URI.parse(uri);\r\n                    if (parsedUri.scheme === Schemas.file) {\r\n                        const fsPath = resources.originalFSPath(parsedUri);\r\n                        let relativePath = null;\r\n                        if (fsPath.startsWith('/./')) {\r\n                            relativePath = `.${fsPath.substr(1)}`;\r\n                        }\r\n                        else if (fsPath.startsWith('//./')) {\r\n                            relativePath = `.${fsPath.substr(2)}`;\r\n                        }\r\n                        if (relativePath) {\r\n                            uri = resources.joinPath(modelUri, relativePath);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true, fromWorkspace: true });\r\n        }, err => {\r\n            const messageOrError = err instanceof Error ? err.message : err;\r\n            // different error cases\r\n            if (messageOrError === 'invalid') {\r\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\r\n            }\r\n            else if (messageOrError === 'missing') {\r\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\r\n            }\r\n            else {\r\n                onUnexpectedError(err);\r\n            }\r\n        });\r\n    }\r\n    getLinkOccurrence(position) {\r\n        if (!this.editor.hasModel() || !position) {\r\n            return null;\r\n        }\r\n        const decorations = this.editor.getModel().getDecorationsInRange({\r\n            startLineNumber: position.lineNumber,\r\n            startColumn: position.column,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column\r\n        }, 0, true);\r\n        for (const decoration of decorations) {\r\n            const currentOccurrence = this.currentOccurrences[decoration.id];\r\n            if (currentOccurrence) {\r\n                return currentOccurrence;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    isEnabled(mouseEvent, withKey) {\r\n        return Boolean((mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */)\r\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\r\n    }\r\n    stop() {\r\n        var _a;\r\n        this.computeLinks.cancel();\r\n        if (this.activeLinksList) {\r\n            (_a = this.activeLinksList) === null || _a === void 0 ? void 0 : _a.dispose();\r\n            this.activeLinksList = null;\r\n        }\r\n        if (this.computePromise) {\r\n            this.computePromise.cancel();\r\n            this.computePromise = null;\r\n        }\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.stop();\r\n    }\r\n};\r\nLinkDetector.ID = 'editor.linkDetector';\r\nLinkDetector = LinkDetector_1 = __decorate([\r\n    __param(1, IOpenerService),\r\n    __param(2, INotificationService),\r\n    __param(3, ILanguageFeaturesService),\r\n    __param(4, ILanguageFeatureDebounceService)\r\n], LinkDetector);\r\nexport { LinkDetector };\r\nconst decoration = {\r\n    general: ModelDecorationOptions.register({\r\n        description: 'detected-link',\r\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n        collapseOnReplaceEdit: true,\r\n        inlineClassName: 'detected-link'\r\n    }),\r\n    active: ModelDecorationOptions.register({\r\n        description: 'detected-link-active',\r\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n        collapseOnReplaceEdit: true,\r\n        inlineClassName: 'detected-link-active'\r\n    })\r\n};\r\nclass LinkOccurrence {\r\n    static decoration(link, useMetaKey) {\r\n        return {\r\n            range: link.range,\r\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\r\n        };\r\n    }\r\n    static _getOptions(link, useMetaKey, isActive) {\r\n        const options = Object.assign({}, (isActive ? decoration.active : decoration.general));\r\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\r\n        return options;\r\n    }\r\n    constructor(link, decorationId) {\r\n        this.link = link;\r\n        this.decorationId = decorationId;\r\n    }\r\n    activate(changeAccessor, useMetaKey) {\r\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\r\n    }\r\n    deactivate(changeAccessor, useMetaKey) {\r\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\r\n    }\r\n}\r\nfunction getHoverMessage(link, useMetaKey) {\r\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\r\n    const label = link.tooltip\r\n        ? link.tooltip\r\n        : executeCmd\r\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\r\n            : nls.localize('links.navigate.follow', 'Follow link');\r\n    const kb = useMetaKey\r\n        ? platform.isMacintosh\r\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\r\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\r\n        : platform.isMacintosh\r\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\r\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\r\n    if (link.url) {\r\n        let nativeLabel = '';\r\n        if (/^command:/i.test(link.url.toString())) {\r\n            // Don't show complete command arguments in the native tooltip\r\n            const match = link.url.toString().match(/^command:([^?#]+)/);\r\n            if (match) {\r\n                const commandId = match[1];\r\n                nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\r\n            }\r\n        }\r\n        const hoverMessage = new MarkdownString('', true)\r\n            .appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel)\r\n            .appendMarkdown(` (${kb})`);\r\n        return hoverMessage;\r\n    }\r\n    else {\r\n        return new MarkdownString().appendText(`${label} (${kb})`);\r\n    }\r\n}\r\nclass OpenLinkAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.openLink',\r\n            label: nls.localize('label', \"Open Link\"),\r\n            alias: 'Open Link',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const linkDetector = LinkDetector.get(editor);\r\n        if (!linkDetector) {\r\n            return;\r\n        }\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const selections = editor.getSelections();\r\n        for (const sel of selections) {\r\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\r\n            if (link) {\r\n                linkDetector.openLinkOccurrence(link, false);\r\n            }\r\n        }\r\n    }\r\n}\r\nregisterEditorContribution(LinkDetector.ID, LinkDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nregisterEditorAction(OpenLinkAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nexport class Link {\r\n    constructor(link, provider) {\r\n        this._link = link;\r\n        this._provider = provider;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            range: this.range,\r\n            url: this.url,\r\n            tooltip: this.tooltip\r\n        };\r\n    }\r\n    get range() {\r\n        return this._link.range;\r\n    }\r\n    get url() {\r\n        return this._link.url;\r\n    }\r\n    get tooltip() {\r\n        return this._link.tooltip;\r\n    }\r\n    resolve(token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._link.url) {\r\n                return this._link.url;\r\n            }\r\n            if (typeof this._provider.resolveLink === 'function') {\r\n                return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\r\n                    this._link = value || this._link;\r\n                    if (this._link.url) {\r\n                        // recurse\r\n                        return this.resolve(token);\r\n                    }\r\n                    return Promise.reject(new Error('missing'));\r\n                });\r\n            }\r\n            return Promise.reject(new Error('missing'));\r\n        });\r\n    }\r\n}\r\nexport class LinksList {\r\n    constructor(tuples) {\r\n        this._disposables = new DisposableStore();\r\n        let links = [];\r\n        for (const [list, provider] of tuples) {\r\n            // merge all links\r\n            const newLinks = list.links.map(link => new Link(link, provider));\r\n            links = LinksList._union(links, newLinks);\r\n            // register disposables\r\n            if (isDisposable(list)) {\r\n                this._disposables.add(list);\r\n            }\r\n        }\r\n        this.links = links;\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this.links.length = 0;\r\n    }\r\n    static _union(oldLinks, newLinks) {\r\n        // reunite oldLinks with newLinks and remove duplicates\r\n        const result = [];\r\n        let oldIndex;\r\n        let oldLen;\r\n        let newIndex;\r\n        let newLen;\r\n        for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\r\n            const oldLink = oldLinks[oldIndex];\r\n            const newLink = newLinks[newIndex];\r\n            if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\r\n                // Remove the oldLink\r\n                oldIndex++;\r\n                continue;\r\n            }\r\n            const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\r\n            if (comparisonResult < 0) {\r\n                // oldLink is before\r\n                result.push(oldLink);\r\n                oldIndex++;\r\n            }\r\n            else {\r\n                // newLink is before\r\n                result.push(newLink);\r\n                newIndex++;\r\n            }\r\n        }\r\n        for (; oldIndex < oldLen; oldIndex++) {\r\n            result.push(oldLinks[oldIndex]);\r\n        }\r\n        for (; newIndex < newLen; newIndex++) {\r\n            result.push(newLinks[newIndex]);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexport function getLinks(providers, model, token) {\r\n    const lists = [];\r\n    // ask all providers for links in parallel\r\n    const promises = providers.ordered(model).reverse().map((provider, i) => {\r\n        return Promise.resolve(provider.provideLinks(model, token)).then(result => {\r\n            if (result) {\r\n                lists[i] = [result, provider];\r\n            }\r\n        }, onUnexpectedExternalError);\r\n    });\r\n    return Promise.all(promises).then(() => {\r\n        const result = new LinksList(coalesce(lists));\r\n        if (!token.isCancellationRequested) {\r\n            return result;\r\n        }\r\n        result.dispose();\r\n        return new LinksList([]);\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_executeLinkProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    let [uri, resolveCount] = args;\r\n    assertType(uri instanceof URI);\r\n    if (typeof resolveCount !== 'number') {\r\n        resolveCount = 0;\r\n    }\r\n    const { linkProvider } = accessor.get(ILanguageFeaturesService);\r\n    const model = accessor.get(IModelService).getModel(uri);\r\n    if (!model) {\r\n        return [];\r\n    }\r\n    const list = yield getLinks(linkProvider, model, CancellationToken.None);\r\n    if (!list) {\r\n        return [];\r\n    }\r\n    // resolve links\r\n    for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\r\n        yield list.links[i].resolve(CancellationToken.None);\r\n    }\r\n    const result = list.links.slice(0);\r\n    list.dispose();\r\n    return result;\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nclass LongLinesHelper extends Disposable {\r\n    constructor(_editor) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._register(this._editor.onMouseDown((e) => {\r\n            const stopRenderingLineAfter = this._editor.getOption(116 /* EditorOption.stopRenderingLineAfter */);\r\n            if (stopRenderingLineAfter >= 0 && e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.position.column >= stopRenderingLineAfter) {\r\n                this._editor.updateOptions({\r\n                    stopRenderingLineAfter: -1\r\n                });\r\n            }\r\n        }));\r\n    }\r\n}\r\nLongLinesHelper.ID = 'editor.contrib.longLinesHelper';\r\nregisterEditorContribution(LongLinesHelper.ID, LongLinesHelper, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar SelectionHighlighter_1;\r\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { CommonFindController } from '../../find/browser/findController.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { getSelectionHighlightDecorationOptions } from '../../wordHighlighter/browser/highlightDecorations.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nfunction announceCursorChange(previousCursorState, cursorState) {\r\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\r\n    if (cursorDiff.length >= 1) {\r\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\r\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\r\n        status(msg);\r\n    }\r\n}\r\nexport class InsertCursorAbove extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.insertCursorAbove',\r\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\r\n            alias: 'Add Cursor Above',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\r\n                linux: {\r\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\r\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        let useLogicalLine = true;\r\n        if (args && args.logicalLine === false) {\r\n            useLogicalLine = false;\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        if (viewModel.cursorConfig.readOnly) {\r\n            return;\r\n        }\r\n        viewModel.model.pushStackElement();\r\n        const previousCursorState = viewModel.getCursorStates();\r\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\r\n        viewModel.revealTopMostCursor(args.source);\r\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n    }\r\n}\r\nexport class InsertCursorBelow extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.insertCursorBelow',\r\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\r\n            alias: 'Add Cursor Below',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\r\n                linux: {\r\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\r\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\r\n                order: 3\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        let useLogicalLine = true;\r\n        if (args && args.logicalLine === false) {\r\n            useLogicalLine = false;\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        if (viewModel.cursorConfig.readOnly) {\r\n            return;\r\n        }\r\n        viewModel.model.pushStackElement();\r\n        const previousCursorState = viewModel.getCursorStates();\r\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\r\n        viewModel.revealBottomMostCursor(args.source);\r\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n    }\r\n}\r\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\r\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\r\n            alias: 'Add Cursors to Line Ends',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\r\n                order: 4\r\n            }\r\n        });\r\n    }\r\n    getCursorsForSelection(selection, model, result) {\r\n        if (selection.isEmpty()) {\r\n            return;\r\n        }\r\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\r\n            const currentLineMaxColumn = model.getLineMaxColumn(i);\r\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\r\n        }\r\n        if (selection.endColumn > 1) {\r\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\r\n        }\r\n    }\r\n    run(accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = editor.getModel();\r\n        const selections = editor.getSelections();\r\n        const viewModel = editor._getViewModel();\r\n        const previousCursorState = viewModel.getCursorStates();\r\n        const newSelections = [];\r\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\r\n        if (newSelections.length > 0) {\r\n            editor.setSelections(newSelections);\r\n        }\r\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n    }\r\n}\r\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.addCursorsToBottom',\r\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\r\n            alias: 'Add Cursors To Bottom',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const selections = editor.getSelections();\r\n        const lineCount = editor.getModel().getLineCount();\r\n        const newSelections = [];\r\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\r\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        const previousCursorState = viewModel.getCursorStates();\r\n        if (newSelections.length > 0) {\r\n            editor.setSelections(newSelections);\r\n        }\r\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n    }\r\n}\r\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.addCursorsToTop',\r\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\r\n            alias: 'Add Cursors To Top',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const selections = editor.getSelections();\r\n        const newSelections = [];\r\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\r\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        const previousCursorState = viewModel.getCursorStates();\r\n        if (newSelections.length > 0) {\r\n            editor.setSelections(newSelections);\r\n        }\r\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n    }\r\n}\r\nexport class MultiCursorSessionResult {\r\n    constructor(selections, revealRange, revealScrollType) {\r\n        this.selections = selections;\r\n        this.revealRange = revealRange;\r\n        this.revealScrollType = revealScrollType;\r\n    }\r\n}\r\nexport class MultiCursorSession {\r\n    static create(editor, findController) {\r\n        if (!editor.hasModel()) {\r\n            return null;\r\n        }\r\n        const findState = findController.getState();\r\n        // Find widget owns entirely what we search for if:\r\n        //  - focus is not in the editor (i.e. it is in the find widget)\r\n        //  - and the search widget is visible\r\n        //  - and the search string is non-empty\r\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\r\n            // Find widget owns what is searched for\r\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\r\n        }\r\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\r\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\r\n        let isDisconnectedFromFindController = false;\r\n        let wholeWord;\r\n        let matchCase;\r\n        const selections = editor.getSelections();\r\n        if (selections.length === 1 && selections[0].isEmpty()) {\r\n            isDisconnectedFromFindController = true;\r\n            wholeWord = true;\r\n            matchCase = true;\r\n        }\r\n        else {\r\n            wholeWord = findState.wholeWord;\r\n            matchCase = findState.matchCase;\r\n        }\r\n        // Selection owns what is searched for\r\n        const s = editor.getSelection();\r\n        let searchText;\r\n        let currentMatch = null;\r\n        if (s.isEmpty()) {\r\n            // selection is empty => expand to current word\r\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\r\n            if (!word) {\r\n                return null;\r\n            }\r\n            searchText = word.word;\r\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\r\n        }\r\n        else {\r\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\r\n        }\r\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\r\n    }\r\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\r\n        this._editor = _editor;\r\n        this.findController = findController;\r\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\r\n        this.searchText = searchText;\r\n        this.wholeWord = wholeWord;\r\n        this.matchCase = matchCase;\r\n        this.currentMatch = currentMatch;\r\n    }\r\n    addSelectionToNextFindMatch() {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        const nextMatch = this._getNextMatch();\r\n        if (!nextMatch) {\r\n            return null;\r\n        }\r\n        const allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\r\n    }\r\n    moveSelectionToNextFindMatch() {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        const nextMatch = this._getNextMatch();\r\n        if (!nextMatch) {\r\n            return null;\r\n        }\r\n        const allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\r\n    }\r\n    _getNextMatch() {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        if (this.currentMatch) {\r\n            const result = this.currentMatch;\r\n            this.currentMatch = null;\r\n            return result;\r\n        }\r\n        this.findController.highlightFindOptions();\r\n        const allSelections = this._editor.getSelections();\r\n        const lastAddedSelection = allSelections[allSelections.length - 1];\r\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false);\r\n        if (!nextMatch) {\r\n            return null;\r\n        }\r\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\r\n    }\r\n    addSelectionToPreviousFindMatch() {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        const previousMatch = this._getPreviousMatch();\r\n        if (!previousMatch) {\r\n            return null;\r\n        }\r\n        const allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\r\n    }\r\n    moveSelectionToPreviousFindMatch() {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        const previousMatch = this._getPreviousMatch();\r\n        if (!previousMatch) {\r\n            return null;\r\n        }\r\n        const allSelections = this._editor.getSelections();\r\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\r\n    }\r\n    _getPreviousMatch() {\r\n        if (!this._editor.hasModel()) {\r\n            return null;\r\n        }\r\n        if (this.currentMatch) {\r\n            const result = this.currentMatch;\r\n            this.currentMatch = null;\r\n            return result;\r\n        }\r\n        this.findController.highlightFindOptions();\r\n        const allSelections = this._editor.getSelections();\r\n        const lastAddedSelection = allSelections[allSelections.length - 1];\r\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false);\r\n        if (!previousMatch) {\r\n            return null;\r\n        }\r\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\r\n    }\r\n    selectAll(searchScope) {\r\n        if (!this._editor.hasModel()) {\r\n            return [];\r\n        }\r\n        this.findController.highlightFindOptions();\r\n        const editorModel = this._editor.getModel();\r\n        if (searchScope) {\r\n            return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n        }\r\n        return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n    }\r\n}\r\nexport class MultiCursorSelectionController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(MultiCursorSelectionController.ID);\r\n    }\r\n    constructor(editor) {\r\n        super();\r\n        this._sessionDispose = this._register(new DisposableStore());\r\n        this._editor = editor;\r\n        this._ignoreSelectionChange = false;\r\n        this._session = null;\r\n    }\r\n    dispose() {\r\n        this._endSession();\r\n        super.dispose();\r\n    }\r\n    _beginSessionIfNeeded(findController) {\r\n        if (!this._session) {\r\n            // Create a new session\r\n            const session = MultiCursorSession.create(this._editor, findController);\r\n            if (!session) {\r\n                return;\r\n            }\r\n            this._session = session;\r\n            const newState = { searchString: this._session.searchText };\r\n            if (this._session.isDisconnectedFromFindController) {\r\n                newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\r\n                newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\r\n                newState.isRegexOverride = 2 /* FindOptionOverride.False */;\r\n            }\r\n            findController.getState().change(newState, false);\r\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\r\n                if (this._ignoreSelectionChange) {\r\n                    return;\r\n                }\r\n                this._endSession();\r\n            }));\r\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\r\n                this._endSession();\r\n            }));\r\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\r\n                if (e.matchCase || e.wholeWord) {\r\n                    this._endSession();\r\n                }\r\n            }));\r\n        }\r\n    }\r\n    _endSession() {\r\n        this._sessionDispose.clear();\r\n        if (this._session && this._session.isDisconnectedFromFindController) {\r\n            const newState = {\r\n                wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\r\n                matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\r\n                isRegexOverride: 0 /* FindOptionOverride.NotSet */,\r\n            };\r\n            this._session.findController.getState().change(newState, false);\r\n        }\r\n        this._session = null;\r\n    }\r\n    _setSelections(selections) {\r\n        this._ignoreSelectionChange = true;\r\n        this._editor.setSelections(selections);\r\n        this._ignoreSelectionChange = false;\r\n    }\r\n    _expandEmptyToWord(model, selection) {\r\n        if (!selection.isEmpty()) {\r\n            return selection;\r\n        }\r\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\r\n        if (!word) {\r\n            return selection;\r\n        }\r\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\r\n    }\r\n    _applySessionResult(result) {\r\n        if (!result) {\r\n            return;\r\n        }\r\n        this._setSelections(result.selections);\r\n        if (result.revealRange) {\r\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\r\n        }\r\n    }\r\n    getSession(findController) {\r\n        return this._session;\r\n    }\r\n    addSelectionToNextFindMatch(findController) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (!this._session) {\r\n            // If there are multiple cursors, handle the case where they do not all select the same text.\r\n            const allSelections = this._editor.getSelections();\r\n            if (allSelections.length > 1) {\r\n                const findState = findController.getState();\r\n                const matchCase = findState.matchCase;\r\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\r\n                if (!selectionsContainSameText) {\r\n                    const model = this._editor.getModel();\r\n                    const resultingSelections = [];\r\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\r\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\r\n                    }\r\n                    this._editor.setSelections(resultingSelections);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\r\n        }\r\n    }\r\n    addSelectionToPreviousFindMatch(findController) {\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\r\n        }\r\n    }\r\n    moveSelectionToNextFindMatch(findController) {\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\r\n        }\r\n    }\r\n    moveSelectionToPreviousFindMatch(findController) {\r\n        this._beginSessionIfNeeded(findController);\r\n        if (this._session) {\r\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\r\n        }\r\n    }\r\n    selectAll(findController) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        let matches = null;\r\n        const findState = findController.getState();\r\n        // Special case: find widget owns entirely what we search for if:\r\n        // - focus is not in the editor (i.e. it is in the find widget)\r\n        // - and the search widget is visible\r\n        // - and the search string is non-empty\r\n        // - and we're searching for a regex\r\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\r\n            const editorModel = this._editor.getModel();\r\n            if (findState.searchScope) {\r\n                matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n            }\r\n            else {\r\n                matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(129 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n            }\r\n        }\r\n        else {\r\n            this._beginSessionIfNeeded(findController);\r\n            if (!this._session) {\r\n                return;\r\n            }\r\n            matches = this._session.selectAll(findState.searchScope);\r\n        }\r\n        if (matches.length > 0) {\r\n            const editorSelection = this._editor.getSelection();\r\n            // Have the primary cursor remain the one where the action was invoked\r\n            for (let i = 0, len = matches.length; i < len; i++) {\r\n                const match = matches[i];\r\n                const intersection = match.range.intersectRanges(editorSelection);\r\n                if (intersection) {\r\n                    // bingo!\r\n                    matches[i] = matches[0];\r\n                    matches[0] = match;\r\n                    break;\r\n                }\r\n            }\r\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\r\n        }\r\n    }\r\n}\r\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\r\nexport class MultiCursorSelectionControllerAction extends EditorAction {\r\n    run(accessor, editor) {\r\n        const multiCursorController = MultiCursorSelectionController.get(editor);\r\n        if (!multiCursorController) {\r\n            return;\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        if (viewModel) {\r\n            const previousCursorState = viewModel.getCursorStates();\r\n            const findController = CommonFindController.get(editor);\r\n            if (findController) {\r\n                this._run(multiCursorController, findController);\r\n            }\r\n            else {\r\n                const newFindController = accessor.get(IInstantiationService).createInstance(CommonFindController, editor);\r\n                this._run(multiCursorController, newFindController);\r\n                newFindController.dispose();\r\n            }\r\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n        }\r\n    }\r\n}\r\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.addSelectionToNextFindMatch',\r\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\r\n            alias: 'Add Selection To Next Find Match',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\r\n                order: 5\r\n            }\r\n        });\r\n    }\r\n    _run(multiCursorController, findController) {\r\n        multiCursorController.addSelectionToNextFindMatch(findController);\r\n    }\r\n}\r\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.addSelectionToPreviousFindMatch',\r\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\r\n            alias: 'Add Selection To Previous Find Match',\r\n            precondition: undefined,\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\r\n                order: 6\r\n            }\r\n        });\r\n    }\r\n    _run(multiCursorController, findController) {\r\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\r\n    }\r\n}\r\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.moveSelectionToNextFindMatch',\r\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\r\n            alias: 'Move Last Selection To Next Find Match',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    _run(multiCursorController, findController) {\r\n        multiCursorController.moveSelectionToNextFindMatch(findController);\r\n    }\r\n}\r\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\r\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\r\n            alias: 'Move Last Selection To Previous Find Match',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    _run(multiCursorController, findController) {\r\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\r\n    }\r\n}\r\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.selectHighlights',\r\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\r\n            alias: 'Select All Occurrences of Find Match',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '3_multi',\r\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\r\n                order: 7\r\n            }\r\n        });\r\n    }\r\n    _run(multiCursorController, findController) {\r\n        multiCursorController.selectAll(findController);\r\n    }\r\n}\r\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.changeAll',\r\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\r\n            alias: 'Change All Occurrences',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 1.2\r\n            }\r\n        });\r\n    }\r\n    _run(multiCursorController, findController) {\r\n        multiCursorController.selectAll(findController);\r\n    }\r\n}\r\nclass SelectionHighlighterState {\r\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\r\n        this._model = _model;\r\n        this._searchText = _searchText;\r\n        this._matchCase = _matchCase;\r\n        this._wordSeparators = _wordSeparators;\r\n        this._modelVersionId = this._model.getVersionId();\r\n        this._cachedFindMatches = null;\r\n        if (prevState\r\n            && this._model === prevState._model\r\n            && this._searchText === prevState._searchText\r\n            && this._matchCase === prevState._matchCase\r\n            && this._wordSeparators === prevState._wordSeparators\r\n            && this._modelVersionId === prevState._modelVersionId) {\r\n            this._cachedFindMatches = prevState._cachedFindMatches;\r\n        }\r\n    }\r\n    findMatches() {\r\n        if (this._cachedFindMatches === null) {\r\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\r\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\r\n        }\r\n        return this._cachedFindMatches;\r\n    }\r\n}\r\nlet SelectionHighlighter = SelectionHighlighter_1 = class SelectionHighlighter extends Disposable {\r\n    constructor(editor, _languageFeaturesService) {\r\n        super();\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this.editor = editor;\r\n        this._isEnabled = editor.getOption(107 /* EditorOption.selectionHighlight */);\r\n        this._decorations = editor.createDecorationsCollection();\r\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\r\n        this.state = null;\r\n        this._register(editor.onDidChangeConfiguration((e) => {\r\n            this._isEnabled = editor.getOption(107 /* EditorOption.selectionHighlight */);\r\n        }));\r\n        this._register(editor.onDidChangeCursorSelection((e) => {\r\n            if (!this._isEnabled) {\r\n                // Early exit if nothing needs to be done!\r\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n                return;\r\n            }\r\n            if (e.selection.isEmpty()) {\r\n                if (e.reason === 3 /* CursorChangeReason.Explicit */) {\r\n                    if (this.state) {\r\n                        // no longer valid\r\n                        this._setState(null);\r\n                    }\r\n                    this.updateSoon.schedule();\r\n                }\r\n                else {\r\n                    this._setState(null);\r\n                }\r\n            }\r\n            else {\r\n                this._update();\r\n            }\r\n        }));\r\n        this._register(editor.onDidChangeModel((e) => {\r\n            this._setState(null);\r\n        }));\r\n        this._register(editor.onDidChangeModelContent((e) => {\r\n            if (this._isEnabled) {\r\n                this.updateSoon.schedule();\r\n            }\r\n        }));\r\n        const findController = CommonFindController.get(editor);\r\n        if (findController) {\r\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\r\n                this._update();\r\n            }));\r\n        }\r\n        this.updateSoon.schedule();\r\n    }\r\n    _update() {\r\n        this._setState(SelectionHighlighter_1._createState(this.state, this._isEnabled, this.editor));\r\n    }\r\n    static _createState(oldState, isEnabled, editor) {\r\n        if (!isEnabled) {\r\n            return null;\r\n        }\r\n        if (!editor.hasModel()) {\r\n            return null;\r\n        }\r\n        const s = editor.getSelection();\r\n        if (s.startLineNumber !== s.endLineNumber) {\r\n            // multiline forbidden for perf reasons\r\n            return null;\r\n        }\r\n        const multiCursorController = MultiCursorSelectionController.get(editor);\r\n        if (!multiCursorController) {\r\n            return null;\r\n        }\r\n        const findController = CommonFindController.get(editor);\r\n        if (!findController) {\r\n            return null;\r\n        }\r\n        let r = multiCursorController.getSession(findController);\r\n        if (!r) {\r\n            const allSelections = editor.getSelections();\r\n            if (allSelections.length > 1) {\r\n                const findState = findController.getState();\r\n                const matchCase = findState.matchCase;\r\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\r\n                if (!selectionsContainSameText) {\r\n                    return null;\r\n                }\r\n            }\r\n            r = MultiCursorSession.create(editor, findController);\r\n        }\r\n        if (!r) {\r\n            return null;\r\n        }\r\n        if (r.currentMatch) {\r\n            // This is an empty selection\r\n            // Do not interfere with semantic word highlighting in the no selection case\r\n            return null;\r\n        }\r\n        if (/^[ \\t]+$/.test(r.searchText)) {\r\n            // whitespace only selection\r\n            return null;\r\n        }\r\n        if (r.searchText.length > 200) {\r\n            // very long selection\r\n            return null;\r\n        }\r\n        // TODO: better handling of this case\r\n        const findState = findController.getState();\r\n        const caseSensitive = findState.matchCase;\r\n        // Return early if the find widget shows the exact same matches\r\n        if (findState.isRevealed) {\r\n            let findStateSearchString = findState.searchString;\r\n            if (!caseSensitive) {\r\n                findStateSearchString = findStateSearchString.toLowerCase();\r\n            }\r\n            let mySearchString = r.searchText;\r\n            if (!caseSensitive) {\r\n                mySearchString = mySearchString.toLowerCase();\r\n            }\r\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\r\n                return null;\r\n            }\r\n        }\r\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(129 /* EditorOption.wordSeparators */) : null, oldState);\r\n    }\r\n    _setState(newState) {\r\n        this.state = newState;\r\n        if (!this.state) {\r\n            this._decorations.clear();\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = this.editor.getModel();\r\n        if (model.isTooLargeForTokenization()) {\r\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\r\n            return;\r\n        }\r\n        const allMatches = this.state.findMatches();\r\n        const selections = this.editor.getSelections();\r\n        selections.sort(Range.compareRangesUsingStarts);\r\n        // do not overlap with selection (issue #64 and #512)\r\n        const matches = [];\r\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\r\n            const match = allMatches[i];\r\n            if (j >= lenJ) {\r\n                // finished all editor selections\r\n                matches.push(match);\r\n                i++;\r\n            }\r\n            else {\r\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\r\n                if (cmp < 0) {\r\n                    // match is before sel\r\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\r\n                        matches.push(match);\r\n                    }\r\n                    i++;\r\n                }\r\n                else if (cmp > 0) {\r\n                    // sel is before match\r\n                    j++;\r\n                }\r\n                else {\r\n                    // sel is equal to match\r\n                    i++;\r\n                    j++;\r\n                }\r\n            }\r\n        }\r\n        const hasSemanticHighlights = this._languageFeaturesService.documentHighlightProvider.has(model) && this.editor.getOption(80 /* EditorOption.occurrencesHighlight */);\r\n        const decorations = matches.map(r => {\r\n            return {\r\n                range: r,\r\n                options: getSelectionHighlightDecorationOptions(hasSemanticHighlights)\r\n            };\r\n        });\r\n        this._decorations.set(decorations);\r\n    }\r\n    dispose() {\r\n        this._setState(null);\r\n        super.dispose();\r\n    }\r\n};\r\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\r\nSelectionHighlighter = SelectionHighlighter_1 = __decorate([\r\n    __param(1, ILanguageFeaturesService)\r\n], SelectionHighlighter);\r\nexport { SelectionHighlighter };\r\nfunction modelRangesContainSameText(model, ranges, matchCase) {\r\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\r\n    for (let i = 1, len = ranges.length; i < len; i++) {\r\n        const range = ranges[i];\r\n        if (range.isEmpty()) {\r\n            return false;\r\n        }\r\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\r\n        if (selectedText !== thisSelectedText) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction getValueInRange(model, range, toLowerCase) {\r\n    const text = model.getValueInRange(range);\r\n    return (toLowerCase ? text.toLowerCase() : text);\r\n}\r\nexport class FocusNextCursor extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.focusNextCursor',\r\n            label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\r\n            description: {\r\n                description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\r\n                args: [],\r\n            },\r\n            alias: 'Focus Next Cursor',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        if (viewModel.cursorConfig.readOnly) {\r\n            return;\r\n        }\r\n        viewModel.model.pushStackElement();\r\n        const previousCursorState = Array.from(viewModel.getCursorStates());\r\n        const firstCursor = previousCursorState.shift();\r\n        if (!firstCursor) {\r\n            return;\r\n        }\r\n        previousCursorState.push(firstCursor);\r\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\r\n        viewModel.revealPrimaryCursor(args.source, true);\r\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n    }\r\n}\r\nexport class FocusPreviousCursor extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.focusPreviousCursor',\r\n            label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\r\n            description: {\r\n                description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\r\n                args: [],\r\n            },\r\n            alias: 'Focus Previous Cursor',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const viewModel = editor._getViewModel();\r\n        if (viewModel.cursorConfig.readOnly) {\r\n            return;\r\n        }\r\n        viewModel.model.pushStackElement();\r\n        const previousCursorState = Array.from(viewModel.getCursorStates());\r\n        const firstCursor = previousCursorState.pop();\r\n        if (!firstCursor) {\r\n            return;\r\n        }\r\n        previousCursorState.unshift(firstCursor);\r\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\r\n        viewModel.revealPrimaryCursor(args.source, true);\r\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\r\n    }\r\n}\r\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nregisterEditorAction(InsertCursorAbove);\r\nregisterEditorAction(InsertCursorBelow);\r\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\r\nregisterEditorAction(AddSelectionToNextFindMatchAction);\r\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\r\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\r\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\r\nregisterEditorAction(SelectHighlightsAction);\r\nregisterEditorAction(CompatChangeAll);\r\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\r\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\r\nregisterEditorAction(FocusNextCursor);\r\nregisterEditorAction(FocusPreviousCursor);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './highlightDecorations.css';\r\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { DocumentHighlightKind } from '../../../common/languages.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { activeContrastBorder, editorSelectionHighlight, minimapSelectionOccurrenceHighlight, overviewRulerSelectionHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\r\nconst wordHighlightBackground = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hcDark: null, hcLight: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nregisterColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hcDark: null, hcLight: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nregisterColor('editor.wordHighlightTextBackground', { light: wordHighlightBackground, dark: wordHighlightBackground, hcDark: wordHighlightBackground, hcLight: wordHighlightBackground }, nls.localize('wordHighlightText', 'Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nconst wordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\r\nregisterColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\r\nregisterColor('editor.wordHighlightTextBorder', { light: wordHighlightBorder, dark: wordHighlightBorder, hcDark: wordHighlightBorder, hcLight: wordHighlightBorder }, nls.localize('wordHighlightTextBorder', \"Border color of a textual occurrence for a symbol.\"));\r\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hcDark: '#A0A0A0CC', hcLight: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hcDark: '#C0A0C0CC', hcLight: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nconst overviewRulerWordHighlightTextForeground = registerColor('editorOverviewRuler.wordHighlightTextForeground', { dark: overviewRulerSelectionHighlightForeground, light: overviewRulerSelectionHighlightForeground, hcDark: overviewRulerSelectionHighlightForeground, hcLight: overviewRulerSelectionHighlightForeground }, nls.localize('overviewRulerWordHighlightTextForeground', 'Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.'), true);\r\nconst _WRITE_OPTIONS = ModelDecorationOptions.register({\r\n    description: 'word-highlight-strong',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'wordHighlightStrong',\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\r\n        position: OverviewRulerLane.Center\r\n    },\r\n    minimap: {\r\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\r\n        position: MinimapPosition.Inline\r\n    },\r\n});\r\nconst _TEXT_OPTIONS = ModelDecorationOptions.register({\r\n    description: 'word-highlight-text',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'wordHighlightText',\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerWordHighlightTextForeground),\r\n        position: OverviewRulerLane.Center\r\n    },\r\n    minimap: {\r\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\r\n        position: MinimapPosition.Inline\r\n    },\r\n});\r\nconst _SELECTION_HIGHLIGHT_OPTIONS = ModelDecorationOptions.register({\r\n    description: 'selection-highlight-overview',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'selectionHighlight',\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\r\n        position: OverviewRulerLane.Center\r\n    },\r\n    minimap: {\r\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\r\n        position: MinimapPosition.Inline\r\n    },\r\n});\r\nconst _SELECTION_HIGHLIGHT_OPTIONS_NO_OVERVIEW = ModelDecorationOptions.register({\r\n    description: 'selection-highlight',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'selectionHighlight',\r\n});\r\nconst _REGULAR_OPTIONS = ModelDecorationOptions.register({\r\n    description: 'word-highlight',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'wordHighlight',\r\n    overviewRuler: {\r\n        color: themeColorFromId(overviewRulerWordHighlightForeground),\r\n        position: OverviewRulerLane.Center\r\n    },\r\n    minimap: {\r\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\r\n        position: MinimapPosition.Inline\r\n    },\r\n});\r\nexport function getHighlightDecorationOptions(kind) {\r\n    if (kind === DocumentHighlightKind.Write) {\r\n        return _WRITE_OPTIONS;\r\n    }\r\n    else if (kind === DocumentHighlightKind.Text) {\r\n        return _TEXT_OPTIONS;\r\n    }\r\n    else {\r\n        return _REGULAR_OPTIONS;\r\n    }\r\n}\r\nexport function getSelectionHighlightDecorationOptions(hasSemanticHighlights) {\r\n    // Show in overviewRuler only if model has no semantic highlighting\r\n    return (hasSemanticHighlights ? _SELECTION_HIGHLIGHT_OPTIONS_NO_OVERVIEW : _SELECTION_HIGHLIGHT_OPTIONS);\r\n}\r\nregisterThemingParticipant((theme, collector) => {\r\n    const selectionHighlight = theme.getColor(editorSelectionHighlight);\r\n    if (selectionHighlight) {\r\n        collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ParameterHintsController_1;\r\nimport { Lazy } from '../../../../base/common/lazy.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport * as languages from '../../../common/languages.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ParameterHintsModel } from './parameterHintsModel.js';\r\nimport { Context } from './provideSignatureHelp.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\r\nlet ParameterHintsController = ParameterHintsController_1 = class ParameterHintsController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(ParameterHintsController_1.ID);\r\n    }\r\n    constructor(editor, instantiationService, languageFeaturesService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\r\n        this._register(this.model.onChangedHints(newParameterHints => {\r\n            var _a;\r\n            if (newParameterHints) {\r\n                this.widget.value.show();\r\n                this.widget.value.render(newParameterHints);\r\n            }\r\n            else {\r\n                (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\r\n            }\r\n        }));\r\n        this.widget = new Lazy(() => this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor, this.model)));\r\n    }\r\n    cancel() {\r\n        this.model.cancel();\r\n    }\r\n    previous() {\r\n        var _a;\r\n        (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.previous();\r\n    }\r\n    next() {\r\n        var _a;\r\n        (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.next();\r\n    }\r\n    trigger(context) {\r\n        this.model.trigger(context, 0);\r\n    }\r\n};\r\nParameterHintsController.ID = 'editor.controller.parameterHints';\r\nParameterHintsController = ParameterHintsController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, ILanguageFeaturesService)\r\n], ParameterHintsController);\r\nexport { ParameterHintsController };\r\nexport class TriggerParameterHintsAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.triggerParameterHints',\r\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\r\n            alias: 'Trigger Parameter Hints',\r\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ParameterHintsController.get(editor);\r\n        controller === null || controller === void 0 ? void 0 : controller.trigger({\r\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke\r\n        });\r\n    }\r\n}\r\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorAction(TriggerParameterHintsAction);\r\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\r\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\r\nregisterEditorCommand(new ParameterHintsCommand({\r\n    id: 'closeParameterHints',\r\n    precondition: Context.Visible,\r\n    handler: x => x.cancel(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new ParameterHintsCommand({\r\n    id: 'showPrevParameterHint',\r\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\r\n    handler: x => x.previous(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 16 /* KeyCode.UpArrow */,\r\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\r\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new ParameterHintsCommand({\r\n    id: 'showNextParameterHint',\r\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\r\n    handler: x => x.next(),\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 18 /* KeyCode.DownArrow */,\r\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\r\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\r\n    }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\r\nimport * as languages from '../../../common/languages.js';\r\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\r\nvar ParameterHintState;\r\n(function (ParameterHintState) {\r\n    ParameterHintState.Default = { type: 0 /* Type.Default */ };\r\n    class Pending {\r\n        constructor(request, previouslyActiveHints) {\r\n            this.request = request;\r\n            this.previouslyActiveHints = previouslyActiveHints;\r\n            this.type = 2 /* Type.Pending */;\r\n        }\r\n    }\r\n    ParameterHintState.Pending = Pending;\r\n    class Active {\r\n        constructor(hints) {\r\n            this.hints = hints;\r\n            this.type = 1 /* Type.Active */;\r\n        }\r\n    }\r\n    ParameterHintState.Active = Active;\r\n})(ParameterHintState || (ParameterHintState = {}));\r\nexport class ParameterHintsModel extends Disposable {\r\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\r\n        super();\r\n        this._onChangedHints = this._register(new Emitter());\r\n        this.onChangedHints = this._onChangedHints.event;\r\n        this.triggerOnType = false;\r\n        this._state = ParameterHintState.Default;\r\n        this._pendingTriggers = [];\r\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\r\n        this.triggerChars = new CharacterSet();\r\n        this.retriggerChars = new CharacterSet();\r\n        this.triggerId = 0;\r\n        this.editor = editor;\r\n        this.providers = providers;\r\n        this.throttledDelayer = new Delayer(delay);\r\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\r\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\r\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\r\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\r\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\r\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\r\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\r\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\r\n        this.onEditorConfigurationChange();\r\n        this.onModelChanged();\r\n    }\r\n    get state() { return this._state; }\r\n    set state(value) {\r\n        if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\r\n            this._state.request.cancel();\r\n        }\r\n        this._state = value;\r\n    }\r\n    cancel(silent = false) {\r\n        this.state = ParameterHintState.Default;\r\n        this.throttledDelayer.cancel();\r\n        if (!silent) {\r\n            this._onChangedHints.fire(undefined);\r\n        }\r\n    }\r\n    trigger(context, delay) {\r\n        const model = this.editor.getModel();\r\n        if (!model || !this.providers.has(model)) {\r\n            return;\r\n        }\r\n        const triggerId = ++this.triggerId;\r\n        this._pendingTriggers.push(context);\r\n        this.throttledDelayer.trigger(() => {\r\n            return this.doTrigger(triggerId);\r\n        }, delay)\r\n            .catch(onUnexpectedError);\r\n    }\r\n    next() {\r\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\r\n            return;\r\n        }\r\n        const length = this.state.hints.signatures.length;\r\n        const activeSignature = this.state.hints.activeSignature;\r\n        const last = (activeSignature % length) === (length - 1);\r\n        const cycle = this.editor.getOption(85 /* EditorOption.parameterHints */).cycle;\r\n        // If there is only one signature, or we're on last signature of list\r\n        if ((length < 2 || last) && !cycle) {\r\n            this.cancel();\r\n            return;\r\n        }\r\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\r\n    }\r\n    previous() {\r\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\r\n            return;\r\n        }\r\n        const length = this.state.hints.signatures.length;\r\n        const activeSignature = this.state.hints.activeSignature;\r\n        const first = activeSignature === 0;\r\n        const cycle = this.editor.getOption(85 /* EditorOption.parameterHints */).cycle;\r\n        // If there is only one signature, or we're on first signature of list\r\n        if ((length < 2 || first) && !cycle) {\r\n            this.cancel();\r\n            return;\r\n        }\r\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\r\n    }\r\n    updateActiveSignature(activeSignature) {\r\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\r\n            return;\r\n        }\r\n        this.state = new ParameterHintState.Active(Object.assign(Object.assign({}, this.state.hints), { activeSignature }));\r\n        this._onChangedHints.fire(this.state.hints);\r\n    }\r\n    doTrigger(triggerId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\r\n            const activeSignatureHelp = this.getLastActiveHints();\r\n            this.cancel(true);\r\n            if (this._pendingTriggers.length === 0) {\r\n                return false;\r\n            }\r\n            const context = this._pendingTriggers.reduce(mergeTriggerContexts);\r\n            this._pendingTriggers = [];\r\n            const triggerContext = {\r\n                triggerKind: context.triggerKind,\r\n                triggerCharacter: context.triggerCharacter,\r\n                isRetrigger: isRetrigger,\r\n                activeSignatureHelp: activeSignatureHelp\r\n            };\r\n            if (!this.editor.hasModel()) {\r\n                return false;\r\n            }\r\n            const model = this.editor.getModel();\r\n            const position = this.editor.getPosition();\r\n            this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\r\n            try {\r\n                const result = yield this.state.request;\r\n                // Check that we are still resolving the correct signature help\r\n                if (triggerId !== this.triggerId) {\r\n                    result === null || result === void 0 ? void 0 : result.dispose();\r\n                    return false;\r\n                }\r\n                if (!result || !result.value.signatures || result.value.signatures.length === 0) {\r\n                    result === null || result === void 0 ? void 0 : result.dispose();\r\n                    this._lastSignatureHelpResult.clear();\r\n                    this.cancel();\r\n                    return false;\r\n                }\r\n                else {\r\n                    this.state = new ParameterHintState.Active(result.value);\r\n                    this._lastSignatureHelpResult.value = result;\r\n                    this._onChangedHints.fire(this.state.hints);\r\n                    return true;\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (triggerId === this.triggerId) {\r\n                    this.state = ParameterHintState.Default;\r\n                }\r\n                onUnexpectedError(error);\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    getLastActiveHints() {\r\n        switch (this.state.type) {\r\n            case 1 /* ParameterHintState.Type.Active */: return this.state.hints;\r\n            case 2 /* ParameterHintState.Type.Pending */: return this.state.previouslyActiveHints;\r\n            default: return undefined;\r\n        }\r\n    }\r\n    get isTriggered() {\r\n        return this.state.type === 1 /* ParameterHintState.Type.Active */\r\n            || this.state.type === 2 /* ParameterHintState.Type.Pending */\r\n            || this.throttledDelayer.isTriggered();\r\n    }\r\n    onModelChanged() {\r\n        this.cancel();\r\n        this.triggerChars.clear();\r\n        this.retriggerChars.clear();\r\n        const model = this.editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (const support of this.providers.ordered(model)) {\r\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\r\n                if (ch.length) {\r\n                    const charCode = ch.charCodeAt(0);\r\n                    this.triggerChars.add(charCode);\r\n                    // All trigger characters are also considered retrigger characters\r\n                    this.retriggerChars.add(charCode);\r\n                }\r\n            }\r\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\r\n                if (ch.length) {\r\n                    this.retriggerChars.add(ch.charCodeAt(0));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDidType(text) {\r\n        if (!this.triggerOnType) {\r\n            return;\r\n        }\r\n        const lastCharIndex = text.length - 1;\r\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\r\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\r\n            this.trigger({\r\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\r\n                triggerCharacter: text.charAt(lastCharIndex),\r\n            });\r\n        }\r\n    }\r\n    onCursorChange(e) {\r\n        if (e.source === 'mouse') {\r\n            this.cancel();\r\n        }\r\n        else if (this.isTriggered) {\r\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\r\n        }\r\n    }\r\n    onModelContentChange() {\r\n        if (this.isTriggered) {\r\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\r\n        }\r\n    }\r\n    onEditorConfigurationChange() {\r\n        this.triggerOnType = this.editor.getOption(85 /* EditorOption.parameterHints */).enabled;\r\n        if (!this.triggerOnType) {\r\n            this.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancel(true);\r\n        super.dispose();\r\n    }\r\n}\r\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\r\nfunction mergeTriggerContexts(previous, current) {\r\n    switch (current.triggerKind) {\r\n        case languages.SignatureHelpTriggerKind.Invoke:\r\n            // Invoke overrides previous triggers.\r\n            return current;\r\n        case languages.SignatureHelpTriggerKind.ContentChange:\r\n            // Ignore content changes triggers\r\n            return previous;\r\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\r\n        default:\r\n            return current;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport * as languages from '../../../common/languages.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nexport const Context = {\r\n    Visible: new RawContextKey('parameterHintsVisible', false),\r\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\r\n};\r\nexport function provideSignatureHelp(registry, model, position, context, token) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const supports = registry.ordered(model);\r\n        for (const support of supports) {\r\n            try {\r\n                const result = yield support.provideSignatureHelp(model, position, token, context);\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            }\r\n            catch (err) {\r\n                onUnexpectedExternalError(err);\r\n            }\r\n        }\r\n        return undefined;\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const [uri, position, triggerCharacter] = args;\r\n    assertType(URI.isUri(uri));\r\n    assertType(Position.isIPosition(position));\r\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\r\n    try {\r\n        const result = yield provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\r\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\r\n            isRetrigger: false,\r\n            triggerCharacter,\r\n        }, CancellationToken.None);\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        setTimeout(() => result.dispose(), 0);\r\n        return result.value;\r\n    }\r\n    finally {\r\n        ref.dispose();\r\n    }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ParameterHintsWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\r\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\r\nimport { assertIsDefined } from '../../../../base/common/types.js';\r\nimport './parameterHints.css';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport { Context } from './provideSignatureHelp.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { listHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nconst $ = dom.$;\r\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\r\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\r\nlet ParameterHintsWidget = ParameterHintsWidget_1 = class ParameterHintsWidget extends Disposable {\r\n    constructor(editor, model, contextKeyService, openerService, languageService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.model = model;\r\n        this.renderDisposeables = this._register(new DisposableStore());\r\n        this.visible = false;\r\n        this.announcedLabel = null;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\r\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\r\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\r\n    }\r\n    createParameterHintDOMNodes() {\r\n        const element = $('.editor-widget.parameter-hints-widget');\r\n        const wrapper = dom.append(element, $('.phwrapper'));\r\n        wrapper.tabIndex = -1;\r\n        const controls = dom.append(wrapper, $('.controls'));\r\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\r\n        const overloads = dom.append(controls, $('.overloads'));\r\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\r\n        this._register(dom.addDisposableListener(previous, 'click', e => {\r\n            dom.EventHelper.stop(e);\r\n            this.previous();\r\n        }));\r\n        this._register(dom.addDisposableListener(next, 'click', e => {\r\n            dom.EventHelper.stop(e);\r\n            this.next();\r\n        }));\r\n        const body = $('.body');\r\n        const scrollbar = new DomScrollableElement(body, {\r\n            alwaysConsumeMouseWheel: true,\r\n        });\r\n        this._register(scrollbar);\r\n        wrapper.appendChild(scrollbar.getDomNode());\r\n        const signature = dom.append(body, $('.signature'));\r\n        const docs = dom.append(body, $('.docs'));\r\n        element.style.userSelect = 'text';\r\n        this.domNodes = {\r\n            element,\r\n            signature,\r\n            overloads,\r\n            docs,\r\n            scrollbar,\r\n        };\r\n        this.editor.addContentWidget(this);\r\n        this.hide();\r\n        this._register(this.editor.onDidChangeCursorSelection(e => {\r\n            if (this.visible) {\r\n                this.editor.layoutContentWidget(this);\r\n            }\r\n        }));\r\n        const updateFont = () => {\r\n            if (!this.domNodes) {\r\n                return;\r\n            }\r\n            const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\r\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\r\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\r\n        };\r\n        updateFont();\r\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor), $ => $.filter(e => e.hasChanged(50 /* EditorOption.fontInfo */)))(updateFont));\r\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\r\n        this.updateMaxHeight();\r\n    }\r\n    show() {\r\n        if (this.visible) {\r\n            return;\r\n        }\r\n        if (!this.domNodes) {\r\n            this.createParameterHintDOMNodes();\r\n        }\r\n        this.keyVisible.set(true);\r\n        this.visible = true;\r\n        setTimeout(() => {\r\n            var _a;\r\n            (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.add('visible');\r\n        }, 100);\r\n        this.editor.layoutContentWidget(this);\r\n    }\r\n    hide() {\r\n        var _a;\r\n        this.renderDisposeables.clear();\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        this.keyVisible.reset();\r\n        this.visible = false;\r\n        this.announcedLabel = null;\r\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.remove('visible');\r\n        this.editor.layoutContentWidget(this);\r\n    }\r\n    getPosition() {\r\n        if (this.visible) {\r\n            return {\r\n                position: this.editor.getPosition(),\r\n                preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    render(hints) {\r\n        var _a;\r\n        this.renderDisposeables.clear();\r\n        if (!this.domNodes) {\r\n            return;\r\n        }\r\n        const multiple = hints.signatures.length > 1;\r\n        this.domNodes.element.classList.toggle('multiple', multiple);\r\n        this.keyMultipleSignatures.set(multiple);\r\n        this.domNodes.signature.innerText = '';\r\n        this.domNodes.docs.innerText = '';\r\n        const signature = hints.signatures[hints.activeSignature];\r\n        if (!signature) {\r\n            return;\r\n        }\r\n        const code = dom.append(this.domNodes.signature, $('.code'));\r\n        const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\r\n        code.style.fontSize = `${fontInfo.fontSize}px`;\r\n        code.style.fontFamily = fontInfo.fontFamily;\r\n        const hasParameters = signature.parameters.length > 0;\r\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\r\n        if (!hasParameters) {\r\n            const label = dom.append(code, $('span'));\r\n            label.textContent = signature.label;\r\n        }\r\n        else {\r\n            this.renderParameters(code, signature, activeParameterIndex);\r\n        }\r\n        const activeParameter = signature.parameters[activeParameterIndex];\r\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\r\n            const documentation = $('span.documentation');\r\n            if (typeof activeParameter.documentation === 'string') {\r\n                documentation.textContent = activeParameter.documentation;\r\n            }\r\n            else {\r\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\r\n                documentation.appendChild(renderedContents.element);\r\n            }\r\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\r\n        }\r\n        if (signature.documentation === undefined) {\r\n            /** no op */\r\n        }\r\n        else if (typeof signature.documentation === 'string') {\r\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\r\n        }\r\n        else {\r\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\r\n            dom.append(this.domNodes.docs, renderedContents.element);\r\n        }\r\n        const hasDocs = this.hasDocs(signature, activeParameter);\r\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\r\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\r\n        this.domNodes.overloads.textContent =\r\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\r\n        if (activeParameter) {\r\n            let labelToAnnounce = '';\r\n            const param = signature.parameters[activeParameterIndex];\r\n            if (Array.isArray(param.label)) {\r\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\r\n            }\r\n            else {\r\n                labelToAnnounce = param.label;\r\n            }\r\n            if (param.documentation) {\r\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\r\n            }\r\n            if (signature.documentation) {\r\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\r\n            }\r\n            // Select method gets called on every user type while parameter hints are visible.\r\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\r\n            if (this.announcedLabel !== labelToAnnounce) {\r\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\r\n                this.announcedLabel = labelToAnnounce;\r\n            }\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n        this.domNodes.scrollbar.scanDomNode();\r\n    }\r\n    renderMarkdownDocs(markdown) {\r\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\r\n            asyncRenderCallback: () => {\r\n                var _a;\r\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\r\n            }\r\n        }));\r\n        renderedContents.element.classList.add('markdown-docs');\r\n        return renderedContents;\r\n    }\r\n    hasDocs(signature, activeParameter) {\r\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\r\n            return true;\r\n        }\r\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\r\n            return true;\r\n        }\r\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\r\n            return true;\r\n        }\r\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    renderParameters(parent, signature, activeParameterIndex) {\r\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\r\n        const beforeSpan = document.createElement('span');\r\n        beforeSpan.textContent = signature.label.substring(0, start);\r\n        const paramSpan = document.createElement('span');\r\n        paramSpan.textContent = signature.label.substring(start, end);\r\n        paramSpan.className = 'parameter active';\r\n        const afterSpan = document.createElement('span');\r\n        afterSpan.textContent = signature.label.substring(end);\r\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\r\n    }\r\n    getParameterLabelOffsets(signature, paramIdx) {\r\n        const param = signature.parameters[paramIdx];\r\n        if (!param) {\r\n            return [0, 0];\r\n        }\r\n        else if (Array.isArray(param.label)) {\r\n            return param.label;\r\n        }\r\n        else if (!param.label.length) {\r\n            return [0, 0];\r\n        }\r\n        else {\r\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\r\n            regex.test(signature.label);\r\n            const idx = regex.lastIndex - param.label.length;\r\n            return idx >= 0\r\n                ? [idx, regex.lastIndex]\r\n                : [0, 0];\r\n        }\r\n    }\r\n    next() {\r\n        this.editor.focus();\r\n        this.model.next();\r\n    }\r\n    previous() {\r\n        this.editor.focus();\r\n        this.model.previous();\r\n    }\r\n    getDomNode() {\r\n        if (!this.domNodes) {\r\n            this.createParameterHintDOMNodes();\r\n        }\r\n        return this.domNodes.element;\r\n    }\r\n    getId() {\r\n        return ParameterHintsWidget_1.ID;\r\n    }\r\n    updateMaxHeight() {\r\n        if (!this.domNodes) {\r\n            return;\r\n        }\r\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\r\n        const maxHeight = `${height}px`;\r\n        this.domNodes.element.style.maxHeight = maxHeight;\r\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\r\n        if (wrapper.length) {\r\n            wrapper[0].style.maxHeight = maxHeight;\r\n        }\r\n    }\r\n};\r\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\r\nParameterHintsWidget = ParameterHintsWidget_1 = __decorate([\r\n    __param(2, IContextKeyService),\r\n    __param(3, IOpenerService),\r\n    __param(4, ILanguageService)\r\n], ParameterHintsWidget);\r\nexport { ParameterHintsWidget };\r\nregisterColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar RenameController_1;\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { raceCancellation } from '../../../../base/common/async.js';\r\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\r\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\r\nimport { MessageController } from '../../message/browser/messageController.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ILogService } from '../../../../platform/log/common/log.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\r\nimport { Registry } from '../../../../platform/registry/common/platform.js';\r\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nclass RenameSkeleton {\r\n    constructor(model, position, registry) {\r\n        this.model = model;\r\n        this.position = position;\r\n        this._providerRenameIdx = 0;\r\n        this._providers = registry.ordered(model);\r\n    }\r\n    hasProvider() {\r\n        return this._providers.length > 0;\r\n    }\r\n    resolveRenameLocation(token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const rejects = [];\r\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\r\n                const provider = this._providers[this._providerRenameIdx];\r\n                if (!provider.resolveRenameLocation) {\r\n                    break;\r\n                }\r\n                const res = yield provider.resolveRenameLocation(this.model, this.position, token);\r\n                if (!res) {\r\n                    continue;\r\n                }\r\n                if (res.rejectReason) {\r\n                    rejects.push(res.rejectReason);\r\n                    continue;\r\n                }\r\n                return res;\r\n            }\r\n            const word = this.model.getWordAtPosition(this.position);\r\n            if (!word) {\r\n                return {\r\n                    range: Range.fromPositions(this.position),\r\n                    text: '',\r\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\r\n                };\r\n            }\r\n            return {\r\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\r\n                text: word.word,\r\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\r\n            };\r\n        });\r\n    }\r\n    provideRenameEdits(newName, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\r\n        });\r\n    }\r\n    _provideRenameEdits(newName, i, rejects, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const provider = this._providers[i];\r\n            if (!provider) {\r\n                return {\r\n                    edits: [],\r\n                    rejectReason: rejects.join('\\n')\r\n                };\r\n            }\r\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\r\n            if (!result) {\r\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\r\n            }\r\n            else if (result.rejectReason) {\r\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\r\n            }\r\n            return result;\r\n        });\r\n    }\r\n}\r\nexport function rename(registry, model, position, newName) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const skeleton = new RenameSkeleton(model, position, registry);\r\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\r\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\r\n            return { edits: [], rejectReason: loc.rejectReason };\r\n        }\r\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\r\n    });\r\n}\r\n// ---  register actions and commands\r\nlet RenameController = RenameController_1 = class RenameController {\r\n    static get(editor) {\r\n        return editor.getContribution(RenameController_1.ID);\r\n    }\r\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\r\n        this.editor = editor;\r\n        this._instaService = _instaService;\r\n        this._notificationService = _notificationService;\r\n        this._bulkEditService = _bulkEditService;\r\n        this._progressService = _progressService;\r\n        this._logService = _logService;\r\n        this._configService = _configService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._disposableStore = new DisposableStore();\r\n        this._cts = new CancellationTokenSource();\r\n        this._renameInputField = this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\r\n    }\r\n    dispose() {\r\n        this._disposableStore.dispose();\r\n        this._cts.dispose(true);\r\n    }\r\n    run() {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // set up cancellation token to prevent reentrant rename, this\r\n            // is the parent to the resolve- and rename-tokens\r\n            this._cts.dispose(true);\r\n            this._cts = new CancellationTokenSource();\r\n            if (!this.editor.hasModel()) {\r\n                return undefined;\r\n            }\r\n            const position = this.editor.getPosition();\r\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\r\n            if (!skeleton.hasProvider()) {\r\n                return undefined;\r\n            }\r\n            // part 1 - resolve rename location\r\n            const cts1 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, undefined, this._cts.token);\r\n            let loc;\r\n            try {\r\n                const resolveLocationOperation = skeleton.resolveRenameLocation(cts1.token);\r\n                this._progressService.showWhile(resolveLocationOperation, 250);\r\n                loc = yield resolveLocationOperation;\r\n            }\r\n            catch (e) {\r\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\r\n                return undefined;\r\n            }\r\n            finally {\r\n                cts1.dispose();\r\n            }\r\n            if (!loc) {\r\n                return undefined;\r\n            }\r\n            if (loc.rejectReason) {\r\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\r\n                return undefined;\r\n            }\r\n            if (cts1.token.isCancellationRequested) {\r\n                return undefined;\r\n            }\r\n            // part 2 - do rename at location\r\n            const cts2 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range, this._cts.token);\r\n            const selection = this.editor.getSelection();\r\n            let selectionStart = 0;\r\n            let selectionEnd = loc.text.length;\r\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\r\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\r\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\r\n            }\r\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\r\n            const inputFieldResult = yield this._renameInputField.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, cts2.token);\r\n            // no result, only hint to focus the editor or not\r\n            if (typeof inputFieldResult === 'boolean') {\r\n                if (inputFieldResult) {\r\n                    this.editor.focus();\r\n                }\r\n                cts2.dispose();\r\n                return undefined;\r\n            }\r\n            this.editor.focus();\r\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, cts2.token), cts2.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\r\n                if (!renameResult || !this.editor.hasModel()) {\r\n                    return;\r\n                }\r\n                if (renameResult.rejectReason) {\r\n                    this._notificationService.info(renameResult.rejectReason);\r\n                    return;\r\n                }\r\n                // collapse selection to active end\r\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\r\n                this._bulkEditService.apply(renameResult, {\r\n                    editor: this.editor,\r\n                    showPreview: inputFieldResult.wantsPreview,\r\n                    label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\r\n                    code: 'undoredo.rename',\r\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\r\n                    respectAutoSaveConfig: true\r\n                }).then(result => {\r\n                    if (result.ariaSummary) {\r\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\r\n                    }\r\n                }).catch(err => {\r\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\r\n                    this._logService.error(err);\r\n                });\r\n            }), err => {\r\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\r\n                this._logService.error(err);\r\n            }).finally(() => {\r\n                cts2.dispose();\r\n            });\r\n            this._progressService.showWhile(renameOperation, 250);\r\n            return renameOperation;\r\n        });\r\n    }\r\n    acceptRenameInput(wantsPreview) {\r\n        this._renameInputField.acceptInput(wantsPreview);\r\n    }\r\n    cancelRenameInput() {\r\n        this._renameInputField.cancelInput(true);\r\n    }\r\n};\r\nRenameController.ID = 'editor.contrib.renameController';\r\nRenameController = RenameController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, INotificationService),\r\n    __param(3, IBulkEditService),\r\n    __param(4, IEditorProgressService),\r\n    __param(5, ILogService),\r\n    __param(6, ITextResourceConfigurationService),\r\n    __param(7, ILanguageFeaturesService)\r\n], RenameController);\r\n// ---- action implementation\r\nexport class RenameAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.rename',\r\n            label: nls.localize('rename.label', \"Rename Symbol\"),\r\n            alias: 'Rename Symbol',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 60 /* KeyCode.F2 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 1.1\r\n            }\r\n        });\r\n    }\r\n    runCommand(accessor, args) {\r\n        const editorService = accessor.get(ICodeEditorService);\r\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\r\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\r\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\r\n                if (!editor) {\r\n                    return;\r\n                }\r\n                editor.setPosition(pos);\r\n                editor.invokeWithinContext(accessor => {\r\n                    this.reportTelemetry(accessor, editor);\r\n                    return this.run(accessor, editor);\r\n                });\r\n            }, onUnexpectedError);\r\n        }\r\n        return super.runCommand(accessor, args);\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = RenameController.get(editor);\r\n        if (controller) {\r\n            return controller.run();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n}\r\nregisterEditorContribution(RenameController.ID, RenameController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(RenameAction);\r\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\r\nregisterEditorCommand(new RenameCommand({\r\n    id: 'acceptRenameInput',\r\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\r\n    handler: x => x.acceptRenameInput(false),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\r\n        primary: 3 /* KeyCode.Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new RenameCommand({\r\n    id: 'acceptRenameInputWithPreview',\r\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\r\n    handler: x => x.acceptRenameInput(true),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\r\n        primary: 1024 /* KeyMod.Shift */ + 3 /* KeyCode.Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new RenameCommand({\r\n    id: 'cancelRenameInput',\r\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\r\n    handler: x => x.cancelRenameInput(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\n// ---- api bridge command\r\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\r\n    const [newName] = args;\r\n    assertType(typeof newName === 'string');\r\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\r\n    return rename(renameProvider, model, position, newName);\r\n});\r\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\r\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\r\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\r\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\r\n            throw new Error(loc.rejectReason);\r\n        }\r\n        return loc;\r\n    });\r\n});\r\n//todo@jrieken use editor options world\r\nRegistry.as(Extensions.Configuration).registerConfiguration({\r\n    id: 'editor',\r\n    properties: {\r\n        'editor.rename.enablePreview': {\r\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\r\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\r\n            default: true,\r\n            type: 'boolean'\r\n        }\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport './renameInputField.css';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\r\nlet RenameInputField = class RenameInputField {\r\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\r\n        this._editor = _editor;\r\n        this._acceptKeybindings = _acceptKeybindings;\r\n        this._themeService = _themeService;\r\n        this._keybindingService = _keybindingService;\r\n        this._disposables = new DisposableStore();\r\n        this.allowEditorOverflow = true;\r\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\r\n        this._editor.addContentWidget(this);\r\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\r\n                this._updateFont();\r\n            }\r\n        }));\r\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this._editor.removeContentWidget(this);\r\n    }\r\n    getId() {\r\n        return '__renameInputWidget';\r\n    }\r\n    getDomNode() {\r\n        if (!this._domNode) {\r\n            this._domNode = document.createElement('div');\r\n            this._domNode.className = 'monaco-editor rename-box';\r\n            this._input = document.createElement('input');\r\n            this._input.className = 'rename-input';\r\n            this._input.type = 'text';\r\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\r\n            this._domNode.appendChild(this._input);\r\n            this._label = document.createElement('div');\r\n            this._label.className = 'rename-label';\r\n            this._domNode.appendChild(this._label);\r\n            this._updateFont();\r\n            this._updateStyles(this._themeService.getColorTheme());\r\n        }\r\n        return this._domNode;\r\n    }\r\n    _updateStyles(theme) {\r\n        var _a, _b, _c, _d;\r\n        if (!this._input || !this._domNode) {\r\n            return;\r\n        }\r\n        const widgetShadowColor = theme.getColor(widgetShadow);\r\n        const widgetBorderColor = theme.getColor(widgetBorder);\r\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\r\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\r\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\r\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\r\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\r\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\r\n        const border = theme.getColor(inputBorder);\r\n        this._input.style.borderWidth = border ? '1px' : '0px';\r\n        this._input.style.borderStyle = border ? 'solid' : 'none';\r\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\r\n    }\r\n    _updateFont() {\r\n        if (!this._input || !this._label) {\r\n            return;\r\n        }\r\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        this._input.style.fontFamily = fontInfo.fontFamily;\r\n        this._input.style.fontWeight = fontInfo.fontWeight;\r\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\r\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\r\n    }\r\n    getPosition() {\r\n        if (!this._visible) {\r\n            return null;\r\n        }\r\n        return {\r\n            position: this._position,\r\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\r\n        };\r\n    }\r\n    beforeRender() {\r\n        var _a, _b;\r\n        const [accept, preview] = this._acceptKeybindings;\r\n        this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\r\n        return null;\r\n    }\r\n    afterRender(position) {\r\n        if (!position) {\r\n            // cancel rename when input widget isn't rendered anymore\r\n            this.cancelInput(true);\r\n        }\r\n    }\r\n    acceptInput(wantsPreview) {\r\n        var _a;\r\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\r\n    }\r\n    cancelInput(focusEditor) {\r\n        var _a;\r\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\r\n    }\r\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\r\n        this._domNode.classList.toggle('preview', supportPreview);\r\n        this._position = new Position(where.startLineNumber, where.startColumn);\r\n        this._input.value = value;\r\n        this._input.setAttribute('selectionStart', selectionStart.toString());\r\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\r\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\r\n        const disposeOnDone = new DisposableStore();\r\n        return new Promise(resolve => {\r\n            this._currentCancelInput = (focusEditor) => {\r\n                this._currentAcceptInput = undefined;\r\n                this._currentCancelInput = undefined;\r\n                resolve(focusEditor);\r\n                return true;\r\n            };\r\n            this._currentAcceptInput = (wantsPreview) => {\r\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\r\n                    // empty or whitespace only or not changed\r\n                    this.cancelInput(true);\r\n                    return;\r\n                }\r\n                this._currentAcceptInput = undefined;\r\n                this._currentCancelInput = undefined;\r\n                resolve({\r\n                    newName: this._input.value,\r\n                    wantsPreview: supportPreview && wantsPreview\r\n                });\r\n            };\r\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\r\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => { var _a; return this.cancelInput(!((_a = this._domNode) === null || _a === void 0 ? void 0 : _a.ownerDocument.hasFocus())); }));\r\n            this._show();\r\n        }).finally(() => {\r\n            disposeOnDone.dispose();\r\n            this._hide();\r\n        });\r\n    }\r\n    _show() {\r\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\r\n        this._visible = true;\r\n        this._visibleContextKey.set(true);\r\n        this._editor.layoutContentWidget(this);\r\n        setTimeout(() => {\r\n            this._input.focus();\r\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\r\n        }, 100);\r\n    }\r\n    _hide() {\r\n        this._visible = false;\r\n        this._visibleContextKey.reset();\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n};\r\nRenameInputField = __decorate([\r\n    __param(2, IThemeService),\r\n    __param(3, IKeybindingService),\r\n    __param(4, IContextKeyService)\r\n], RenameInputField);\r\nexport { RenameInputField };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ModelSemanticColoring_1;\r\nimport { Disposable, dispose } from '../../../../base/common/lifecycle.js';\r\nimport * as errors from '../../../../base/common/errors.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\r\nimport { getDocumentSemanticTokens, hasDocumentSemanticTokensProvider, isSemanticTokens, isSemanticTokensEdits } from '../common/getSemanticTokens.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\r\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\r\nimport { SEMANTIC_HIGHLIGHTING_SETTING_ID, isSemanticColoringEnabled } from '../common/semanticTokensConfig.js';\r\nlet DocumentSemanticTokensFeature = class DocumentSemanticTokensFeature extends Disposable {\r\n    constructor(semanticTokensStylingService, modelService, themeService, configurationService, languageFeatureDebounceService, languageFeaturesService) {\r\n        super();\r\n        this._watchers = Object.create(null);\r\n        const register = (model) => {\r\n            this._watchers[model.uri.toString()] = new ModelSemanticColoring(model, semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService);\r\n        };\r\n        const deregister = (model, modelSemanticColoring) => {\r\n            modelSemanticColoring.dispose();\r\n            delete this._watchers[model.uri.toString()];\r\n        };\r\n        const handleSettingOrThemeChange = () => {\r\n            for (const model of modelService.getModels()) {\r\n                const curr = this._watchers[model.uri.toString()];\r\n                if (isSemanticColoringEnabled(model, themeService, configurationService)) {\r\n                    if (!curr) {\r\n                        register(model);\r\n                    }\r\n                }\r\n                else {\r\n                    if (curr) {\r\n                        deregister(model, curr);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this._register(modelService.onModelAdded((model) => {\r\n            if (isSemanticColoringEnabled(model, themeService, configurationService)) {\r\n                register(model);\r\n            }\r\n        }));\r\n        this._register(modelService.onModelRemoved((model) => {\r\n            const curr = this._watchers[model.uri.toString()];\r\n            if (curr) {\r\n                deregister(model, curr);\r\n            }\r\n        }));\r\n        this._register(configurationService.onDidChangeConfiguration(e => {\r\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\r\n                handleSettingOrThemeChange();\r\n            }\r\n        }));\r\n        this._register(themeService.onDidColorThemeChange(handleSettingOrThemeChange));\r\n    }\r\n    dispose() {\r\n        // Dispose all watchers\r\n        for (const watcher of Object.values(this._watchers)) {\r\n            watcher.dispose();\r\n        }\r\n        super.dispose();\r\n    }\r\n};\r\nDocumentSemanticTokensFeature = __decorate([\r\n    __param(0, ISemanticTokensStylingService),\r\n    __param(1, IModelService),\r\n    __param(2, IThemeService),\r\n    __param(3, IConfigurationService),\r\n    __param(4, ILanguageFeatureDebounceService),\r\n    __param(5, ILanguageFeaturesService)\r\n], DocumentSemanticTokensFeature);\r\nexport { DocumentSemanticTokensFeature };\r\nlet ModelSemanticColoring = ModelSemanticColoring_1 = class ModelSemanticColoring extends Disposable {\r\n    constructor(model, _semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService) {\r\n        super();\r\n        this._semanticTokensStylingService = _semanticTokensStylingService;\r\n        this._isDisposed = false;\r\n        this._model = model;\r\n        this._provider = languageFeaturesService.documentSemanticTokensProvider;\r\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentSemanticTokens', { min: ModelSemanticColoring_1.REQUEST_MIN_DELAY, max: ModelSemanticColoring_1.REQUEST_MAX_DELAY });\r\n        this._fetchDocumentSemanticTokens = this._register(new RunOnceScheduler(() => this._fetchDocumentSemanticTokensNow(), ModelSemanticColoring_1.REQUEST_MIN_DELAY));\r\n        this._currentDocumentResponse = null;\r\n        this._currentDocumentRequestCancellationTokenSource = null;\r\n        this._documentProvidersChangeListeners = [];\r\n        this._providersChangedDuringRequest = false;\r\n        this._register(this._model.onDidChangeContent(() => {\r\n            if (!this._fetchDocumentSemanticTokens.isScheduled()) {\r\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\r\n            }\r\n        }));\r\n        this._register(this._model.onDidChangeAttached(() => {\r\n            if (!this._fetchDocumentSemanticTokens.isScheduled()) {\r\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\r\n            }\r\n        }));\r\n        this._register(this._model.onDidChangeLanguage(() => {\r\n            // clear any outstanding state\r\n            if (this._currentDocumentResponse) {\r\n                this._currentDocumentResponse.dispose();\r\n                this._currentDocumentResponse = null;\r\n            }\r\n            if (this._currentDocumentRequestCancellationTokenSource) {\r\n                this._currentDocumentRequestCancellationTokenSource.cancel();\r\n                this._currentDocumentRequestCancellationTokenSource = null;\r\n            }\r\n            this._setDocumentSemanticTokens(null, null, null, []);\r\n            this._fetchDocumentSemanticTokens.schedule(0);\r\n        }));\r\n        const bindDocumentChangeListeners = () => {\r\n            dispose(this._documentProvidersChangeListeners);\r\n            this._documentProvidersChangeListeners = [];\r\n            for (const provider of this._provider.all(model)) {\r\n                if (typeof provider.onDidChange === 'function') {\r\n                    this._documentProvidersChangeListeners.push(provider.onDidChange(() => {\r\n                        if (this._currentDocumentRequestCancellationTokenSource) {\r\n                            // there is already a request running,\r\n                            this._providersChangedDuringRequest = true;\r\n                            return;\r\n                        }\r\n                        this._fetchDocumentSemanticTokens.schedule(0);\r\n                    }));\r\n                }\r\n            }\r\n        };\r\n        bindDocumentChangeListeners();\r\n        this._register(this._provider.onDidChange(() => {\r\n            bindDocumentChangeListeners();\r\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\r\n        }));\r\n        this._register(themeService.onDidColorThemeChange(_ => {\r\n            // clear out existing tokens\r\n            this._setDocumentSemanticTokens(null, null, null, []);\r\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\r\n        }));\r\n        this._fetchDocumentSemanticTokens.schedule(0);\r\n    }\r\n    dispose() {\r\n        if (this._currentDocumentResponse) {\r\n            this._currentDocumentResponse.dispose();\r\n            this._currentDocumentResponse = null;\r\n        }\r\n        if (this._currentDocumentRequestCancellationTokenSource) {\r\n            this._currentDocumentRequestCancellationTokenSource.cancel();\r\n            this._currentDocumentRequestCancellationTokenSource = null;\r\n        }\r\n        dispose(this._documentProvidersChangeListeners);\r\n        this._documentProvidersChangeListeners = [];\r\n        this._setDocumentSemanticTokens(null, null, null, []);\r\n        this._isDisposed = true;\r\n        super.dispose();\r\n    }\r\n    _fetchDocumentSemanticTokensNow() {\r\n        if (this._currentDocumentRequestCancellationTokenSource) {\r\n            // there is already a request running, let it finish...\r\n            return;\r\n        }\r\n        if (!hasDocumentSemanticTokensProvider(this._provider, this._model)) {\r\n            // there is no provider\r\n            if (this._currentDocumentResponse) {\r\n                // there are semantic tokens set\r\n                this._model.tokenization.setSemanticTokens(null, false);\r\n            }\r\n            return;\r\n        }\r\n        if (!this._model.isAttachedToEditor()) {\r\n            // this document is not visible, there is no need to fetch semantic tokens for it\r\n            return;\r\n        }\r\n        const cancellationTokenSource = new CancellationTokenSource();\r\n        const lastProvider = this._currentDocumentResponse ? this._currentDocumentResponse.provider : null;\r\n        const lastResultId = this._currentDocumentResponse ? this._currentDocumentResponse.resultId || null : null;\r\n        const request = getDocumentSemanticTokens(this._provider, this._model, lastProvider, lastResultId, cancellationTokenSource.token);\r\n        this._currentDocumentRequestCancellationTokenSource = cancellationTokenSource;\r\n        this._providersChangedDuringRequest = false;\r\n        const pendingChanges = [];\r\n        const contentChangeListener = this._model.onDidChangeContent((e) => {\r\n            pendingChanges.push(e);\r\n        });\r\n        const sw = new StopWatch(false);\r\n        request.then((res) => {\r\n            this._debounceInformation.update(this._model, sw.elapsed());\r\n            this._currentDocumentRequestCancellationTokenSource = null;\r\n            contentChangeListener.dispose();\r\n            if (!res) {\r\n                this._setDocumentSemanticTokens(null, null, null, pendingChanges);\r\n            }\r\n            else {\r\n                const { provider, tokens } = res;\r\n                const styling = this._semanticTokensStylingService.getStyling(provider);\r\n                this._setDocumentSemanticTokens(provider, tokens || null, styling, pendingChanges);\r\n            }\r\n        }, (err) => {\r\n            const isExpectedError = err && (errors.isCancellationError(err) || (typeof err.message === 'string' && err.message.indexOf('busy') !== -1));\r\n            if (!isExpectedError) {\r\n                errors.onUnexpectedError(err);\r\n            }\r\n            // Semantic tokens eats up all errors and considers errors to mean that the result is temporarily not available\r\n            // The API does not have a special error kind to express this...\r\n            this._currentDocumentRequestCancellationTokenSource = null;\r\n            contentChangeListener.dispose();\r\n            if (pendingChanges.length > 0 || this._providersChangedDuringRequest) {\r\n                // More changes occurred while the request was running\r\n                if (!this._fetchDocumentSemanticTokens.isScheduled()) {\r\n                    this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static _copy(src, srcOffset, dest, destOffset, length) {\r\n        // protect against overflows\r\n        length = Math.min(length, dest.length - destOffset, src.length - srcOffset);\r\n        for (let i = 0; i < length; i++) {\r\n            dest[destOffset + i] = src[srcOffset + i];\r\n        }\r\n    }\r\n    _setDocumentSemanticTokens(provider, tokens, styling, pendingChanges) {\r\n        const currentResponse = this._currentDocumentResponse;\r\n        const rescheduleIfNeeded = () => {\r\n            if ((pendingChanges.length > 0 || this._providersChangedDuringRequest) && !this._fetchDocumentSemanticTokens.isScheduled()) {\r\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\r\n            }\r\n        };\r\n        if (this._currentDocumentResponse) {\r\n            this._currentDocumentResponse.dispose();\r\n            this._currentDocumentResponse = null;\r\n        }\r\n        if (this._isDisposed) {\r\n            // disposed!\r\n            if (provider && tokens) {\r\n                provider.releaseDocumentSemanticTokens(tokens.resultId);\r\n            }\r\n            return;\r\n        }\r\n        if (!provider || !styling) {\r\n            this._model.tokenization.setSemanticTokens(null, false);\r\n            return;\r\n        }\r\n        if (!tokens) {\r\n            this._model.tokenization.setSemanticTokens(null, true);\r\n            rescheduleIfNeeded();\r\n            return;\r\n        }\r\n        if (isSemanticTokensEdits(tokens)) {\r\n            if (!currentResponse) {\r\n                // not possible!\r\n                this._model.tokenization.setSemanticTokens(null, true);\r\n                return;\r\n            }\r\n            if (tokens.edits.length === 0) {\r\n                // nothing to do!\r\n                tokens = {\r\n                    resultId: tokens.resultId,\r\n                    data: currentResponse.data\r\n                };\r\n            }\r\n            else {\r\n                let deltaLength = 0;\r\n                for (const edit of tokens.edits) {\r\n                    deltaLength += (edit.data ? edit.data.length : 0) - edit.deleteCount;\r\n                }\r\n                const srcData = currentResponse.data;\r\n                const destData = new Uint32Array(srcData.length + deltaLength);\r\n                let srcLastStart = srcData.length;\r\n                let destLastStart = destData.length;\r\n                for (let i = tokens.edits.length - 1; i >= 0; i--) {\r\n                    const edit = tokens.edits[i];\r\n                    if (edit.start > srcData.length) {\r\n                        styling.warnInvalidEditStart(currentResponse.resultId, tokens.resultId, i, edit.start, srcData.length);\r\n                        // The edits are invalid and there's no way to recover\r\n                        this._model.tokenization.setSemanticTokens(null, true);\r\n                        return;\r\n                    }\r\n                    const copyCount = srcLastStart - (edit.start + edit.deleteCount);\r\n                    if (copyCount > 0) {\r\n                        ModelSemanticColoring_1._copy(srcData, srcLastStart - copyCount, destData, destLastStart - copyCount, copyCount);\r\n                        destLastStart -= copyCount;\r\n                    }\r\n                    if (edit.data) {\r\n                        ModelSemanticColoring_1._copy(edit.data, 0, destData, destLastStart - edit.data.length, edit.data.length);\r\n                        destLastStart -= edit.data.length;\r\n                    }\r\n                    srcLastStart = edit.start;\r\n                }\r\n                if (srcLastStart > 0) {\r\n                    ModelSemanticColoring_1._copy(srcData, 0, destData, 0, srcLastStart);\r\n                }\r\n                tokens = {\r\n                    resultId: tokens.resultId,\r\n                    data: destData\r\n                };\r\n            }\r\n        }\r\n        if (isSemanticTokens(tokens)) {\r\n            this._currentDocumentResponse = new SemanticTokensResponse(provider, tokens.resultId, tokens.data);\r\n            const result = toMultilineTokens2(tokens, styling, this._model.getLanguageId());\r\n            // Adjust incoming semantic tokens\r\n            if (pendingChanges.length > 0) {\r\n                // More changes occurred while the request was running\r\n                // We need to:\r\n                // 1. Adjust incoming semantic tokens\r\n                // 2. Request them again\r\n                for (const change of pendingChanges) {\r\n                    for (const area of result) {\r\n                        for (const singleChange of change.changes) {\r\n                            area.applyEdit(singleChange.range, singleChange.text);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._model.tokenization.setSemanticTokens(result, true);\r\n        }\r\n        else {\r\n            this._model.tokenization.setSemanticTokens(null, true);\r\n        }\r\n        rescheduleIfNeeded();\r\n    }\r\n};\r\nModelSemanticColoring.REQUEST_MIN_DELAY = 300;\r\nModelSemanticColoring.REQUEST_MAX_DELAY = 2000;\r\nModelSemanticColoring = ModelSemanticColoring_1 = __decorate([\r\n    __param(1, ISemanticTokensStylingService),\r\n    __param(2, IThemeService),\r\n    __param(3, ILanguageFeatureDebounceService),\r\n    __param(4, ILanguageFeaturesService)\r\n], ModelSemanticColoring);\r\nclass SemanticTokensResponse {\r\n    constructor(provider, resultId, data) {\r\n        this.provider = provider;\r\n        this.resultId = resultId;\r\n        this.data = data;\r\n    }\r\n    dispose() {\r\n        this.provider.releaseDocumentSemanticTokens(this.resultId);\r\n    }\r\n}\r\nregisterEditorFeature(DocumentSemanticTokensFeature);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { encodeSemanticTokensDto } from '../../../common/services/semanticTokensDto.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nexport function isSemanticTokens(v) {\r\n    return v && !!(v.data);\r\n}\r\nexport function isSemanticTokensEdits(v) {\r\n    return v && Array.isArray(v.edits);\r\n}\r\nexport class DocumentSemanticTokensResult {\r\n    constructor(provider, tokens, error) {\r\n        this.provider = provider;\r\n        this.tokens = tokens;\r\n        this.error = error;\r\n    }\r\n}\r\nexport function hasDocumentSemanticTokensProvider(registry, model) {\r\n    return registry.has(model);\r\n}\r\nfunction getDocumentSemanticTokensProviders(registry, model) {\r\n    const groups = registry.orderedGroups(model);\r\n    return (groups.length > 0 ? groups[0] : []);\r\n}\r\nexport function getDocumentSemanticTokens(registry, model, lastProvider, lastResultId, token) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const providers = getDocumentSemanticTokensProviders(registry, model);\r\n        // Get tokens from all providers at the same time.\r\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\r\n            let result;\r\n            let error = null;\r\n            try {\r\n                result = yield provider.provideDocumentSemanticTokens(model, (provider === lastProvider ? lastResultId : null), token);\r\n            }\r\n            catch (err) {\r\n                error = err;\r\n                result = null;\r\n            }\r\n            if (!result || (!isSemanticTokens(result) && !isSemanticTokensEdits(result))) {\r\n                result = null;\r\n            }\r\n            return new DocumentSemanticTokensResult(provider, result, error);\r\n        })));\r\n        // Try to return the first result with actual tokens or\r\n        // the first result which threw an error (!!)\r\n        for (const result of results) {\r\n            if (result.error) {\r\n                throw result.error;\r\n            }\r\n            if (result.tokens) {\r\n                return result;\r\n            }\r\n        }\r\n        // Return the first result, even if it doesn't have tokens\r\n        if (results.length > 0) {\r\n            return results[0];\r\n        }\r\n        return null;\r\n    });\r\n}\r\nfunction _getDocumentSemanticTokensProviderHighestGroup(registry, model) {\r\n    const result = registry.orderedGroups(model);\r\n    return (result.length > 0 ? result[0] : null);\r\n}\r\nclass DocumentRangeSemanticTokensResult {\r\n    constructor(provider, tokens) {\r\n        this.provider = provider;\r\n        this.tokens = tokens;\r\n    }\r\n}\r\nexport function hasDocumentRangeSemanticTokensProvider(providers, model) {\r\n    return providers.has(model);\r\n}\r\nfunction getDocumentRangeSemanticTokensProviders(providers, model) {\r\n    const groups = providers.orderedGroups(model);\r\n    return (groups.length > 0 ? groups[0] : []);\r\n}\r\nexport function getDocumentRangeSemanticTokens(registry, model, range, token) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const providers = getDocumentRangeSemanticTokensProviders(registry, model);\r\n        // Get tokens from all providers at the same time.\r\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\r\n            let result;\r\n            try {\r\n                result = yield provider.provideDocumentRangeSemanticTokens(model, range, token);\r\n            }\r\n            catch (err) {\r\n                onUnexpectedExternalError(err);\r\n                result = null;\r\n            }\r\n            if (!result || !isSemanticTokens(result)) {\r\n                result = null;\r\n            }\r\n            return new DocumentRangeSemanticTokensResult(provider, result);\r\n        })));\r\n        // Try to return the first result with actual tokens\r\n        for (const result of results) {\r\n            if (result.tokens) {\r\n                return result;\r\n            }\r\n        }\r\n        // Return the first result, even if it doesn't have tokens\r\n        if (results.length > 0) {\r\n            return results[0];\r\n        }\r\n        return null;\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const [uri] = args;\r\n    assertType(uri instanceof URI);\r\n    const model = accessor.get(IModelService).getModel(uri);\r\n    if (!model) {\r\n        return undefined;\r\n    }\r\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\r\n    const providers = _getDocumentSemanticTokensProviderHighestGroup(documentSemanticTokensProvider, model);\r\n    if (!providers) {\r\n        // there is no provider => fall back to a document range semantic tokens provider\r\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokensLegend', uri);\r\n    }\r\n    return providers[0].getLegend();\r\n}));\r\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const [uri] = args;\r\n    assertType(uri instanceof URI);\r\n    const model = accessor.get(IModelService).getModel(uri);\r\n    if (!model) {\r\n        return undefined;\r\n    }\r\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\r\n    if (!hasDocumentSemanticTokensProvider(documentSemanticTokensProvider, model)) {\r\n        // there is no provider => fall back to a document range semantic tokens provider\r\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokens', uri, model.getFullModelRange());\r\n    }\r\n    const r = yield getDocumentSemanticTokens(documentSemanticTokensProvider, model, null, null, CancellationToken.None);\r\n    if (!r) {\r\n        return undefined;\r\n    }\r\n    const { provider, tokens } = r;\r\n    if (!tokens || !isSemanticTokens(tokens)) {\r\n        return undefined;\r\n    }\r\n    const buff = encodeSemanticTokensDto({\r\n        id: 0,\r\n        type: 'full',\r\n        data: tokens.data\r\n    });\r\n    if (tokens.resultId) {\r\n        provider.releaseDocumentSemanticTokens(tokens.resultId);\r\n    }\r\n    return buff;\r\n}));\r\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const [uri, range] = args;\r\n    assertType(uri instanceof URI);\r\n    const model = accessor.get(IModelService).getModel(uri);\r\n    if (!model) {\r\n        return undefined;\r\n    }\r\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\r\n    const providers = getDocumentRangeSemanticTokensProviders(documentRangeSemanticTokensProvider, model);\r\n    if (providers.length === 0) {\r\n        // no providers\r\n        return undefined;\r\n    }\r\n    if (providers.length === 1) {\r\n        // straight forward case, just a single provider\r\n        return providers[0].getLegend();\r\n    }\r\n    if (!range || !Range.isIRange(range)) {\r\n        // if no range is provided, we cannot support multiple providers\r\n        // as we cannot fall back to the one which would give results\r\n        // => return the first legend for backwards compatibility and print a warning\r\n        console.warn(`provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in`);\r\n        return providers[0].getLegend();\r\n    }\r\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\r\n    if (!result) {\r\n        return undefined;\r\n    }\r\n    return result.provider.getLegend();\r\n}));\r\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const [uri, range] = args;\r\n    assertType(uri instanceof URI);\r\n    assertType(Range.isIRange(range));\r\n    const model = accessor.get(IModelService).getModel(uri);\r\n    if (!model) {\r\n        return undefined;\r\n    }\r\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\r\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\r\n    if (!result || !result.tokens) {\r\n        // there is no provider or it didn't return tokens\r\n        return undefined;\r\n    }\r\n    return encodeSemanticTokensDto({\r\n        id: 0,\r\n        type: 'full',\r\n        data: result.tokens.data\r\n    });\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { VSBuffer } from '../../../base/common/buffer.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nfunction reverseEndianness(arr) {\r\n    for (let i = 0, len = arr.length; i < len; i += 4) {\r\n        // flip bytes 0<->3 and 1<->2\r\n        const b0 = arr[i + 0];\r\n        const b1 = arr[i + 1];\r\n        const b2 = arr[i + 2];\r\n        const b3 = arr[i + 3];\r\n        arr[i + 0] = b3;\r\n        arr[i + 1] = b2;\r\n        arr[i + 2] = b1;\r\n        arr[i + 3] = b0;\r\n    }\r\n}\r\nfunction toLittleEndianBuffer(arr) {\r\n    const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\r\n    if (!platform.isLittleEndian()) {\r\n        // the byte order must be changed\r\n        reverseEndianness(uint8Arr);\r\n    }\r\n    return VSBuffer.wrap(uint8Arr);\r\n}\r\nexport function encodeSemanticTokensDto(semanticTokens) {\r\n    const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\r\n    let offset = 0;\r\n    dest[offset++] = semanticTokens.id;\r\n    if (semanticTokens.type === 'full') {\r\n        dest[offset++] = 1 /* EncodedSemanticTokensType.Full */;\r\n        dest[offset++] = semanticTokens.data.length;\r\n        dest.set(semanticTokens.data, offset);\r\n        offset += semanticTokens.data.length;\r\n    }\r\n    else {\r\n        dest[offset++] = 2 /* EncodedSemanticTokensType.Delta */;\r\n        dest[offset++] = semanticTokens.deltas.length;\r\n        for (const delta of semanticTokens.deltas) {\r\n            dest[offset++] = delta.start;\r\n            dest[offset++] = delta.deleteCount;\r\n            if (delta.data) {\r\n                dest[offset++] = delta.data.length;\r\n                dest.set(delta.data, offset);\r\n                offset += delta.data.length;\r\n            }\r\n            else {\r\n                dest[offset++] = 0;\r\n            }\r\n        }\r\n    }\r\n    return toLittleEndianBuffer(dest);\r\n}\r\nfunction encodeSemanticTokensDtoSize(semanticTokens) {\r\n    let result = 0;\r\n    result += (+1 // id\r\n        + 1 // type\r\n    );\r\n    if (semanticTokens.type === 'full') {\r\n        result += (+1 // data length\r\n            + semanticTokens.data.length);\r\n    }\r\n    else {\r\n        result += (+1 // delta count\r\n        );\r\n        result += (+1 // start\r\n            + 1 // deleteCount\r\n            + 1 // data length\r\n        ) * semanticTokens.deltas.length;\r\n        for (const delta of semanticTokens.deltas) {\r\n            if (delta.data) {\r\n                result += delta.data.length;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport const SEMANTIC_HIGHLIGHTING_SETTING_ID = 'editor.semanticHighlighting';\r\nexport function isSemanticColoringEnabled(model, themeService, configurationService) {\r\n    var _a;\r\n    const setting = (_a = configurationService.getValue(SEMANTIC_HIGHLIGHTING_SETTING_ID, { overrideIdentifier: model.getLanguageId(), resource: model.uri })) === null || _a === void 0 ? void 0 : _a.enabled;\r\n    if (typeof setting === 'boolean') {\r\n        return setting;\r\n    }\r\n    return themeService.getColorTheme().semanticHighlighting;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../common/getSemanticTokens.js';\r\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../common/semanticTokensConfig.js';\r\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\r\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\r\n    constructor(editor, _semanticTokensStylingService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\r\n        super();\r\n        this._semanticTokensStylingService = _semanticTokensStylingService;\r\n        this._themeService = _themeService;\r\n        this._configurationService = _configurationService;\r\n        this._editor = editor;\r\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\r\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\r\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\r\n        this._outstandingRequests = [];\r\n        const scheduleTokenizeViewport = () => {\r\n            if (this._editor.hasModel()) {\r\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\r\n            }\r\n        };\r\n        this._register(this._editor.onDidScrollChange(() => {\r\n            scheduleTokenizeViewport();\r\n        }));\r\n        this._register(this._editor.onDidChangeModel(() => {\r\n            this._cancelAll();\r\n            scheduleTokenizeViewport();\r\n        }));\r\n        this._register(this._editor.onDidChangeModelContent((e) => {\r\n            this._cancelAll();\r\n            scheduleTokenizeViewport();\r\n        }));\r\n        this._register(this._provider.onDidChange(() => {\r\n            this._cancelAll();\r\n            scheduleTokenizeViewport();\r\n        }));\r\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\r\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\r\n                this._cancelAll();\r\n                scheduleTokenizeViewport();\r\n            }\r\n        }));\r\n        this._register(this._themeService.onDidColorThemeChange(() => {\r\n            this._cancelAll();\r\n            scheduleTokenizeViewport();\r\n        }));\r\n        scheduleTokenizeViewport();\r\n    }\r\n    _cancelAll() {\r\n        for (const request of this._outstandingRequests) {\r\n            request.cancel();\r\n        }\r\n        this._outstandingRequests = [];\r\n    }\r\n    _removeOutstandingRequest(req) {\r\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\r\n            if (this._outstandingRequests[i] === req) {\r\n                this._outstandingRequests.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    _tokenizeViewportNow() {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (model.tokenization.hasCompleteSemanticTokens()) {\r\n            return;\r\n        }\r\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\r\n            if (model.tokenization.hasSomeSemanticTokens()) {\r\n                model.tokenization.setSemanticTokens(null, false);\r\n            }\r\n            return;\r\n        }\r\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\r\n            if (model.tokenization.hasSomeSemanticTokens()) {\r\n                model.tokenization.setSemanticTokens(null, false);\r\n            }\r\n            return;\r\n        }\r\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\r\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\r\n    }\r\n    _requestRange(model, range) {\r\n        const requestVersionId = model.getVersionId();\r\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\r\n        const sw = new StopWatch(false);\r\n        request.then((r) => {\r\n            this._debounceInformation.update(model, sw.elapsed());\r\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\r\n                return;\r\n            }\r\n            const { provider, tokens: result } = r;\r\n            const styling = this._semanticTokensStylingService.getStyling(provider);\r\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\r\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\r\n        return request;\r\n    }\r\n};\r\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\r\nViewportSemanticTokensContribution = __decorate([\r\n    __param(1, ISemanticTokensStylingService),\r\n    __param(2, IThemeService),\r\n    __param(3, IConfigurationService),\r\n    __param(4, ILanguageFeatureDebounceService),\r\n    __param(5, ILanguageFeaturesService)\r\n], ViewportSemanticTokensContribution);\r\nexport { ViewportSemanticTokensContribution };\r\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar SmartSelectController_1;\r\nimport * as arrays from '../../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\r\nimport { WordSelectionRangeProvider } from './wordSelections.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nclass SelectionRanges {\r\n    constructor(index, ranges) {\r\n        this.index = index;\r\n        this.ranges = ranges;\r\n    }\r\n    mov(fwd) {\r\n        const index = this.index + (fwd ? 1 : -1);\r\n        if (index < 0 || index >= this.ranges.length) {\r\n            return this;\r\n        }\r\n        const res = new SelectionRanges(index, this.ranges);\r\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\r\n            // next range equals this range, retry with next-next\r\n            return res.mov(fwd);\r\n        }\r\n        return res;\r\n    }\r\n}\r\nlet SmartSelectController = SmartSelectController_1 = class SmartSelectController {\r\n    static get(editor) {\r\n        return editor.getContribution(SmartSelectController_1.ID);\r\n    }\r\n    constructor(_editor, _languageFeaturesService) {\r\n        this._editor = _editor;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._ignoreSelection = false;\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\r\n    }\r\n    run(forward) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel()) {\r\n                return;\r\n            }\r\n            const selections = this._editor.getSelections();\r\n            const model = this._editor.getModel();\r\n            if (!this._state) {\r\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(112 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\r\n                    var _a;\r\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\r\n                        // invalid result\r\n                        return;\r\n                    }\r\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\r\n                        // invalid editor state\r\n                        return;\r\n                    }\r\n                    for (let i = 0; i < ranges.length; i++) {\r\n                        ranges[i] = ranges[i].filter(range => {\r\n                            // filter ranges inside the selection\r\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\r\n                        });\r\n                        // prepend current selection\r\n                        ranges[i].unshift(selections[i]);\r\n                    }\r\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\r\n                    // listen to caret move and forget about state\r\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\r\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\r\n                        var _a;\r\n                        if (!this._ignoreSelection) {\r\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\r\n                            this._state = undefined;\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            if (!this._state) {\r\n                // no state\r\n                return;\r\n            }\r\n            this._state = this._state.map(state => state.mov(forward));\r\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\r\n            this._ignoreSelection = true;\r\n            try {\r\n                this._editor.setSelections(newSelections);\r\n            }\r\n            finally {\r\n                this._ignoreSelection = false;\r\n            }\r\n        });\r\n    }\r\n};\r\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\r\nSmartSelectController = SmartSelectController_1 = __decorate([\r\n    __param(1, ILanguageFeaturesService)\r\n], SmartSelectController);\r\nexport { SmartSelectController };\r\nclass AbstractSmartSelect extends EditorAction {\r\n    constructor(forward, opts) {\r\n        super(opts);\r\n        this._forward = forward;\r\n    }\r\n    run(_accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const controller = SmartSelectController.get(editor);\r\n            if (controller) {\r\n                yield controller.run(this._forward);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass GrowSelectionAction extends AbstractSmartSelect {\r\n    constructor() {\r\n        super(true, {\r\n            id: 'editor.action.smartSelect.expand',\r\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\r\n            alias: 'Expand Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\r\n                mac: {\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\r\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '1_basic',\r\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n}\r\n// renamed command id\r\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\r\nclass ShrinkSelectionAction extends AbstractSmartSelect {\r\n    constructor() {\r\n        super(false, {\r\n            id: 'editor.action.smartSelect.shrink',\r\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\r\n            alias: 'Shrink Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\r\n                mac: {\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\r\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\r\n                },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarSelectionMenu,\r\n                group: '1_basic',\r\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\r\n                order: 3\r\n            }\r\n        });\r\n    }\r\n}\r\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(GrowSelectionAction);\r\nregisterEditorAction(ShrinkSelectionAction);\r\nexport function provideSelectionRanges(registry, model, positions, options, token) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const providers = registry.all(model)\r\n            .concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\r\n        if (providers.length === 1) {\r\n            // add word selection and bracket selection when no provider exists\r\n            providers.unshift(new BracketSelectionRangeProvider());\r\n        }\r\n        const work = [];\r\n        const allRawRanges = [];\r\n        for (const provider of providers) {\r\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\r\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\r\n                    for (let i = 0; i < positions.length; i++) {\r\n                        if (!allRawRanges[i]) {\r\n                            allRawRanges[i] = [];\r\n                        }\r\n                        for (const oneProviderRanges of allProviderRanges[i]) {\r\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\r\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }, onUnexpectedExternalError));\r\n        }\r\n        yield Promise.all(work);\r\n        return allRawRanges.map(oneRawRanges => {\r\n            if (oneRawRanges.length === 0) {\r\n                return [];\r\n            }\r\n            // sort all by start/end position\r\n            oneRawRanges.sort((a, b) => {\r\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\r\n                    return 1;\r\n                }\r\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\r\n                    return -1;\r\n                }\r\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\r\n                    return -1;\r\n                }\r\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\r\n                    return 1;\r\n                }\r\n                else {\r\n                    return 0;\r\n                }\r\n            });\r\n            // remove ranges that don't contain the former range or that are equal to the\r\n            // former range\r\n            const oneRanges = [];\r\n            let last;\r\n            for (const range of oneRawRanges) {\r\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\r\n                    oneRanges.push(range);\r\n                    last = range;\r\n                }\r\n            }\r\n            if (!options.selectLeadingAndTrailingWhitespace) {\r\n                return oneRanges;\r\n            }\r\n            // add ranges that expand trivia at line starts and ends whenever a range\r\n            // wraps onto the a new line\r\n            const oneRangesWithTrivia = [oneRanges[0]];\r\n            for (let i = 1; i < oneRanges.length; i++) {\r\n                const prev = oneRanges[i - 1];\r\n                const cur = oneRanges[i];\r\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\r\n                    // add line/block range without leading/failing whitespace\r\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\r\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\r\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\r\n                    }\r\n                    // add line/block range\r\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\r\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\r\n                        oneRangesWithTrivia.push(rangeFull);\r\n                    }\r\n                }\r\n                oneRangesWithTrivia.push(cur);\r\n            }\r\n            return oneRangesWithTrivia;\r\n        });\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const [resource, positions] = args;\r\n        assertType(URI.isUri(resource));\r\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\r\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\r\n        try {\r\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true, selectSubwords: true }, CancellationToken.None);\r\n        }\r\n        finally {\r\n            reference.dispose();\r\n        }\r\n    });\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nexport class WordSelectionRangeProvider {\r\n    constructor(selectSubwords = true) {\r\n        this.selectSubwords = selectSubwords;\r\n    }\r\n    provideSelectionRanges(model, positions) {\r\n        const result = [];\r\n        for (const position of positions) {\r\n            const bucket = [];\r\n            result.push(bucket);\r\n            if (this.selectSubwords) {\r\n                this._addInWordRanges(bucket, model, position);\r\n            }\r\n            this._addWordRanges(bucket, model, position);\r\n            this._addWhitespaceLine(bucket, model, position);\r\n            bucket.push({ range: model.getFullModelRange() });\r\n        }\r\n        return result;\r\n    }\r\n    _addInWordRanges(bucket, model, pos) {\r\n        const obj = model.getWordAtPosition(pos);\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        const { word, startColumn } = obj;\r\n        const offset = pos.column - startColumn;\r\n        let start = offset;\r\n        let end = offset;\r\n        let lastCh = 0;\r\n        // LEFT anchor (start)\r\n        for (; start >= 0; start--) {\r\n            const ch = word.charCodeAt(start);\r\n            if ((start !== offset) && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\r\n                // foo-bar OR foo_bar\r\n                break;\r\n            }\r\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\r\n                // fooBar\r\n                break;\r\n            }\r\n            lastCh = ch;\r\n        }\r\n        start += 1;\r\n        // RIGHT anchor (end)\r\n        for (; end < word.length; end++) {\r\n            const ch = word.charCodeAt(end);\r\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\r\n                // fooBar\r\n                break;\r\n            }\r\n            else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\r\n                // foo-bar OR foo_bar\r\n                break;\r\n            }\r\n            lastCh = ch;\r\n        }\r\n        if (start < end) {\r\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\r\n        }\r\n    }\r\n    _addWordRanges(bucket, model, pos) {\r\n        const word = model.getWordAtPosition(pos);\r\n        if (word) {\r\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\r\n        }\r\n    }\r\n    _addWhitespaceLine(bucket, model, pos) {\r\n        if (model.getLineLength(pos.lineNumber) > 0\r\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\r\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\r\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ToggleStickyScroll, FocusStickyScroll, SelectEditor, SelectPreviousStickyScrollLine, SelectNextStickyScrollLine, GoToStickyScrollLine } from './stickyScrollActions.js';\r\nimport { StickyScrollController } from './stickyScrollController.js';\r\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\r\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nregisterAction2(ToggleStickyScroll);\r\nregisterAction2(FocusStickyScroll);\r\nregisterAction2(SelectPreviousStickyScrollLine);\r\nregisterAction2(SelectNextStickyScrollLine);\r\nregisterAction2(GoToStickyScrollLine);\r\nregisterAction2(SelectEditor);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\r\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { StickyScrollController } from './stickyScrollController.js';\r\nexport class ToggleStickyScroll extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.toggleStickyScroll',\r\n            title: {\r\n                value: localize('toggleStickyScroll', \"Toggle Sticky Scroll\"),\r\n                mnemonicTitle: localize({ key: 'mitoggleStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Sticky Scroll\"),\r\n                original: 'Toggle Sticky Scroll',\r\n            },\r\n            category: Categories.View,\r\n            toggled: {\r\n                condition: ContextKeyExpr.equals('config.editor.stickyScroll.enabled', true),\r\n                title: localize('stickyScroll', \"Sticky Scroll\"),\r\n                mnemonicTitle: localize({ key: 'miStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Sticky Scroll\"),\r\n            },\r\n            menu: [\r\n                { id: MenuId.CommandPalette },\r\n                { id: MenuId.MenubarAppearanceMenu, group: '4_editor', order: 3 },\r\n                { id: MenuId.StickyScrollContext }\r\n            ]\r\n        });\r\n    }\r\n    run(accessor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const configurationService = accessor.get(IConfigurationService);\r\n            const newValue = !configurationService.getValue('editor.stickyScroll.enabled');\r\n            return configurationService.updateValue('editor.stickyScroll.enabled', newValue);\r\n        });\r\n    }\r\n}\r\nconst weight = 100 /* KeybindingWeight.EditorContrib */;\r\nexport class FocusStickyScroll extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.focusStickyScroll',\r\n            title: {\r\n                value: localize('focusStickyScroll', \"Focus Sticky Scroll\"),\r\n                mnemonicTitle: localize({ key: 'mifocusStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Focus Sticky Scroll\"),\r\n                original: 'Focus Sticky Scroll',\r\n            },\r\n            precondition: ContextKeyExpr.and(ContextKeyExpr.has('config.editor.stickyScroll.enabled'), EditorContextKeys.stickyScrollVisible),\r\n            menu: [\r\n                { id: MenuId.CommandPalette },\r\n            ]\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor) {\r\n        var _a;\r\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focus();\r\n    }\r\n}\r\nexport class SelectNextStickyScrollLine extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.selectNextStickyScrollLine',\r\n            title: {\r\n                value: localize('selectNextStickyScrollLine.title', \"Select next sticky scroll line\"),\r\n                original: 'Select next sticky scroll line'\r\n            },\r\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\r\n            keybinding: {\r\n                weight,\r\n                primary: 18 /* KeyCode.DownArrow */\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor) {\r\n        var _a;\r\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusNext();\r\n    }\r\n}\r\nexport class SelectPreviousStickyScrollLine extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.selectPreviousStickyScrollLine',\r\n            title: {\r\n                value: localize('selectPreviousStickyScrollLine.title', \"Select previous sticky scroll line\"),\r\n                original: 'Select previous sticky scroll line'\r\n            },\r\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\r\n            keybinding: {\r\n                weight,\r\n                primary: 16 /* KeyCode.UpArrow */\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor) {\r\n        var _a;\r\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusPrevious();\r\n    }\r\n}\r\nexport class GoToStickyScrollLine extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.goToFocusedStickyScrollLine',\r\n            title: {\r\n                value: localize('goToFocusedStickyScrollLine.title', \"Go to focused sticky scroll line\"),\r\n                original: 'Go to focused sticky scroll line'\r\n            },\r\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\r\n            keybinding: {\r\n                weight,\r\n                primary: 3 /* KeyCode.Enter */\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor) {\r\n        var _a;\r\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToFocused();\r\n    }\r\n}\r\nexport class SelectEditor extends EditorAction2 {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.selectEditor',\r\n            title: {\r\n                value: localize('selectEditor.title', \"Select Editor\"),\r\n                original: 'Select Editor'\r\n            },\r\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\r\n            keybinding: {\r\n                weight,\r\n                primary: 9 /* KeyCode.Escape */\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(_accessor, editor) {\r\n        var _a;\r\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectEditor();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { localize } from '../../../nls.js';\r\nexport const Categories = Object.freeze({\r\n    View: { value: localize('view', \"View\"), original: 'View' },\r\n    Help: { value: localize('help', \"Help\"), original: 'Help' },\r\n    Test: { value: localize('test', \"Test\"), original: 'Test' },\r\n    File: { value: localize('file', \"File\"), original: 'File' },\r\n    Preferences: { value: localize('preferences', \"Preferences\"), original: 'Preferences' },\r\n    Developer: { value: localize({ key: 'developer', comment: ['A developer on Code itself or someone diagnosing issues in Code'] }, \"Developer\"), original: 'Developer' }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar StickyScrollController_1;\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\r\nimport { StickyLineCandidateProvider } from './stickyScrollProvider.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { getDefinitionsAtPosition } from '../../gotoSymbol/browser/goToSymbol.js';\r\nimport { goToDefinitionWithLocation } from '../../inlayHints/browser/inlayHintsLocations.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { StickyRange } from './stickyScrollElement.js';\r\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\r\nimport { FoldingController } from '../../folding/browser/folding.js';\r\nimport { toggleCollapseState } from '../../folding/browser/foldingModel.js';\r\nlet StickyScrollController = StickyScrollController_1 = class StickyScrollController extends Disposable {\r\n    constructor(_editor, _contextMenuService, _languageFeaturesService, _instaService, _languageConfigurationService, _languageFeatureDebounceService, _contextKeyService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._contextMenuService = _contextMenuService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._instaService = _instaService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._sessionStore = new DisposableStore();\r\n        this._foldingModel = null;\r\n        this._maxStickyLines = Number.MAX_SAFE_INTEGER;\r\n        this._candidateDefinitionsLength = -1;\r\n        this._focusedStickyElementIndex = -1;\r\n        this._enabled = false;\r\n        this._focused = false;\r\n        this._positionRevealed = false;\r\n        this._onMouseDown = false;\r\n        this._endLineNumbers = [];\r\n        this._showEndForLine = null;\r\n        this._stickyScrollWidget = new StickyScrollWidget(this._editor);\r\n        this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, _languageFeaturesService, _languageConfigurationService);\r\n        this._register(this._stickyScrollWidget);\r\n        this._register(this._stickyLineCandidateProvider);\r\n        this._widgetState = new StickyScrollWidgetState([], [], 0);\r\n        this._readConfiguration();\r\n        const stickyScrollDomNode = this._stickyScrollWidget.getDomNode();\r\n        this._register(this._editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(114 /* EditorOption.stickyScroll */)\r\n                || e.hasChanged(72 /* EditorOption.minimap */)\r\n                || e.hasChanged(66 /* EditorOption.lineHeight */)\r\n                || e.hasChanged(109 /* EditorOption.showFoldingControls */)) {\r\n                this._readConfiguration();\r\n            }\r\n        }));\r\n        this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.CONTEXT_MENU, (event) => __awaiter(this, void 0, void 0, function* () {\r\n            this._onContextMenu(event);\r\n        })));\r\n        this._stickyScrollFocusedContextKey = EditorContextKeys.stickyScrollFocused.bindTo(this._contextKeyService);\r\n        this._stickyScrollVisibleContextKey = EditorContextKeys.stickyScrollVisible.bindTo(this._contextKeyService);\r\n        const focusTracker = this._register(dom.trackFocus(stickyScrollDomNode));\r\n        this._register(focusTracker.onDidBlur(_ => {\r\n            // Suppose that the blurring is caused by scrolling, then keep the focus on the sticky scroll\r\n            // This is determined by the fact that the height of the widget has become zero and there has been no position revealing\r\n            if (this._positionRevealed === false && stickyScrollDomNode.clientHeight === 0) {\r\n                this._focusedStickyElementIndex = -1;\r\n                this.focus();\r\n            }\r\n            // In all other casees, dispose the focus on the sticky scroll\r\n            else {\r\n                this._disposeFocusStickyScrollStore();\r\n            }\r\n        }));\r\n        this._register(focusTracker.onDidFocus(_ => {\r\n            this.focus();\r\n        }));\r\n        this._registerMouseListeners();\r\n        // Suppose that mouse down on the sticky scroll, then do not focus on the sticky scroll because this will be followed by the revealing of a position\r\n        this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.MOUSE_DOWN, (e) => {\r\n            this._onMouseDown = true;\r\n        }));\r\n    }\r\n    static get(editor) {\r\n        return editor.getContribution(StickyScrollController_1.ID);\r\n    }\r\n    _disposeFocusStickyScrollStore() {\r\n        var _a;\r\n        this._stickyScrollFocusedContextKey.set(false);\r\n        (_a = this._focusDisposableStore) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._focused = false;\r\n        this._positionRevealed = false;\r\n        this._onMouseDown = false;\r\n    }\r\n    focus() {\r\n        // If the mouse is down, do not focus on the sticky scroll\r\n        if (this._onMouseDown) {\r\n            this._onMouseDown = false;\r\n            this._editor.focus();\r\n            return;\r\n        }\r\n        const focusState = this._stickyScrollFocusedContextKey.get();\r\n        if (focusState === true) {\r\n            return;\r\n        }\r\n        this._focused = true;\r\n        this._focusDisposableStore = new DisposableStore();\r\n        this._stickyScrollFocusedContextKey.set(true);\r\n        this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumbers.length - 1;\r\n        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\r\n    }\r\n    focusNext() {\r\n        if (this._focusedStickyElementIndex < this._stickyScrollWidget.lineNumberCount - 1) {\r\n            this._focusNav(true);\r\n        }\r\n    }\r\n    focusPrevious() {\r\n        if (this._focusedStickyElementIndex > 0) {\r\n            this._focusNav(false);\r\n        }\r\n    }\r\n    selectEditor() {\r\n        this._editor.focus();\r\n    }\r\n    // True is next, false is previous\r\n    _focusNav(direction) {\r\n        this._focusedStickyElementIndex = direction ? this._focusedStickyElementIndex + 1 : this._focusedStickyElementIndex - 1;\r\n        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\r\n    }\r\n    goToFocused() {\r\n        const lineNumbers = this._stickyScrollWidget.lineNumbers;\r\n        this._disposeFocusStickyScrollStore();\r\n        this._revealPosition({ lineNumber: lineNumbers[this._focusedStickyElementIndex], column: 1 });\r\n    }\r\n    _revealPosition(position) {\r\n        this._reveaInEditor(position, () => this._editor.revealPosition(position));\r\n    }\r\n    _revealLineInCenterIfOutsideViewport(position) {\r\n        this._reveaInEditor(position, () => this._editor.revealLineInCenterIfOutsideViewport(position.lineNumber, 0 /* ScrollType.Smooth */));\r\n    }\r\n    _reveaInEditor(position, revealFunction) {\r\n        if (this._focused) {\r\n            this._disposeFocusStickyScrollStore();\r\n        }\r\n        this._positionRevealed = true;\r\n        revealFunction();\r\n        this._editor.setSelection(Range.fromPositions(position));\r\n        this._editor.focus();\r\n    }\r\n    _registerMouseListeners() {\r\n        const sessionStore = this._register(new DisposableStore());\r\n        const gesture = this._register(new ClickLinkGesture(this._editor, {\r\n            extractLineNumberFromMouseEvent: (e) => {\r\n                const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\r\n                return position ? position.lineNumber : 0;\r\n            }\r\n        }));\r\n        const getMouseEventTarget = (mouseEvent) => {\r\n            if (!this._editor.hasModel()) {\r\n                return null;\r\n            }\r\n            if (mouseEvent.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || mouseEvent.target.detail !== this._stickyScrollWidget.getId()) {\r\n                // not hovering over our widget\r\n                return null;\r\n            }\r\n            const mouseTargetElement = mouseEvent.target.element;\r\n            if (!mouseTargetElement || mouseTargetElement.innerText !== mouseTargetElement.innerHTML) {\r\n                // not on a span element rendering text\r\n                return null;\r\n            }\r\n            const position = this._stickyScrollWidget.getEditorPositionFromNode(mouseTargetElement);\r\n            if (!position) {\r\n                // not hovering a sticky scroll line\r\n                return null;\r\n            }\r\n            return {\r\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column + mouseTargetElement.innerText.length),\r\n                textElement: mouseTargetElement\r\n            };\r\n        };\r\n        const stickyScrollWidgetDomNode = this._stickyScrollWidget.getDomNode();\r\n        this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.CLICK, (mouseEvent) => {\r\n            if (mouseEvent.ctrlKey || mouseEvent.altKey || mouseEvent.metaKey) {\r\n                // modifier pressed\r\n                return;\r\n            }\r\n            if (!mouseEvent.leftButton) {\r\n                // not left click\r\n                return;\r\n            }\r\n            if (mouseEvent.shiftKey) {\r\n                // shift click\r\n                const lineIndex = this._stickyScrollWidget.getLineIndexFromChildDomNode(mouseEvent.target);\r\n                if (lineIndex === null) {\r\n                    return;\r\n                }\r\n                const position = new Position(this._endLineNumbers[lineIndex], 1);\r\n                this._revealLineInCenterIfOutsideViewport(position);\r\n                return;\r\n            }\r\n            const isInFoldingIconDomNode = this._stickyScrollWidget.isInFoldingIconDomNode(mouseEvent.target);\r\n            if (isInFoldingIconDomNode) {\r\n                // clicked on folding icon\r\n                const lineNumber = this._stickyScrollWidget.getLineNumberFromChildDomNode(mouseEvent.target);\r\n                this._toggleFoldingRegionForLine(lineNumber);\r\n                return;\r\n            }\r\n            const isInStickyLine = this._stickyScrollWidget.isInStickyLine(mouseEvent.target);\r\n            if (!isInStickyLine) {\r\n                return;\r\n            }\r\n            // normal click\r\n            let position = this._stickyScrollWidget.getEditorPositionFromNode(mouseEvent.target);\r\n            if (!position) {\r\n                const lineNumber = this._stickyScrollWidget.getLineNumberFromChildDomNode(mouseEvent.target);\r\n                if (lineNumber === null) {\r\n                    // not hovering a sticky scroll line\r\n                    return;\r\n                }\r\n                position = new Position(lineNumber, 1);\r\n            }\r\n            this._revealPosition(position);\r\n        }));\r\n        this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_MOVE, (mouseEvent) => {\r\n            if (mouseEvent.shiftKey) {\r\n                const currentEndForLineIndex = this._stickyScrollWidget.getLineIndexFromChildDomNode(mouseEvent.target);\r\n                if (currentEndForLineIndex === null || this._showEndForLine !== null && this._showEndForLine === currentEndForLineIndex) {\r\n                    return;\r\n                }\r\n                this._showEndForLine = currentEndForLineIndex;\r\n                this._renderStickyScroll();\r\n                return;\r\n            }\r\n            if (this._showEndForLine !== null) {\r\n                this._showEndForLine = null;\r\n                this._renderStickyScroll();\r\n            }\r\n        }));\r\n        this._register(dom.addDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_LEAVE, (e) => {\r\n            if (this._showEndForLine !== null) {\r\n                this._showEndForLine = null;\r\n                this._renderStickyScroll();\r\n            }\r\n        }));\r\n        this._register(gesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, _keyboardEvent]) => {\r\n            const mouseTarget = getMouseEventTarget(mouseEvent);\r\n            if (!mouseTarget || !mouseEvent.hasTriggerModifier || !this._editor.hasModel()) {\r\n                sessionStore.clear();\r\n                return;\r\n            }\r\n            const { range, textElement } = mouseTarget;\r\n            if (!range.equalsRange(this._stickyRangeProjectedOnEditor)) {\r\n                this._stickyRangeProjectedOnEditor = range;\r\n                sessionStore.clear();\r\n            }\r\n            else if (textElement.style.textDecoration === 'underline') {\r\n                return;\r\n            }\r\n            const cancellationToken = new CancellationTokenSource();\r\n            sessionStore.add(toDisposable(() => cancellationToken.dispose(true)));\r\n            let currentHTMLChild;\r\n            getDefinitionsAtPosition(this._languageFeaturesService.definitionProvider, this._editor.getModel(), new Position(range.startLineNumber, range.startColumn + 1), cancellationToken.token).then((candidateDefinitions => {\r\n                if (cancellationToken.token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                if (candidateDefinitions.length !== 0) {\r\n                    this._candidateDefinitionsLength = candidateDefinitions.length;\r\n                    const childHTML = textElement;\r\n                    if (currentHTMLChild !== childHTML) {\r\n                        sessionStore.clear();\r\n                        currentHTMLChild = childHTML;\r\n                        currentHTMLChild.style.textDecoration = 'underline';\r\n                        sessionStore.add(toDisposable(() => {\r\n                            currentHTMLChild.style.textDecoration = 'none';\r\n                        }));\r\n                    }\r\n                    else if (!currentHTMLChild) {\r\n                        currentHTMLChild = childHTML;\r\n                        currentHTMLChild.style.textDecoration = 'underline';\r\n                        sessionStore.add(toDisposable(() => {\r\n                            currentHTMLChild.style.textDecoration = 'none';\r\n                        }));\r\n                    }\r\n                }\r\n                else {\r\n                    sessionStore.clear();\r\n                }\r\n            }));\r\n        }));\r\n        this._register(gesture.onCancel(() => {\r\n            sessionStore.clear();\r\n        }));\r\n        this._register(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\r\n            if (e.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || e.target.detail !== this._stickyScrollWidget.getId()) {\r\n                // not hovering over our widget\r\n                return;\r\n            }\r\n            const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\r\n            if (!position) {\r\n                // not hovering a sticky scroll line\r\n                return;\r\n            }\r\n            if (this._candidateDefinitionsLength > 1) {\r\n                if (this._focused) {\r\n                    this._disposeFocusStickyScrollStore();\r\n                }\r\n                this._revealPosition({ lineNumber: position.lineNumber, column: 1 });\r\n            }\r\n            this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, { uri: this._editor.getModel().uri, range: this._stickyRangeProjectedOnEditor });\r\n        })));\r\n    }\r\n    _onContextMenu(e) {\r\n        const event = new StandardMouseEvent(e);\r\n        this._contextMenuService.showContextMenu({\r\n            menuId: MenuId.StickyScrollContext,\r\n            getAnchor: () => event,\r\n        });\r\n    }\r\n    _toggleFoldingRegionForLine(line) {\r\n        if (!this._foldingModel || line === null) {\r\n            return;\r\n        }\r\n        const stickyLine = this._stickyScrollWidget.getStickyLineForLine(line);\r\n        const foldingIcon = stickyLine === null || stickyLine === void 0 ? void 0 : stickyLine.foldingIcon;\r\n        if (!foldingIcon) {\r\n            return;\r\n        }\r\n        toggleCollapseState(this._foldingModel, Number.MAX_VALUE, [line]);\r\n        foldingIcon.isCollapsed = !foldingIcon.isCollapsed;\r\n        const scrollTop = (foldingIcon.isCollapsed ?\r\n            this._editor.getTopForLineNumber(foldingIcon.foldingEndLine)\r\n            : this._editor.getTopForLineNumber(foldingIcon.foldingStartLine))\r\n            - this._editor.getOption(66 /* EditorOption.lineHeight */) * stickyLine.index + 1;\r\n        this._editor.setScrollTop(scrollTop);\r\n        this._renderStickyScroll(line);\r\n    }\r\n    _readConfiguration() {\r\n        const options = this._editor.getOption(114 /* EditorOption.stickyScroll */);\r\n        if (options.enabled === false) {\r\n            this._editor.removeOverlayWidget(this._stickyScrollWidget);\r\n            this._sessionStore.clear();\r\n            this._enabled = false;\r\n            return;\r\n        }\r\n        else if (options.enabled && !this._enabled) {\r\n            // When sticky scroll was just enabled, add the listeners on the sticky scroll\r\n            this._editor.addOverlayWidget(this._stickyScrollWidget);\r\n            this._sessionStore.add(this._editor.onDidScrollChange((e) => {\r\n                if (e.scrollTopChanged) {\r\n                    this._showEndForLine = null;\r\n                    this._renderStickyScroll();\r\n                }\r\n            }));\r\n            this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\r\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\r\n            this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => {\r\n                this._showEndForLine = null;\r\n                this._renderStickyScroll();\r\n            }));\r\n            this._enabled = true;\r\n        }\r\n        const lineNumberOption = this._editor.getOption(67 /* EditorOption.lineNumbers */);\r\n        if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\r\n            this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => {\r\n                this._showEndForLine = null;\r\n                this._renderStickyScroll();\r\n            }));\r\n        }\r\n    }\r\n    _needsUpdate(event) {\r\n        const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\r\n        for (const stickyLineNumber of stickyLineNumbers) {\r\n            for (const range of event.ranges) {\r\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _onTokensChange(event) {\r\n        if (this._needsUpdate(event)) {\r\n            // Rebuilding the whole widget from line -1\r\n            this._renderStickyScroll(-1);\r\n        }\r\n    }\r\n    _onDidResize() {\r\n        const layoutInfo = this._editor.getLayoutInfo();\r\n        // Make sure sticky scroll doesn't take up more than 25% of the editor\r\n        const theoreticalLines = layoutInfo.height / this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n        this._maxStickyLines = Math.round(theoreticalLines * .25);\r\n    }\r\n    _renderStickyScroll(rebuildFromLine = Infinity) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const model = this._editor.getModel();\r\n            if (!model || model.isTooLargeForTokenization()) {\r\n                this._foldingModel = null;\r\n                this._stickyScrollWidget.setState(undefined, null, rebuildFromLine);\r\n                return;\r\n            }\r\n            const stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\r\n            if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\r\n                this._foldingModel = (_b = yield ((_a = FoldingController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.getFoldingModel())) !== null && _b !== void 0 ? _b : null;\r\n                this._widgetState = this.findScrollWidgetState();\r\n                this._stickyScrollVisibleContextKey.set(!(this._widgetState.startLineNumbers.length === 0));\r\n                if (!this._focused) {\r\n                    this._stickyScrollWidget.setState(this._widgetState, this._foldingModel, rebuildFromLine);\r\n                }\r\n                else {\r\n                    // Suppose that previously the sticky scroll widget had height 0, then if there are visible lines, set the last line as focused\r\n                    if (this._focusedStickyElementIndex === -1) {\r\n                        this._stickyScrollWidget.setState(this._widgetState, this._foldingModel, rebuildFromLine);\r\n                        this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\r\n                        if (this._focusedStickyElementIndex !== -1) {\r\n                            this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\r\n                        }\r\n                    }\r\n                    else {\r\n                        const focusedStickyElementLineNumber = this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];\r\n                        this._stickyScrollWidget.setState(this._widgetState, this._foldingModel, rebuildFromLine);\r\n                        // Suppose that after setting the state, there are no sticky lines, set the focused index to -1\r\n                        if (this._stickyScrollWidget.lineNumberCount === 0) {\r\n                            this._focusedStickyElementIndex = -1;\r\n                        }\r\n                        else {\r\n                            const previousFocusedLineNumberExists = this._stickyScrollWidget.lineNumbers.includes(focusedStickyElementLineNumber);\r\n                            // If the line number is still there, do not change anything\r\n                            // If the line number is not there, set the new focused line to be the last line\r\n                            if (!previousFocusedLineNumberExists) {\r\n                                this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\r\n                            }\r\n                            this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    findScrollWidgetState() {\r\n        const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n        const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(114 /* EditorOption.stickyScroll */).maxLineCount);\r\n        const scrollTop = this._editor.getScrollTop();\r\n        let lastLineRelativePosition = 0;\r\n        const startLineNumbers = [];\r\n        const endLineNumbers = [];\r\n        const arrayVisibleRanges = this._editor.getVisibleRanges();\r\n        if (arrayVisibleRanges.length !== 0) {\r\n            const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\r\n            const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\r\n            for (const range of candidateRanges) {\r\n                const start = range.startLineNumber;\r\n                const end = range.endLineNumber;\r\n                const depth = range.nestingDepth;\r\n                if (end - start > 0) {\r\n                    const topOfElementAtDepth = (depth - 1) * lineHeight;\r\n                    const bottomOfElementAtDepth = depth * lineHeight;\r\n                    const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\r\n                    const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\r\n                    const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\r\n                    if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\r\n                        startLineNumbers.push(start);\r\n                        endLineNumbers.push(end + 1);\r\n                        lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\r\n                        break;\r\n                    }\r\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\r\n                        startLineNumbers.push(start);\r\n                        endLineNumbers.push(end + 1);\r\n                    }\r\n                    if (startLineNumbers.length === maxNumberStickyLines) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._endLineNumbers = endLineNumbers;\r\n        return new StickyScrollWidgetState(startLineNumbers, endLineNumbers, lastLineRelativePosition, this._showEndForLine);\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._sessionStore.dispose();\r\n    }\r\n};\r\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\r\nStickyScrollController = StickyScrollController_1 = __decorate([\r\n    __param(1, IContextMenuService),\r\n    __param(2, ILanguageFeaturesService),\r\n    __param(3, IInstantiationService),\r\n    __param(4, ILanguageConfigurationService),\r\n    __param(5, ILanguageFeatureDebounceService),\r\n    __param(6, IContextKeyService)\r\n], StickyScrollController);\r\nexport { StickyScrollController };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\r\nimport { equals } from '../../../../base/common/arrays.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport './stickyScroll.css';\r\nimport { getColumnOfNodeOffset } from '../../../browser/viewParts/lines/viewLine.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\r\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\r\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\r\nimport { foldingCollapsedIcon, foldingExpandedIcon } from '../../folding/browser/foldingDecorations.js';\r\nexport class StickyScrollWidgetState {\r\n    constructor(startLineNumbers, endLineNumbers, lastLineRelativePosition, showEndForLine = null) {\r\n        this.startLineNumbers = startLineNumbers;\r\n        this.endLineNumbers = endLineNumbers;\r\n        this.lastLineRelativePosition = lastLineRelativePosition;\r\n        this.showEndForLine = showEndForLine;\r\n    }\r\n    equals(other) {\r\n        return !!other\r\n            && this.lastLineRelativePosition === other.lastLineRelativePosition\r\n            && this.showEndForLine === other.showEndForLine\r\n            && equals(this.startLineNumbers, other.startLineNumbers)\r\n            && equals(this.endLineNumbers, other.endLineNumbers);\r\n    }\r\n}\r\nconst _ttPolicy = createTrustedTypesPolicy('stickyScrollViewLayer', { createHTML: value => value });\r\nconst STICKY_INDEX_ATTR = 'data-sticky-line-index';\r\nconst STICKY_IS_LINE_ATTR = 'data-sticky-is-line';\r\nconst STICKY_IS_LINE_NUMBER_ATTR = 'data-sticky-is-line-number';\r\nconst STICKY_IS_FOLDING_ICON_ATTR = 'data-sticky-is-folding-icon';\r\nexport class StickyScrollWidget extends Disposable {\r\n    constructor(_editor) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._foldingIconStore = new DisposableStore();\r\n        this._rootDomNode = document.createElement('div');\r\n        this._lineNumbersDomNode = document.createElement('div');\r\n        this._linesDomNodeScrollable = document.createElement('div');\r\n        this._linesDomNode = document.createElement('div');\r\n        this._lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n        this._stickyLines = [];\r\n        this._lineNumbers = [];\r\n        this._lastLineRelativePosition = 0;\r\n        this._minContentWidthInPx = 0;\r\n        this._isOnGlyphMargin = false;\r\n        this._lineNumbersDomNode.className = 'sticky-widget-line-numbers';\r\n        this._lineNumbersDomNode.setAttribute('role', 'none');\r\n        this._linesDomNode.className = 'sticky-widget-lines';\r\n        this._linesDomNode.setAttribute('role', 'list');\r\n        this._linesDomNodeScrollable.className = 'sticky-widget-lines-scrollable';\r\n        this._linesDomNodeScrollable.appendChild(this._linesDomNode);\r\n        this._rootDomNode.className = 'sticky-widget';\r\n        this._rootDomNode.classList.toggle('peek', _editor instanceof EmbeddedCodeEditorWidget);\r\n        this._rootDomNode.appendChild(this._lineNumbersDomNode);\r\n        this._rootDomNode.appendChild(this._linesDomNodeScrollable);\r\n        const updateScrollLeftPosition = () => {\r\n            this._linesDomNode.style.left = this._editor.getOption(114 /* EditorOption.stickyScroll */).scrollWithEditor ? `-${this._editor.getScrollLeft()}px` : '0px';\r\n        };\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(114 /* EditorOption.stickyScroll */)) {\r\n                updateScrollLeftPosition();\r\n            }\r\n            if (e.hasChanged(66 /* EditorOption.lineHeight */)) {\r\n                this._lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n            }\r\n        }));\r\n        this._register(this._editor.onDidScrollChange((e) => {\r\n            if (e.scrollLeftChanged) {\r\n                updateScrollLeftPosition();\r\n            }\r\n            if (e.scrollWidthChanged) {\r\n                this._updateWidgetWidth();\r\n            }\r\n        }));\r\n        this._register(this._editor.onDidChangeModel(() => {\r\n            updateScrollLeftPosition();\r\n            this._updateWidgetWidth();\r\n        }));\r\n        this._register(this._foldingIconStore);\r\n        updateScrollLeftPosition();\r\n        this._register(this._editor.onDidLayoutChange((e) => {\r\n            this._updateWidgetWidth();\r\n        }));\r\n        this._updateWidgetWidth();\r\n    }\r\n    get lineNumbers() {\r\n        return this._lineNumbers;\r\n    }\r\n    get lineNumberCount() {\r\n        return this._lineNumbers.length;\r\n    }\r\n    getStickyLineForLine(lineNumber) {\r\n        return this._stickyLines.find(stickyLine => stickyLine.lineNumber === lineNumber);\r\n    }\r\n    getCurrentLines() {\r\n        return this._lineNumbers;\r\n    }\r\n    setState(state, foldingModel, rebuildFromLine = Infinity) {\r\n        if (((!this._previousState && !state) || (this._previousState && this._previousState.equals(state)))\r\n            && rebuildFromLine === Infinity) {\r\n            return;\r\n        }\r\n        this._previousState = state;\r\n        const previousStickyLines = this._stickyLines;\r\n        this._clearStickyWidget();\r\n        if (!state || !this._editor._getViewModel()) {\r\n            return;\r\n        }\r\n        const futureWidgetHeight = state.startLineNumbers.length * this._lineHeight + state.lastLineRelativePosition;\r\n        if (futureWidgetHeight > 0) {\r\n            this._lastLineRelativePosition = state.lastLineRelativePosition;\r\n            const lineNumbers = [...state.startLineNumbers];\r\n            if (state.showEndForLine !== null) {\r\n                lineNumbers[state.showEndForLine] = state.endLineNumbers[state.showEndForLine];\r\n            }\r\n            this._lineNumbers = lineNumbers;\r\n        }\r\n        else {\r\n            this._lastLineRelativePosition = 0;\r\n            this._lineNumbers = [];\r\n        }\r\n        this._renderRootNode(previousStickyLines, foldingModel, rebuildFromLine);\r\n    }\r\n    _updateWidgetWidth() {\r\n        const layoutInfo = this._editor.getLayoutInfo();\r\n        const lineNumbersWidth = layoutInfo.contentLeft;\r\n        this._lineNumbersDomNode.style.width = `${lineNumbersWidth}px`;\r\n        this._linesDomNodeScrollable.style.setProperty('--vscode-editorStickyScroll-scrollableWidth', `${this._editor.getScrollWidth() - layoutInfo.verticalScrollbarWidth}px`);\r\n        this._rootDomNode.style.width = `${layoutInfo.width - layoutInfo.verticalScrollbarWidth}px`;\r\n    }\r\n    _clearStickyWidget() {\r\n        this._stickyLines = [];\r\n        this._foldingIconStore.clear();\r\n        dom.clearNode(this._lineNumbersDomNode);\r\n        dom.clearNode(this._linesDomNode);\r\n        this._rootDomNode.style.display = 'none';\r\n    }\r\n    _useFoldingOpacityTransition(requireTransitions) {\r\n        this._lineNumbersDomNode.style.setProperty('--vscode-editorStickyScroll-foldingOpacityTransition', `opacity ${requireTransitions ? 0.5 : 0}s`);\r\n    }\r\n    _setFoldingIconsVisibility(allVisible) {\r\n        for (const line of this._stickyLines) {\r\n            const foldingIcon = line.foldingIcon;\r\n            if (!foldingIcon) {\r\n                continue;\r\n            }\r\n            foldingIcon.setVisible(allVisible ? true : foldingIcon.isCollapsed);\r\n        }\r\n    }\r\n    _renderRootNode(previousStickyLines, foldingModel, rebuildFromLine = Infinity) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const layoutInfo = this._editor.getLayoutInfo();\r\n            for (const [index, line] of this._lineNumbers.entries()) {\r\n                const previousStickyLine = previousStickyLines[index];\r\n                const stickyLine = (line >= rebuildFromLine || (previousStickyLine === null || previousStickyLine === void 0 ? void 0 : previousStickyLine.lineNumber) !== line)\r\n                    ? this._renderChildNode(index, line, foldingModel, layoutInfo)\r\n                    : this._updateTopAndZIndexOfStickyLine(previousStickyLine);\r\n                if (!stickyLine) {\r\n                    continue;\r\n                }\r\n                this._linesDomNode.appendChild(stickyLine.lineDomNode);\r\n                this._lineNumbersDomNode.appendChild(stickyLine.lineNumberDomNode);\r\n                this._stickyLines.push(stickyLine);\r\n            }\r\n            if (foldingModel) {\r\n                this._setFoldingHoverListeners();\r\n                this._useFoldingOpacityTransition(!this._isOnGlyphMargin);\r\n            }\r\n            const widgetHeight = this._lineNumbers.length * this._lineHeight + this._lastLineRelativePosition;\r\n            if (widgetHeight === 0) {\r\n                this._clearStickyWidget();\r\n                return;\r\n            }\r\n            this._rootDomNode.style.display = 'block';\r\n            this._lineNumbersDomNode.style.height = `${widgetHeight}px`;\r\n            this._linesDomNodeScrollable.style.height = `${widgetHeight}px`;\r\n            this._rootDomNode.style.height = `${widgetHeight}px`;\r\n            this._rootDomNode.style.marginLeft = '0px';\r\n            this._updateMinContentWidth();\r\n            this._editor.layoutOverlayWidget(this);\r\n        });\r\n    }\r\n    _setFoldingHoverListeners() {\r\n        const showFoldingControls = this._editor.getOption(109 /* EditorOption.showFoldingControls */);\r\n        if (showFoldingControls !== 'mouseover') {\r\n            return;\r\n        }\r\n        this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_ENTER, (e) => {\r\n            this._isOnGlyphMargin = true;\r\n            this._setFoldingIconsVisibility(true);\r\n        }));\r\n        this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_LEAVE, () => {\r\n            this._isOnGlyphMargin = false;\r\n            this._useFoldingOpacityTransition(true);\r\n            this._setFoldingIconsVisibility(false);\r\n        }));\r\n    }\r\n    _renderChildNode(index, line, foldingModel, layoutInfo) {\r\n        const viewModel = this._editor._getViewModel();\r\n        if (!viewModel) {\r\n            return;\r\n        }\r\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(line, 1)).lineNumber;\r\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\r\n        const lineNumberOption = this._editor.getOption(67 /* EditorOption.lineNumbers */);\r\n        let actualInlineDecorations;\r\n        try {\r\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\r\n        }\r\n        catch (err) {\r\n            actualInlineDecorations = [];\r\n        }\r\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 500, 'none', true, true, null);\r\n        const sb = new StringBuilder(2000);\r\n        const renderOutput = renderViewLine(renderLineInput, sb);\r\n        let newLine;\r\n        if (_ttPolicy) {\r\n            newLine = _ttPolicy.createHTML(sb.build());\r\n        }\r\n        else {\r\n            newLine = sb.build();\r\n        }\r\n        const lineHTMLNode = document.createElement('span');\r\n        lineHTMLNode.setAttribute(STICKY_INDEX_ATTR, String(index));\r\n        lineHTMLNode.setAttribute(STICKY_IS_LINE_ATTR, '');\r\n        lineHTMLNode.setAttribute('role', 'listitem');\r\n        lineHTMLNode.tabIndex = 0;\r\n        lineHTMLNode.className = 'sticky-line-content';\r\n        lineHTMLNode.classList.add(`stickyLine${line}`);\r\n        lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\r\n        lineHTMLNode.innerHTML = newLine;\r\n        const lineNumberHTMLNode = document.createElement('span');\r\n        lineNumberHTMLNode.setAttribute(STICKY_INDEX_ATTR, String(index));\r\n        lineNumberHTMLNode.setAttribute(STICKY_IS_LINE_NUMBER_ATTR, '');\r\n        lineNumberHTMLNode.className = 'sticky-line-number';\r\n        lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\r\n        const lineNumbersWidth = layoutInfo.contentLeft;\r\n        lineNumberHTMLNode.style.width = `${lineNumbersWidth}px`;\r\n        const innerLineNumberHTML = document.createElement('span');\r\n        if (lineNumberOption.renderType === 1 /* RenderLineNumbersType.On */ || lineNumberOption.renderType === 3 /* RenderLineNumbersType.Interval */ && line % 10 === 0) {\r\n            innerLineNumberHTML.innerText = line.toString();\r\n        }\r\n        else if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\r\n            innerLineNumberHTML.innerText = Math.abs(line - this._editor.getPosition().lineNumber).toString();\r\n        }\r\n        innerLineNumberHTML.className = 'sticky-line-number-inner';\r\n        innerLineNumberHTML.style.lineHeight = `${this._lineHeight}px`;\r\n        innerLineNumberHTML.style.width = `${layoutInfo.lineNumbersWidth}px`;\r\n        innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft}px`;\r\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\r\n        const foldingIcon = this._renderFoldingIconForLine(foldingModel, line);\r\n        if (foldingIcon) {\r\n            lineNumberHTMLNode.appendChild(foldingIcon.domNode);\r\n        }\r\n        this._editor.applyFontInfo(lineHTMLNode);\r\n        this._editor.applyFontInfo(innerLineNumberHTML);\r\n        lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\r\n        lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\r\n        lineNumberHTMLNode.style.height = `${this._lineHeight}px`;\r\n        lineHTMLNode.style.height = `${this._lineHeight}px`;\r\n        const renderedLine = new RenderedStickyLine(index, line, lineHTMLNode, lineNumberHTMLNode, foldingIcon, renderOutput.characterMapping);\r\n        return this._updateTopAndZIndexOfStickyLine(renderedLine);\r\n    }\r\n    _updateTopAndZIndexOfStickyLine(stickyLine) {\r\n        var _a;\r\n        const index = stickyLine.index;\r\n        const lineHTMLNode = stickyLine.lineDomNode;\r\n        const lineNumberHTMLNode = stickyLine.lineNumberDomNode;\r\n        const isLastLine = index === this._lineNumbers.length - 1;\r\n        const lastLineZIndex = '0';\r\n        const intermediateLineZIndex = '1';\r\n        lineHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\r\n        lineNumberHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\r\n        const lastLineTop = `${index * this._lineHeight + this._lastLineRelativePosition + (((_a = stickyLine.foldingIcon) === null || _a === void 0 ? void 0 : _a.isCollapsed) ? 1 : 0)}px`;\r\n        const intermediateLineTop = `${index * this._lineHeight}px`;\r\n        lineHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\r\n        lineNumberHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\r\n        return stickyLine;\r\n    }\r\n    _renderFoldingIconForLine(foldingModel, line) {\r\n        const showFoldingControls = this._editor.getOption(109 /* EditorOption.showFoldingControls */);\r\n        if (!foldingModel || showFoldingControls === 'never') {\r\n            return;\r\n        }\r\n        const foldingRegions = foldingModel.regions;\r\n        const indexOfFoldingRegion = foldingRegions.findRange(line);\r\n        const startLineNumber = foldingRegions.getStartLineNumber(indexOfFoldingRegion);\r\n        const isFoldingScope = line === startLineNumber;\r\n        if (!isFoldingScope) {\r\n            return;\r\n        }\r\n        const isCollapsed = foldingRegions.isCollapsed(indexOfFoldingRegion);\r\n        const foldingIcon = new StickyFoldingIcon(isCollapsed, startLineNumber, foldingRegions.getEndLineNumber(indexOfFoldingRegion), this._lineHeight);\r\n        foldingIcon.setVisible(this._isOnGlyphMargin ? true : (isCollapsed || showFoldingControls === 'always'));\r\n        foldingIcon.domNode.setAttribute(STICKY_IS_FOLDING_ICON_ATTR, '');\r\n        return foldingIcon;\r\n    }\r\n    _updateMinContentWidth() {\r\n        this._minContentWidthInPx = 0;\r\n        for (const stickyLine of this._stickyLines) {\r\n            if (stickyLine.lineDomNode.scrollWidth > this._minContentWidthInPx) {\r\n                this._minContentWidthInPx = stickyLine.lineDomNode.scrollWidth;\r\n            }\r\n        }\r\n        this._minContentWidthInPx += this._editor.getLayoutInfo().verticalScrollbarWidth;\r\n    }\r\n    getId() {\r\n        return 'editor.contrib.stickyScrollWidget';\r\n    }\r\n    getDomNode() {\r\n        return this._rootDomNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            preference: null\r\n        };\r\n    }\r\n    getMinContentWidthInPx() {\r\n        return this._minContentWidthInPx;\r\n    }\r\n    focusLineWithIndex(index) {\r\n        if (0 <= index && index < this._stickyLines.length) {\r\n            this._stickyLines[index].lineDomNode.focus();\r\n        }\r\n    }\r\n    /**\r\n     * Given a leaf dom node, tries to find the editor position.\r\n     */\r\n    getEditorPositionFromNode(spanDomNode) {\r\n        if (!spanDomNode || spanDomNode.children.length > 0) {\r\n            // This is not a leaf node\r\n            return null;\r\n        }\r\n        const renderedStickyLine = this._getRenderedStickyLineFromChildDomNode(spanDomNode);\r\n        if (!renderedStickyLine) {\r\n            return null;\r\n        }\r\n        const column = getColumnOfNodeOffset(renderedStickyLine.characterMapping, spanDomNode, 0);\r\n        return new Position(renderedStickyLine.lineNumber, column);\r\n    }\r\n    getLineNumberFromChildDomNode(domNode) {\r\n        var _a, _b;\r\n        return (_b = (_a = this._getRenderedStickyLineFromChildDomNode(domNode)) === null || _a === void 0 ? void 0 : _a.lineNumber) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    _getRenderedStickyLineFromChildDomNode(domNode) {\r\n        const index = this.getLineIndexFromChildDomNode(domNode);\r\n        if (index === null || index < 0 || index >= this._stickyLines.length) {\r\n            return null;\r\n        }\r\n        return this._stickyLines[index];\r\n    }\r\n    /**\r\n     * Given a child dom node, tries to find the line number attribute that was stored in the node.\r\n     * @returns the attribute value or null if none is found.\r\n     */\r\n    getLineIndexFromChildDomNode(domNode) {\r\n        const lineIndex = this._getAttributeValue(domNode, STICKY_INDEX_ATTR);\r\n        return lineIndex ? parseInt(lineIndex, 10) : null;\r\n    }\r\n    /**\r\n     * Given a child dom node, tries to find if it is (contained in) a sticky line.\r\n     * @returns a boolean.\r\n     */\r\n    isInStickyLine(domNode) {\r\n        const isInLine = this._getAttributeValue(domNode, STICKY_IS_LINE_ATTR);\r\n        return isInLine !== undefined;\r\n    }\r\n    /**\r\n     * Given a child dom node, tries to find if this dom node is (contained in) a sticky folding icon.\r\n     * @returns a boolean.\r\n     */\r\n    isInFoldingIconDomNode(domNode) {\r\n        const isInFoldingIcon = this._getAttributeValue(domNode, STICKY_IS_FOLDING_ICON_ATTR);\r\n        return isInFoldingIcon !== undefined;\r\n    }\r\n    /**\r\n     * Given the dom node, finds if it or its parent sequence contains the given attribute.\r\n     * @returns the attribute value or undefined.\r\n     */\r\n    _getAttributeValue(domNode, attribute) {\r\n        while (domNode && domNode !== this._rootDomNode) {\r\n            const line = domNode.getAttribute(attribute);\r\n            if (line !== null) {\r\n                return line;\r\n            }\r\n            domNode = domNode.parentElement;\r\n        }\r\n        return;\r\n    }\r\n}\r\nclass RenderedStickyLine {\r\n    constructor(index, lineNumber, lineDomNode, lineNumberDomNode, foldingIcon, characterMapping) {\r\n        this.index = index;\r\n        this.lineNumber = lineNumber;\r\n        this.lineDomNode = lineDomNode;\r\n        this.lineNumberDomNode = lineNumberDomNode;\r\n        this.foldingIcon = foldingIcon;\r\n        this.characterMapping = characterMapping;\r\n    }\r\n}\r\nclass StickyFoldingIcon {\r\n    constructor(isCollapsed, foldingStartLine, foldingEndLine, dimension) {\r\n        this.isCollapsed = isCollapsed;\r\n        this.foldingStartLine = foldingStartLine;\r\n        this.foldingEndLine = foldingEndLine;\r\n        this.dimension = dimension;\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.style.width = `${dimension}px`;\r\n        this.domNode.style.height = `${dimension}px`;\r\n        this.domNode.className = ThemeIcon.asClassName(isCollapsed ? foldingCollapsedIcon : foldingExpandedIcon);\r\n    }\r\n    setVisible(visible) {\r\n        this.domNode.style.cursor = visible ? 'pointer' : 'default';\r\n        this.domNode.style.opacity = visible ? '1' : '0';\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { binarySearch } from '../../../../base/common/arrays.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { StickyModelProvider } from './stickyScrollModelProvider.js';\r\nexport class StickyLineCandidate {\r\n    constructor(startLineNumber, endLineNumber, nestingDepth) {\r\n        this.startLineNumber = startLineNumber;\r\n        this.endLineNumber = endLineNumber;\r\n        this.nestingDepth = nestingDepth;\r\n    }\r\n}\r\nlet StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\r\n    constructor(editor, _languageFeaturesService, _languageConfigurationService) {\r\n        super();\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._onDidChangeStickyScroll = this._register(new Emitter());\r\n        this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\r\n        this._options = null;\r\n        this._model = null;\r\n        this._cts = null;\r\n        this._stickyModelProvider = null;\r\n        this._editor = editor;\r\n        this._sessionStore = this._register(new DisposableStore());\r\n        this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\r\n        this._register(this._editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(114 /* EditorOption.stickyScroll */)) {\r\n                this.readConfiguration();\r\n            }\r\n        }));\r\n        this.readConfiguration();\r\n    }\r\n    readConfiguration() {\r\n        this._stickyModelProvider = null;\r\n        this._sessionStore.clear();\r\n        this._options = this._editor.getOption(114 /* EditorOption.stickyScroll */);\r\n        if (!this._options.enabled) {\r\n            return;\r\n        }\r\n        this._stickyModelProvider = this._sessionStore.add(new StickyModelProvider(this._editor, this._languageConfigurationService, this._languageFeaturesService, this._options.defaultModel));\r\n        this._sessionStore.add(this._editor.onDidChangeModel(() => {\r\n            // We should not show an old model for a different file, it will always be wrong.\r\n            // So we clear the model here immediately and then trigger an update.\r\n            this._model = null;\r\n            this._onDidChangeStickyScroll.fire();\r\n            this.update();\r\n        }));\r\n        this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\r\n        this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\r\n        this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this.update()));\r\n        this.update();\r\n    }\r\n    getVersionId() {\r\n        var _a;\r\n        return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\r\n    }\r\n    update() {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\r\n            this._cts = new CancellationTokenSource();\r\n            yield this.updateStickyModel(this._cts.token);\r\n            this._onDidChangeStickyScroll.fire();\r\n        });\r\n    }\r\n    updateStickyModel(token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel() || !this._stickyModelProvider || this._editor.getModel().isTooLargeForTokenization()) {\r\n                this._model = null;\r\n                return;\r\n            }\r\n            const textModel = this._editor.getModel();\r\n            const modelVersionId = textModel.getVersionId();\r\n            const model = yield this._stickyModelProvider.update(textModel, modelVersionId, token);\r\n            if (token.isCancellationRequested) {\r\n                // the computation was canceled, so do not overwrite the model\r\n                return;\r\n            }\r\n            this._model = model;\r\n        });\r\n    }\r\n    updateIndex(index) {\r\n        if (index === -1) {\r\n            index = 0;\r\n        }\r\n        else if (index < 0) {\r\n            index = -index - 2;\r\n        }\r\n        return index;\r\n    }\r\n    getCandidateStickyLinesIntersectingFromStickyModel(range, outlineModel, result, depth, lastStartLineNumber) {\r\n        if (outlineModel.children.length === 0) {\r\n            return;\r\n        }\r\n        let lastLine = lastStartLineNumber;\r\n        const childrenStartLines = [];\r\n        for (let i = 0; i < outlineModel.children.length; i++) {\r\n            const child = outlineModel.children[i];\r\n            if (child.range) {\r\n                childrenStartLines.push(child.range.startLineNumber);\r\n            }\r\n        }\r\n        const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => { return a - b; }));\r\n        const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => { return a - b; }));\r\n        for (let i = lowerBound; i <= upperBound; i++) {\r\n            const child = outlineModel.children[i];\r\n            if (!child) {\r\n                return;\r\n            }\r\n            if (child.range) {\r\n                const childStartLine = child.range.startLineNumber;\r\n                const childEndLine = child.range.endLineNumber;\r\n                if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\r\n                    lastLine = childStartLine;\r\n                    result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\r\n                    this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth + 1, childStartLine);\r\n                }\r\n            }\r\n            else {\r\n                this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth, lastStartLineNumber);\r\n            }\r\n        }\r\n    }\r\n    getCandidateStickyLinesIntersecting(range) {\r\n        var _a, _b;\r\n        if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\r\n            return [];\r\n        }\r\n        let stickyLineCandidates = [];\r\n        this.getCandidateStickyLinesIntersectingFromStickyModel(range, this._model.element, stickyLineCandidates, 0, -1);\r\n        const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\r\n        if (hiddenRanges) {\r\n            for (const hiddenRange of hiddenRanges) {\r\n                stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\r\n            }\r\n        }\r\n        return stickyLineCandidates;\r\n    }\r\n};\r\nStickyLineCandidateProvider = __decorate([\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, ILanguageConfigurationService)\r\n], StickyLineCandidateProvider);\r\nexport { StickyLineCandidateProvider };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { OutlineElement, OutlineGroup, OutlineModel } from '../../documentSymbols/browser/outlineModel.js';\r\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\r\nimport { FoldingController, RangesLimitReporter } from '../../folding/browser/folding.js';\r\nimport { SyntaxRangeProvider } from '../../folding/browser/syntaxRangeProvider.js';\r\nimport { IndentRangeProvider } from '../../folding/browser/indentRangeProvider.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { StickyElement, StickyModel, StickyRange } from './stickyScrollElement.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nvar ModelProvider;\r\n(function (ModelProvider) {\r\n    ModelProvider[\"OUTLINE_MODEL\"] = \"outlineModel\";\r\n    ModelProvider[\"FOLDING_PROVIDER_MODEL\"] = \"foldingProviderModel\";\r\n    ModelProvider[\"INDENTATION_MODEL\"] = \"indentationModel\";\r\n})(ModelProvider || (ModelProvider = {}));\r\nvar Status;\r\n(function (Status) {\r\n    Status[Status[\"VALID\"] = 0] = \"VALID\";\r\n    Status[Status[\"INVALID\"] = 1] = \"INVALID\";\r\n    Status[Status[\"CANCELED\"] = 2] = \"CANCELED\";\r\n})(Status || (Status = {}));\r\nlet StickyModelProvider = class StickyModelProvider extends Disposable {\r\n    constructor(_editor, _languageConfigurationService, _languageFeaturesService, defaultModel) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._modelProviders = [];\r\n        this._modelPromise = null;\r\n        this._updateScheduler = this._register(new Delayer(300));\r\n        this._updateOperation = this._register(new DisposableStore());\r\n        const stickyModelFromCandidateOutlineProvider = new StickyModelFromCandidateOutlineProvider(_languageFeaturesService);\r\n        const stickyModelFromSyntaxFoldingProvider = new StickyModelFromCandidateSyntaxFoldingProvider(this._editor, _languageFeaturesService);\r\n        const stickyModelFromIndentationFoldingProvider = new StickyModelFromCandidateIndentationFoldingProvider(this._editor, _languageConfigurationService);\r\n        switch (defaultModel) {\r\n            case ModelProvider.OUTLINE_MODEL:\r\n                this._modelProviders.push(stickyModelFromCandidateOutlineProvider);\r\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\r\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\r\n                break;\r\n            case ModelProvider.FOLDING_PROVIDER_MODEL:\r\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\r\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\r\n                break;\r\n            case ModelProvider.INDENTATION_MODEL:\r\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\r\n                break;\r\n        }\r\n    }\r\n    _cancelModelPromise() {\r\n        if (this._modelPromise) {\r\n            this._modelPromise.cancel();\r\n            this._modelPromise = null;\r\n        }\r\n    }\r\n    update(textModel, textModelVersionId, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._updateOperation.clear();\r\n            this._updateOperation.add({\r\n                dispose: () => {\r\n                    this._cancelModelPromise();\r\n                    this._updateScheduler.cancel();\r\n                }\r\n            });\r\n            this._cancelModelPromise();\r\n            return yield this._updateScheduler.trigger(() => __awaiter(this, void 0, void 0, function* () {\r\n                for (const modelProvider of this._modelProviders) {\r\n                    const { statusPromise, modelPromise } = modelProvider.computeStickyModel(textModel, textModelVersionId, token);\r\n                    this._modelPromise = modelPromise;\r\n                    const status = yield statusPromise;\r\n                    if (this._modelPromise !== modelPromise) {\r\n                        return null;\r\n                    }\r\n                    switch (status) {\r\n                        case Status.CANCELED:\r\n                            this._updateOperation.clear();\r\n                            return null;\r\n                        case Status.VALID:\r\n                            return modelProvider.stickyModel;\r\n                    }\r\n                }\r\n                return null;\r\n            })).catch((error) => {\r\n                onUnexpectedError(error);\r\n                return null;\r\n            });\r\n        });\r\n    }\r\n};\r\nStickyModelProvider = __decorate([\r\n    __param(1, ILanguageConfigurationService),\r\n    __param(2, ILanguageFeaturesService)\r\n], StickyModelProvider);\r\nexport { StickyModelProvider };\r\nclass StickyModelCandidateProvider {\r\n    constructor() {\r\n        this._stickyModel = null;\r\n    }\r\n    get stickyModel() {\r\n        return this._stickyModel;\r\n    }\r\n    _invalid() {\r\n        this._stickyModel = null;\r\n        return Status.INVALID;\r\n    }\r\n    computeStickyModel(textModel, modelVersionId, token) {\r\n        if (token.isCancellationRequested || !this.isProviderValid(textModel)) {\r\n            return { statusPromise: this._invalid(), modelPromise: null };\r\n        }\r\n        const providerModelPromise = createCancelablePromise(token => this.createModelFromProvider(textModel, modelVersionId, token));\r\n        return {\r\n            statusPromise: providerModelPromise.then(providerModel => {\r\n                if (!this.isModelValid(providerModel)) {\r\n                    return this._invalid();\r\n                }\r\n                if (token.isCancellationRequested) {\r\n                    return Status.CANCELED;\r\n                }\r\n                this._stickyModel = this.createStickyModel(textModel, modelVersionId, token, providerModel);\r\n                return Status.VALID;\r\n            }).then(undefined, (err) => {\r\n                onUnexpectedError(err);\r\n                return Status.CANCELED;\r\n            }),\r\n            modelPromise: providerModelPromise\r\n        };\r\n    }\r\n    /**\r\n     * Method which checks whether the model returned by the provider is valid and can be used to compute a sticky model.\r\n     * This method by default returns true.\r\n     * @param model model returned by the provider\r\n     * @returns boolean indicating whether the model is valid\r\n     */\r\n    isModelValid(model) {\r\n        return true;\r\n    }\r\n    /**\r\n     * Method which checks whether the provider is valid before applying it to find the provider model.\r\n     * This method by default returns true.\r\n     * @param textModel text-model of the editor\r\n     * @returns boolean indicating whether the provider is valid\r\n     */\r\n    isProviderValid(textModel) {\r\n        return true;\r\n    }\r\n}\r\nlet StickyModelFromCandidateOutlineProvider = class StickyModelFromCandidateOutlineProvider extends StickyModelCandidateProvider {\r\n    constructor(_languageFeaturesService) {\r\n        super();\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n    }\r\n    createModelFromProvider(textModel, modelVersionId, token) {\r\n        return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, textModel, token);\r\n    }\r\n    createStickyModel(textModel, modelVersionId, token, model) {\r\n        var _a;\r\n        const { stickyOutlineElement, providerID } = this._stickyModelFromOutlineModel(model, (_a = this._stickyModel) === null || _a === void 0 ? void 0 : _a.outlineProviderId);\r\n        return new StickyModel(textModel.uri, modelVersionId, stickyOutlineElement, providerID);\r\n    }\r\n    isModelValid(model) {\r\n        return model && model.children.size > 0;\r\n    }\r\n    _stickyModelFromOutlineModel(outlineModel, preferredProvider) {\r\n        let outlineElements;\r\n        // When several possible outline providers\r\n        if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\r\n            const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\r\n            if (provider) {\r\n                outlineElements = provider.children;\r\n            }\r\n            else {\r\n                let tempID = '';\r\n                let maxTotalSumOfRanges = -1;\r\n                let optimalOutlineGroup = undefined;\r\n                for (const [_key, outlineGroup] of outlineModel.children.entries()) {\r\n                    const totalSumRanges = this._findSumOfRangesOfGroup(outlineGroup);\r\n                    if (totalSumRanges > maxTotalSumOfRanges) {\r\n                        optimalOutlineGroup = outlineGroup;\r\n                        maxTotalSumOfRanges = totalSumRanges;\r\n                        tempID = outlineGroup.id;\r\n                    }\r\n                }\r\n                preferredProvider = tempID;\r\n                outlineElements = optimalOutlineGroup.children;\r\n            }\r\n        }\r\n        else {\r\n            outlineElements = outlineModel.children;\r\n        }\r\n        const stickyChildren = [];\r\n        const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\r\n            const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\r\n            const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\r\n            return this._comparator(range1, range2);\r\n        });\r\n        for (const outlineElement of outlineElementsArray) {\r\n            stickyChildren.push(this._stickyModelFromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\r\n        }\r\n        const stickyOutlineElement = new StickyElement(undefined, stickyChildren, undefined);\r\n        return {\r\n            stickyOutlineElement: stickyOutlineElement,\r\n            providerID: preferredProvider\r\n        };\r\n    }\r\n    _stickyModelFromOutlineElement(outlineElement, previousStartLine) {\r\n        const children = [];\r\n        for (const child of outlineElement.children.values()) {\r\n            if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\r\n                if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\r\n                    children.push(this._stickyModelFromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\r\n                }\r\n                else {\r\n                    for (const subchild of child.children.values()) {\r\n                        children.push(this._stickyModelFromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        children.sort((child1, child2) => this._comparator(child1.range, child2.range));\r\n        const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\r\n        return new StickyElement(range, children, undefined);\r\n    }\r\n    _comparator(range1, range2) {\r\n        if (range1.startLineNumber !== range2.startLineNumber) {\r\n            return range1.startLineNumber - range2.startLineNumber;\r\n        }\r\n        else {\r\n            return range2.endLineNumber - range1.endLineNumber;\r\n        }\r\n    }\r\n    _findSumOfRangesOfGroup(outline) {\r\n        let res = 0;\r\n        for (const child of outline.children.values()) {\r\n            res += this._findSumOfRangesOfGroup(child);\r\n        }\r\n        if (outline instanceof OutlineElement) {\r\n            return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\r\n        }\r\n        else {\r\n            return res;\r\n        }\r\n    }\r\n};\r\nStickyModelFromCandidateOutlineProvider = __decorate([\r\n    __param(0, ILanguageFeaturesService)\r\n], StickyModelFromCandidateOutlineProvider);\r\nclass StickyModelFromCandidateFoldingProvider extends StickyModelCandidateProvider {\r\n    constructor(editor) {\r\n        super();\r\n        this._foldingLimitReporter = new RangesLimitReporter(editor);\r\n    }\r\n    createStickyModel(textModel, modelVersionId, token, model) {\r\n        const foldingElement = this._fromFoldingRegions(model);\r\n        return new StickyModel(textModel.uri, modelVersionId, foldingElement, undefined);\r\n    }\r\n    isModelValid(model) {\r\n        return model !== null;\r\n    }\r\n    _fromFoldingRegions(foldingRegions) {\r\n        const length = foldingRegions.length;\r\n        const orderedStickyElements = [];\r\n        // The root sticky outline element\r\n        const stickyOutlineElement = new StickyElement(undefined, [], undefined);\r\n        for (let i = 0; i < length; i++) {\r\n            // Finding the parent index of the current range\r\n            const parentIndex = foldingRegions.getParentIndex(i);\r\n            let parentNode;\r\n            if (parentIndex !== -1) {\r\n                // Access the reference of the parent node\r\n                parentNode = orderedStickyElements[parentIndex];\r\n            }\r\n            else {\r\n                // In that case the parent node is the root node\r\n                parentNode = stickyOutlineElement;\r\n            }\r\n            const child = new StickyElement(new StickyRange(foldingRegions.getStartLineNumber(i), foldingRegions.getEndLineNumber(i) + 1), [], parentNode);\r\n            parentNode.children.push(child);\r\n            orderedStickyElements.push(child);\r\n        }\r\n        return stickyOutlineElement;\r\n    }\r\n}\r\nlet StickyModelFromCandidateIndentationFoldingProvider = class StickyModelFromCandidateIndentationFoldingProvider extends StickyModelFromCandidateFoldingProvider {\r\n    constructor(editor, _languageConfigurationService) {\r\n        super(editor);\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n    }\r\n    createModelFromProvider(textModel, modelVersionId, token) {\r\n        const provider = new IndentRangeProvider(textModel, this._languageConfigurationService, this._foldingLimitReporter);\r\n        return provider.compute(token);\r\n    }\r\n};\r\nStickyModelFromCandidateIndentationFoldingProvider = __decorate([\r\n    __param(1, ILanguageConfigurationService)\r\n], StickyModelFromCandidateIndentationFoldingProvider);\r\nlet StickyModelFromCandidateSyntaxFoldingProvider = class StickyModelFromCandidateSyntaxFoldingProvider extends StickyModelFromCandidateFoldingProvider {\r\n    constructor(editor, _languageFeaturesService) {\r\n        super(editor);\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n    }\r\n    isProviderValid(textModel) {\r\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\r\n        return selectedProviders.length > 0;\r\n    }\r\n    createModelFromProvider(textModel, modelVersionId, token) {\r\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\r\n        const provider = new SyntaxRangeProvider(textModel, selectedProviders, () => this.createModelFromProvider(textModel, modelVersionId, token), this._foldingLimitReporter, undefined);\r\n        return provider.compute(token);\r\n    }\r\n};\r\nStickyModelFromCandidateSyntaxFoldingProvider = __decorate([\r\n    __param(1, ILanguageFeaturesService)\r\n], StickyModelFromCandidateSyntaxFoldingProvider);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class StickyRange {\r\n    constructor(startLineNumber, endLineNumber) {\r\n        this.startLineNumber = startLineNumber;\r\n        this.endLineNumber = endLineNumber;\r\n    }\r\n}\r\nexport class StickyElement {\r\n    constructor(\r\n    /**\r\n     * Range of line numbers spanned by the current scope\r\n     */\r\n    range, \r\n    /**\r\n     * Must be sorted by start line number\r\n    */\r\n    children, \r\n    /**\r\n     * Parent sticky outline element\r\n     */\r\n    parent) {\r\n        this.range = range;\r\n        this.children = children;\r\n        this.parent = parent;\r\n    }\r\n}\r\nexport class StickyModel {\r\n    constructor(uri, version, element, outlineProviderId) {\r\n        this.uri = uri;\r\n        this.version = version;\r\n        this.element = element;\r\n        this.outlineProviderId = outlineProviderId;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar EditorContribution_1;\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { FuzzyScore } from '../../../../base/common/filters.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { CompletionModel, LineContext } from './completionModel.js';\r\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\r\nimport { ISuggestMemoryService } from './suggestMemory.js';\r\nimport { WordDistance } from './wordDistance.js';\r\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nclass SuggestInlineCompletion {\r\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\r\n        this.range = range;\r\n        this.insertText = insertText;\r\n        this.filterText = filterText;\r\n        this.additionalTextEdits = additionalTextEdits;\r\n        this.command = command;\r\n        this.completion = completion;\r\n    }\r\n}\r\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\r\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\r\n        super(completions.disposable);\r\n        this.model = model;\r\n        this.line = line;\r\n        this.word = word;\r\n        this.completionModel = completionModel;\r\n        this._suggestMemoryService = _suggestMemoryService;\r\n    }\r\n    canBeReused(model, line, word) {\r\n        return this.model === model // same model\r\n            && this.line === line\r\n            && this.word.word.length > 0\r\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\r\n            && this.completionModel.getIncompleteProvider().size === 0; // no incomplete results\r\n    }\r\n    get items() {\r\n        var _a;\r\n        const result = [];\r\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\r\n        // ranked items are before/after\r\n        const { items } = this.completionModel;\r\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\r\n        const first = Iterable.slice(items, selectedIndex);\r\n        const second = Iterable.slice(items, 0, selectedIndex);\r\n        let resolveCount = 5;\r\n        for (const item of Iterable.concat(first, second)) {\r\n            if (item.score === FuzzyScore.Default) {\r\n                // skip items that have no overlap\r\n                continue;\r\n            }\r\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\r\n            );\r\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\r\n                ? { snippet: item.completion.insertText }\r\n                : item.completion.insertText;\r\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\r\n            // resolve the first N suggestions eagerly\r\n            if (resolveCount-- >= 0) {\r\n                item.resolve(CancellationToken.None);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n};\r\nInlineCompletionResults = __decorate([\r\n    __param(5, ISuggestMemoryService)\r\n], InlineCompletionResults);\r\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\r\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\r\n        this._getEditorOption = _getEditorOption;\r\n        this._languageFeatureService = _languageFeatureService;\r\n        this._clipboardService = _clipboardService;\r\n        this._suggestMemoryService = _suggestMemoryService;\r\n    }\r\n    provideInlineCompletions(model, position, context, token) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (context.selectedSuggestionInfo) {\r\n                return;\r\n            }\r\n            const config = this._getEditorOption(88 /* EditorOption.quickSuggestions */, model);\r\n            if (QuickSuggestionsOptions.isAllOff(config)) {\r\n                // quick suggest is off (for this model/language)\r\n                return;\r\n            }\r\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\r\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\r\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\r\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\r\n                // quick suggest is off (for this token)\r\n                return undefined;\r\n            }\r\n            // We consider non-empty leading words and trigger characters. The latter only\r\n            // when no word is being typed (word characters superseed trigger characters)\r\n            let wordInfo = model.getWordAtPosition(position);\r\n            let triggerCharacterInfo;\r\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\r\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\r\n            }\r\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\r\n                // not at word, not a trigger character\r\n                return;\r\n            }\r\n            // ensure that we have word information and that we are at the end of a word\r\n            // otherwise we stop because we don't want to do quick suggestions inside words\r\n            if (!wordInfo) {\r\n                wordInfo = model.getWordUntilPosition(position);\r\n            }\r\n            if (wordInfo.endColumn !== position.column) {\r\n                return;\r\n            }\r\n            let result;\r\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\r\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\r\n                // reuse a previous result iff possible, only a refilter is needed\r\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\r\n                // console.log(`REUSE with ${wordInfo.word}`);\r\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\r\n                this._lastResult.completionModel.lineContext = newLineContext;\r\n                this._lastResult.acquire();\r\n                result = this._lastResult;\r\n            }\r\n            else {\r\n                // refesh model is required\r\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\r\n                let clipboardText;\r\n                if (completions.needsClipboard) {\r\n                    clipboardText = yield this._clipboardService.readText();\r\n                }\r\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(117 /* EditorOption.suggest */, model), this._getEditorOption(111 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\r\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\r\n            }\r\n            this._lastResult = result;\r\n            return result;\r\n        });\r\n    }\r\n    handleItemDidShow(_completions, item) {\r\n        item.completion.resolve(CancellationToken.None);\r\n    }\r\n    freeInlineCompletions(result) {\r\n        result.release();\r\n    }\r\n    _getTriggerCharacterInfo(model, position) {\r\n        var _a;\r\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\r\n        const providers = new Set();\r\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\r\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\r\n                providers.add(provider);\r\n            }\r\n        }\r\n        if (providers.size === 0) {\r\n            return undefined;\r\n        }\r\n        return { providers, ch };\r\n    }\r\n};\r\nSuggestInlineCompletions = __decorate([\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, IClipboardService),\r\n    __param(3, ISuggestMemoryService)\r\n], SuggestInlineCompletions);\r\nexport { SuggestInlineCompletions };\r\nlet EditorContribution = EditorContribution_1 = class EditorContribution {\r\n    constructor(_editor, languageFeatureService, editorService, instaService) {\r\n        // HACK - way to contribute something only once\r\n        if (++EditorContribution_1._counter === 1) {\r\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\r\n                var _a;\r\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\r\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\r\n                return editor.getOption(id);\r\n            });\r\n            EditorContribution_1._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\r\n        }\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        if (--EditorContribution_1._counter === 0) {\r\n            (_a = EditorContribution_1._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\r\n            EditorContribution_1._disposable = undefined;\r\n        }\r\n    }\r\n};\r\nEditorContribution._counter = 0;\r\nEditorContribution = EditorContribution_1 = __decorate([\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, ICodeEditorService),\r\n    __param(3, IInstantiationService)\r\n], EditorContribution);\r\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because the contribution is used as a way to ONCE access a service to which a provider is registered\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport * as nls from '../../../../nls.js';\r\nclass ForceRetokenizeAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.forceRetokenize',\r\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\r\n            alias: 'Developer: Force Retokenize',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const model = editor.getModel();\r\n        model.tokenization.resetTokenization();\r\n        const sw = new StopWatch();\r\n        model.tokenization.forceTokenization(model.getLineCount());\r\n        sw.stop();\r\n        console.log(`tokenization took ${sw.elapsed()}`);\r\n    }\r\n}\r\nregisterEditorAction(ForceRetokenizeAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\r\nexport class ToggleTabFocusModeAction extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: ToggleTabFocusModeAction.ID,\r\n            title: { value: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, 'Toggle Tab Key Moves Focus'), original: 'Toggle Tab Key Moves Focus' },\r\n            precondition: undefined,\r\n            keybinding: {\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            f1: true\r\n        });\r\n    }\r\n    run() {\r\n        const oldValue = TabFocus.getTabFocusMode();\r\n        const newValue = !oldValue;\r\n        TabFocus.setTabFocusMode(newValue);\r\n        if (newValue) {\r\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\r\n        }\r\n        else {\r\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\r\n        }\r\n    }\r\n}\r\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\r\nregisterAction2(ToggleTabFocusModeAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport { InvisibleCharacters, isBasicASCII } from '../../../../base/common/strings.js';\r\nimport './unicodeHighlighter.css';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\r\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\r\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\r\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\r\nimport { BannerController } from './bannerController.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\r\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\r\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\r\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._editorWorkerService = _editorWorkerService;\r\n        this._workspaceTrustService = _workspaceTrustService;\r\n        this._highlighter = null;\r\n        this._bannerClosed = false;\r\n        this._updateState = (state) => {\r\n            if (state && state.hasMore) {\r\n                if (this._bannerClosed) {\r\n                    return;\r\n                }\r\n                // This document contains many non-basic ASCII characters.\r\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\r\n                let data;\r\n                if (state.nonBasicAsciiCharacterCount >= max) {\r\n                    data = {\r\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\r\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\r\n                    };\r\n                }\r\n                else if (state.ambiguousCharacterCount >= max) {\r\n                    data = {\r\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\r\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\r\n                    };\r\n                }\r\n                else if (state.invisibleCharacterCount >= max) {\r\n                    data = {\r\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\r\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\r\n                    };\r\n                }\r\n                else {\r\n                    throw new Error('Unreachable');\r\n                }\r\n                this._bannerController.show({\r\n                    id: 'unicodeHighlightBanner',\r\n                    message: data.message,\r\n                    icon: warningIcon,\r\n                    actions: [\r\n                        {\r\n                            label: data.command.shortLabel,\r\n                            href: `command:${data.command.id}`\r\n                        }\r\n                    ],\r\n                    onClose: () => {\r\n                        this._bannerClosed = true;\r\n                    },\r\n                });\r\n            }\r\n            else {\r\n                this._bannerController.hide();\r\n            }\r\n        };\r\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\r\n        this._register(this._editor.onDidChangeModel(() => {\r\n            this._bannerClosed = false;\r\n            this._updateHighlighter();\r\n        }));\r\n        this._options = _editor.getOption(124 /* EditorOption.unicodeHighlighting */);\r\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\r\n            this._updateHighlighter();\r\n        }));\r\n        this._register(_editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(124 /* EditorOption.unicodeHighlighting */)) {\r\n                this._options = _editor.getOption(124 /* EditorOption.unicodeHighlighting */);\r\n                this._updateHighlighter();\r\n            }\r\n        }));\r\n        this._updateHighlighter();\r\n    }\r\n    dispose() {\r\n        if (this._highlighter) {\r\n            this._highlighter.dispose();\r\n            this._highlighter = null;\r\n        }\r\n        super.dispose();\r\n    }\r\n    _updateHighlighter() {\r\n        this._updateState(null);\r\n        if (this._highlighter) {\r\n            this._highlighter.dispose();\r\n            this._highlighter = null;\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\r\n        if ([\r\n            options.nonBasicASCII,\r\n            options.ambiguousCharacters,\r\n            options.invisibleCharacters,\r\n        ].every((option) => option === false)) {\r\n            // Don't do anything if the feature is fully disabled\r\n            return;\r\n        }\r\n        const highlightOptions = {\r\n            nonBasicASCII: options.nonBasicASCII,\r\n            ambiguousCharacters: options.ambiguousCharacters,\r\n            invisibleCharacters: options.invisibleCharacters,\r\n            includeComments: options.includeComments,\r\n            includeStrings: options.includeStrings,\r\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\r\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\r\n                if (locale === '_os') {\r\n                    const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\r\n                    return osLocale;\r\n                }\r\n                else if (locale === '_vscode') {\r\n                    return platform.language;\r\n                }\r\n                return locale;\r\n            }),\r\n        };\r\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\r\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\r\n        }\r\n        else {\r\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\r\n        }\r\n    }\r\n    getDecorationInfo(decoration) {\r\n        if (this._highlighter) {\r\n            return this._highlighter.getDecorationInfo(decoration);\r\n        }\r\n        return null;\r\n    }\r\n};\r\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\r\nUnicodeHighlighter = __decorate([\r\n    __param(1, IEditorWorkerService),\r\n    __param(2, IWorkspaceTrustManagementService),\r\n    __param(3, IInstantiationService)\r\n], UnicodeHighlighter);\r\nexport { UnicodeHighlighter };\r\nfunction resolveOptions(trusted, options) {\r\n    return {\r\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\r\n        ambiguousCharacters: options.ambiguousCharacters,\r\n        invisibleCharacters: options.invisibleCharacters,\r\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\r\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\r\n        allowedCharacters: options.allowedCharacters,\r\n        allowedLocales: options.allowedLocales,\r\n    };\r\n}\r\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\r\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._options = _options;\r\n        this._updateState = _updateState;\r\n        this._editorWorkerService = _editorWorkerService;\r\n        this._model = this._editor.getModel();\r\n        this._decorations = this._editor.createDecorationsCollection();\r\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\r\n        this._register(this._editor.onDidChangeModelContent(() => {\r\n            this._updateSoon.schedule();\r\n        }));\r\n        this._updateSoon.schedule();\r\n    }\r\n    dispose() {\r\n        this._decorations.clear();\r\n        super.dispose();\r\n    }\r\n    _update() {\r\n        if (this._model.isDisposed()) {\r\n            return;\r\n        }\r\n        if (!this._model.mightContainNonBasicASCII()) {\r\n            this._decorations.clear();\r\n            return;\r\n        }\r\n        const modelVersionId = this._model.getVersionId();\r\n        this._editorWorkerService\r\n            .computedUnicodeHighlights(this._model.uri, this._options)\r\n            .then((info) => {\r\n            if (this._model.isDisposed()) {\r\n                return;\r\n            }\r\n            if (this._model.getVersionId() !== modelVersionId) {\r\n                // model changed in the meantime\r\n                return;\r\n            }\r\n            this._updateState(info);\r\n            const decorations = [];\r\n            if (!info.hasMore) {\r\n                // Don't show decoration if there are too many.\r\n                // In this case, a banner is shown.\r\n                for (const range of info.ranges) {\r\n                    decorations.push({\r\n                        range: range,\r\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\r\n                    });\r\n                }\r\n            }\r\n            this._decorations.set(decorations);\r\n        });\r\n    }\r\n    getDecorationInfo(decoration) {\r\n        if (!this._decorations.has(decoration)) {\r\n            return null;\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (!isModelDecorationVisible(model, decoration)) {\r\n            return null;\r\n        }\r\n        const text = model.getValueInRange(decoration.range);\r\n        return {\r\n            reason: computeReason(text, this._options),\r\n            inComment: isModelDecorationInComment(model, decoration),\r\n            inString: isModelDecorationInString(model, decoration),\r\n        };\r\n    }\r\n};\r\nDocumentUnicodeHighlighter = __decorate([\r\n    __param(3, IEditorWorkerService)\r\n], DocumentUnicodeHighlighter);\r\nclass ViewportUnicodeHighlighter extends Disposable {\r\n    constructor(_editor, _options, _updateState) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._options = _options;\r\n        this._updateState = _updateState;\r\n        this._model = this._editor.getModel();\r\n        this._decorations = this._editor.createDecorationsCollection();\r\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\r\n        this._register(this._editor.onDidLayoutChange(() => {\r\n            this._updateSoon.schedule();\r\n        }));\r\n        this._register(this._editor.onDidScrollChange(() => {\r\n            this._updateSoon.schedule();\r\n        }));\r\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\r\n            this._updateSoon.schedule();\r\n        }));\r\n        this._register(this._editor.onDidChangeModelContent(() => {\r\n            this._updateSoon.schedule();\r\n        }));\r\n        this._updateSoon.schedule();\r\n    }\r\n    dispose() {\r\n        this._decorations.clear();\r\n        super.dispose();\r\n    }\r\n    _update() {\r\n        if (this._model.isDisposed()) {\r\n            return;\r\n        }\r\n        if (!this._model.mightContainNonBasicASCII()) {\r\n            this._decorations.clear();\r\n            return;\r\n        }\r\n        const ranges = this._editor.getVisibleRanges();\r\n        const decorations = [];\r\n        const totalResult = {\r\n            ranges: [],\r\n            ambiguousCharacterCount: 0,\r\n            invisibleCharacterCount: 0,\r\n            nonBasicAsciiCharacterCount: 0,\r\n            hasMore: false,\r\n        };\r\n        for (const range of ranges) {\r\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\r\n            for (const r of result.ranges) {\r\n                totalResult.ranges.push(r);\r\n            }\r\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\r\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\r\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\r\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\r\n        }\r\n        if (!totalResult.hasMore) {\r\n            // Don't show decorations if there are too many.\r\n            // A banner will be shown instead.\r\n            for (const range of totalResult.ranges) {\r\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\r\n            }\r\n        }\r\n        this._updateState(totalResult);\r\n        this._decorations.set(decorations);\r\n    }\r\n    getDecorationInfo(decoration) {\r\n        if (!this._decorations.has(decoration)) {\r\n            return null;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const text = model.getValueInRange(decoration.range);\r\n        if (!isModelDecorationVisible(model, decoration)) {\r\n            return null;\r\n        }\r\n        return {\r\n            reason: computeReason(text, this._options),\r\n            inComment: isModelDecorationInComment(model, decoration),\r\n            inString: isModelDecorationInString(model, decoration),\r\n        };\r\n    }\r\n}\r\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\r\n    constructor(_editor, _languageService, _openerService) {\r\n        this._editor = _editor;\r\n        this._languageService = _languageService;\r\n        this._openerService = _openerService;\r\n        this.hoverOrdinal = 5;\r\n    }\r\n    computeSync(anchor, lineDecorations) {\r\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\r\n            return [];\r\n        }\r\n        const model = this._editor.getModel();\r\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\r\n        if (!unicodeHighlighter) {\r\n            return [];\r\n        }\r\n        const result = [];\r\n        const existedReason = new Set();\r\n        let index = 300;\r\n        for (const d of lineDecorations) {\r\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\r\n            if (!highlightInfo) {\r\n                continue;\r\n            }\r\n            const char = model.getValueInRange(d.range);\r\n            // text refers to a single character.\r\n            const codePoint = char.codePointAt(0);\r\n            const codePointStr = formatCodePointMarkdown(codePoint);\r\n            let reason;\r\n            switch (highlightInfo.reason.kind) {\r\n                case 0 /* UnicodeHighlighterReasonKind.Ambiguous */: {\r\n                    if (isBasicASCII(highlightInfo.reason.confusableWith)) {\r\n                        reason = nls.localize('unicodeHighlight.characterIsAmbiguousASCII', 'The character {0} could be confused with the ASCII character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\r\n                    }\r\n                    else {\r\n                        reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\r\n                    }\r\n                    break;\r\n                }\r\n                case 1 /* UnicodeHighlighterReasonKind.Invisible */:\r\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\r\n                    break;\r\n                case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\r\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\r\n                    break;\r\n            }\r\n            if (existedReason.has(reason)) {\r\n                continue;\r\n            }\r\n            existedReason.add(reason);\r\n            const adjustSettingsArgs = {\r\n                codePoint: codePoint,\r\n                reason: highlightInfo.reason,\r\n                inComment: highlightInfo.inComment,\r\n                inString: highlightInfo.inString,\r\n            };\r\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\r\n            const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\r\n            const markdown = new MarkdownString('', true)\r\n                .appendMarkdown(reason)\r\n                .appendText(' ')\r\n                .appendLink(uri, adjustSettings);\r\n            result.push(new MarkdownHover(this, d.range, [markdown], false, index++));\r\n        }\r\n        return result;\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\r\n    }\r\n};\r\nUnicodeHighlighterHoverParticipant = __decorate([\r\n    __param(1, ILanguageService),\r\n    __param(2, IOpenerService)\r\n], UnicodeHighlighterHoverParticipant);\r\nexport { UnicodeHighlighterHoverParticipant };\r\nfunction codePointToHex(codePoint) {\r\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\r\n}\r\nfunction formatCodePointMarkdown(codePoint) {\r\n    let value = `\\`${codePointToHex(codePoint)}\\``;\r\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\r\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\r\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\r\n    }\r\n    return value;\r\n}\r\nfunction renderCodePointAsInlineCode(codePoint) {\r\n    if (codePoint === 96 /* CharCode.BackTick */) {\r\n        return '`` ` ``';\r\n    }\r\n    return '`' + String.fromCodePoint(codePoint) + '`';\r\n}\r\nfunction computeReason(char, options) {\r\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\r\n}\r\nclass Decorations {\r\n    constructor() {\r\n        this.map = new Map();\r\n    }\r\n    getDecorationFromOptions(options) {\r\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\r\n    }\r\n    getDecoration(hideInComments, hideInStrings) {\r\n        const key = `${hideInComments}${hideInStrings}`;\r\n        let options = this.map.get(key);\r\n        if (!options) {\r\n            options = ModelDecorationOptions.createDynamic({\r\n                description: 'unicode-highlight',\r\n                stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n                className: 'unicode-highlight',\r\n                showIfCollapsed: true,\r\n                overviewRuler: null,\r\n                minimap: null,\r\n                hideInCommentTokens: hideInComments,\r\n                hideInStringTokens: hideInStrings,\r\n            });\r\n            this.map.set(key, options);\r\n        }\r\n        return options;\r\n    }\r\n}\r\nDecorations.instance = new Decorations();\r\nexport class DisableHighlightingInCommentsAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\r\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\r\n            alias: 'Disable highlighting of characters in comments',\r\n            precondition: undefined\r\n        });\r\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\r\n    }\r\n    run(accessor, editor, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\r\n            if (configurationService) {\r\n                this.runAction(configurationService);\r\n            }\r\n        });\r\n    }\r\n    runAction(configurationService) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\r\n        });\r\n    }\r\n}\r\nexport class DisableHighlightingInStringsAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\r\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\r\n            alias: 'Disable highlighting of characters in strings',\r\n            precondition: undefined\r\n        });\r\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\r\n    }\r\n    run(accessor, editor, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\r\n            if (configurationService) {\r\n                this.runAction(configurationService);\r\n            }\r\n        });\r\n    }\r\n    runAction(configurationService) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\r\n        });\r\n    }\r\n}\r\nexport class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\r\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\r\n            alias: 'Disable highlighting of ambiguous characters',\r\n            precondition: undefined\r\n        });\r\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\r\n    }\r\n    run(accessor, editor, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\r\n            if (configurationService) {\r\n                this.runAction(configurationService);\r\n            }\r\n        });\r\n    }\r\n    runAction(configurationService) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\r\n        });\r\n    }\r\n}\r\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\r\nexport class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\r\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\r\n            alias: 'Disable highlighting of invisible characters',\r\n            precondition: undefined\r\n        });\r\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\r\n    }\r\n    run(accessor, editor, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\r\n            if (configurationService) {\r\n                this.runAction(configurationService);\r\n            }\r\n        });\r\n    }\r\n    runAction(configurationService) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\r\n        });\r\n    }\r\n}\r\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\r\nexport class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\r\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\r\n            alias: 'Disable highlighting of non basic ASCII characters',\r\n            precondition: undefined\r\n        });\r\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\r\n    }\r\n    run(accessor, editor, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\r\n            if (configurationService) {\r\n                this.runAction(configurationService);\r\n            }\r\n        });\r\n    }\r\n    runAction(configurationService) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\r\n        });\r\n    }\r\n}\r\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\r\nexport class ShowExcludeOptions extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: ShowExcludeOptions.ID,\r\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\r\n            alias: 'Show Exclude Options',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { codePoint, reason, inString, inComment } = args;\r\n            const char = String.fromCodePoint(codePoint);\r\n            const quickPickService = accessor.get(IQuickInputService);\r\n            const configurationService = accessor.get(IConfigurationService);\r\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\r\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\r\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\r\n                }\r\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\r\n            }\r\n            const options = [];\r\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\r\n                for (const locale of reason.notAmbiguousInLocales) {\r\n                    options.push({\r\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\r\n                        run: () => __awaiter(this, void 0, void 0, function* () {\r\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\r\n                        }),\r\n                    });\r\n                }\r\n            }\r\n            options.push({\r\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\r\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\r\n            });\r\n            if (inComment) {\r\n                const action = new DisableHighlightingInCommentsAction();\r\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\r\n            }\r\n            else if (inString) {\r\n                const action = new DisableHighlightingInStringsAction();\r\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\r\n            }\r\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\r\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\r\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\r\n            }\r\n            else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\r\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\r\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\r\n            }\r\n            else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\r\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\r\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\r\n            }\r\n            else {\r\n                expectNever(reason);\r\n            }\r\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\r\n            if (result) {\r\n                yield result.run();\r\n            }\r\n        });\r\n    }\r\n}\r\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\r\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\r\n        let value;\r\n        if ((typeof existingValue === 'object') && existingValue) {\r\n            value = existingValue;\r\n        }\r\n        else {\r\n            value = {};\r\n        }\r\n        for (const charCode of charCodes) {\r\n            value[String.fromCodePoint(charCode)] = true;\r\n        }\r\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\r\n    });\r\n}\r\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\r\n    var _a;\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\r\n        let value;\r\n        if ((typeof existingValue === 'object') && existingValue) {\r\n            // Copy value, as the existing value is read only\r\n            value = Object.assign({}, existingValue);\r\n        }\r\n        else {\r\n            value = {};\r\n        }\r\n        for (const locale of locales) {\r\n            value[locale] = true;\r\n        }\r\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\r\n    });\r\n}\r\nfunction expectNever(value) {\r\n    throw new Error(`Unexpected value: ${value}`);\r\n}\r\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\r\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\r\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\r\nregisterEditorAction(ShowExcludeOptions);\r\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './bannerController.css';\r\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Action } from '../../../../base/common/actions.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { Link } from '../../../../platform/opener/browser/link.js';\r\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nconst BANNER_ELEMENT_HEIGHT = 26;\r\nlet BannerController = class BannerController extends Disposable {\r\n    constructor(_editor, instantiationService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this.instantiationService = instantiationService;\r\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\r\n    }\r\n    hide() {\r\n        this._editor.setBanner(null, 0);\r\n        this.banner.clear();\r\n    }\r\n    show(item) {\r\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\r\n                var _a;\r\n                this.hide();\r\n                (_a = item.onClose) === null || _a === void 0 ? void 0 : _a.call(item);\r\n            } }));\r\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\r\n    }\r\n};\r\nBannerController = __decorate([\r\n    __param(1, IInstantiationService)\r\n], BannerController);\r\nexport { BannerController };\r\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\r\nlet Banner = class Banner extends Disposable {\r\n    constructor(instantiationService) {\r\n        super();\r\n        this.instantiationService = instantiationService;\r\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\r\n        this.element = $('div.editor-banner');\r\n        this.element.tabIndex = 0;\r\n    }\r\n    getAriaLabel(item) {\r\n        if (item.ariaLabel) {\r\n            return item.ariaLabel;\r\n        }\r\n        if (typeof item.message === 'string') {\r\n            return item.message;\r\n        }\r\n        return undefined;\r\n    }\r\n    getBannerMessage(message) {\r\n        if (typeof message === 'string') {\r\n            const element = $('span');\r\n            element.innerText = message;\r\n            return element;\r\n        }\r\n        return this.markdownRenderer.render(message).element;\r\n    }\r\n    clear() {\r\n        clearNode(this.element);\r\n    }\r\n    show(item) {\r\n        // Clear previous item\r\n        clearNode(this.element);\r\n        // Banner aria label\r\n        const ariaLabel = this.getAriaLabel(item);\r\n        if (ariaLabel) {\r\n            this.element.setAttribute('aria-label', ariaLabel);\r\n        }\r\n        // Icon\r\n        const iconContainer = append(this.element, $('div.icon-container'));\r\n        iconContainer.setAttribute('aria-hidden', 'true');\r\n        if (item.icon) {\r\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\r\n        }\r\n        // Message\r\n        const messageContainer = append(this.element, $('div.message-container'));\r\n        messageContainer.setAttribute('aria-hidden', 'true');\r\n        messageContainer.appendChild(this.getBannerMessage(item.message));\r\n        // Message Actions\r\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\r\n        if (item.actions) {\r\n            for (const action of item.actions) {\r\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\r\n            }\r\n        }\r\n        // Action\r\n        const actionBarContainer = append(this.element, $('div.action-container'));\r\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\r\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\r\n            if (typeof item.onClose === 'function') {\r\n                item.onClose();\r\n            }\r\n        })), { icon: true, label: false });\r\n        this.actionBar.setFocusable(false);\r\n    }\r\n};\r\nBanner = __decorate([\r\n    __param(0, IInstantiationService)\r\n], Banner);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { $, append, EventHelper } from '../../../base/browser/dom.js';\r\nimport { DomEmitter } from '../../../base/browser/event.js';\r\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\r\nimport { EventType as TouchEventType, Gesture } from '../../../base/browser/touch.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { IOpenerService } from '../common/opener.js';\r\nimport './link.css';\r\nlet Link = class Link extends Disposable {\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    set enabled(enabled) {\r\n        if (enabled) {\r\n            this.el.setAttribute('aria-disabled', 'false');\r\n            this.el.tabIndex = 0;\r\n            this.el.style.pointerEvents = 'auto';\r\n            this.el.style.opacity = '1';\r\n            this.el.style.cursor = 'pointer';\r\n            this._enabled = false;\r\n        }\r\n        else {\r\n            this.el.setAttribute('aria-disabled', 'true');\r\n            this.el.tabIndex = -1;\r\n            this.el.style.pointerEvents = 'none';\r\n            this.el.style.opacity = '0.4';\r\n            this.el.style.cursor = 'default';\r\n            this._enabled = true;\r\n        }\r\n        this._enabled = enabled;\r\n    }\r\n    constructor(container, _link, options = {}, openerService) {\r\n        var _a;\r\n        super();\r\n        this._link = _link;\r\n        this._enabled = true;\r\n        this.el = append(container, $('a.monaco-link', {\r\n            tabIndex: (_a = _link.tabIndex) !== null && _a !== void 0 ? _a : 0,\r\n            href: _link.href,\r\n            title: _link.title\r\n        }, _link.label));\r\n        this.el.setAttribute('role', 'button');\r\n        const onClickEmitter = this._register(new DomEmitter(this.el, 'click'));\r\n        const onKeyPress = this._register(new DomEmitter(this.el, 'keypress'));\r\n        const onEnterPress = Event.chain(onKeyPress.event, $ => $.map(e => new StandardKeyboardEvent(e))\r\n            .filter(e => e.keyCode === 3 /* KeyCode.Enter */));\r\n        const onTap = this._register(new DomEmitter(this.el, TouchEventType.Tap)).event;\r\n        this._register(Gesture.addTarget(this.el));\r\n        const onOpen = Event.any(onClickEmitter.event, onEnterPress, onTap);\r\n        this._register(onOpen(e => {\r\n            if (!this.enabled) {\r\n                return;\r\n            }\r\n            EventHelper.stop(e, true);\r\n            if (options === null || options === void 0 ? void 0 : options.opener) {\r\n                options.opener(this._link.href);\r\n            }\r\n            else {\r\n                openerService.open(this._link.href, { allowCommands: true });\r\n            }\r\n        }));\r\n        this.enabled = true;\r\n    }\r\n};\r\nLink = __decorate([\r\n    __param(3, IOpenerService)\r\n], Link);\r\nexport { Link };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { basename } from '../../../../base/common/resources.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\r\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\r\nfunction writeIgnoreState(codeEditorService, model, state) {\r\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\r\n}\r\nfunction readIgnoreState(codeEditorService, model) {\r\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\r\n}\r\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\r\n    constructor(_editor, _dialogService, _codeEditorService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._dialogService = _dialogService;\r\n        this._codeEditorService = _codeEditorService;\r\n        this._isPresentingDialog = false;\r\n        this._config = this._editor.getOption(125 /* EditorOption.unusualLineTerminators */);\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(125 /* EditorOption.unusualLineTerminators */)) {\r\n                this._config = this._editor.getOption(125 /* EditorOption.unusualLineTerminators */);\r\n                this._checkForUnusualLineTerminators();\r\n            }\r\n        }));\r\n        this._register(this._editor.onDidChangeModel(() => {\r\n            this._checkForUnusualLineTerminators();\r\n        }));\r\n        this._register(this._editor.onDidChangeModelContent((e) => {\r\n            if (e.isUndoing) {\r\n                // skip checking in case of undoing\r\n                return;\r\n            }\r\n            this._checkForUnusualLineTerminators();\r\n        }));\r\n        this._checkForUnusualLineTerminators();\r\n    }\r\n    _checkForUnusualLineTerminators() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._config === 'off') {\r\n                return;\r\n            }\r\n            if (!this._editor.hasModel()) {\r\n                return;\r\n            }\r\n            const model = this._editor.getModel();\r\n            if (!model.mightContainUnusualLineTerminators()) {\r\n                return;\r\n            }\r\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\r\n            if (ignoreState === true) {\r\n                // this model should be ignored\r\n                return;\r\n            }\r\n            if (this._editor.getOption(90 /* EditorOption.readOnly */)) {\r\n                // read only editor => sorry!\r\n                return;\r\n            }\r\n            if (this._config === 'auto') {\r\n                // just do it!\r\n                model.removeUnusualLineTerminators(this._editor.getSelections());\r\n                return;\r\n            }\r\n            if (this._isPresentingDialog) {\r\n                // we're currently showing the dialog, which is async.\r\n                // avoid spamming the user\r\n                return;\r\n            }\r\n            let result;\r\n            try {\r\n                this._isPresentingDialog = true;\r\n                result = yield this._dialogService.confirm({\r\n                    title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\r\n                    message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\r\n                    detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\r\n                    primaryButton: nls.localize({ key: 'unusualLineTerminators.fix', comment: ['&& denotes a mnemonic'] }, \"&&Remove Unusual Line Terminators\"),\r\n                    cancelButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\r\n                });\r\n            }\r\n            finally {\r\n                this._isPresentingDialog = false;\r\n            }\r\n            if (!result.confirmed) {\r\n                // this model should be ignored\r\n                writeIgnoreState(this._codeEditorService, model, true);\r\n                return;\r\n            }\r\n            model.removeUnusualLineTerminators(this._editor.getSelections());\r\n        });\r\n    }\r\n};\r\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\r\nUnusualLineTerminatorsDetector = __decorate([\r\n    __param(1, IDialogService),\r\n    __param(2, ICodeEditorService)\r\n], UnusualLineTerminatorsDetector);\r\nexport { UnusualLineTerminatorsDetector };\r\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar WordHighlighterContribution_1;\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport * as arrays from '../../../../base/common/arrays.js';\r\nimport { createCancelablePromise, first, timeout } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { DocumentHighlightKind } from '../../../common/languages.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { getHighlightDecorationOptions } from './highlightDecorations.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nconst ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\r\nexport function getOccurrencesAtPosition(registry, model, position, token) {\r\n    const orderedByScore = registry.ordered(model);\r\n    // in order of score ask the occurrences provider\r\n    // until someone response with a good result\r\n    // (good = none empty array)\r\n    return first(orderedByScore.map(provider => () => {\r\n        return Promise.resolve(provider.provideDocumentHighlights(model, position, token))\r\n            .then(undefined, onUnexpectedExternalError);\r\n    }), arrays.isNonEmptyArray);\r\n}\r\nclass OccurenceAtPositionRequest {\r\n    constructor(_model, _selection, _wordSeparators) {\r\n        this._model = _model;\r\n        this._selection = _selection;\r\n        this._wordSeparators = _wordSeparators;\r\n        this._wordRange = this._getCurrentWordRange(_model, _selection);\r\n        this._result = null;\r\n    }\r\n    get result() {\r\n        if (!this._result) {\r\n            this._result = createCancelablePromise(token => this._compute(this._model, this._selection, this._wordSeparators, token));\r\n        }\r\n        return this._result;\r\n    }\r\n    _getCurrentWordRange(model, selection) {\r\n        const word = model.getWordAtPosition(selection.getPosition());\r\n        if (word) {\r\n            return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\r\n        }\r\n        return null;\r\n    }\r\n    isValid(model, selection, decorations) {\r\n        const lineNumber = selection.startLineNumber;\r\n        const startColumn = selection.startColumn;\r\n        const endColumn = selection.endColumn;\r\n        const currentWordRange = this._getCurrentWordRange(model, selection);\r\n        let requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\r\n        // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\r\n        // (Same symbol)\r\n        for (let i = 0, len = decorations.length; !requestIsValid && i < len; i++) {\r\n            const range = decorations.getRange(i);\r\n            if (range && range.startLineNumber === lineNumber) {\r\n                if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\r\n                    requestIsValid = true;\r\n                }\r\n            }\r\n        }\r\n        return requestIsValid;\r\n    }\r\n    cancel() {\r\n        this.result.cancel();\r\n    }\r\n}\r\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\r\n    constructor(model, selection, wordSeparators, providers) {\r\n        super(model, selection, wordSeparators);\r\n        this._providers = providers;\r\n    }\r\n    _compute(model, selection, wordSeparators, token) {\r\n        return getOccurrencesAtPosition(this._providers, model, selection.getPosition(), token).then(value => value || []);\r\n    }\r\n}\r\nclass TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\r\n    constructor(model, selection, wordSeparators) {\r\n        super(model, selection, wordSeparators);\r\n        this._selectionIsEmpty = selection.isEmpty();\r\n    }\r\n    _compute(model, selection, wordSeparators, token) {\r\n        return timeout(250, token).then(() => {\r\n            if (!selection.isEmpty()) {\r\n                return [];\r\n            }\r\n            const word = model.getWordAtPosition(selection.getPosition());\r\n            if (!word || word.word.length > 1000) {\r\n                return [];\r\n            }\r\n            const matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\r\n            return matches.map(m => {\r\n                return {\r\n                    range: m.range,\r\n                    kind: DocumentHighlightKind.Text\r\n                };\r\n            });\r\n        });\r\n    }\r\n    isValid(model, selection, decorations) {\r\n        const currentSelectionIsEmpty = selection.isEmpty();\r\n        if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\r\n            return false;\r\n        }\r\n        return super.isValid(model, selection, decorations);\r\n    }\r\n}\r\nfunction computeOccurencesAtPosition(registry, model, selection, wordSeparators) {\r\n    if (registry.has(model)) {\r\n        return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators, registry);\r\n    }\r\n    return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\r\n}\r\nregisterModelAndPositionCommand('_executeDocumentHighlights', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    return getOccurrencesAtPosition(languageFeaturesService.documentHighlightProvider, model, position, CancellationToken.None);\r\n});\r\nclass WordHighlighter {\r\n    constructor(editor, providers, linkedHighlighters, contextKeyService) {\r\n        this.toUnhook = new DisposableStore();\r\n        this.workerRequestTokenId = 0;\r\n        this.workerRequestCompleted = false;\r\n        this.workerRequestValue = [];\r\n        this.lastCursorPositionChangeTime = 0;\r\n        this.renderDecorationsTimer = -1;\r\n        this.editor = editor;\r\n        this.providers = providers;\r\n        this.linkedHighlighters = linkedHighlighters;\r\n        this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\r\n        this._ignorePositionChangeEvent = false;\r\n        this.occurrencesHighlight = this.editor.getOption(80 /* EditorOption.occurrencesHighlight */);\r\n        this.model = this.editor.getModel();\r\n        this.toUnhook.add(editor.onDidChangeCursorPosition((e) => {\r\n            if (this._ignorePositionChangeEvent) {\r\n                // We are changing the position => ignore this event\r\n                return;\r\n            }\r\n            if (!this.occurrencesHighlight) {\r\n                // Early exit if nothing needs to be done!\r\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n                return;\r\n            }\r\n            this._onPositionChanged(e);\r\n        }));\r\n        this.toUnhook.add(editor.onDidChangeModelContent((e) => {\r\n            this._stopAll();\r\n        }));\r\n        this.toUnhook.add(editor.onDidChangeConfiguration((e) => {\r\n            const newValue = this.editor.getOption(80 /* EditorOption.occurrencesHighlight */);\r\n            if (this.occurrencesHighlight !== newValue) {\r\n                this.occurrencesHighlight = newValue;\r\n                this._stopAll();\r\n            }\r\n        }));\r\n        this.decorations = this.editor.createDecorationsCollection();\r\n        this.workerRequestTokenId = 0;\r\n        this.workerRequest = null;\r\n        this.workerRequestCompleted = false;\r\n        this.lastCursorPositionChangeTime = 0;\r\n        this.renderDecorationsTimer = -1;\r\n    }\r\n    hasDecorations() {\r\n        return (this.decorations.length > 0);\r\n    }\r\n    restore() {\r\n        if (!this.occurrencesHighlight) {\r\n            return;\r\n        }\r\n        this._run();\r\n    }\r\n    _getSortedHighlights() {\r\n        return (this.decorations.getRanges()\r\n            .sort(Range.compareRangesUsingStarts));\r\n    }\r\n    moveNext() {\r\n        const highlights = this._getSortedHighlights();\r\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\r\n        const newIndex = ((index + 1) % highlights.length);\r\n        const dest = highlights[newIndex];\r\n        try {\r\n            this._ignorePositionChangeEvent = true;\r\n            this.editor.setPosition(dest.getStartPosition());\r\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\r\n            const word = this._getWord();\r\n            if (word) {\r\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\r\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\r\n            }\r\n        }\r\n        finally {\r\n            this._ignorePositionChangeEvent = false;\r\n        }\r\n    }\r\n    moveBack() {\r\n        const highlights = this._getSortedHighlights();\r\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\r\n        const newIndex = ((index - 1 + highlights.length) % highlights.length);\r\n        const dest = highlights[newIndex];\r\n        try {\r\n            this._ignorePositionChangeEvent = true;\r\n            this.editor.setPosition(dest.getStartPosition());\r\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\r\n            const word = this._getWord();\r\n            if (word) {\r\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\r\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\r\n            }\r\n        }\r\n        finally {\r\n            this._ignorePositionChangeEvent = false;\r\n        }\r\n    }\r\n    _removeDecorations() {\r\n        if (this.decorations.length > 0) {\r\n            // remove decorations\r\n            this.decorations.clear();\r\n            this._hasWordHighlights.set(false);\r\n        }\r\n    }\r\n    _stopAll() {\r\n        // Remove any existing decorations\r\n        this._removeDecorations();\r\n        // Cancel any renderDecorationsTimer\r\n        if (this.renderDecorationsTimer !== -1) {\r\n            clearTimeout(this.renderDecorationsTimer);\r\n            this.renderDecorationsTimer = -1;\r\n        }\r\n        // Cancel any worker request\r\n        if (this.workerRequest !== null) {\r\n            this.workerRequest.cancel();\r\n            this.workerRequest = null;\r\n        }\r\n        // Invalidate any worker request callback\r\n        if (!this.workerRequestCompleted) {\r\n            this.workerRequestTokenId++;\r\n            this.workerRequestCompleted = true;\r\n        }\r\n    }\r\n    _onPositionChanged(e) {\r\n        // disabled\r\n        if (!this.occurrencesHighlight) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        // ignore typing & other\r\n        if (e.reason !== 3 /* CursorChangeReason.Explicit */) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        this._run();\r\n    }\r\n    _getWord() {\r\n        const editorSelection = this.editor.getSelection();\r\n        const lineNumber = editorSelection.startLineNumber;\r\n        const startColumn = editorSelection.startColumn;\r\n        return this.model.getWordAtPosition({\r\n            lineNumber: lineNumber,\r\n            column: startColumn\r\n        });\r\n    }\r\n    _run() {\r\n        const editorSelection = this.editor.getSelection();\r\n        // ignore multiline selection\r\n        if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        const startColumn = editorSelection.startColumn;\r\n        const endColumn = editorSelection.endColumn;\r\n        const word = this._getWord();\r\n        // The selection must be inside a word or surround one word at most\r\n        if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\r\n            this._stopAll();\r\n            return;\r\n        }\r\n        // All the effort below is trying to achieve this:\r\n        // - when cursor is moved to a word, trigger immediately a findOccurrences request\r\n        // - 250ms later after the last cursor move event, render the occurrences\r\n        // - no flickering!\r\n        const workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this.decorations));\r\n        // There are 4 cases:\r\n        // a) old workerRequest is valid & completed, renderDecorationsTimer fired\r\n        // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\r\n        // c) old workerRequest is valid, but not completed\r\n        // d) old workerRequest is not valid\r\n        // For a) no action is needed\r\n        // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\r\n        this.lastCursorPositionChangeTime = (new Date()).getTime();\r\n        if (workerRequestIsValid) {\r\n            if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\r\n                // case b)\r\n                // Delay the firing of renderDecorationsTimer by an extra 250 ms\r\n                clearTimeout(this.renderDecorationsTimer);\r\n                this.renderDecorationsTimer = -1;\r\n                this._beginRenderDecorations();\r\n            }\r\n        }\r\n        else {\r\n            // case d)\r\n            // Stop all previous actions and start fresh\r\n            this._stopAll();\r\n            const myRequestId = ++this.workerRequestTokenId;\r\n            this.workerRequestCompleted = false;\r\n            this.workerRequest = computeOccurencesAtPosition(this.providers, this.model, this.editor.getSelection(), this.editor.getOption(129 /* EditorOption.wordSeparators */));\r\n            this.workerRequest.result.then(data => {\r\n                if (myRequestId === this.workerRequestTokenId) {\r\n                    this.workerRequestCompleted = true;\r\n                    this.workerRequestValue = data || [];\r\n                    this._beginRenderDecorations();\r\n                }\r\n            }, onUnexpectedError);\r\n        }\r\n    }\r\n    _beginRenderDecorations() {\r\n        const currentTime = (new Date()).getTime();\r\n        const minimumRenderTime = this.lastCursorPositionChangeTime + 250;\r\n        if (currentTime >= minimumRenderTime) {\r\n            // Synchronous\r\n            this.renderDecorationsTimer = -1;\r\n            this.renderDecorations();\r\n        }\r\n        else {\r\n            // Asynchronous\r\n            this.renderDecorationsTimer = setTimeout(() => {\r\n                this.renderDecorations();\r\n            }, (minimumRenderTime - currentTime));\r\n        }\r\n    }\r\n    renderDecorations() {\r\n        this.renderDecorationsTimer = -1;\r\n        const decorations = [];\r\n        for (const info of this.workerRequestValue) {\r\n            if (info.range) {\r\n                decorations.push({\r\n                    range: info.range,\r\n                    options: getHighlightDecorationOptions(info.kind)\r\n                });\r\n            }\r\n        }\r\n        this.decorations.set(decorations);\r\n        this._hasWordHighlights.set(this.hasDecorations());\r\n        // update decorators of friends\r\n        for (const other of this.linkedHighlighters()) {\r\n            if ((other === null || other === void 0 ? void 0 : other.editor.getModel()) === this.editor.getModel()) {\r\n                other._stopAll();\r\n                other.decorations.set(decorations);\r\n                other._hasWordHighlights.set(other.hasDecorations());\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._stopAll();\r\n        this.toUnhook.dispose();\r\n    }\r\n}\r\nlet WordHighlighterContribution = WordHighlighterContribution_1 = class WordHighlighterContribution extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(WordHighlighterContribution_1.ID);\r\n    }\r\n    constructor(editor, contextKeyService, languageFeaturesService) {\r\n        super();\r\n        this.wordHighlighter = null;\r\n        this.linkedContributions = new Set();\r\n        const createWordHighlighterIfPossible = () => {\r\n            if (editor.hasModel() && !editor.getModel().isTooLargeForTokenization()) {\r\n                this.wordHighlighter = new WordHighlighter(editor, languageFeaturesService.documentHighlightProvider, () => Iterable.map(this.linkedContributions, c => c.wordHighlighter), contextKeyService);\r\n            }\r\n        };\r\n        this._register(editor.onDidChangeModel((e) => {\r\n            if (this.wordHighlighter) {\r\n                this.wordHighlighter.dispose();\r\n                this.wordHighlighter = null;\r\n            }\r\n            createWordHighlighterIfPossible();\r\n        }));\r\n        createWordHighlighterIfPossible();\r\n    }\r\n    saveViewState() {\r\n        if (this.wordHighlighter && this.wordHighlighter.hasDecorations()) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    moveNext() {\r\n        var _a;\r\n        (_a = this.wordHighlighter) === null || _a === void 0 ? void 0 : _a.moveNext();\r\n    }\r\n    moveBack() {\r\n        var _a;\r\n        (_a = this.wordHighlighter) === null || _a === void 0 ? void 0 : _a.moveBack();\r\n    }\r\n    restoreViewState(state) {\r\n        if (this.wordHighlighter && state) {\r\n            this.wordHighlighter.restore();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this.wordHighlighter) {\r\n            this.wordHighlighter.dispose();\r\n            this.wordHighlighter = null;\r\n        }\r\n        super.dispose();\r\n    }\r\n};\r\nWordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\r\nWordHighlighterContribution = WordHighlighterContribution_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, ILanguageFeaturesService)\r\n], WordHighlighterContribution);\r\nexport { WordHighlighterContribution };\r\nclass WordHighlightNavigationAction extends EditorAction {\r\n    constructor(next, opts) {\r\n        super(opts);\r\n        this._isNext = next;\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = WordHighlighterContribution.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        if (this._isNext) {\r\n            controller.moveNext();\r\n        }\r\n        else {\r\n            controller.moveBack();\r\n        }\r\n    }\r\n}\r\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\r\n    constructor() {\r\n        super(true, {\r\n            id: 'editor.action.wordHighlight.next',\r\n            label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\r\n            alias: 'Go to Next Symbol Highlight',\r\n            precondition: ctxHasWordHighlights,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 65 /* KeyCode.F7 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\r\n    constructor() {\r\n        super(false, {\r\n            id: 'editor.action.wordHighlight.prev',\r\n            label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\r\n            alias: 'Go to Previous Symbol Highlight',\r\n            precondition: ctxHasWordHighlights,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nclass TriggerWordHighlightAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.wordHighlight.trigger',\r\n            label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\r\n            alias: 'Trigger Symbol Highlight',\r\n            precondition: ctxHasWordHighlights.toNegated(),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 0,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        const controller = WordHighlighterContribution.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.restoreViewState(true);\r\n    }\r\n}\r\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\r\nregisterEditorAction(NextWordHighlightAction);\r\nregisterEditorAction(PrevWordHighlightAction);\r\nregisterEditorAction(TriggerWordHighlightAction);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../../browser/editorExtensions.js';\r\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\r\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\r\nimport { CursorState } from '../../../common/cursorCommon.js';\r\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\r\nimport { getMapForWordSeparators } from '../../../common/core/wordCharacterClassifier.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\r\nexport class MoveWordCommand extends EditorCommand {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this._inSelectionMode = opts.inSelectionMode;\r\n        this._wordNavigationType = opts.wordNavigationType;\r\n    }\r\n    runEditorCommand(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const wordSeparators = getMapForWordSeparators(editor.getOption(129 /* EditorOption.wordSeparators */));\r\n        const model = editor.getModel();\r\n        const selections = editor.getSelections();\r\n        const result = selections.map((sel) => {\r\n            const inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\r\n            const outPosition = this._move(wordSeparators, model, inPosition, this._wordNavigationType);\r\n            return this._moveTo(sel, outPosition, this._inSelectionMode);\r\n        });\r\n        model.pushStackElement();\r\n        editor._getViewModel().setCursorStates('moveWordCommand', 3 /* CursorChangeReason.Explicit */, result.map(r => CursorState.fromModelSelection(r)));\r\n        if (result.length === 1) {\r\n            const pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\r\n            editor.revealPosition(pos, 0 /* ScrollType.Smooth */);\r\n        }\r\n    }\r\n    _moveTo(from, to, inSelectionMode) {\r\n        if (inSelectionMode) {\r\n            // move just position\r\n            return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\r\n        }\r\n        else {\r\n            // move everything\r\n            return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\r\n        }\r\n    }\r\n}\r\nexport class WordLeftCommand extends MoveWordCommand {\r\n    _move(wordSeparators, model, position, wordNavigationType) {\r\n        return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType);\r\n    }\r\n}\r\nexport class WordRightCommand extends MoveWordCommand {\r\n    _move(wordSeparators, model, position, wordNavigationType) {\r\n        return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\r\n    }\r\n}\r\nexport class CursorWordStartLeft extends WordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'cursorWordStartLeft',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordEndLeft extends WordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordEndLeft',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordLeft extends WordLeftCommand {\r\n    constructor() {\r\n        var _a;\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\r\n            id: 'cursorWordLeft',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */,\r\n                mac: { primary: 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class CursorWordStartLeftSelect extends WordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'cursorWordStartLeftSelect',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordEndLeftSelect extends WordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordEndLeftSelect',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordLeftSelect extends WordLeftCommand {\r\n    constructor() {\r\n        var _a;\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\r\n            id: 'cursorWordLeftSelect',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\r\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\n// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects\r\nexport class CursorWordAccessibilityLeft extends WordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\r\n            id: 'cursorWordAccessibilityLeft',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    _move(_, model, position, wordNavigationType) {\r\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\r\n    }\r\n}\r\nexport class CursorWordAccessibilityLeftSelect extends WordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\r\n            id: 'cursorWordAccessibilityLeftSelect',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    _move(_, model, position, wordNavigationType) {\r\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\r\n    }\r\n}\r\nexport class CursorWordStartRight extends WordRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'cursorWordStartRight',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordEndRight extends WordRightCommand {\r\n    constructor() {\r\n        var _a;\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordEndRight',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\r\n                mac: { primary: 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class CursorWordRight extends WordRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordRight',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordStartRightSelect extends WordRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'cursorWordStartRightSelect',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordEndRightSelect extends WordRightCommand {\r\n    constructor() {\r\n        var _a;\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordEndRightSelect',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\r\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class CursorWordRightSelect extends WordRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordRightSelect',\r\n            precondition: undefined\r\n        });\r\n    }\r\n}\r\nexport class CursorWordAccessibilityRight extends WordRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\r\n            id: 'cursorWordAccessibilityRight',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    _move(_, model, position, wordNavigationType) {\r\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\r\n    }\r\n}\r\nexport class CursorWordAccessibilityRightSelect extends WordRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\r\n            id: 'cursorWordAccessibilityRightSelect',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    _move(_, model, position, wordNavigationType) {\r\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\r\n    }\r\n}\r\nexport class DeleteWordCommand extends EditorCommand {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this._whitespaceHeuristics = opts.whitespaceHeuristics;\r\n        this._wordNavigationType = opts.wordNavigationType;\r\n    }\r\n    runEditorCommand(accessor, editor, args) {\r\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const wordSeparators = getMapForWordSeparators(editor.getOption(129 /* EditorOption.wordSeparators */));\r\n        const model = editor.getModel();\r\n        const selections = editor.getSelections();\r\n        const autoClosingBrackets = editor.getOption(6 /* EditorOption.autoClosingBrackets */);\r\n        const autoClosingQuotes = editor.getOption(11 /* EditorOption.autoClosingQuotes */);\r\n        const autoClosingPairs = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getAutoClosingPairs();\r\n        const viewModel = editor._getViewModel();\r\n        const commands = selections.map((sel) => {\r\n            const deleteRange = this._delete({\r\n                wordSeparators,\r\n                model,\r\n                selection: sel,\r\n                whitespaceHeuristics: this._whitespaceHeuristics,\r\n                autoClosingDelete: editor.getOption(9 /* EditorOption.autoClosingDelete */),\r\n                autoClosingBrackets,\r\n                autoClosingQuotes,\r\n                autoClosingPairs,\r\n                autoClosedCharacters: viewModel.getCursorAutoClosedCharacters()\r\n            }, this._wordNavigationType);\r\n            return new ReplaceCommand(deleteRange, '');\r\n        });\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nexport class DeleteWordLeftCommand extends DeleteWordCommand {\r\n    _delete(ctx, wordNavigationType) {\r\n        const r = WordOperations.deleteWordLeft(ctx, wordNavigationType);\r\n        if (r) {\r\n            return r;\r\n        }\r\n        return new Range(1, 1, 1, 1);\r\n    }\r\n}\r\nexport class DeleteWordRightCommand extends DeleteWordCommand {\r\n    _delete(ctx, wordNavigationType) {\r\n        const r = WordOperations.deleteWordRight(ctx, wordNavigationType);\r\n        if (r) {\r\n            return r;\r\n        }\r\n        const lineCount = ctx.model.getLineCount();\r\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\r\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\r\n    }\r\n}\r\nexport class DeleteWordStartLeft extends DeleteWordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: false,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'deleteWordStartLeft',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nexport class DeleteWordEndLeft extends DeleteWordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: false,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'deleteWordEndLeft',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nexport class DeleteWordLeft extends DeleteWordLeftCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: true,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'deleteWordLeft',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */,\r\n                mac: { primary: 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class DeleteWordStartRight extends DeleteWordRightCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: false,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'deleteWordStartRight',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nexport class DeleteWordEndRight extends DeleteWordRightCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: false,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'deleteWordEndRight',\r\n            precondition: EditorContextKeys.writable\r\n        });\r\n    }\r\n}\r\nexport class DeleteWordRight extends DeleteWordRightCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: true,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'deleteWordRight',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */,\r\n                mac: { primary: 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class DeleteInsideWord extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'deleteInsideWord',\r\n            precondition: EditorContextKeys.writable,\r\n            label: nls.localize('deleteInsideWord', \"Delete Word\"),\r\n            alias: 'Delete Word'\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const wordSeparators = getMapForWordSeparators(editor.getOption(129 /* EditorOption.wordSeparators */));\r\n        const model = editor.getModel();\r\n        const selections = editor.getSelections();\r\n        const commands = selections.map((sel) => {\r\n            const deleteRange = WordOperations.deleteInsideWord(wordSeparators, model, sel);\r\n            return new ReplaceCommand(deleteRange, '');\r\n        });\r\n        editor.pushUndoStop();\r\n        editor.executeCommands(this.id, commands);\r\n        editor.pushUndoStop();\r\n    }\r\n}\r\nregisterEditorCommand(new CursorWordStartLeft());\r\nregisterEditorCommand(new CursorWordEndLeft());\r\nregisterEditorCommand(new CursorWordLeft());\r\nregisterEditorCommand(new CursorWordStartLeftSelect());\r\nregisterEditorCommand(new CursorWordEndLeftSelect());\r\nregisterEditorCommand(new CursorWordLeftSelect());\r\nregisterEditorCommand(new CursorWordStartRight());\r\nregisterEditorCommand(new CursorWordEndRight());\r\nregisterEditorCommand(new CursorWordRight());\r\nregisterEditorCommand(new CursorWordStartRightSelect());\r\nregisterEditorCommand(new CursorWordEndRightSelect());\r\nregisterEditorCommand(new CursorWordRightSelect());\r\nregisterEditorCommand(new CursorWordAccessibilityLeft());\r\nregisterEditorCommand(new CursorWordAccessibilityLeftSelect());\r\nregisterEditorCommand(new CursorWordAccessibilityRight());\r\nregisterEditorCommand(new CursorWordAccessibilityRightSelect());\r\nregisterEditorCommand(new DeleteWordStartLeft());\r\nregisterEditorCommand(new DeleteWordEndLeft());\r\nregisterEditorCommand(new DeleteWordLeft());\r\nregisterEditorCommand(new DeleteWordStartRight());\r\nregisterEditorCommand(new DeleteWordEndRight());\r\nregisterEditorCommand(new DeleteWordRight());\r\nregisterEditorAction(DeleteInsideWord);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { registerEditorCommand } from '../../../browser/editorExtensions.js';\r\nimport { WordPartOperations } from '../../../common/cursor/cursorWordOperations.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { DeleteWordCommand, MoveWordCommand } from '../../wordOperations/browser/wordOperations.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nexport class DeleteWordPartLeft extends DeleteWordCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: true,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'deleteWordPartLeft',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    _delete(ctx, wordNavigationType) {\r\n        const r = WordPartOperations.deleteWordPartLeft(ctx);\r\n        if (r) {\r\n            return r;\r\n        }\r\n        return new Range(1, 1, 1, 1);\r\n    }\r\n}\r\nexport class DeleteWordPartRight extends DeleteWordCommand {\r\n    constructor() {\r\n        super({\r\n            whitespaceHeuristics: true,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'deleteWordPartRight',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    _delete(ctx, wordNavigationType) {\r\n        const r = WordPartOperations.deleteWordPartRight(ctx);\r\n        if (r) {\r\n            return r;\r\n        }\r\n        const lineCount = ctx.model.getLineCount();\r\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\r\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\r\n    }\r\n}\r\nexport class WordPartLeftCommand extends MoveWordCommand {\r\n    _move(wordSeparators, model, position, wordNavigationType) {\r\n        return WordPartOperations.moveWordPartLeft(wordSeparators, model, position);\r\n    }\r\n}\r\nexport class CursorWordPartLeft extends WordPartLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'cursorWordPartLeft',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\n// Register previous id for compatibility purposes\r\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\r\nexport class CursorWordPartLeftSelect extends WordPartLeftCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\r\n            id: 'cursorWordPartLeftSelect',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\n// Register previous id for compatibility purposes\r\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\r\nexport class WordPartRightCommand extends MoveWordCommand {\r\n    _move(wordSeparators, model, position, wordNavigationType) {\r\n        return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\r\n    }\r\n}\r\nexport class CursorWordPartRight extends WordPartRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: false,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordPartRight',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class CursorWordPartRightSelect extends WordPartRightCommand {\r\n    constructor() {\r\n        super({\r\n            inSelectionMode: true,\r\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\r\n            id: 'cursorWordPartRightSelect',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n}\r\nregisterEditorCommand(new DeleteWordPartLeft());\r\nregisterEditorCommand(new DeleteWordPartRight());\r\nregisterEditorCommand(new CursorWordPartLeft());\r\nregisterEditorCommand(new CursorWordPartLeftSelect());\r\nregisterEditorCommand(new CursorWordPartRight());\r\nregisterEditorCommand(new CursorWordPartRightSelect());\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { MessageController } from '../../message/browser/messageController.js';\r\nimport * as nls from '../../../../nls.js';\r\nexport class ReadOnlyMessageController extends Disposable {\r\n    constructor(editor) {\r\n        super();\r\n        this.editor = editor;\r\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\r\n    }\r\n    _onDidAttemptReadOnlyEdit() {\r\n        const messageController = MessageController.get(this.editor);\r\n        if (messageController && this.editor.hasModel()) {\r\n            let message = this.editor.getOptions().get(91 /* EditorOption.readOnlyMessage */);\r\n            if (!message) {\r\n                if (this.editor.isSimpleWidget) {\r\n                    message = new MarkdownString(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"));\r\n                }\r\n                else {\r\n                    message = new MarkdownString(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"));\r\n                }\r\n            }\r\n            messageController.showMessage(message, this.editor.getPosition());\r\n        }\r\n    }\r\n}\r\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\r\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './iPadShowKeyboard.css';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { isIOS } from '../../../../base/common/platform.js';\r\nexport class IPadShowKeyboard extends Disposable {\r\n    constructor(editor) {\r\n        super();\r\n        this.editor = editor;\r\n        this.widget = null;\r\n        if (isIOS) {\r\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\r\n            this.update();\r\n        }\r\n    }\r\n    update() {\r\n        const shouldHaveWidget = (!this.editor.getOption(90 /* EditorOption.readOnly */));\r\n        if (!this.widget && shouldHaveWidget) {\r\n            this.widget = new ShowKeyboardWidget(this.editor);\r\n        }\r\n        else if (this.widget && !shouldHaveWidget) {\r\n            this.widget.dispose();\r\n            this.widget = null;\r\n        }\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        if (this.widget) {\r\n            this.widget.dispose();\r\n            this.widget = null;\r\n        }\r\n    }\r\n}\r\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\r\nclass ShowKeyboardWidget extends Disposable {\r\n    constructor(editor) {\r\n        super();\r\n        this.editor = editor;\r\n        this._domNode = document.createElement('textarea');\r\n        this._domNode.className = 'iPadShowKeyboard';\r\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\r\n            this.editor.focus();\r\n        }));\r\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\r\n            this.editor.focus();\r\n        }));\r\n        this.editor.addOverlayWidget(this);\r\n    }\r\n    dispose() {\r\n        this.editor.removeOverlayWidget(this);\r\n        super.dispose();\r\n    }\r\n    // ----- IOverlayWidget API\r\n    getId() {\r\n        return ShowKeyboardWidget.ID;\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\r\n        };\r\n    }\r\n}\r\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\r\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard, 3 /* EditorContributionInstantiation.Eventually */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './editor.all.js';\r\nimport './standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js';\r\nimport './standalone/browser/inspectTokens/inspectTokens.js';\r\nimport './standalone/browser/quickAccess/standaloneHelpQuickAccess.js';\r\nimport './standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js';\r\nimport './standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js';\r\nimport './standalone/browser/quickAccess/standaloneCommandsQuickAccess.js';\r\nimport './standalone/browser/referenceSearch/standaloneReferenceSearch.js';\r\nimport './standalone/browser/toggleHighContrast/toggleHighContrast.js';\r\nexport * from './editor.api.js';\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Registry } from '../../../../platform/registry/common/platform.js';\r\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\r\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\r\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\r\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\r\n    ctor: HelpQuickAccessProvider,\r\n    prefix: '',\r\n    helpEntries: [{ description: QuickHelpNLS.helpQuickAccessActionLabel }]\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar HelpQuickAccessProvider_1;\r\nimport { localize } from '../../../nls.js';\r\nimport { Registry } from '../../registry/common/platform.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { Extensions } from '../common/quickAccess.js';\r\nimport { IQuickInputService } from '../common/quickInput.js';\r\nlet HelpQuickAccessProvider = HelpQuickAccessProvider_1 = class HelpQuickAccessProvider {\r\n    constructor(quickInputService, keybindingService) {\r\n        this.quickInputService = quickInputService;\r\n        this.keybindingService = keybindingService;\r\n        this.registry = Registry.as(Extensions.Quickaccess);\r\n    }\r\n    provide(picker) {\r\n        const disposables = new DisposableStore();\r\n        // Open a picker with the selected value if picked\r\n        disposables.add(picker.onDidAccept(() => {\r\n            const [item] = picker.selectedItems;\r\n            if (item) {\r\n                this.quickInputService.quickAccess.show(item.prefix, { preserveValue: true });\r\n            }\r\n        }));\r\n        // Also open a picker when we detect the user typed the exact\r\n        // name of a provider (e.g. `?term` for terminals)\r\n        disposables.add(picker.onDidChangeValue(value => {\r\n            const providerDescriptor = this.registry.getQuickAccessProvider(value.substr(HelpQuickAccessProvider_1.PREFIX.length));\r\n            if (providerDescriptor && providerDescriptor.prefix && providerDescriptor.prefix !== HelpQuickAccessProvider_1.PREFIX) {\r\n                this.quickInputService.quickAccess.show(providerDescriptor.prefix, { preserveValue: true });\r\n            }\r\n        }));\r\n        // Fill in all providers\r\n        picker.items = this.getQuickAccessProviders().filter(p => p.prefix !== HelpQuickAccessProvider_1.PREFIX);\r\n        return disposables;\r\n    }\r\n    getQuickAccessProviders() {\r\n        const providers = this.registry\r\n            .getQuickAccessProviders()\r\n            .sort((providerA, providerB) => providerA.prefix.localeCompare(providerB.prefix))\r\n            .flatMap(provider => this.createPicks(provider));\r\n        return providers;\r\n    }\r\n    createPicks(provider) {\r\n        return provider.helpEntries.map(helpEntry => {\r\n            const prefix = helpEntry.prefix || provider.prefix;\r\n            const label = prefix || '\\u2026' /* ... */;\r\n            return {\r\n                prefix,\r\n                label,\r\n                keybinding: helpEntry.commandId ? this.keybindingService.lookupKeybinding(helpEntry.commandId) : undefined,\r\n                ariaLabel: localize('helpPickAriaLabel', \"{0}, {1}\", label, helpEntry.description),\r\n                description: helpEntry.description\r\n            };\r\n        });\r\n    }\r\n};\r\nHelpQuickAccessProvider.PREFIX = '?';\r\nHelpQuickAccessProvider = HelpQuickAccessProvider_1 = __decorate([\r\n    __param(0, IQuickInputService),\r\n    __param(1, IKeybindingService)\r\n], HelpQuickAccessProvider);\r\nexport { HelpQuickAccessProvider };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\r\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\r\nimport { localize } from '../../../../nls.js';\r\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\r\n    constructor() {\r\n        super({ canAcceptInBackground: true });\r\n    }\r\n    provideWithoutTextEditor(picker) {\r\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\r\n        picker.items = [{ label }];\r\n        picker.ariaLabel = label;\r\n        return Disposable.None;\r\n    }\r\n    provideWithTextEditor(context, picker, token) {\r\n        const editor = context.editor;\r\n        const disposables = new DisposableStore();\r\n        // Goto line once picked\r\n        disposables.add(picker.onDidAccept(event => {\r\n            const [item] = picker.selectedItems;\r\n            if (item) {\r\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\r\n                    return;\r\n                }\r\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\r\n                if (!event.inBackground) {\r\n                    picker.hide();\r\n                }\r\n            }\r\n        }));\r\n        // React to picker changes\r\n        const updatePickerAndEditor = () => {\r\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\r\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\r\n            // Picker\r\n            picker.items = [{\r\n                    lineNumber: position.lineNumber,\r\n                    column: position.column,\r\n                    label\r\n                }];\r\n            // ARIA Label\r\n            picker.ariaLabel = label;\r\n            // Clear decorations for invalid range\r\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\r\n                this.clearDecorations(editor);\r\n                return;\r\n            }\r\n            // Reveal\r\n            const range = this.toRange(position.lineNumber, position.column);\r\n            editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\r\n            // Decorate\r\n            this.addDecorations(editor, range);\r\n        };\r\n        updatePickerAndEditor();\r\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\r\n        // Adjust line number visibility as needed\r\n        const codeEditor = getCodeEditor(editor);\r\n        if (codeEditor) {\r\n            const options = codeEditor.getOptions();\r\n            const lineNumbers = options.get(67 /* EditorOption.lineNumbers */);\r\n            if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\r\n                codeEditor.updateOptions({ lineNumbers: 'on' });\r\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\r\n            }\r\n        }\r\n        return disposables;\r\n    }\r\n    toRange(lineNumber = 1, column = 1) {\r\n        return {\r\n            startLineNumber: lineNumber,\r\n            startColumn: column,\r\n            endLineNumber: lineNumber,\r\n            endColumn: column\r\n        };\r\n    }\r\n    parsePosition(editor, value) {\r\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\r\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\r\n        const endLine = this.lineCount(editor) + 1;\r\n        return {\r\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\r\n            column: numbers[1]\r\n        };\r\n    }\r\n    getPickLabel(editor, lineNumber, column) {\r\n        // Location valid: indicate this as picker label\r\n        if (this.isValidLineNumber(editor, lineNumber)) {\r\n            if (this.isValidColumn(editor, lineNumber, column)) {\r\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\r\n            }\r\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\r\n        }\r\n        // Location invalid: show generic label\r\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\r\n        const lineCount = this.lineCount(editor);\r\n        if (lineCount > 1) {\r\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\r\n        }\r\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\r\n    }\r\n    isValidLineNumber(editor, lineNumber) {\r\n        if (!lineNumber || typeof lineNumber !== 'number') {\r\n            return false;\r\n        }\r\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\r\n    }\r\n    isValidColumn(editor, lineNumber, column) {\r\n        if (!column || typeof column !== 'number') {\r\n            return false;\r\n        }\r\n        const model = this.getModel(editor);\r\n        if (!model) {\r\n            return false;\r\n        }\r\n        const positionCandidate = { lineNumber, column };\r\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\r\n    }\r\n    lineCount(editor) {\r\n        var _a, _b;\r\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\r\n    }\r\n}\r\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\r\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\r\nimport { OverviewRulerLane } from '../../../common/model.js';\r\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\r\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\r\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\r\n/**\r\n * A reusable quick access provider for the editor with support\r\n * for adding decorations for navigating in the currently active file\r\n * (for example \"Go to line\", \"Go to symbol\").\r\n */\r\nexport class AbstractEditorNavigationQuickAccessProvider {\r\n    constructor(options) {\r\n        this.options = options;\r\n        //#endregion\r\n        //#region Decorations Utils\r\n        this.rangeHighlightDecorationId = undefined;\r\n    }\r\n    //#region Provider methods\r\n    provide(picker, token) {\r\n        var _a;\r\n        const disposables = new DisposableStore();\r\n        // Apply options if any\r\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\r\n        // Disable filtering & sorting, we control the results\r\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\r\n        // Provide based on current active editor\r\n        const pickerDisposable = disposables.add(new MutableDisposable());\r\n        pickerDisposable.value = this.doProvide(picker, token);\r\n        // Re-create whenever the active editor changes\r\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\r\n            // Clear old\r\n            pickerDisposable.value = undefined;\r\n            // Add new\r\n            pickerDisposable.value = this.doProvide(picker, token);\r\n        }));\r\n        return disposables;\r\n    }\r\n    doProvide(picker, token) {\r\n        var _a;\r\n        const disposables = new DisposableStore();\r\n        // With text control\r\n        const editor = this.activeTextEditorControl;\r\n        if (editor && this.canProvideWithTextEditor(editor)) {\r\n            const context = { editor };\r\n            // Restore any view state if this picker was closed\r\n            // without actually going to a line\r\n            const codeEditor = getCodeEditor(editor);\r\n            if (codeEditor) {\r\n                // Remember view state and update it when the cursor position\r\n                // changes even later because it could be that the user has\r\n                // configured quick access to remain open when focus is lost and\r\n                // we always want to restore the current location.\r\n                let lastKnownEditorViewState = (_a = editor.saveViewState()) !== null && _a !== void 0 ? _a : undefined;\r\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\r\n                    var _a;\r\n                    lastKnownEditorViewState = (_a = editor.saveViewState()) !== null && _a !== void 0 ? _a : undefined;\r\n                }));\r\n                context.restoreViewState = () => {\r\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\r\n                        editor.restoreViewState(lastKnownEditorViewState);\r\n                    }\r\n                };\r\n                disposables.add(createSingleCallFunction(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\r\n            }\r\n            // Clean up decorations on dispose\r\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\r\n            // Ask subclass for entries\r\n            disposables.add(this.provideWithTextEditor(context, picker, token));\r\n        }\r\n        // Without text control\r\n        else {\r\n            disposables.add(this.provideWithoutTextEditor(picker, token));\r\n        }\r\n        return disposables;\r\n    }\r\n    /**\r\n     * Subclasses to implement if they can operate on the text editor.\r\n     */\r\n    canProvideWithTextEditor(editor) {\r\n        return true;\r\n    }\r\n    gotoLocation({ editor }, options) {\r\n        editor.setSelection(options.range);\r\n        editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\r\n        if (!options.preserveFocus) {\r\n            editor.focus();\r\n        }\r\n        const model = editor.getModel();\r\n        if (model && 'getLineContent' in model) {\r\n            status(`${model.getLineContent(options.range.startLineNumber)}`);\r\n        }\r\n    }\r\n    getModel(editor) {\r\n        var _a;\r\n        return isDiffEditor(editor) ?\r\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\r\n            editor.getModel();\r\n    }\r\n    addDecorations(editor, range) {\r\n        editor.changeDecorations(changeAccessor => {\r\n            // Reset old decorations if any\r\n            const deleteDecorations = [];\r\n            if (this.rangeHighlightDecorationId) {\r\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\r\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\r\n                this.rangeHighlightDecorationId = undefined;\r\n            }\r\n            // Add new decorations for the range\r\n            const newDecorations = [\r\n                // highlight the entire line on the range\r\n                {\r\n                    range,\r\n                    options: {\r\n                        description: 'quick-access-range-highlight',\r\n                        className: 'rangeHighlight',\r\n                        isWholeLine: true\r\n                    }\r\n                },\r\n                // also add overview ruler highlight\r\n                {\r\n                    range,\r\n                    options: {\r\n                        description: 'quick-access-range-highlight-overview',\r\n                        overviewRuler: {\r\n                            color: themeColorFromId(overviewRulerRangeHighlight),\r\n                            position: OverviewRulerLane.Full\r\n                        }\r\n                    }\r\n                }\r\n            ];\r\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\r\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\r\n        });\r\n    }\r\n    clearDecorations(editor) {\r\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\r\n        if (rangeHighlightDecorationId) {\r\n            editor.changeDecorations(changeAccessor => {\r\n                changeAccessor.deltaDecorations([\r\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\r\n                    rangeHighlightDecorationId.rangeHighlightId\r\n                ], []);\r\n            });\r\n            this.rangeHighlightDecorationId = undefined;\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\r\nimport { Registry } from '../../../../platform/registry/common/platform.js';\r\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\r\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\r\n    constructor(editorService) {\r\n        super();\r\n        this.editorService = editorService;\r\n        this.onDidActiveTextEditorControlChange = Event.None;\r\n    }\r\n    get activeTextEditorControl() {\r\n        var _a;\r\n        return (_a = this.editorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : undefined;\r\n    }\r\n};\r\nStandaloneGotoLineQuickAccessProvider = __decorate([\r\n    __param(0, ICodeEditorService)\r\n], StandaloneGotoLineQuickAccessProvider);\r\nexport { StandaloneGotoLineQuickAccessProvider };\r\nexport class GotoLineAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: GotoLineAction.ID,\r\n            label: GoToLineNLS.gotoLineActionLabel,\r\n            alias: 'Go to Line/Column...',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\r\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 37 /* KeyCode.KeyG */ },\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\r\n    }\r\n}\r\nGotoLineAction.ID = 'editor.action.gotoLine';\r\nregisterEditorAction(GotoLineAction);\r\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\r\n    ctor: StandaloneGotoLineQuickAccessProvider,\r\n    prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\r\n    helpEntries: [{ description: GoToLineNLS.gotoLineActionLabel, commandId: GotoLineAction.ID }]\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar AbstractGotoSymbolQuickAccessProvider_1;\r\nimport { DeferredPromise } from '../../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { format, trim } from '../../../../base/common/strings.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { SymbolKinds, getAriaLabelForSymbol } from '../../../common/languages.js';\r\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\r\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { findLast } from '../../../../base/common/arraysFind.js';\r\nlet AbstractGotoSymbolQuickAccessProvider = AbstractGotoSymbolQuickAccessProvider_1 = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\r\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\r\n        super(options);\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._outlineModelService = _outlineModelService;\r\n        this.options = options;\r\n        this.options.canAcceptInBackground = true;\r\n    }\r\n    provideWithoutTextEditor(picker) {\r\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\r\n        return Disposable.None;\r\n    }\r\n    provideWithTextEditor(context, picker, token) {\r\n        const editor = context.editor;\r\n        const model = this.getModel(editor);\r\n        if (!model) {\r\n            return Disposable.None;\r\n        }\r\n        // Provide symbols from model if available in registry\r\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\r\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\r\n        }\r\n        // Otherwise show an entry for a model without registry\r\n        // But give a chance to resolve the symbols at a later\r\n        // point if possible\r\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\r\n    }\r\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\r\n        const disposables = new DisposableStore();\r\n        // Generic pick for not having any symbol information\r\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\r\n        // Wait for changes to the registry and see if eventually\r\n        // we do get symbols. This can happen if the picker is opened\r\n        // very early after the model has loaded but before the\r\n        // language registry is ready.\r\n        // https://github.com/microsoft/vscode/issues/70607\r\n        (() => __awaiter(this, void 0, void 0, function* () {\r\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\r\n            if (!result || token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\r\n        }))();\r\n        return disposables;\r\n    }\r\n    provideLabelPick(picker, label) {\r\n        picker.items = [{ label, index: 0, kind: 14 /* SymbolKind.String */ }];\r\n        picker.ariaLabel = label;\r\n    }\r\n    waitForLanguageSymbolRegistry(model, disposables) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\r\n                return true;\r\n            }\r\n            const symbolProviderRegistryPromise = new DeferredPromise();\r\n            // Resolve promise when registry knows model\r\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\r\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\r\n                    symbolProviderListener.dispose();\r\n                    symbolProviderRegistryPromise.complete(true);\r\n                }\r\n            }));\r\n            // Resolve promise when we get disposed too\r\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\r\n            return symbolProviderRegistryPromise.p;\r\n        });\r\n    }\r\n    doProvideWithEditorSymbols(context, model, picker, token) {\r\n        var _a;\r\n        const editor = context.editor;\r\n        const disposables = new DisposableStore();\r\n        // Goto symbol once picked\r\n        disposables.add(picker.onDidAccept(event => {\r\n            const [item] = picker.selectedItems;\r\n            if (item && item.range) {\r\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\r\n                if (!event.inBackground) {\r\n                    picker.hide();\r\n                }\r\n            }\r\n        }));\r\n        // Goto symbol side by side if enabled\r\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\r\n            if (item && item.range) {\r\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\r\n                picker.hide();\r\n            }\r\n        }));\r\n        // Resolve symbols from document once and reuse this\r\n        // request for all filtering and typing then on\r\n        const symbolsPromise = this.getDocumentSymbols(model, token);\r\n        // Set initial picks and update on type\r\n        let picksCts = undefined;\r\n        const updatePickerItems = (positionToEnclose) => __awaiter(this, void 0, void 0, function* () {\r\n            // Cancel any previous ask for picks and busy\r\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\r\n            picker.busy = false;\r\n            // Create new cancellation source for this run\r\n            picksCts = new CancellationTokenSource(token);\r\n            // Collect symbol picks\r\n            picker.busy = true;\r\n            try {\r\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider_1.PREFIX.length).trim());\r\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\r\n                if (token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                if (items.length > 0) {\r\n                    picker.items = items;\r\n                    if (positionToEnclose && query.original.length === 0) {\r\n                        const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\r\n                        if (candidate) {\r\n                            picker.activeItems = [candidate];\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (query.original.length > 0) {\r\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\r\n                    }\r\n                    else {\r\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\r\n                    }\r\n                }\r\n            }\r\n            finally {\r\n                if (!token.isCancellationRequested) {\r\n                    picker.busy = false;\r\n                }\r\n            }\r\n        });\r\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\r\n        updatePickerItems((_a = editor.getSelection()) === null || _a === void 0 ? void 0 : _a.getPosition());\r\n        // Reveal and decorate when active item changes\r\n        disposables.add(picker.onDidChangeActive(() => {\r\n            const [item] = picker.activeItems;\r\n            if (item && item.range) {\r\n                // Reveal\r\n                editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\r\n                // Decorate\r\n                this.addDecorations(editor, item.range.decoration);\r\n            }\r\n        }));\r\n        return disposables;\r\n    }\r\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const symbols = yield symbolsPromise;\r\n            if (token.isCancellationRequested) {\r\n                return [];\r\n            }\r\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider_1.SCOPE_PREFIX) === 0;\r\n            const filterPos = filterBySymbolKind ? 1 : 0;\r\n            // Split between symbol and container query\r\n            let symbolQuery;\r\n            let containerQuery;\r\n            if (query.values && query.values.length > 1) {\r\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\r\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\r\n            }\r\n            else {\r\n                symbolQuery = query;\r\n            }\r\n            // Convert to symbol picks and apply filtering\r\n            let buttons;\r\n            const openSideBySideDirection = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n            if (openSideBySideDirection) {\r\n                buttons = [{\r\n                        iconClass: openSideBySideDirection === 'right' ? ThemeIcon.asClassName(Codicon.splitHorizontal) : ThemeIcon.asClassName(Codicon.splitVertical),\r\n                        tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\r\n                    }];\r\n            }\r\n            const filteredSymbolPicks = [];\r\n            for (let index = 0; index < symbols.length; index++) {\r\n                const symbol = symbols[index];\r\n                const symbolLabel = trim(symbol.name);\r\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\r\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\r\n                let containerLabel = symbol.containerName;\r\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\r\n                    if (containerLabel) {\r\n                        containerLabel = `${options.extraContainerLabel}  ${containerLabel}`;\r\n                    }\r\n                    else {\r\n                        containerLabel = options.extraContainerLabel;\r\n                    }\r\n                }\r\n                let symbolScore = undefined;\r\n                let symbolMatches = undefined;\r\n                let containerScore = undefined;\r\n                let containerMatches = undefined;\r\n                if (query.original.length > filterPos) {\r\n                    // First: try to score on the entire query, it is possible that\r\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\r\n                    // can be a match on a markdown symbol \"change log\"). In that\r\n                    // case we want to skip the container query altogether.\r\n                    let skipContainerQuery = false;\r\n                    if (symbolQuery !== query) {\r\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\r\n                        if (typeof symbolScore === 'number') {\r\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\r\n                        }\r\n                    }\r\n                    // Otherwise: score on the symbol query and match on the container later\r\n                    if (typeof symbolScore !== 'number') {\r\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\r\n                        if (typeof symbolScore !== 'number') {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    // Score by container if specified\r\n                    if (!skipContainerQuery && containerQuery) {\r\n                        if (containerLabel && containerQuery.original.length > 0) {\r\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\r\n                        }\r\n                        if (typeof containerScore !== 'number') {\r\n                            continue;\r\n                        }\r\n                        if (typeof symbolScore === 'number') {\r\n                            symbolScore += containerScore; // boost symbolScore by containerScore\r\n                        }\r\n                    }\r\n                }\r\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\r\n                filteredSymbolPicks.push({\r\n                    index,\r\n                    kind: symbol.kind,\r\n                    score: symbolScore,\r\n                    label: symbolLabelWithIcon,\r\n                    ariaLabel: getAriaLabelForSymbol(symbol.name, symbol.kind),\r\n                    description: containerLabel,\r\n                    highlights: deprecated ? undefined : {\r\n                        label: symbolMatches,\r\n                        description: containerMatches\r\n                    },\r\n                    range: {\r\n                        selection: Range.collapseToStart(symbol.selectionRange),\r\n                        decoration: symbol.range\r\n                    },\r\n                    strikethrough: deprecated,\r\n                    buttons\r\n                });\r\n            }\r\n            // Sort by score\r\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\r\n                this.compareByKindAndScore(symbolA, symbolB) :\r\n                this.compareByScore(symbolA, symbolB));\r\n            // Add separator for types\r\n            // - @  only total number of symbols\r\n            // - @: grouped by symbol kind\r\n            let symbolPicks = [];\r\n            if (filterBySymbolKind) {\r\n                let lastSymbolKind = undefined;\r\n                let lastSeparator = undefined;\r\n                let lastSymbolKindCounter = 0;\r\n                function updateLastSeparatorLabel() {\r\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\r\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\r\n                    }\r\n                }\r\n                for (const symbolPick of sortedFilteredSymbolPicks) {\r\n                    // Found new kind\r\n                    if (lastSymbolKind !== symbolPick.kind) {\r\n                        // Update last separator with number of symbols we found for kind\r\n                        updateLastSeparatorLabel();\r\n                        lastSymbolKind = symbolPick.kind;\r\n                        lastSymbolKindCounter = 1;\r\n                        // Add new separator for new kind\r\n                        lastSeparator = { type: 'separator' };\r\n                        symbolPicks.push(lastSeparator);\r\n                    }\r\n                    // Existing kind, keep counting\r\n                    else {\r\n                        lastSymbolKindCounter++;\r\n                    }\r\n                    // Add to final result\r\n                    symbolPicks.push(symbolPick);\r\n                }\r\n                // Update last separator with number of symbols we found for kind\r\n                updateLastSeparatorLabel();\r\n            }\r\n            else if (sortedFilteredSymbolPicks.length > 0) {\r\n                symbolPicks = [\r\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\r\n                    ...sortedFilteredSymbolPicks\r\n                ];\r\n            }\r\n            return symbolPicks;\r\n        });\r\n    }\r\n    compareByScore(symbolA, symbolB) {\r\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\r\n            return 1;\r\n        }\r\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\r\n            return -1;\r\n        }\r\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\r\n            if (symbolA.score > symbolB.score) {\r\n                return -1;\r\n            }\r\n            else if (symbolA.score < symbolB.score) {\r\n                return 1;\r\n            }\r\n        }\r\n        if (symbolA.index < symbolB.index) {\r\n            return -1;\r\n        }\r\n        else if (symbolA.index > symbolB.index) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    compareByKindAndScore(symbolA, symbolB) {\r\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\r\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\r\n        // Sort by type first if scoped search\r\n        const result = kindA.localeCompare(kindB);\r\n        if (result === 0) {\r\n            return this.compareByScore(symbolA, symbolB);\r\n        }\r\n        return result;\r\n    }\r\n    getDocumentSymbols(document, token) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const model = yield this._outlineModelService.getOrCreate(document, token);\r\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\r\n        });\r\n    }\r\n};\r\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\r\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\r\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider_1.PREFIX}${AbstractGotoSymbolQuickAccessProvider_1.SCOPE_PREFIX}`;\r\nAbstractGotoSymbolQuickAccessProvider = AbstractGotoSymbolQuickAccessProvider_1 = __decorate([\r\n    __param(0, ILanguageFeaturesService),\r\n    __param(1, IOutlineModelService)\r\n], AbstractGotoSymbolQuickAccessProvider);\r\nexport { AbstractGotoSymbolQuickAccessProvider };\r\n// #region NLS Helpers\r\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\r\nconst NLS_SYMBOL_KIND_CACHE = {\r\n    [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\r\n    [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\r\n    [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\r\n    [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\r\n    [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\r\n    [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\r\n    [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\r\n    [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\r\n    [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\r\n    [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\r\n    [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\r\n    [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\r\n    [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\r\n    [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\r\n    [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\r\n    [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\r\n    [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\r\n    [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\r\n    [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\r\n    [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\r\n    [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\r\n    [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\r\n    [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\r\n    [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\r\n    [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\r\n};\r\n//#endregion\r\n", "import { createMatches as createFuzzyMatches, fuzzyScore } from './filters.js';\r\nimport { sep } from './path.js';\r\nimport { isWindows } from './platform.js';\r\nimport { stripWildcards } from './strings.js';\r\nconst NO_SCORE2 = [undefined, []];\r\nexport function scoreFuzzy2(target, query, patternStart = 0, wordStart = 0) {\r\n    // Score: multiple inputs\r\n    const preparedQuery = query;\r\n    if (preparedQuery.values && preparedQuery.values.length > 1) {\r\n        return doScoreFuzzy2Multiple(target, preparedQuery.values, patternStart, wordStart);\r\n    }\r\n    // Score: single input\r\n    return doScoreFuzzy2Single(target, query, patternStart, wordStart);\r\n}\r\nfunction doScoreFuzzy2Multiple(target, query, patternStart, wordStart) {\r\n    let totalScore = 0;\r\n    const totalMatches = [];\r\n    for (const queryPiece of query) {\r\n        const [score, matches] = doScoreFuzzy2Single(target, queryPiece, patternStart, wordStart);\r\n        if (typeof score !== 'number') {\r\n            // if a single query value does not match, return with\r\n            // no score entirely, we require all queries to match\r\n            return NO_SCORE2;\r\n        }\r\n        totalScore += score;\r\n        totalMatches.push(...matches);\r\n    }\r\n    // if we have a score, ensure that the positions are\r\n    // sorted in ascending order and distinct\r\n    return [totalScore, normalizeMatches(totalMatches)];\r\n}\r\nfunction doScoreFuzzy2Single(target, query, patternStart, wordStart) {\r\n    const score = fuzzyScore(query.original, query.originalLowercase, patternStart, target, target.toLowerCase(), wordStart, { firstMatchCanBeWeak: true, boostFullMatch: true });\r\n    if (!score) {\r\n        return NO_SCORE2;\r\n    }\r\n    return [score[0], createFuzzyMatches(score)];\r\n}\r\nconst NO_ITEM_SCORE = Object.freeze({ score: 0 });\r\nfunction normalizeMatches(matches) {\r\n    // sort matches by start to be able to normalize\r\n    const sortedMatches = matches.sort((matchA, matchB) => {\r\n        return matchA.start - matchB.start;\r\n    });\r\n    // merge matches that overlap\r\n    const normalizedMatches = [];\r\n    let currentMatch = undefined;\r\n    for (const match of sortedMatches) {\r\n        // if we have no current match or the matches\r\n        // do not overlap, we take it as is and remember\r\n        // it for future merging\r\n        if (!currentMatch || !matchOverlaps(currentMatch, match)) {\r\n            currentMatch = match;\r\n            normalizedMatches.push(match);\r\n        }\r\n        // otherwise we merge the matches\r\n        else {\r\n            currentMatch.start = Math.min(currentMatch.start, match.start);\r\n            currentMatch.end = Math.max(currentMatch.end, match.end);\r\n        }\r\n    }\r\n    return normalizedMatches;\r\n}\r\nfunction matchOverlaps(matchA, matchB) {\r\n    if (matchA.end < matchB.start) {\r\n        return false; // A ends before B starts\r\n    }\r\n    if (matchB.end < matchA.start) {\r\n        return false; // B ends before A starts\r\n    }\r\n    return true;\r\n}\r\n/*\r\n * If a query is wrapped in quotes, the user does not want to\r\n * use fuzzy search for this query.\r\n */\r\nfunction queryExpectsExactMatch(query) {\r\n    return query.startsWith('\"') && query.endsWith('\"');\r\n}\r\n/**\r\n * Helper function to prepare a search value for scoring by removing unwanted characters\r\n * and allowing to score on multiple pieces separated by whitespace character.\r\n */\r\nconst MULTIPLE_QUERY_VALUES_SEPARATOR = ' ';\r\nexport function prepareQuery(original) {\r\n    if (typeof original !== 'string') {\r\n        original = '';\r\n    }\r\n    const originalLowercase = original.toLowerCase();\r\n    const { pathNormalized, normalized, normalizedLowercase } = normalizeQuery(original);\r\n    const containsPathSeparator = pathNormalized.indexOf(sep) >= 0;\r\n    const expectExactMatch = queryExpectsExactMatch(original);\r\n    let values = undefined;\r\n    const originalSplit = original.split(MULTIPLE_QUERY_VALUES_SEPARATOR);\r\n    if (originalSplit.length > 1) {\r\n        for (const originalPiece of originalSplit) {\r\n            const expectExactMatchPiece = queryExpectsExactMatch(originalPiece);\r\n            const { pathNormalized: pathNormalizedPiece, normalized: normalizedPiece, normalizedLowercase: normalizedLowercasePiece } = normalizeQuery(originalPiece);\r\n            if (normalizedPiece) {\r\n                if (!values) {\r\n                    values = [];\r\n                }\r\n                values.push({\r\n                    original: originalPiece,\r\n                    originalLowercase: originalPiece.toLowerCase(),\r\n                    pathNormalized: pathNormalizedPiece,\r\n                    normalized: normalizedPiece,\r\n                    normalizedLowercase: normalizedLowercasePiece,\r\n                    expectContiguousMatch: expectExactMatchPiece\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return { original, originalLowercase, pathNormalized, normalized, normalizedLowercase, values, containsPathSeparator, expectContiguousMatch: expectExactMatch };\r\n}\r\nfunction normalizeQuery(original) {\r\n    let pathNormalized;\r\n    if (isWindows) {\r\n        pathNormalized = original.replace(/\\//g, sep); // Help Windows users to search for paths when using slash\r\n    }\r\n    else {\r\n        pathNormalized = original.replace(/\\\\/g, sep); // Help macOS/Linux users to search for paths when using backslash\r\n    }\r\n    // we remove quotes here because quotes are used for exact match search\r\n    const normalized = stripWildcards(pathNormalized).replace(/\\s|\"/g, '');\r\n    return {\r\n        pathNormalized,\r\n        normalized,\r\n        normalizedLowercase: normalized.toLowerCase()\r\n    };\r\n}\r\nexport function pieceToQuery(arg1) {\r\n    if (Array.isArray(arg1)) {\r\n        return prepareQuery(arg1.map(piece => piece.original).join(MULTIPLE_QUERY_VALUES_SEPARATOR));\r\n    }\r\n    return prepareQuery(arg1.original);\r\n}\r\n//#endregion\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\r\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\r\nimport { Registry } from '../../../../platform/registry/common/platform.js';\r\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IQuickInputService, ItemActivation } from '../../../../platform/quickinput/common/quickInput.js';\r\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\r\n    constructor(editorService, languageFeaturesService, outlineModelService) {\r\n        super(languageFeaturesService, outlineModelService);\r\n        this.editorService = editorService;\r\n        this.onDidActiveTextEditorControlChange = Event.None;\r\n    }\r\n    get activeTextEditorControl() {\r\n        var _a;\r\n        return (_a = this.editorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : undefined;\r\n    }\r\n};\r\nStandaloneGotoSymbolQuickAccessProvider = __decorate([\r\n    __param(0, ICodeEditorService),\r\n    __param(1, ILanguageFeaturesService),\r\n    __param(2, IOutlineModelService)\r\n], StandaloneGotoSymbolQuickAccessProvider);\r\nexport { StandaloneGotoSymbolQuickAccessProvider };\r\nexport class GotoSymbolAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: GotoSymbolAction.ID,\r\n            label: QuickOutlineNLS.quickOutlineActionLabel,\r\n            alias: 'Go to Symbol...',\r\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 45 /* KeyCode.KeyO */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: 'navigation',\r\n                order: 3\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX, { itemActivation: ItemActivation.NONE });\r\n    }\r\n}\r\nGotoSymbolAction.ID = 'editor.action.quickOutline';\r\nregisterEditorAction(GotoSymbolAction);\r\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\r\n    ctor: StandaloneGotoSymbolQuickAccessProvider,\r\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\r\n    helpEntries: [\r\n        { description: QuickOutlineNLS.quickOutlineActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX, commandId: GotoSymbolAction.ID },\r\n        { description: QuickOutlineNLS.quickOutlineByCategoryActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY }\r\n    ]\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { Registry } from '../../../../platform/registry/common/platform.js';\r\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\r\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\r\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\r\n    get activeTextEditorControl() { var _a; return (_a = this.codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : undefined; }\r\n    constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\r\n        super({ showAlias: false }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\r\n        this.codeEditorService = codeEditorService;\r\n    }\r\n    getCommandPicks() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return this.getCodeEditorCommandPicks();\r\n        });\r\n    }\r\n    hasAdditionalCommandPicks() {\r\n        return false;\r\n    }\r\n    getAdditionalCommandPicks() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return [];\r\n        });\r\n    }\r\n};\r\nStandaloneCommandsQuickAccessProvider = __decorate([\r\n    __param(0, IInstantiationService),\r\n    __param(1, ICodeEditorService),\r\n    __param(2, IKeybindingService),\r\n    __param(3, ICommandService),\r\n    __param(4, ITelemetryService),\r\n    __param(5, IDialogService)\r\n], StandaloneCommandsQuickAccessProvider);\r\nexport { StandaloneCommandsQuickAccessProvider };\r\nexport class GotoLineAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: GotoLineAction.ID,\r\n            label: QuickCommandNLS.quickCommandActionLabel,\r\n            alias: 'Command Palette',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 59 /* KeyCode.F1 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: 'z_commands',\r\n                order: 1\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\r\n    }\r\n}\r\nGotoLineAction.ID = 'editor.action.quickCommand';\r\nregisterEditorAction(GotoLineAction);\r\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\r\n    ctor: StandaloneCommandsQuickAccessProvider,\r\n    prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\r\n    helpEntries: [{ description: QuickCommandNLS.quickCommandHelp, commandId: GotoLineAction.ID }]\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as arrays from './arrays.js';\r\nimport * as types from './types.js';\r\nimport * as nls from '../../nls.js';\r\nfunction exceptionToErrorMessage(exception, verbose) {\r\n    if (verbose && (exception.stack || exception.stacktrace)) {\r\n        return nls.localize('stackTrace.format', \"{0}: {1}\", detectSystemErrorMessage(exception), stackToString(exception.stack) || stackToString(exception.stacktrace));\r\n    }\r\n    return detectSystemErrorMessage(exception);\r\n}\r\nfunction stackToString(stack) {\r\n    if (Array.isArray(stack)) {\r\n        return stack.join('\\n');\r\n    }\r\n    return stack;\r\n}\r\nfunction detectSystemErrorMessage(exception) {\r\n    // Custom node.js error from us\r\n    if (exception.code === 'ERR_UNC_HOST_NOT_ALLOWED') {\r\n        return `${exception.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`;\r\n    }\r\n    // See https://nodejs.org/api/errors.html#errors_class_system_error\r\n    if (typeof exception.code === 'string' && typeof exception.errno === 'number' && typeof exception.syscall === 'string') {\r\n        return nls.localize('nodeExceptionMessage', \"A system error occurred ({0})\", exception.message);\r\n    }\r\n    return exception.message || nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\r\n}\r\n/**\r\n * Tries to generate a human readable error message out of the error. If the verbose parameter\r\n * is set to true, the error message will include stacktrace details if provided.\r\n *\r\n * @returns A string containing the error message.\r\n */\r\nexport function toErrorMessage(error = null, verbose = false) {\r\n    if (!error) {\r\n        return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\r\n    }\r\n    if (Array.isArray(error)) {\r\n        const errors = arrays.coalesce(error);\r\n        const msg = toErrorMessage(errors[0], verbose);\r\n        if (errors.length > 1) {\r\n            return nls.localize('error.moreErrors', \"{0} ({1} errors in total)\", msg, errors.length);\r\n        }\r\n        return msg;\r\n    }\r\n    if (types.isString(error)) {\r\n        return error;\r\n    }\r\n    if (error.detail) {\r\n        const detail = error.detail;\r\n        if (detail.error) {\r\n            return exceptionToErrorMessage(detail.error, verbose);\r\n        }\r\n        if (detail.exception) {\r\n            return exceptionToErrorMessage(detail.exception, verbose);\r\n        }\r\n    }\r\n    if (error.stack) {\r\n        return exceptionToErrorMessage(error, verbose);\r\n    }\r\n    if (error.message) {\r\n        return error.message;\r\n    }\r\n    return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar AbstractCommandsQuickAccessProvider_1, CommandsHistory_1;\r\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\r\nimport { isCancellationError } from '../../../base/common/errors.js';\r\nimport { matchesContiguousSubString, matchesPrefix, matchesWords, or } from '../../../base/common/filters.js';\r\nimport { createSingleCallFunction } from '../../../base/common/functional.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { LRUCache } from '../../../base/common/map.js';\r\nimport { TfIdfCalculator, normalizeTfIdfScores } from '../../../base/common/tfIdf.js';\r\nimport { localize } from '../../../nls.js';\r\nimport { ICommandService } from '../../commands/common/commands.js';\r\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\r\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\r\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { PickerQuickAccessProvider } from './pickerQuickAccess.js';\r\nimport { IStorageService } from '../../storage/common/storage.js';\r\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\r\nlet AbstractCommandsQuickAccessProvider = AbstractCommandsQuickAccessProvider_1 = class AbstractCommandsQuickAccessProvider extends PickerQuickAccessProvider {\r\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\r\n        super(AbstractCommandsQuickAccessProvider_1.PREFIX, options);\r\n        this.instantiationService = instantiationService;\r\n        this.keybindingService = keybindingService;\r\n        this.commandService = commandService;\r\n        this.telemetryService = telemetryService;\r\n        this.dialogService = dialogService;\r\n        this.commandsHistory = this._register(this.instantiationService.createInstance(CommandsHistory));\r\n        this.options = options;\r\n    }\r\n    _getPicks(filter, _disposables, token, runOptions) {\r\n        var _a, _b, _c, _d;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // Ask subclass for all command picks\r\n            const allCommandPicks = yield this.getCommandPicks(token);\r\n            if (token.isCancellationRequested) {\r\n                return [];\r\n            }\r\n            const runTfidf = createSingleCallFunction(() => {\r\n                const tfidf = new TfIdfCalculator();\r\n                tfidf.updateDocuments(allCommandPicks.map(commandPick => ({\r\n                    key: commandPick.commandId,\r\n                    textChunks: [commandPick.label + (commandPick.commandAlias ? ` ${commandPick.commandAlias}` : '')]\r\n                })));\r\n                const result = tfidf.calculateScores(filter, token);\r\n                return normalizeTfIdfScores(result)\r\n                    .filter(score => score.score > AbstractCommandsQuickAccessProvider_1.TFIDF_THRESHOLD)\r\n                    .slice(0, AbstractCommandsQuickAccessProvider_1.TFIDF_MAX_RESULTS);\r\n            });\r\n            // Filter\r\n            const filteredCommandPicks = [];\r\n            for (const commandPick of allCommandPicks) {\r\n                const labelHighlights = (_a = AbstractCommandsQuickAccessProvider_1.WORD_FILTER(filter, commandPick.label)) !== null && _a !== void 0 ? _a : undefined;\r\n                const aliasHighlights = commandPick.commandAlias ? (_b = AbstractCommandsQuickAccessProvider_1.WORD_FILTER(filter, commandPick.commandAlias)) !== null && _b !== void 0 ? _b : undefined : undefined;\r\n                // Add if matching in label or alias\r\n                if (labelHighlights || aliasHighlights) {\r\n                    commandPick.highlights = {\r\n                        label: labelHighlights,\r\n                        detail: this.options.showAlias ? aliasHighlights : undefined\r\n                    };\r\n                    filteredCommandPicks.push(commandPick);\r\n                }\r\n                // Also add if we have a 100% command ID match\r\n                else if (filter === commandPick.commandId) {\r\n                    filteredCommandPicks.push(commandPick);\r\n                }\r\n                // Handle tf-idf scoring for the rest if there's a filter\r\n                else if (filter.length >= 3) {\r\n                    const tfidf = runTfidf();\r\n                    if (token.isCancellationRequested) {\r\n                        return [];\r\n                    }\r\n                    // Add if we have a tf-idf score\r\n                    const tfidfScore = tfidf.find(score => score.key === commandPick.commandId);\r\n                    if (tfidfScore) {\r\n                        commandPick.tfIdfScore = tfidfScore.score;\r\n                        filteredCommandPicks.push(commandPick);\r\n                    }\r\n                }\r\n            }\r\n            // Add description to commands that have duplicate labels\r\n            const mapLabelToCommand = new Map();\r\n            for (const commandPick of filteredCommandPicks) {\r\n                const existingCommandForLabel = mapLabelToCommand.get(commandPick.label);\r\n                if (existingCommandForLabel) {\r\n                    commandPick.description = commandPick.commandId;\r\n                    existingCommandForLabel.description = existingCommandForLabel.commandId;\r\n                }\r\n                else {\r\n                    mapLabelToCommand.set(commandPick.label, commandPick);\r\n                }\r\n            }\r\n            // Sort by MRU order and fallback to name otherwise\r\n            filteredCommandPicks.sort((commandPickA, commandPickB) => {\r\n                // If a result came from tf-idf, we want to put that towards the bottom\r\n                if (commandPickA.tfIdfScore && commandPickB.tfIdfScore) {\r\n                    if (commandPickA.tfIdfScore === commandPickB.tfIdfScore) {\r\n                        return commandPickA.label.localeCompare(commandPickB.label); // prefer lexicographically smaller command\r\n                    }\r\n                    return commandPickB.tfIdfScore - commandPickA.tfIdfScore; // prefer higher tf-idf score\r\n                }\r\n                else if (commandPickA.tfIdfScore) {\r\n                    return 1; // first command has a score but other doesn't so other wins\r\n                }\r\n                else if (commandPickB.tfIdfScore) {\r\n                    return -1; // other command has a score but first doesn't so first wins\r\n                }\r\n                const commandACounter = this.commandsHistory.peek(commandPickA.commandId);\r\n                const commandBCounter = this.commandsHistory.peek(commandPickB.commandId);\r\n                if (commandACounter && commandBCounter) {\r\n                    return commandACounter > commandBCounter ? -1 : 1; // use more recently used command before older\r\n                }\r\n                if (commandACounter) {\r\n                    return -1; // first command was used, so it wins over the non used one\r\n                }\r\n                if (commandBCounter) {\r\n                    return 1; // other command was used so it wins over the command\r\n                }\r\n                if (this.options.suggestedCommandIds) {\r\n                    const commandASuggestion = this.options.suggestedCommandIds.has(commandPickA.commandId);\r\n                    const commandBSuggestion = this.options.suggestedCommandIds.has(commandPickB.commandId);\r\n                    if (commandASuggestion && commandBSuggestion) {\r\n                        return 0; // honor the order of the array\r\n                    }\r\n                    if (commandASuggestion) {\r\n                        return -1; // first command was suggested, so it wins over the non suggested one\r\n                    }\r\n                    if (commandBSuggestion) {\r\n                        return 1; // other command was suggested so it wins over the command\r\n                    }\r\n                }\r\n                // both commands were never used, so we sort by name\r\n                return commandPickA.label.localeCompare(commandPickB.label);\r\n            });\r\n            const commandPicks = [];\r\n            let addOtherSeparator = false;\r\n            let addSuggestedSeparator = true;\r\n            let addCommonlyUsedSeparator = !!this.options.suggestedCommandIds;\r\n            for (let i = 0; i < filteredCommandPicks.length; i++) {\r\n                const commandPick = filteredCommandPicks[i];\r\n                // Separator: recently used\r\n                if (i === 0 && this.commandsHistory.peek(commandPick.commandId)) {\r\n                    commandPicks.push({ type: 'separator', label: localize('recentlyUsed', \"recently used\") });\r\n                    addOtherSeparator = true;\r\n                }\r\n                if (addSuggestedSeparator && commandPick.tfIdfScore !== undefined) {\r\n                    commandPicks.push({ type: 'separator', label: localize('suggested', \"similar commands\") });\r\n                    addSuggestedSeparator = false;\r\n                }\r\n                // Separator: commonly used\r\n                if (addCommonlyUsedSeparator && commandPick.tfIdfScore === undefined && !this.commandsHistory.peek(commandPick.commandId) && ((_c = this.options.suggestedCommandIds) === null || _c === void 0 ? void 0 : _c.has(commandPick.commandId))) {\r\n                    commandPicks.push({ type: 'separator', label: localize('commonlyUsed', \"commonly used\") });\r\n                    addOtherSeparator = true;\r\n                    addCommonlyUsedSeparator = false;\r\n                }\r\n                // Separator: other commands\r\n                if (addOtherSeparator && commandPick.tfIdfScore === undefined && !this.commandsHistory.peek(commandPick.commandId) && !((_d = this.options.suggestedCommandIds) === null || _d === void 0 ? void 0 : _d.has(commandPick.commandId))) {\r\n                    commandPicks.push({ type: 'separator', label: localize('morecCommands', \"other commands\") });\r\n                    addOtherSeparator = false;\r\n                }\r\n                // Command\r\n                commandPicks.push(this.toCommandPick(commandPick, runOptions));\r\n            }\r\n            if (!this.hasAdditionalCommandPicks(filter, token)) {\r\n                return commandPicks;\r\n            }\r\n            return {\r\n                picks: commandPicks,\r\n                additionalPicks: (() => __awaiter(this, void 0, void 0, function* () {\r\n                    var _e;\r\n                    const additionalCommandPicks = yield this.getAdditionalCommandPicks(allCommandPicks, filteredCommandPicks, filter, token);\r\n                    if (token.isCancellationRequested) {\r\n                        return [];\r\n                    }\r\n                    const commandPicks = additionalCommandPicks.map(commandPick => this.toCommandPick(commandPick, runOptions));\r\n                    // Basically, if we haven't already added a separator, we add one before the additional picks so long\r\n                    // as one hasn't been added to the start of the array.\r\n                    if (addSuggestedSeparator && ((_e = commandPicks[0]) === null || _e === void 0 ? void 0 : _e.type) !== 'separator') {\r\n                        commandPicks.unshift({ type: 'separator', label: localize('suggested', \"similar commands\") });\r\n                    }\r\n                    return commandPicks;\r\n                }))()\r\n            };\r\n        });\r\n    }\r\n    toCommandPick(commandPick, runOptions) {\r\n        if (commandPick.type === 'separator') {\r\n            return commandPick;\r\n        }\r\n        const keybinding = this.keybindingService.lookupKeybinding(commandPick.commandId);\r\n        const ariaLabel = keybinding ?\r\n            localize('commandPickAriaLabelWithKeybinding', \"{0}, {1}\", commandPick.label, keybinding.getAriaLabel()) :\r\n            commandPick.label;\r\n        return Object.assign(Object.assign({}, commandPick), { ariaLabel, detail: this.options.showAlias && commandPick.commandAlias !== commandPick.label ? commandPick.commandAlias : undefined, keybinding, accept: () => __awaiter(this, void 0, void 0, function* () {\r\n                var _a, _b;\r\n                // Add to history\r\n                this.commandsHistory.push(commandPick.commandId);\r\n                // Telementry\r\n                this.telemetryService.publicLog2('workbenchActionExecuted', {\r\n                    id: commandPick.commandId,\r\n                    from: (_a = runOptions === null || runOptions === void 0 ? void 0 : runOptions.from) !== null && _a !== void 0 ? _a : 'quick open'\r\n                });\r\n                // Run\r\n                try {\r\n                    ((_b = commandPick.args) === null || _b === void 0 ? void 0 : _b.length)\r\n                        ? yield this.commandService.executeCommand(commandPick.commandId, ...commandPick.args)\r\n                        : yield this.commandService.executeCommand(commandPick.commandId);\r\n                }\r\n                catch (error) {\r\n                    if (!isCancellationError(error)) {\r\n                        this.dialogService.error(localize('canNotRun', \"Command '{0}' resulted in an error\", commandPick.label), toErrorMessage(error));\r\n                    }\r\n                }\r\n            }) });\r\n    }\r\n};\r\nAbstractCommandsQuickAccessProvider.PREFIX = '>';\r\nAbstractCommandsQuickAccessProvider.TFIDF_THRESHOLD = 0.5;\r\nAbstractCommandsQuickAccessProvider.TFIDF_MAX_RESULTS = 5;\r\nAbstractCommandsQuickAccessProvider.WORD_FILTER = or(matchesPrefix, matchesWords, matchesContiguousSubString);\r\nAbstractCommandsQuickAccessProvider = AbstractCommandsQuickAccessProvider_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IKeybindingService),\r\n    __param(3, ICommandService),\r\n    __param(4, ITelemetryService),\r\n    __param(5, IDialogService)\r\n], AbstractCommandsQuickAccessProvider);\r\nexport { AbstractCommandsQuickAccessProvider };\r\nlet CommandsHistory = CommandsHistory_1 = class CommandsHistory extends Disposable {\r\n    constructor(storageService, configurationService) {\r\n        super();\r\n        this.storageService = storageService;\r\n        this.configurationService = configurationService;\r\n        this.configuredCommandsHistoryLength = 0;\r\n        this.updateConfiguration();\r\n        this.load();\r\n        this.registerListeners();\r\n    }\r\n    registerListeners() {\r\n        this._register(this.configurationService.onDidChangeConfiguration(e => this.updateConfiguration(e)));\r\n    }\r\n    updateConfiguration(e) {\r\n        if (e && !e.affectsConfiguration('workbench.commandPalette.history')) {\r\n            return;\r\n        }\r\n        this.configuredCommandsHistoryLength = CommandsHistory_1.getConfiguredCommandHistoryLength(this.configurationService);\r\n        if (CommandsHistory_1.cache && CommandsHistory_1.cache.limit !== this.configuredCommandsHistoryLength) {\r\n            CommandsHistory_1.cache.limit = this.configuredCommandsHistoryLength;\r\n            CommandsHistory_1.saveState(this.storageService);\r\n        }\r\n    }\r\n    load() {\r\n        const raw = this.storageService.get(CommandsHistory_1.PREF_KEY_CACHE, 0 /* StorageScope.PROFILE */);\r\n        let serializedCache;\r\n        if (raw) {\r\n            try {\r\n                serializedCache = JSON.parse(raw);\r\n            }\r\n            catch (error) {\r\n                // invalid data\r\n            }\r\n        }\r\n        const cache = CommandsHistory_1.cache = new LRUCache(this.configuredCommandsHistoryLength, 1);\r\n        if (serializedCache) {\r\n            let entries;\r\n            if (serializedCache.usesLRU) {\r\n                entries = serializedCache.entries;\r\n            }\r\n            else {\r\n                entries = serializedCache.entries.sort((a, b) => a.value - b.value);\r\n            }\r\n            entries.forEach(entry => cache.set(entry.key, entry.value));\r\n        }\r\n        CommandsHistory_1.counter = this.storageService.getNumber(CommandsHistory_1.PREF_KEY_COUNTER, 0 /* StorageScope.PROFILE */, CommandsHistory_1.counter);\r\n    }\r\n    push(commandId) {\r\n        if (!CommandsHistory_1.cache) {\r\n            return;\r\n        }\r\n        CommandsHistory_1.cache.set(commandId, CommandsHistory_1.counter++); // set counter to command\r\n        CommandsHistory_1.saveState(this.storageService);\r\n    }\r\n    peek(commandId) {\r\n        var _a;\r\n        return (_a = CommandsHistory_1.cache) === null || _a === void 0 ? void 0 : _a.peek(commandId);\r\n    }\r\n    static saveState(storageService) {\r\n        if (!CommandsHistory_1.cache) {\r\n            return;\r\n        }\r\n        const serializedCache = { usesLRU: true, entries: [] };\r\n        CommandsHistory_1.cache.forEach((value, key) => serializedCache.entries.push({ key, value }));\r\n        storageService.store(CommandsHistory_1.PREF_KEY_CACHE, JSON.stringify(serializedCache), 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\r\n        storageService.store(CommandsHistory_1.PREF_KEY_COUNTER, CommandsHistory_1.counter, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\r\n    }\r\n    static getConfiguredCommandHistoryLength(configurationService) {\r\n        var _a, _b;\r\n        const config = configurationService.getValue();\r\n        const configuredCommandHistoryLength = (_b = (_a = config.workbench) === null || _a === void 0 ? void 0 : _a.commandPalette) === null || _b === void 0 ? void 0 : _b.history;\r\n        if (typeof configuredCommandHistoryLength === 'number') {\r\n            return configuredCommandHistoryLength;\r\n        }\r\n        return CommandsHistory_1.DEFAULT_COMMANDS_HISTORY_LENGTH;\r\n    }\r\n};\r\nCommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH = 50;\r\nCommandsHistory.PREF_KEY_CACHE = 'commandPalette.mru.cache';\r\nCommandsHistory.PREF_KEY_COUNTER = 'commandPalette.mru.counter';\r\nCommandsHistory.counter = 1;\r\nCommandsHistory = CommandsHistory_1 = __decorate([\r\n    __param(0, IStorageService),\r\n    __param(1, IConfigurationService)\r\n], CommandsHistory);\r\nexport { CommandsHistory };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nfunction countMapFrom(values) {\r\n    var _a;\r\n    const map = new Map();\r\n    for (const value of values) {\r\n        map.set(value, ((_a = map.get(value)) !== null && _a !== void 0 ? _a : 0) + 1);\r\n    }\r\n    return map;\r\n}\r\n/**\r\n * Implementation of tf-idf (term frequency-inverse document frequency) for a set of\r\n * documents where each document contains one or more chunks of text.\r\n * Each document is identified by a key, and the score for each document is computed\r\n * by taking the max score over all the chunks in the document.\r\n */\r\nexport class TfIdfCalculator {\r\n    constructor() {\r\n        /**\r\n         * Total number of chunks\r\n         */\r\n        this.chunkCount = 0;\r\n        this.chunkOccurrences = new Map();\r\n        this.documents = new Map();\r\n    }\r\n    calculateScores(query, token) {\r\n        const embedding = this.computeEmbedding(query);\r\n        const idfCache = new Map();\r\n        const scores = [];\r\n        // For each document, generate one score\r\n        for (const [key, doc] of this.documents) {\r\n            if (token.isCancellationRequested) {\r\n                return [];\r\n            }\r\n            for (const chunk of doc.chunks) {\r\n                const score = this.computeSimilarityScore(chunk, embedding, idfCache);\r\n                if (score > 0) {\r\n                    scores.push({ key, score });\r\n                }\r\n            }\r\n        }\r\n        return scores;\r\n    }\r\n    /**\r\n     * Count how many times each term (word) appears in a string.\r\n     */\r\n    static termFrequencies(input) {\r\n        return countMapFrom(TfIdfCalculator.splitTerms(input));\r\n    }\r\n    /**\r\n     * Break a string into terms (words).\r\n     */\r\n    static *splitTerms(input) {\r\n        const normalize = (word) => word.toLowerCase();\r\n        // Only match on words that are at least 3 characters long and start with a letter\r\n        for (const [word] of input.matchAll(/\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b/gu)) {\r\n            yield normalize(word);\r\n            // eslint-disable-next-line local/code-no-look-behind-regex\r\n            const camelParts = word.split(/(?<=[a-z])(?=[A-Z])/g);\r\n            if (camelParts.length > 1) {\r\n                for (const part of camelParts) {\r\n                    // Require at least 3 letters in the parts of a camel case word\r\n                    if (part.length > 2 && /\\p{Letter}{3,}/gu.test(part)) {\r\n                        yield normalize(part);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    updateDocuments(documents) {\r\n        var _a;\r\n        for (const { key } of documents) {\r\n            this.deleteDocument(key);\r\n        }\r\n        for (const doc of documents) {\r\n            const chunks = [];\r\n            for (const text of doc.textChunks) {\r\n                // TODO: See if we can compute the tf lazily\r\n                // The challenge is that we need to also update the `chunkOccurrences`\r\n                // and all of those updates need to get flushed before the real TF-IDF of\r\n                // anything is computed.\r\n                const tf = TfIdfCalculator.termFrequencies(text);\r\n                // Update occurrences list\r\n                for (const term of tf.keys()) {\r\n                    this.chunkOccurrences.set(term, ((_a = this.chunkOccurrences.get(term)) !== null && _a !== void 0 ? _a : 0) + 1);\r\n                }\r\n                chunks.push({ text, tf });\r\n            }\r\n            this.chunkCount += chunks.length;\r\n            this.documents.set(doc.key, { chunks });\r\n        }\r\n        return this;\r\n    }\r\n    deleteDocument(key) {\r\n        const doc = this.documents.get(key);\r\n        if (!doc) {\r\n            return;\r\n        }\r\n        this.documents.delete(key);\r\n        this.chunkCount -= doc.chunks.length;\r\n        // Update term occurrences for the document\r\n        for (const chunk of doc.chunks) {\r\n            for (const term of chunk.tf.keys()) {\r\n                const currentOccurrences = this.chunkOccurrences.get(term);\r\n                if (typeof currentOccurrences === 'number') {\r\n                    const newOccurrences = currentOccurrences - 1;\r\n                    if (newOccurrences <= 0) {\r\n                        this.chunkOccurrences.delete(term);\r\n                    }\r\n                    else {\r\n                        this.chunkOccurrences.set(term, newOccurrences);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    computeSimilarityScore(chunk, queryEmbedding, idfCache) {\r\n        // Compute the dot product between the chunk's embedding and the query embedding\r\n        // Note that the chunk embedding is computed lazily on a per-term basis.\r\n        // This lets us skip a large number of calculations because the majority\r\n        // of chunks do not share any terms with the query.\r\n        let sum = 0;\r\n        for (const [term, termTfidf] of Object.entries(queryEmbedding)) {\r\n            const chunkTf = chunk.tf.get(term);\r\n            if (!chunkTf) {\r\n                // Term does not appear in chunk so it has no contribution\r\n                continue;\r\n            }\r\n            let chunkIdf = idfCache.get(term);\r\n            if (typeof chunkIdf !== 'number') {\r\n                chunkIdf = this.computeIdf(term);\r\n                idfCache.set(term, chunkIdf);\r\n            }\r\n            const chunkTfidf = chunkTf * chunkIdf;\r\n            sum += chunkTfidf * termTfidf;\r\n        }\r\n        return sum;\r\n    }\r\n    computeEmbedding(input) {\r\n        const tf = TfIdfCalculator.termFrequencies(input);\r\n        return this.computeTfidf(tf);\r\n    }\r\n    computeIdf(term) {\r\n        var _a;\r\n        const chunkOccurrences = (_a = this.chunkOccurrences.get(term)) !== null && _a !== void 0 ? _a : 0;\r\n        return chunkOccurrences > 0\r\n            ? Math.log((this.chunkCount + 1) / chunkOccurrences)\r\n            : 0;\r\n    }\r\n    computeTfidf(termFrequencies) {\r\n        const embedding = Object.create(null);\r\n        for (const [word, occurrences] of termFrequencies) {\r\n            const idf = this.computeIdf(word);\r\n            if (idf > 0) {\r\n                embedding[word] = occurrences * idf;\r\n            }\r\n        }\r\n        return embedding;\r\n    }\r\n}\r\n/**\r\n * Normalize the scores to be between 0 and 1 and sort them decending.\r\n * @param scores array of scores from {@link TfIdfCalculator.calculateScores}\r\n * @returns normalized scores\r\n */\r\nexport function normalizeTfIdfScores(scores) {\r\n    var _a, _b;\r\n    // copy of scores\r\n    const result = scores.slice(0);\r\n    // sort descending\r\n    result.sort((a, b) => b.score - a.score);\r\n    // normalize\r\n    const max = (_b = (_a = result[0]) === null || _a === void 0 ? void 0 : _a.score) !== null && _b !== void 0 ? _b : 0;\r\n    if (max > 0) {\r\n        for (const score of result) {\r\n            score.score /= max;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { timeout } from '../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { isFunction } from '../../../base/common/types.js';\r\nexport var TriggerAction;\r\n(function (TriggerAction) {\r\n    /**\r\n     * Do nothing after the button was clicked.\r\n     */\r\n    TriggerAction[TriggerAction[\"NO_ACTION\"] = 0] = \"NO_ACTION\";\r\n    /**\r\n     * Close the picker.\r\n     */\r\n    TriggerAction[TriggerAction[\"CLOSE_PICKER\"] = 1] = \"CLOSE_PICKER\";\r\n    /**\r\n     * Update the results of the picker.\r\n     */\r\n    TriggerAction[TriggerAction[\"REFRESH_PICKER\"] = 2] = \"REFRESH_PICKER\";\r\n    /**\r\n     * Remove the item from the picker.\r\n     */\r\n    TriggerAction[TriggerAction[\"REMOVE_ITEM\"] = 3] = \"REMOVE_ITEM\";\r\n})(TriggerAction || (TriggerAction = {}));\r\nfunction isPicksWithActive(obj) {\r\n    const candidate = obj;\r\n    return Array.isArray(candidate.items);\r\n}\r\nfunction isFastAndSlowPicks(obj) {\r\n    const candidate = obj;\r\n    return !!candidate.picks && candidate.additionalPicks instanceof Promise;\r\n}\r\nexport class PickerQuickAccessProvider extends Disposable {\r\n    constructor(prefix, options) {\r\n        super();\r\n        this.prefix = prefix;\r\n        this.options = options;\r\n    }\r\n    provide(picker, token, runOptions) {\r\n        var _a;\r\n        const disposables = new DisposableStore();\r\n        // Apply options if any\r\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\r\n        // Disable filtering & sorting, we control the results\r\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\r\n        // Set initial picks and update on type\r\n        let picksCts = undefined;\r\n        const picksDisposable = disposables.add(new MutableDisposable());\r\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\r\n            const picksDisposables = picksDisposable.value = new DisposableStore();\r\n            // Cancel any previous ask for picks and busy\r\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\r\n            picker.busy = false;\r\n            // Create new cancellation source for this run\r\n            picksCts = new CancellationTokenSource(token);\r\n            // Collect picks and support both long running and short or combined\r\n            const picksToken = picksCts.token;\r\n            const picksFilter = picker.value.substr(this.prefix.length).trim();\r\n            const providedPicks = this._getPicks(picksFilter, picksDisposables, picksToken, runOptions);\r\n            const applyPicks = (picks, skipEmpty) => {\r\n                var _a;\r\n                let items;\r\n                let activeItem = undefined;\r\n                if (isPicksWithActive(picks)) {\r\n                    items = picks.items;\r\n                    activeItem = picks.active;\r\n                }\r\n                else {\r\n                    items = picks;\r\n                }\r\n                if (items.length === 0) {\r\n                    if (skipEmpty) {\r\n                        return false;\r\n                    }\r\n                    // We show the no results pick if we have no input to prevent completely empty pickers #172613\r\n                    if ((picksFilter.length > 0 || picker.hideInput) && ((_a = this.options) === null || _a === void 0 ? void 0 : _a.noResultsPick)) {\r\n                        if (isFunction(this.options.noResultsPick)) {\r\n                            items = [this.options.noResultsPick(picksFilter)];\r\n                        }\r\n                        else {\r\n                            items = [this.options.noResultsPick];\r\n                        }\r\n                    }\r\n                }\r\n                picker.items = items;\r\n                if (activeItem) {\r\n                    picker.activeItems = [activeItem];\r\n                }\r\n                return true;\r\n            };\r\n            const applyFastAndSlowPicks = (fastAndSlowPicks) => __awaiter(this, void 0, void 0, function* () {\r\n                let fastPicksApplied = false;\r\n                let slowPicksApplied = false;\r\n                yield Promise.all([\r\n                    // Fast Picks: if `mergeDelay` is configured, in order to reduce\r\n                    // amount of flicker, we race against the slow picks over some delay\r\n                    // and then set the fast picks.\r\n                    // If the slow picks are faster, we reduce the flicker by only\r\n                    // setting the items once.\r\n                    (() => __awaiter(this, void 0, void 0, function* () {\r\n                        if (typeof fastAndSlowPicks.mergeDelay === 'number') {\r\n                            yield timeout(fastAndSlowPicks.mergeDelay);\r\n                            if (picksToken.isCancellationRequested) {\r\n                                return;\r\n                            }\r\n                        }\r\n                        if (!slowPicksApplied) {\r\n                            fastPicksApplied = applyPicks(fastAndSlowPicks.picks, true /* skip over empty to reduce flicker */);\r\n                        }\r\n                    }))(),\r\n                    // Slow Picks: we await the slow picks and then set them at\r\n                    // once together with the fast picks, but only if we actually\r\n                    // have additional results.\r\n                    (() => __awaiter(this, void 0, void 0, function* () {\r\n                        picker.busy = true;\r\n                        try {\r\n                            const awaitedAdditionalPicks = yield fastAndSlowPicks.additionalPicks;\r\n                            if (picksToken.isCancellationRequested) {\r\n                                return;\r\n                            }\r\n                            let picks;\r\n                            let activePick = undefined;\r\n                            if (isPicksWithActive(fastAndSlowPicks.picks)) {\r\n                                picks = fastAndSlowPicks.picks.items;\r\n                                activePick = fastAndSlowPicks.picks.active;\r\n                            }\r\n                            else {\r\n                                picks = fastAndSlowPicks.picks;\r\n                            }\r\n                            let additionalPicks;\r\n                            let additionalActivePick = undefined;\r\n                            if (isPicksWithActive(awaitedAdditionalPicks)) {\r\n                                additionalPicks = awaitedAdditionalPicks.items;\r\n                                additionalActivePick = awaitedAdditionalPicks.active;\r\n                            }\r\n                            else {\r\n                                additionalPicks = awaitedAdditionalPicks;\r\n                            }\r\n                            if (additionalPicks.length > 0 || !fastPicksApplied) {\r\n                                // If we do not have any activePick or additionalActivePick\r\n                                // we try to preserve the currently active pick from the\r\n                                // fast results. This fixes an issue where the user might\r\n                                // have made a pick active before the additional results\r\n                                // kick in.\r\n                                // See https://github.com/microsoft/vscode/issues/102480\r\n                                let fallbackActivePick = undefined;\r\n                                if (!activePick && !additionalActivePick) {\r\n                                    const fallbackActivePickCandidate = picker.activeItems[0];\r\n                                    if (fallbackActivePickCandidate && picks.indexOf(fallbackActivePickCandidate) !== -1) {\r\n                                        fallbackActivePick = fallbackActivePickCandidate;\r\n                                    }\r\n                                }\r\n                                applyPicks({\r\n                                    items: [...picks, ...additionalPicks],\r\n                                    active: activePick || additionalActivePick || fallbackActivePick\r\n                                });\r\n                            }\r\n                        }\r\n                        finally {\r\n                            if (!picksToken.isCancellationRequested) {\r\n                                picker.busy = false;\r\n                            }\r\n                            slowPicksApplied = true;\r\n                        }\r\n                    }))()\r\n                ]);\r\n            });\r\n            // No Picks\r\n            if (providedPicks === null) {\r\n                // Ignore\r\n            }\r\n            // Fast and Slow Picks\r\n            else if (isFastAndSlowPicks(providedPicks)) {\r\n                yield applyFastAndSlowPicks(providedPicks);\r\n            }\r\n            // Fast Picks\r\n            else if (!(providedPicks instanceof Promise)) {\r\n                applyPicks(providedPicks);\r\n            }\r\n            // Slow Picks\r\n            else {\r\n                picker.busy = true;\r\n                try {\r\n                    const awaitedPicks = yield providedPicks;\r\n                    if (picksToken.isCancellationRequested) {\r\n                        return;\r\n                    }\r\n                    if (isFastAndSlowPicks(awaitedPicks)) {\r\n                        yield applyFastAndSlowPicks(awaitedPicks);\r\n                    }\r\n                    else {\r\n                        applyPicks(awaitedPicks);\r\n                    }\r\n                }\r\n                finally {\r\n                    if (!picksToken.isCancellationRequested) {\r\n                        picker.busy = false;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\r\n        updatePickerItems();\r\n        // Accept the pick on accept and hide picker\r\n        disposables.add(picker.onDidAccept(event => {\r\n            const [item] = picker.selectedItems;\r\n            if (typeof (item === null || item === void 0 ? void 0 : item.accept) === 'function') {\r\n                if (!event.inBackground) {\r\n                    picker.hide(); // hide picker unless we accept in background\r\n                }\r\n                item.accept(picker.keyMods, event);\r\n            }\r\n        }));\r\n        // Trigger the pick with button index if button triggered\r\n        disposables.add(picker.onDidTriggerItemButton(({ button, item }) => __awaiter(this, void 0, void 0, function* () {\r\n            var _b, _c;\r\n            if (typeof item.trigger === 'function') {\r\n                const buttonIndex = (_c = (_b = item.buttons) === null || _b === void 0 ? void 0 : _b.indexOf(button)) !== null && _c !== void 0 ? _c : -1;\r\n                if (buttonIndex >= 0) {\r\n                    const result = item.trigger(buttonIndex, picker.keyMods);\r\n                    const action = (typeof result === 'number') ? result : yield result;\r\n                    if (token.isCancellationRequested) {\r\n                        return;\r\n                    }\r\n                    switch (action) {\r\n                        case TriggerAction.NO_ACTION:\r\n                            break;\r\n                        case TriggerAction.CLOSE_PICKER:\r\n                            picker.hide();\r\n                            break;\r\n                        case TriggerAction.REFRESH_PICKER:\r\n                            updatePickerItems();\r\n                            break;\r\n                        case TriggerAction.REMOVE_ITEM: {\r\n                            const index = picker.items.indexOf(item);\r\n                            if (index !== -1) {\r\n                                const items = picker.items.slice();\r\n                                const removed = items.splice(index, 1);\r\n                                const activeItems = picker.activeItems.filter(activeItem => activeItem !== removed[0]);\r\n                                const keepScrollPositionBefore = picker.keepScrollPosition;\r\n                                picker.keepScrollPosition = true;\r\n                                picker.items = items;\r\n                                if (activeItems) {\r\n                                    picker.activeItems = activeItems;\r\n                                }\r\n                                picker.keepScrollPosition = keepScrollPositionBefore;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        })));\r\n        return disposables;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\r\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\r\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\r\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\r\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\r\n    }\r\n    getCodeEditorCommandPicks() {\r\n        const activeTextEditorControl = this.activeTextEditorControl;\r\n        if (!activeTextEditorControl) {\r\n            return [];\r\n        }\r\n        const editorCommandPicks = [];\r\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\r\n            editorCommandPicks.push({\r\n                commandId: editorAction.id,\r\n                commandAlias: editorAction.alias,\r\n                label: stripIcons(editorAction.label) || editorAction.id,\r\n            });\r\n        }\r\n        return editorCommandPicks;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\r\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\r\n    constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\r\n        super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\r\n    }\r\n};\r\nStandaloneReferencesController = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, ICodeEditorService),\r\n    __param(3, INotificationService),\r\n    __param(4, IInstantiationService),\r\n    __param(5, IStorageService),\r\n    __param(6, IConfigurationService)\r\n], StandaloneReferencesController);\r\nexport { StandaloneReferencesController };\r\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController, 4 /* EditorContributionInstantiation.Lazy */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\r\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\r\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\r\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\r\nclass ToggleHighContrast extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.toggleHighContrast',\r\n            label: ToggleHighContrastNLS.toggleHighContrast,\r\n            alias: 'Toggle High Contrast Theme',\r\n            precondition: undefined\r\n        });\r\n        this._originalThemeName = null;\r\n    }\r\n    run(accessor, editor) {\r\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\r\n        const currentTheme = standaloneThemeService.getColorTheme();\r\n        if (isHighContrast(currentTheme.type)) {\r\n            // We must toggle back to the integrator's theme\r\n            standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\r\n            this._originalThemeName = null;\r\n        }\r\n        else {\r\n            standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\r\n            this._originalThemeName = currentTheme.themeName;\r\n        }\r\n    }\r\n}\r\nregisterEditorAction(ToggleHighContrast);\r\n"],
  "mappings": "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",
  "names": ["__decorate", "__param", "__awaiter", "_a", "provider", "result", "group", "child", "OutlineModelService", "__awaiter", "__decorate", "__param", "editor", "_a", "__decorate", "__param", "editor", "foreground", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__copyProps", "__reExport", "monaco_editor_core_exports", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__copyProps", "__reExport", "monaco_editor_core_exports", "LanguageServiceDefaultsImpl", "optionsDefault", "getMode", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__copyProps", "__reExport", "monaco_editor_core_exports", "LanguageServiceDefaultsImpl", "modeConfigurationDefault", "getMode", "init_actions", "editor", "_a", "SelectionAnchorController", "editor", "_a", "init_model", "init_actions", "editor", "_a", "editor", "editor", "init_actions", "__awaiter", "editor", "__awaiter", "CodeActionTriggerSource", "_a", "__awaiter", "_a", "_b", "_c", "ApplyCodeActionReason", "__decorate", "__param", "CodeActionKeybindingResolver", "_a", "__decorate", "__param", "LightBulbState", "LightBulbWidget", "_a", "_b", "_c", "_d", "lineNumber", "__decorate", "__param", "__awaiter", "MarkdownRenderer", "_a", "_b", "_c", "__awaiter", "__decorate", "__param", "MessageController", "editor", "_a", "dispose", "editor", "__decorate", "__param", "__awaiter", "_a", "_b", "ActionItemRenderer", "_c", "ActionList", "width", "init_actions", "__decorate", "__param", "ActionWidgetService", "container", "_a", "_b", "__awaiter", "CodeActionsState", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "__decorate", "__param", "__awaiter", "CodeActionController", "editor", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "editor", "init_platform", "__awaiter", "provider", "__decorate", "__param", "CodeLensCache", "item", "_a", "editor", "decoration", "_a", "__decorate", "__param", "__awaiter", "CodeLensContribution", "_a", "_b", "_c", "promises", "request", "i", "editor", "__awaiter", "_a", "__decorate", "__param", "__awaiter", "DefaultDocumentColorProviderFeature", "__awaiter", "__decorate", "__param", "__awaiter", "ColorDetector", "editor", "decoration", "$", "h", "transparent", "__decorate", "__param", "__awaiter", "ColorHoverParticipant", "StandaloneColorPickerParticipant", "__awaiter", "colorInfo", "__decorate", "__param", "__awaiter", "editor", "color", "editor", "_a", "__decorate", "__param", "EmbeddedCodeEditorWidget", "editor", "_a", "width", "__decorate", "__param", "editor", "PeekContext", "PeekContextController", "defaultOptions", "PeekViewWidget", "__awaiter", "_a", "_b", "basename", "__decorate", "__param", "DataSource", "StringRepresentationProvider", "_a", "basename", "__decorate", "__param", "FileReferencesTemplate", "dirname", "__decorate", "__param", "FileReferencesRenderer", "_a", "basename", "__decorate", "__param", "__awaiter", "_a", "ReferenceWidget", "editor", "dirname", "__decorate", "__param", "__awaiter", "ReferencesController", "editor", "_a", "_b", "_a", "__decorate", "__param", "SymbolNavigationService", "_a", "_b", "EditorState", "editor", "init_actions", "__awaiter", "provider", "model", "position", "__awaiter", "editor", "accessor", "references", "__decorate", "__param", "__awaiter", "GotoDefinitionAtPositionEditorContribution", "editor", "_a", "$", "__awaiter", "v", "_a", "_b", "_c", "_d", "_e", "_f", "HoverParticipantRegistry", "_a", "_b", "__decorate", "__param", "$", "ContentHoverController", "HoverResult", "editor", "HoverResult", "ContentHoverWidget", "_a", "editor", "size", "_b", "_c", "_d", "__decorate", "__param", "EditorHoverStatusBar", "$", "__decorate", "__param", "editor", "$", "editor", "__awaiter", "__decorate", "__param", "$", "MarkdownHoverParticipant", "editor", "$", "__decorate", "__param", "MarkerList", "MarkerNavigationService", "__decorate", "__param", "init_actions", "init_actions", "SeverityIcon", "__decorate", "__param", "MessageWidget", "editor", "MarkerNavigationWidget", "basename", "__decorate", "__param", "__awaiter", "MarkerController", "editor", "_a", "_b", "_c", "editor", "_a", "__awaiter", "__decorate", "__param", "$", "MarkerHoverParticipant", "message", "basename", "messageElement", "_a", "__awaiter", "_a", "_b", "_c", "init_actions", "__decorate", "__param", "WorkbenchToolBar", "_a", "_b", "_c", "_d", "_e", "init_actions", "__decorate", "__param", "InlineCompletionsHintsWidget", "editor", "_a", "_b", "_c", "model", "reader", "InlineSuggestionHintsContentWidget", "editor", "__decorate", "__param", "CustomizedMenuWorkbenchToolBar", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "__decorate", "__param", "__decorate", "__param", "ModesHoverController", "editor", "_a", "_b", "_c", "_d", "_e", "editor", "__decorate", "__param", "__awaiter", "StandaloneColorPickerController", "_a", "editor", "StandaloneColorPickerWidget", "_a", "__awaiter", "__decorate", "__param", "init_actions", "editor", "_a", "firstNonWhitespaceIndex", "j", "lenJ", "init_actions", "editor", "init_actions", "__decorate", "__param", "ContextMenuController", "editor", "actions", "editor", "_a", "CursorState", "editor", "_a", "editor", "generateUuid", "__awaiter", "size", "_a", "init_platform", "Extensions", "__awaiter", "_a", "_a", "_b", "__decorate", "__param", "__awaiter", "editor", "InlineProgressManager", "__decorate", "__param", "__awaiter", "PostEditWidget", "editor", "_a", "PostEditWidgetManager", "_b", "model", "__decorate", "__param", "__awaiter", "CopyPasteController", "editor", "_a", "_b", "_c", "_a", "__decorate", "__param", "__awaiter", "RelativePathProvider", "_a", "DefaultDropProvidersFeature", "DefaultPasteProvidersFeature", "__decorate", "__param", "editor", "_a", "init_platform", "__decorate", "__param", "__awaiter", "DropIntoEditorController", "editor", "_a", "editor", "_a", "init_model", "init_model", "editor", "len", "editor", "editor", "_a", "_a", "__decorate", "__param", "ContextScopedFindInput", "ContextScopedReplaceInput", "__decorate", "__param", "_a", "_b", "__awaiter", "_a", "_b", "foreground", "init_actions", "__decorate", "__param", "__awaiter", "editor", "CommonFindController", "_a", "FindController", "editor", "__awaiter", "__decorate", "__param", "editor", "__awaiter", "size", "_a", "_b", "h", "line", "init_model", "editor", "_a", "_b", "RangesCollector", "__decorate", "__param", "__awaiter", "FoldingController", "editor", "_a", "_b", "options", "foldingModel", "editor", "_a", "__awaiter", "editor", "__decorate", "__param", "__awaiter", "FormatOnType", "FormatOnPaste", "editor", "__decorate", "__param", "__awaiter", "model", "init_model", "editor", "d", "__decorate", "__param", "GhostTextWidget", "editor", "editor", "lines", "isBasicASCII", "containsRTL", "node", "parent", "child", "marker", "stack", "__awaiter", "providers", "maxCharCode", "__decorate", "__param", "__awaiter", "InlineCompletionsSource", "_a", "_b", "equals", "_a", "init_actions", "__awaiter", "_a", "sw", "_b", "_c", "editor", "__decorate", "__param", "name", "dirname", "CommentBasedVariableResolver", "__decorate", "__param", "id", "placeholder", "SnippetSession", "editor", "array", "__decorate", "__param", "_defaultOptions", "SnippetController2", "editor", "_a", "model", "__decorate", "__param", "__awaiter", "VersionIdChangeReason", "InlineCompletionsModel", "cursorPosition", "c", "_a", "_b", "tx", "editor", "length", "__decorate", "__param", "SuggestMemoryService", "_a", "__decorate", "__param", "WordContextKey", "_a", "__decorate", "__param", "SuggestAlternatives", "_a", "editor", "__awaiter", "column", "__awaiter", "editor", "__decorate", "__param", "__awaiter", "LineContext", "editor", "SuggestModel", "_a", "_b", "_c", "_d", "_e", "_f", "completions", "wordDistance", "_g", "model", "ctx", "editor", "init_actions", "__decorate", "__param", "StatusBarViewItem", "_a", "SuggestWidgetStatus", "__decorate", "__param", "SuggestDetailsWidget", "_a", "_b", "_a", "size", "FileKind", "__decorate", "__param", "_a", "ItemRenderer", "__decorate", "__param", "__awaiter", "editor", "_a", "_b", "size", "SuggestWidget", "_c", "_d", "detail", "__decorate", "__param", "_sticky", "SuggestController", "editor", "_a", "_b", "_c", "basename", "editor", "weight", "_a", "editor", "_a", "__decorate", "__param", "InlineCompletionsController", "editor", "_a", "_b", "init_actions", "__awaiter", "editor", "_a", "__decorate", "__param", "InlineCompletionsHoverParticipant", "_a", "$", "init_actions", "__decorate", "__param", "adjustedLineContent", "editor", "AutoIndentOnPaste", "init_model", "__awaiter", "_a", "_b", "init_actions", "__awaiter", "editor", "_a", "_b", "accessor", "__decorate", "__param", "__awaiter", "hasTriggerModifier", "InlayHintsController", "editor", "_a", "model", "_b", "noBreakWhitespace", "__awaiter", "__decorate", "__param", "__awaiter", "__asyncValues", "v", "InlayHintsHover", "editor", "_a", "_b", "_c", "_d", "import_inPlaceReplace", "editor", "lastNonWhitespaceIndex", "__decorate", "__param", "MoveLinesCommand", "init_actions", "editor", "i", "__decorate", "__param", "__awaiter", "DECORATION_CLASS_NAME", "LinkedEditingContribution", "editor", "_a", "commonPrefixLength", "commonSuffixLength", "editor", "accessor", "__awaiter", "__awaiter", "__decorate", "__param", "__awaiter", "LinkDetector", "editor", "relativePath", "decoration", "_a", "editor", "init_actions", "init_model", "__decorate", "__param", "editor", "intersection", "SelectionHighlighter", "findState", "editor", "__awaiter", "Context", "__awaiter", "ParameterHintState", "editor", "length", "first", "__decorate", "__param", "$", "ParameterHintsWidget", "editor", "Context", "_a", "__decorate", "__param", "ParameterHintsController", "editor", "_a", "editor", "weight", "Context", "init_platform", "__decorate", "__param", "RenameInputField", "_a", "_b", "_c", "_d", "__decorate", "__param", "__awaiter", "RenameController", "editor", "_a", "_b", "accessor", "__awaiter", "_a", "__decorate", "__param", "DocumentSemanticTokensFeature", "ModelSemanticColoring", "length", "__decorate", "__param", "__decorate", "__param", "ViewportSemanticTokensContribution", "editor", "init_actions", "__decorate", "__param", "__awaiter", "SmartSelectController", "editor", "_a", "ranges", "editor", "__awaiter", "init_actions", "__awaiter", "_a", "_b", "__decorate", "__param", "__awaiter", "ModelProvider", "Status", "StickyModelProvider", "status", "token", "StickyModelFromCandidateOutlineProvider", "_a", "__decorate", "__param", "editor", "length", "StickyModelFromCandidateIndentationFoldingProvider", "StickyModelFromCandidateSyntaxFoldingProvider", "__decorate", "__param", "__awaiter", "StickyLineCandidateProvider", "editor", "_a", "_b", "init_actions", "__decorate", "__param", "__awaiter", "StickyScrollController", "editor", "_a", "position", "_b", "__awaiter", "weight", "editor", "_a", "init_actions", "__decorate", "__param", "__awaiter", "InlineCompletionResults", "_a", "first", "SuggestInlineCompletions", "EditorContribution", "_a", "editor", "__decorate", "__param", "editor", "init_actions", "__decorate", "__param", "Link", "_a", "$", "EventType", "__decorate", "__param", "BannerController", "_a", "Banner", "Link", "__decorate", "__param", "__decorate", "__param", "__awaiter", "UnicodeHighlighter", "decoration", "DocumentUnicodeHighlighter", "decoration", "__decorate", "__param", "UnicodeHighlighterHoverParticipant", "editor", "__awaiter", "codePoint", "_a", "__decorate", "__param", "__awaiter", "UnusualLineTerminatorsDetector", "basename", "__decorate", "__param", "editor", "WordHighlighterContribution", "_a", "editor", "editor", "_a", "editor", "editor", "import_inspectTokens", "init_platform", "init_platform", "__decorate", "__param", "HelpQuickAccessProvider", "Extensions", "Extensions", "init_model", "_a", "editor", "editor", "_a", "_b", "init_platform", "__decorate", "__param", "StandaloneGotoLineQuickAccessProvider", "_a", "Extensions", "__decorate", "__param", "__awaiter", "AbstractGotoSymbolQuickAccessProvider", "editor", "_a", "_b", "document", "init_platform", "__decorate", "__param", "StandaloneGotoSymbolQuickAccessProvider", "_a", "Extensions", "init_platform", "_a", "_b", "__awaiter", "TriggerAction", "_a", "_b", "_c", "__decorate", "__param", "__awaiter", "AbstractCommandsQuickAccessProvider", "_a", "_b", "_c", "_d", "_e", "commandPicks", "CommandsHistory", "_a", "_b", "__decorate", "__param", "__decorate", "__param", "__awaiter", "StandaloneCommandsQuickAccessProvider", "_a", "GotoLineAction", "Extensions", "__decorate", "__param", "StandaloneReferencesController", "editor", "editor"]
}
